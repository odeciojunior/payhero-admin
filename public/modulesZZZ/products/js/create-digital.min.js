$(document).ready((function(){loadingOnScreen(),$(".page").show(),loadingOnScreenRemove(),dropifyOptions={messages:{default:"Arraste e solte uma imagem ou ",replace:"Arraste e solte uma imagem ou selecione um arquivo",remove:"Remover",error:""},error:{fileSize:"O tamanho máximo do arquivo deve ser {{ value }}.",minWidth:"A imagem deve ter largura maior que 651px.",maxWidth:"A imagem deve ter largura menor que 651px.",minHeight:"A imagem deve ter altura maior que 651px.",maxHeight:"A imagem deve ter altura menor que 651px.",fileExtension:"A imagem deve ser algum dos formatos permitidos. ({{ value }})."},tpl:{message:'<div class="dropify-message"><span class="file-icon" /> <p>{{ default }}<span style="color: #2E85EC;">selecione um arquivo</span></p></div>',clearButton:'<button type="button" class="dropify-clear o-bin-1"></button>'},imgFileExtensions:["png","jpg","jpeg","gif","bmp","webp","svg"]},$("#product_photo").dropify(dropifyOptions),$("#my-form-add-product").submit((function(e){if(e.preventDefault(),r=!0,""===$.trim($("#name").val())&&(alertCustom("error","O campo Nome é obrigatório"),r=!1,$("#name").focus()),""===$.trim($("#description").val())&&(alertCustom("error","O campo Descrição é obrigatório"),r=!1,$("#description").focus()),""===$.trim($("#digital_product_url").val())&&(alertCustom("error","Selecione o produto digital"),r=!1,$("#digital_product_url").focus()),""===$.trim($("#url_expiration_time").val())&&(alertCustom("error","Preencha o campo Tempo de expiração da url"),r=!1,$("#url_expiration_time").focus()),r){$("button[type='submit']").prop("disabled",!0),loadOnAny(".page",!1);var o=document.getElementById("my-form-add-product"),t=new FormData(o);t.append("type_enum","digital"),$.ajax({method:"POST",url:"/api/products",processData:!1,cache:!1,contentType:!1,dataType:"json",headers:{Authorization:$('meta[name="access-token"]').attr("content"),Accept:"application/json"},data:t,error:function(e){loadOnAny(".page",!0),errorAjaxResponse(e),$("button[type='submit']").prop("disabled",!1)},success:function(e){loadOnAny(".page",!0),alertCustom("success",e.message),window.location="/products"}})}var r})),$("#url_expiration_time").mask("0#"),null!=$("#digital_product_url")[0]&&$("#digital_product_url")[0].addEventListener("change",(function(){productName=this.value.split("\\")[2]||"",$("#file_return")[0].innerHTML=productName.length>25?productName.substring(0,21)+productName.substring(productName.length-4):productName}))}));
