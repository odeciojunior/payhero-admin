function ownKeys(e,a){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),n.push.apply(n,t)}return n}function _objectSpread(e){for(var a=1;a<arguments.length;a++){var n=null!=arguments[a]?arguments[a]:{};a%2?ownKeys(Object(n),!0).forEach((function(a){_defineProperty(e,a,n[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))}))}return e}function _defineProperty(e,a,n){return a in e?Object.defineProperty(e,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[a]=n,e}$(document).ready((function(){function e(){$("#scoreLineToMonth").html(""),loadingOnChart("#chart-loading"),$.ajax({method:"GET",url:"/api/dashboard/get-chart-data",dataType:"json",data:{company:$("#company").val()},headers:{Authorization:$('meta[name="access-token"]').attr("content"),Accept:"application/json"},error:function(e){loadingOnChartRemove("#chart-loading"),loadingOnScreenRemove(),errorAjaxResponse(e)},success:function(e){!function(e){var a=0;if(e.value_data.forEach((function(e,n){e&&(a+=parseInt(e))})),a>0){var n=function(e,a,n){var t=new Chartist.Line("#"+e,{labels:a,series:[n]},{lineSmooth:Chartist.Interpolation.simple({divisor:2}),showPoint:!1,showLine:!1,showArea:!0,fullWidth:!0,chartPadding:{right:50,left:20,top:30,button:20},axisX:{showGrid:!1,labelInterpolationFnc:function(e){return e}},axisY:{labelInterpolationFnc:function(e){var a=parseInt(e);return a=a>0?a/1e3+"K":"0.00"},scaleMinSpace:40},low:0,height:260});t.on("created",(function(a){var n=a.svg.querySelector("defs")||a.svg.elem("defs"),t=(a.svg.width(),a.svg.height(),n.elem("filter",{x:0,y:"-10%",id:"shadow"+e},"",!0));return t.elem("feGaussianBlur",{in:"SourceAlpha",stdDeviation:"800",result:"offsetBlur"}),t.elem("feOffset",{dx:"0",dy:"800"}),t.elem("feBlend",{in:"SourceGraphic",mode:"multiply"}),n})).on("draw",(function(a){"line"===a.type?a.element.attr({filter:"url(#shadow"+e+")"}):"point"===a.type&&new Chartist.Svg(a.element._node.parentNode).elem("line",{x1:a.x,y1:a.y,x2:a.x+.01,y2:a.y,class:"ct-point-content"}),"line"!==a.type&&"area"!=a.type||a.element.animate({d:{begin:1e3*a.index,dur:1e3,from:a.path.clone().scale(1,0).translate(0,a.chartRect.height()).stringify(),to:a.path.clone().stringify(),easing:Chartist.Svg.Easing.easeOutQuint}})})),$("#not-empty-sale").show()},t=e.label_list,o={value:e.value_data};createChart=function(){n("scoreLineToMonth",t,o)},$("#empty-sale").fadeOut(),createChart()}else $("#empty-sale").fadeIn(),$("#scoreLineToMonth").html("")}(e),loadingOnChartRemove("#chart-loading")}})}loadingOnScreen(),$.ajax({method:"GET",url:"/api/projects?select=true",dataType:"json",headers:{Authorization:$('meta[name="access-token"]').attr("content"),Accept:"application/json"},error:function(e){loadingOnScreenRemove(),errorAjaxResponse(e)},success:function(n){isEmpty(n.data)?($("#project-empty").show(),$("#project-not-empty").hide()):($("#project-empty").hide(),$("#project-not-empty").show(),$.ajax({method:"GET",url:"/api/dashboard".concat(window.location.search),dataType:"json",headers:{Authorization:$('meta[name="access-token"]').attr("content"),Accept:"appliation/json"},error:function(e){loadingOnScreenRemove(),errorAjaxResponse(e)},success:function(n){if(isEmpty(n.companies))$(".content-error").show(),$("#company-select, .page-content").hide(),loadingOnScreenRemove();else{for(var o=0;o<n.companies.length;o++)"1"==n.companies[o].company_type?$("#company").append('<option value="'+n.companies[o].id_code+'">Pessoa física</option>'):$("#company").append('<option value="'+n.companies[o].id_code+'">'+n.companies[o].fantasy_name+"</option>");$(".content-error").hide(),$("#company-select").show(),a(),e(),updatePerformance(),updateAccountHealth(),setTimeout(t,1600)}}})),loadingOnScreenRemove()}}),$("#company").on("change",(function(){a(),e()}));function a(){loadOnAnyEllipsis(".text-money, .update-text, .text-circle",!1,{styles:{container:{minHeight:"30px",width:"30px",height:"auto",margin:"auto"},loader:{width:"30px",height:"30px",borderWidth:"6px"}}}),loadingOnChart("#chart-loading"),$(".circle strong").addClass("loaded"),$.ajax({method:"POST",url:"/api/dashboard/getvalues",dataType:"json",headers:{Authorization:$('meta[name="access-token"]').attr("content"),Accept:"application/json"},data:{company:$("#company").val()},error:function(e){loadOnAnyEllipsis(".text-money, .update-text, .text-circle",!0),loadingOnScreenRemove(),errorAjaxResponse(e)},success:function(e){$(".moeda").html(e.currency),$("#pending_money").html(e.pending_balance),$("#available_money").html(e.available_balance),$("#total_money").html(e.total_balance),$("#today_money").html(e.today_balance),$("#total_sales_approved").text(e.total_sales_approved),$("#total_sales_chargeback").text(e.total_sales_chargeback);var a=onlyNumbers(e.available_balance)>0?"Disponível":"Saldo Atual";$("#title_available_money").html(a);var n="Valor incluindo o saldo bloqueado de R$ "+e.blocked_balance_total;$("#info-total-balance").attr("title",n).tooltip({placement:"bottom"}),loadOnAnyEllipsis(".text-money, .update-text, .text-circle",!0)}})}function n(){$.ajax({method:"GET",url:"/api/dashboard/verify-achievements",dataType:"json",headers:{Authorization:$('meta[name="access-token"]').attr("content"),Accept:"application/json"},error:function(e){errorAjaxResponse(e)},success:function(e){isEmpty(e.data)||(e.data.forEach((function(e,a){var n="",t="";0===e.type&&(t='\n                                    <div id="title-achievement">Você alcançou uma nova <strong>conquista!</strong></div>\n                                    <div id="name-title">'.concat(e.name,'</div>\n                                    <div id="description-achievement">').concat(e.description,'</div>\n                                    <div id="storytelling">').concat(e.storytelling,"</div>\n                            ")),1===e.type&&(n='\n                                <div id="description">Você chegou ao <strong>'.concat(e.description,'</strong></div>\n                                <div id="name">').concat(e.name,'</div>\n                                <div id="storytelling">').concat(e.storytelling,"</div>\n                            "),isEmpty(e.benefits)||(n+='\n                                    <div id="benefits">\n                                        <div id="benefits-title">Aqui está sua recompensa:</div>\n                                        <div class="d-flex justify-content-center align-items-center">\n                                            <span id="benefits-data"><span class="material-icons">done</span> '.concat(e.benefits,"</span>\n                                        </div>\n                                    </div>")));var o='\n                            <div id="modal-achievement-data-'.concat(a,'" class="modal fade modal-fade-in-scale-up show">\n                                <div id="achievement-details" class="modal-dialog modal-simple achievement-details-style">\n                                    <div class="modal-content">\n                                        <div class="modal-header flex-wrap">\n                                            <div class="w-p100">\n                                                <img id="icon" src="').concat(e.icon,'" alt="Image">\n                                            </div>\n                                        </div>\n                                        <div class="modal-body">\n\n                                            ').concat(t,"\n\n\n                                            ").concat(n,'\n\n                                            <div id="reward-check-data-').concat(a,'"\n                                                class="btn btn-primary"\n                                                 data-dismiss="modal"\n                                                 aria-label="close"\n                                                 data-target="#modal-achievement"\n                                                 data-achievement="').concat(e.achievement,'">Ok, legal!</div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        ');$("#modal-achievement-container").append(o),$("#modal-achievement-data-".concat(a)).on("shown.bs.modal",(function(){var e,n;$("#modal-achievement-data-".concat(a)).unbind("click"),e={origin:{y:605/window.innerHeight},startVelocity:60,zIndex:1700},(n=function(a,n){confetti(_objectSpread(_objectSpread(_objectSpread({},e),n),{},{particleCount:Math.floor(200*a)}))})(.25,{spread:26}),n(.2,{spread:60}),n(.35,{spread:100,decay:.91,scalar:.8,startVelocity:20}),n(.1,{spread:120,decay:.92,scalar:1.2,startVelocity:40}),n(.1,{spread:120,startVelocity:40})})),$("#modal-achievement-data-".concat(a)).on("hidden.bs.modal",(function(){$("body").removeClass("blurred"),setTimeout((function(){var e=$("[id*=modal-achievement-data-]").length-1;$("#modal-achievement-data-".concat(e)).modal("show")}),500)})),$("#reward-check-data-".concat(a)).click((function(){var e=$("#reward-check-data-".concat(a)).data("achievement");$.ajax({method:"PUT",url:"/api/dashboard/update-achievements/"+e,dataType:"json",headers:{Authorization:$('meta[name="access-token"]').attr("content"),Accept:"application/json"},error:function(e){errorAjaxResponse(e),$("#modal-achievement-data-".concat(a)).modal("hide")},success:function(){$("#modal-achievement-data-".concat(a)).modal("hide")}}),$("#modal-achievement-data-".concat(a)).modal("hide"),setTimeout((function(){$("#modal-achievement-data-".concat(a)).remove()}),500)}))})),e.data.length>0&&$("[id*=modal-achievement-data-]:last").modal("show"))}})}function t(){$.ajax({method:"GET",url:"/api/dashboard/verify-pix-onboarding",dataType:"json",headers:{Authorization:$('meta[name="access-token"]').attr("content"),Accept:"application/json"},success:function(e){if(!1===e.read){loadingOnChart("#loader-onboarding");var a=$("#modal-content-pix");a.slick({slidesToShow:1,mobileFirst:!0,infinite:!1,arrows:!1,adaptiveHeight:!0}),$(window).on("resize",(function(){loadingOnChart("#loader-onboarding"),a.slick("refresh"),setTimeout((function(){loadingOnChartRemove("#loader-onboarding")}),1e3)})),$("#modal-pix-onboarding").on("shown.bs.modal",(function(){a.slick("refresh"),$("#user-name").html(e.name),$("#modal-pix").unbind("click")})).modal("show"),setTimeout((function(){loadingOnChartRemove("#loader-onboarding")}),1e3),$(".pix-onboarding-next").click((function(){a.slick("slickNext")})),$(".pix-onboarding-previous").click((function(){a.slick("slickPrev")})),$(".pix-onboarding-later").click((function(){$.ajax({method:"PUT",url:"/api/dashboard/update-pix-onboarding/"+e.onboarding,dataType:"json",headers:{Authorization:$('meta[name="access-token"]').attr("content"),Accept:"application/json"},error:function(){$("#modal-pix-onboarding").modal("hide"),n()},success:function(){$("#modal-pix-onboarding").modal("hide"),n()}})})),$(".pix-onboarding-finish").click((function(){$.ajax({method:"PUT",url:"/api/dashboard/update-pix-onboarding/"+e.onboarding,dataType:"json",headers:{Authorization:$('meta[name="access-token"]').attr("content"),Accept:"application/json"},error:function(){$("#modal-pix-onboarding").modal("hide")},success:function(){$("#modal-pix-onboarding").modal("hide"),-1==e.accounts_url.indexOf("http")&&(e.accounts_url="//"+e.accounts_url),window.location.href=e.accounts_url}})}))}else n()}})}$("#closeWelcome").click((function(){$("#cardWelcome").slideUp("600")}))}));
