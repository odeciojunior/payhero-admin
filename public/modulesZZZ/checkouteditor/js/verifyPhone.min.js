function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,o){if(e){if("string"==typeof e)return _arrayLikeToArray(e,o);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,o):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,o){(null==o||o>e.length)&&(o=e.length);for(var n=0,t=new Array(o);n<o;n++)t[n]=e[n];return t}$((function(){$(window.location.pathname.split("/")).get(-1);function e(){o();var e=$("#checkout_editor #checkout_editor_id").val(),n=$("#checkout_editor #support_phone").masked();$.ajax({method:"POST",url:"/api/checkouteditor/sendsupportphoneverification",dataType:"json",headers:{Authorization:$('meta[name="access-token"]').attr("content"),Accept:"application/json"},data:{id:e,support_phone:n},success:function(e){alertCustom("success",e.message)},error:function(e){errorAjaxResponse(e)}})}function o(){$("#resend_code").addClass("disabled"),$("#timer").show("fast","linear"),display=document.querySelector("#timer");var e,o=59,n=setInterval((function(){e=o<10?"0"+o:o,display.textContent="Aguarde (".concat(e,")"),--o<0&&(clearInterval(n),$("#resend_code").removeClass("disabled"),$("#timer").hide("fast","linear"))}),1e3)}$("#verify_phone_open, #verified_phone_open").on("click",(function(){var e,o;$("#support_phone").val()&&(e=/^\([1-9]{2}\)\s(?:[2-8]|9[1-9])[0-9]{3}\-[0-9]{4}$/,o=$("#support_phone").val(),e.test(o))?($("#support_phone").removeClass("warning-input"),$("#modal_verify_phone").modal("show")):$("#support_phone").addClass("warning-input")})),$("#remove_phone").on("click",(function(){$("#support_phone").val(""),$("#remove_phone").hide("slow"),$("#verified_phone_open").hide("slow"),$("#verify_phone_open").show("slow"),$("#checkout_editor").submit()})),$("#modal_verify_phone").on("hidden.bs.modal",(function(){$(".code-input").val(""),$("#modal_verify_content").hide(),$("#modal_verified_content").hide()})),$("#modal_verify_phone").on("shown.bs.modal",(function(){$("#modal_verify_content").show("slow"),$("#phone_modal").empty(),$("#phone_modal").append($("#support_phone").val()),e()})),$("#verify_phone").on("click",(function(e){e.preventDefault(),function(){loadOnAny("#modal_verify_content",!1,{styles:{container:{minHeight:"350px",minWidth:"600px"}}});var e=$("#checkout_editor #checkout_editor_id").val(),n=_toConsumableArray(document.getElementsByName("verify-phone-code")).filter((function(e){return e.name})).map((function(e){return e.value})).join("");$.ajax({method:"POST",url:"/api/checkouteditor/verifysupportphone",dataType:"json",headers:{Authorization:$('meta[name="access-token"]').attr("content"),Accept:"application/json"},data:{id:e,verification_code:n},success:function(e){alertCustom("success",e.message),$("#verify_phone_open").hide(),$("#verified_phone_open").show(),$("#remove_phone").show(),$("#modal_verify_content").hide(),loadOnAny("#modal_verified_content",!0)},error:function(e){o(),$(".code-input").addClass("warning-input"),$(".verify-error").show("fast","linear"),loadOnAny("#modal_verify_content",!0)}})}()})),$("#resend_code").on("click",(function(){$(this).hasClass("disabled")||e()}))}));
