var currentPage=null,_updateList=null,statusArray={1:"success",2:"pendente",3:"danger",4:"danger",6:"primary",7:"danger",10:"dark",20:"primary",21:"primary"},statusTranslated={10:"BlackList",21:"Cancelado Antifraude"};$(document).ready((function(){$("#filtros").on("click",(function(){$("#div_filtros").is(":visible")?$("#div").slideUp():$("#div").slideDown()})),$("#bt_filtro").on("click",(function(t){t.preventDefault(),_updateList()}));moment().subtract(30,"days").format("YYYY-MM-DD"),moment().format("YYYY-MM-DD");function t(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a={project:$("#projeto").val(),payment_method:$("#forma").val(),date_range:$("#date_range").val(),status:$("#status").val(),transaction:$("#transaction").val().replace("#",""),customer:$("#customer_name").val()};if(t){var e="";for(var n in a)e+="&"+n+"="+a[n];return encodeURI(e)}return a}$("#date_range").daterangepicker({startDate:moment().subtract(30,"days"),endDate:moment(),opens:"center",maxDate:moment().endOf("day"),alwaysShowCalendar:!0,showCustomRangeLabel:"Customizado",autoUpdateInput:!0,locale:{locale:"pt-br",format:"DD/MM/YYYY",applyLabel:"Aplicar",cancelLabel:"Limpar",fromLabel:"De",toLabel:"Até",customRangeLabel:"Customizado",weekLabel:"W",daysOfWeek:["Dom","Seg","Ter","Qua","Qui","Sex","Sab"],monthNames:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],firstDay:0},ranges:{Hoje:[moment(),moment()],Ontem:[moment().subtract(1,"days"),moment().subtract(1,"days")],"Últimos 7 dias":[moment().subtract(6,"days"),moment()],"Últimos 30 dias":[moment().subtract(29,"days"),moment()],"Este mês":[moment().startOf("month"),moment().endOf("month")],"Mês passado":[moment().subtract(1,"month").startOf("month"),moment().subtract(1,"month").endOf("month")],"Vitalício":[moment("2018-01-01 00:00:00"),moment()]}},(function(t,a){t.format("YYYY-MM-DD"),a.format("YYYY-MM-DD")})),loadingOnScreen(),$.ajax({method:"GET",url:"api/projects?select=true",dataType:"json",headers:{Authorization:$('meta[name="access-token"]').attr("content"),Accept:"application/json"},error:function(t){loadingOnScreenRemove(),errorAjaxResponse(t)},success:function(t){isEmpty(t.data)?($("#project-empty").show(),$("#project-not-empty").hide(),$("#text-info").hide()):($("#project-empty").hide(),$("#project-not-empty").show(),$("#text-info").show(),$.each(t.data,(function(t,a){$("#projeto").append($("<option>",{value:a.id,text:a.name}))})),_updateList()),loadingOnScreenRemove()}}),_updateList=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;currentPage=a,loadOnTable("#dados_tabela","#tabela_vendas"),a=null==a?"/api/antifraud?"+t(!0).substr(1):"/api/antifraud"+a+t(!0),$("#pagination-sales-atifraud-blacklist").hide(),$.ajax({method:"GET",url:a,dataType:"json",headers:{Authorization:$('meta[name="access-token"]').attr("content"),Accept:"application/json"},error:function(t){errorAjaxResponse(t)},success:function(t){$("#dados_tabela").html(""),$("#tabela_vendas").addClass("table-striped");if("BlackList"==statusTranslated[$("#status").val()]?($(".blacklist").show(),"block"):($(".blacklist").hide(),"none"),isEmpty(t.data))$("#dados_tabela").html("<tr class='text-center'><td colspan='10' style='height: 70px;vertical-align: middle'> Nenhuma venda encontrada</td></tr>");else{var a="";$.each(t.data,(function(t,e){a+="\n                            <tr class='".concat(""," text-center'>\n                                <td class='display-sm-none display-m-none display-lg-none text-center'>\n                                    ").concat(e.sale_code,"\n                                </td>\n                                <td>").concat(e.project,"</td>\n                                <td>").concat(e.product,"</td>\n                                <td class='display-sm-one display-m-none display-lg-none'>").concat(e.customer,"</td>\n\n                                <td class='display-sm-one display-m-one'>").concat(e.start_date,"</td>\n                                <td>\n                                    <a role='button' class='detalhes-black-antifraud pointer' sale='").concat(e.sale_code,'\'>\n                                        <span class="o-eye-1"></span>\n                                    </a>\n                                </td>\n                            </tr>\n                        ')})),$("#dados_tabela").append(a),pagination(t,"sales-atifraud-blacklist",_updateList),$("#pagination-sales-atifraud-blacklist").show(),$("#date").val(moment(new Date).add(3,"days").format("YYYY-MM-DD")),$("#date").attr("min",moment(new Date).format("YYYY-MM-DD"))}}})},$(document).on("keypress",(function(t){13==t.keyCode&&_updateList()}))}));
