$(document).ready((function(){var t={onKeyPress:function(t,e,a,n){var o=["000.000.000-000","00.000.000/0000-00"],s=t.length>14?o[1]:o[0];$("#cnpj").mask(s,n)}};$("#cnpj").mask("000.000.000-000",t),$("#company_update_form").on("submit",(function(t){t.preventDefault();var e=new FormData(document.getElementById("company_update_form"));loadingOnScreen(),$.ajax({method:"POST",url:$("#company_update_form").attr("action"),headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},processData:!1,contentType:!1,cache:!1,data:e,error:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){if(loadingOnScreenRemove(),"422"==t.status)for(error in t.responseJSON.errors)alertCustom("error",String(t.responseJSON.errors[error]))})),success:function(t){alertCustom("success",t.message),loadingOnScreenRemove()}})})),$("#company_bank_update_form").on("submit",(function(t){t.preventDefault();var e=new FormData(document.getElementById("company_bank_update_form"));loadingOnScreen(),$.ajax({method:"POST",url:$("#company_bank_update_form").attr("action"),headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},processData:!1,contentType:!1,cache:!1,data:e,error:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){if(loadingOnScreenRemove(),"422"==t.status)for(error in t.responseJSON.errors)alertCustom("error",String(t.responseJSON.errors[error]))})),success:function(t){loadingOnScreenRemove(),alertCustom("success",t.message)}})})),$(document).on("blur","#routing_number",(function(){$.ajax({method:"GET",url:"https://www.routingnumbers.info/api/data.json?rn="+$("#routing_number").val(),success:function(t){"OK"==t.message?$("#bank").val(t.customer_name):(alertCustom("error",t.message),$("#routing_number").focus())}})})),$("#brazil_zip_code").on("input",(function(){var t=$("#brazil_zip_code").val().replace(/[^0-9]/g,"");if(8!=t.length)return!1;$.ajax({url:"https://viacep.com.br/ws/"+t+"/json/",type:"GET",cache:!1,async:!1,success:function(t){t.localidade&&$("#city").val(unescape(t.localidade)),t.bairro&&$("#neighborhood").val(unescape(t.bairro)),t.uf&&$("#state").val(unescape(t.uf)),t.logradouro&&$("#street").val(unescape(t.logradouro))}})}))})),Dropzone.options.dropzoneDocuments={paramName:"file",maxFilesize:2,acceptedFiles:".jpg,.jpeg,.doc,.pdf,.png",accept:function(t,e){var a=this;swal({title:"Qual é o tipo do documento?",type:"warning",input:"select",inputPlaceholder:"Selecione o documento",inputOptions:{1:"Extrato bancário",2:"Comprovante de residência",3:"Contrato social"},showCancelButton:!0,confirmButtonColor:"#3085D6",cancelButtonColor:"#DD3333",confirmButtonText:"Enviar"}).then((function(n){n.value?($("#document_type").val(n.value),e()):a.removeFile(t)})).catch((function(e){a.removeFile(t)}))},success:function(t,e){3==e.data.bank_document_translate.status?$("#td_bank_status").html('<span class="badge badge-aprovado">'+e.data.bank_document_translate.message+"</span>"):2==e.data.bank_document_translate.status&&$("#td_bank_status").html('<span class="badge badge-pendente">'+e.data.bank_document_translate.message+"</span>"),3==e.data.address_document_translate.status?$("#td_address_status").html('<span class="badge badge-aprovado">'+e.data.address_document_translate.message+"</span>"):2==e.data.address_document_translate.status&&$("#td_address_status").html('<span class="badge badge-pendente">'+e.data.address_document_translate.message+"</span>"),3==e.data.contract_document_translate.status?$("#td_contract_status").html('<span class="badge badge-aprovado">'+e.data.contract_document_translate.message+"</span>"):2==e.data.contract_document_translate.status&&$("#td_contract_status").html('<span class="badge badge-pendente">'+e.data.contract_document_translate.message+"</span>"),swal({position:"bottom",type:"success",toast:"true",title:e.message,showConfirmButton:!1,timer:6e3})},error:function(t,e){e.search("Max filesize")>0?e="O documento é muito grande. Tamanho maximo: 2mb.":e.search("upload files of this type")>0&&(e="O documento deve estar em um dos seguintes formatos: jpeg, jpg, png."),swal({position:"bottom",type:"error",toast:"true",title:e,showConfirmButton:!1,timer:6e3}),this.removeFile(t)}};
