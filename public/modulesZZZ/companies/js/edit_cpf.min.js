function _createForOfIteratorHelper(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,r=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return r=e.done,e},e:function(e){s=!0,c=e},f:function(){try{r||null==a.return||a.return()}finally{if(s)throw c}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var companyStatus={pending:"badge badge-primary",analyzing:"badge badge-pending",approved:"badge badge-success",refused:"badge badge-danger"},companyStatusTranslated={pending:"Pendente",analyzing:"Em análise",approved:"Aprovado",refused:"Recusado"},initForm=null,companyIdCode=null,gatewayTax={"plan-2":6.9,"plan-15":6.5,"plan-30":5.9},userIdCode="";$(document).ready((function(){(initForm=function(){var e=extractIdFromPathName();$.ajax({method:"GET",url:"/api/companies/"+e,dataType:"json",headers:{Authorization:$('meta[name="access-token"]').attr("content"),Accept:"application/json"},error:function(e){errorAjaxResponse(e)},success:function(t){"usa"===t.company.country?($("#rounting_number").val(t.company.bank).trigger("input"),$("#account_routing_number").val(t.company.account),$("#company_update_bank_form").hide(),$("#company_bank_routing_number_form").show()):($.each(t.banks,(function(e,t){$("#bank").append('<option value="'.concat(t.code,'">').concat(t.code," - ").concat(t.name,"</option>"))})),$("#bank").val(t.company.bank),$("#agency").val(t.company.agency),$("#agency_digit").val(t.company.agency_digit),$("#account").val(t.company.account),$("#account_digit").val(t.company.account_digit),$("#account_type").val(t.company.account_type)),userIdCode=t.company.user_code;var a=t.company;companyIsApproved(a)&&(companyIdCode=a.id_code,$("#tax-payment").val(a.gateway_tax+"%"),$(".select-gateway-tax").html(""),$(".select-gateway-tax").append('\n                        <select id="gateway-release-payment" class="form-control">\n                            <option value="plan-2" '.concat(6.9==a.gateway_tax?"selected":"",'>Após postagem de rastreio válida (taxa de 6.9%)</option>\n                            <option value="plan-15" ').concat(6.5==a.gateway_tax?"selected":"",'>15 dias (taxa de 6.5%)</option>\n                            <option value="plan-30" ').concat(5.9==a.gateway_tax?"selected":"",">30 dias (taxa de 5.9%)</option>\n                        </select>\n                    ")),$(".gateway-tax").removeAttr("hidden"),$("#nav_tax_gateways").removeAttr("hidden")),"brazil"===t.company.country?$("#agency").attr("maxlength","4"):$("#agency").attr("maxlength","20"),$("#td-status-document-person-fisic").html(""),$("#td-status-document-person-fisic").append("<span class='badge ".concat(companyStatus[t.company.document_status],"'>").concat(companyStatusTranslated[t.company.document_status],"</span>")),"pending"===t.company.document_status||"refused"===t.company.document_status?($("#text-alert-documents-cpf").show(),$(".details-document-person-fisic").show()):"analyzing"!==t.company.document_status&&"approved"!==t.company.document_status||($("#text-alert-documents-cpf").hide(),$(".details-document-person-fisic").hide()),$(".details-document-person-fisic").on("click",(function(){Dropzone.forElement("#dropzoneDocumentsFisicPerson").removeAllFiles(!0),function(e){loadOnTable("#table-body-documents-person-fisic","#table-documents-person-fisic"),$.ajax({method:"POST",url:"/api/companies/".concat(e,"/getdocuments"),data:{document_type:$("#document_type").val()},dataType:"json",headers:{Authorization:$('meta[name="access-token"]').attr("content"),Accept:"application/json"},error:function(e){errorAjaxResponse(e),$("#loaderLine").remove()},success:function(t){$("#loaderLine").remove(),function(e){$("#loaderLine").remove();var t="";0==e.length?$("#table-body-documents-person-fisic").append('<tr><td class="text-center" colspan="4">Nenhum documento enviado</td></tr>'):($("#document-person-fisic-refused-motived").html(""),$("#table-body-documents-person-fisic").html(""),$.each(e,(function(e,a){t="<tr>\n                        <td class='text-center'>".concat(a.date,"</td>\n                        <td class='text-center' style='cursor: pointer;'>\n                            <span class='badge ").concat(companyStatus[a.status],"'>\n                                    ").concat(companyStatusTranslated[a.status],"</td>\n                               </span>\n                        </td>"),""!=a.refused_reason&&null!=a.refused_reason?t+="\n                                <td class='text-center' style='color:red;'>".concat(a.refused_reason,"</td>\n                             "):t+="\n                                <td class='text-center' style='color:red;'></td>\n                             ",t+="<td class='text-center'>\n                            <a href='".concat(a.document_url,"' target='_blank' role='button' class='detalhes_document'><span class=\"o-eye-1\"></span></a>\n                        </td>\n\n                    </tr>"),$("#table-body-documents-person-fisic").append(t)})))}(t.data),$("#modal-document-person-fisic").modal("show"),$("#company_id").val(e)}})}(e)})),t.company.has_project&&($("#active_flag").attr("disabled",!0),$("#active_flag").css("cursor","not-allowed"),$(".switch").css("cursor","not-allowed"),$(".slider").css("cursor","not-allowed"),$(".switch").css("opacity","0.5")),$("#active_flag").val(t.company.active_flag),t.company.active_flag?$("#active_flag").attr("checked","checked"):$("#active_flag").attr("checked",!1),$("#gateway-release-payment").on("change",(function(){$("#tax-payment").val(gatewayTax[$(this).val()]+"%")})),$("#tab_tax_gateways  #transaction-tax").html(a.transaction_rate).attr("disabled","disabled"),$("#tab_tax_gateways #installment-tax").html(a.installment_tax).attr("disabled","disabled")}})})(),$("#update_payment_tax_cnpj").unbind("click"),$("#update_payment_tax_cnpj").on("click",(function(){loadingOnScreen(),$.ajax({method:"POST",url:"/api/companies/".concat(companyIdCode,"/updatetax"),dataType:"json",headers:{Authorization:$('meta[name="access-token"]').attr("content"),Accept:"application/json"},data:{gateway_release_payment:$("#gateway-release-payment").val()},error:function(e){loadingOnScreenRemove(),errorAjaxResponse(e)},success:function(e){loadingOnScreenRemove(),alertCustom("success",e.message),$("#tax-payment").val(e.data.new_gateway_tax+"%")}})})),$("#update_bank_data").on("click",(function(e){e.preventDefault();var t=new FormData(document.getElementById("company_update_bank_form"));loadingOnScreen();var a=extractIdFromPathName();$("#active_flag").is(":checked")||t.append("active_flag","0"),$.ajax({method:"POST",url:"/api/companies/"+a,headers:{Authorization:$('meta[name="access-token"]').attr("content"),Accept:"application/json"},processData:!1,contentType:!1,cache:!1,data:t,error:function(e){loadingOnScreenRemove(),errorAjaxResponse(e)},success:function(e){loadingOnScreenRemove(),initForm(),alertCustom("success",e.message)}})})),$(".check").on("change",(function(){$(this).is(":checked")?$(this).val(1):$(this).val(0)})),$("#agency").on("input",(function(){$(this).val($(this).val().replace(/[^a-z0-9]/gi,""))})),$("#account").on("input",(function(){$(this).val($(this).val().replace(/[^a-z0-9]/gi,""))}))})),Dropzone.autoDiscover=!1;var myDropzone=new Dropzone("#dropzoneDocumentsFisicPerson",{headers:{Authorization:$('meta[name="access-token"]').attr("content"),Accept:"application/json"},paramName:"file",maxFilesize:2,url:"/api/companies/uploaddocuments",acceptedFiles:".jpg,.jpeg,.doc,.pdf,.png",previewsContainer:".dropzone-previews",success:function(e,t){if(alertCustom("success",t.message),e.previewElement)return e.previewElement.classList.add("dz-success")},error:function(e,t){t.search("Max filesize")>0?t="O documento é muito grande. Tamanho maximo: 2mb.":t.search("upload files of this type")>0&&(t="O documento deve estar em um dos seguintes formatos: jpeg, jpg, png."),errorAjaxResponse(t),myDropzone.removeFile(e)},complete:function(){loadOnTable("#table-body-documents-person-fisic","#table-documents-person-fisic");var e=extractIdFromPathName();$.ajax({method:"POST",url:"/api/companies/".concat(e,"/getdocuments"),data:{document_type:document.querySelector("#document_type").value},dataType:"json",headers:{Authorization:$('meta[name="access-token"]').attr("content"),Accept:"application/json"},error:function(e){errorAjaxResponse(e),$("#loaderLine").remove()},success:function(e){!function(e){document.querySelector("#loaderLine").remove();var t="";if(0==e.length)document.querySelector("#table-body-documents-person-fisic").innerHTML="<span>Nenhum documento enviado</span>";else{document.querySelector("#table-body-documents-person-fisic").innerHTML="",document.querySelector("#document-person-fisic-refused-motived").innerHTML="";var a,n=_createForOfIteratorHelper(e);try{for(n.s();!(a=n.n()).done;){var o=a.value;t+="<tr>\n                        <td class='text-center'>".concat(o.date,"</td>\n                        <td class='text-center' style='cursor: pointer;'>\n                            <span class='badge ").concat(companyStatus[o.status],"'>\n                                    ").concat(companyStatusTranslated[o.status],"\n                               </span>\n                        </td>"),""!=o.refused_reason&&null!=o.refused_reason?t+="\n                                <td class='text-center' style='color:red;'>".concat(o.refused_reason,"</td>\n                             "):t+="\n                                <td class='text-center' style='color:red;'></td>\n                             ",t+="<td class='text-center'>\n                            <a href='".concat(o.document_url,"' target='_blank' role='button' class='detalhes_document'>\n                            <span class=\"o-eye-1\"></span></a>\n                        </td>\n\n                    </tr>")}}catch(e){n.e(e)}finally{n.f()}document.querySelector("#table-body-documents-person-fisic").innerHTML=t}}(e.data),initForm()}}),ajaxVerifyDocumentPending()}});
