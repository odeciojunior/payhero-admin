var companyStatus={pending:"badge badge-primary",analyzing:"badge badge-pending",approved:"badge badge-success",refused:"badge badge-danger"},companyStatusTranslated={pending:"Pendente",analyzing:"Em an치lise",approved:"Aprovado",refused:"Recusado"},captureTransaction={1:'<i class="icon wb-check" aria-hidden="true" style="color:green; font-size:20px"></i>',0:'<i class="icon wb-close"  aria-hidden="true" style="color:red; font-size:20px"></i>'},captureTransactionBadge={0:"badge badge-danger",1:"badge badge-success"},companyType={1:"physical person",2:"juridical person"};$(document).ready((function(){function a(a){return"Aprovado"===companyStatusTranslated[a.contract_document_status]&&"Aprovado"===companyStatusTranslated[a.address_document_status]&&"Aprovado"===companyStatusTranslated[a.bank_document_status]?"approved":"Pendente"===companyStatusTranslated[a.contract_document_status]||"Pendente"===companyStatusTranslated[a.address_document_status]||"Pendente"===companyStatusTranslated[a.bank_document_status]?"pending":"Recusado"===companyStatusTranslated[a.contract_document_status]||"Recusado"===companyStatusTranslated[a.address_document_status]||"Recusado"===companyStatusTranslated[a.bank_document_status]?"refused":"Em an치lise"===companyStatusTranslated[a.contract_document_status]||"Em an치lise"===companyStatusTranslated[a.address_document_status]||"Em an치lise"===companyStatusTranslated[a.bank_document_status]?"analyzing":void 0}!function t(e){loadOnTable("#companies_table_data","#companies_table"),$.ajax({method:"GET",url:"/api/companies?page="+e,dataType:"json",headers:{Authorization:$('meta[name="access-token"]').attr("content"),Accept:"application/json"},error:function(a){errorAjaxResponse(a)},success:function(n){if($("#companies_table_data").html(""),n.data.length<1)return $("#companies_table_data").html("<tr class='text-center'><td colspan='11' style='height: 70px;vertical-align: middle'> Nenhuma empresa encontrada</td></tr>"),!1;$.each(n.data,(function(t,e){dados="\n                        <tr data-id='".concat(e.id_code,'\' class="text-center">\n                            <td>').concat(e.fantasy_name,"</td>\n                            <td>\n                    "),"physical person"===companyType[e.type]?"Recusado"==companyStatusTranslated[e.bank_document_status]||"Aprovado"==companyStatusTranslated[e.bank_document_status]?dados+="<span class='badge ".concat(companyStatus[e.bank_document_status],"'>").concat(companyStatusTranslated[e.bank_document_status],"</span>"):dados+="<span class='badge ".concat(companyStatus.analyzing,"'>").concat(companyStatusTranslated.analyzing,"</span>"):"Recusado"==companyStatusTranslated[a(e)]||"Aprovado"==companyStatusTranslated[a(e)]?dados+="<span class='badge ".concat(companyStatus[a(e)],"'>").concat(companyStatusTranslated[a(e)],"</span>"):dados+="<span class='badge ".concat(companyStatus.analyzing,"'>").concat(companyStatusTranslated.analyzing,"</span>"),dados+="\n                            </td>\n                                <td><a title='Editar' href=\"/companies/".concat(e.id_code,"/edit?type=").concat(e.type,"\" class='edit-company' data-company='").concat(e.id_code,"' role='button'><span class='o-edit-1'></span></a></td>\n                                <td><a title='Excluir' class='pointer delete-company' company='").concat(e.id_code,"' data-toggle='modal' data-target='#modal-delete' role='button'><span class='o-bin-1'></span></a></td>\n                            </tr>\n                        "),$("#companies_table").addClass("table-striped"),$("#companies_table_data").append(dados)})),Sortable.create(document.getElementById("companies_table_data"),{onEnd:function(a){var t=[],e=$("#companies_table_data");$(e).find("tr").each((function(a,e){t.push($(e).data("id"))})),$.ajax({method:"POST",url:"/api/companies/updateorder",dataType:"json",data:{order:t},headers:{Authorization:$('meta[name="access-token"]').attr("content"),Accept:"application/json"},error:function(a){loadingOnScreenRemove(),errorAjaxResponse(a)},success:function(a){loadingOnScreenRemove(),alertCustom("success",a.message)}})}}),$(".delete-company").unbind("click"),$(".delete-company").on("click",(function(a){a.preventDefault();var n=$(this).attr("company");$("#bt-delete").unbind("click"),$("#bt-delete").on("click",(function(){$("#close-modal-delete").click(),loadingOnScreen(),$.ajax({method:"DELETE",url:"/api/companies/"+n,dataType:"json",headers:{Authorization:$('meta[name="access-token"]').attr("content"),Accept:"application/json"},error:function(a){loadingOnScreenRemove(),errorAjaxResponse(a)},success:function(a){loadingOnScreenRemove(),alertCustom("success",a.message),t(e)}})}))}))}})}(1)}));
