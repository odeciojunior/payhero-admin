"use strict";function _createForOfIteratorHelper(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var l=0,a=function(){};return{s:a,n:function(){return l>=e.length?{done:!0}:{done:!1,value:e[l++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){i=!0,o=e},f:function(){try{c||null==n.return||n.return()}finally{if(i)throw o}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,l=new Array(t);n<t;n++)l[n]=e[n];return l}$.fn.select3=function(e){var t,n,l,a,o,c,i,r,s,u,d,p,h,v,f,g=$(this),y=g.get(0).outerHTML,m={placeholder:(null==e?void 0:e.placeholder)||"",multiselect:(null==e?void 0:e.multiselect)||!1,language:{noResults:(null==e||null===(t=e.language)||void 0===t?void 0:t.noResults)||"Nenhum resultado encontrado",searching:(null==e||null===(n=e.language)||void 0===n?void 0:n.searching)||"Procurando...",loadingMore:(null==e||null===(l=e.language)||void 0===l?void 0:l.loadingMore)||"Carregando mais resultados...",uncheckAll:(null==e||null===(a=e.language)||void 0===a?void 0:a.uncheckAll)||"Desmarcar todos",apply:(null==e||null===(o=e.language)||void 0===o?void 0:o.apply)||"Aplicar"},ajax:(null==e?void 0:e.ajax)||!1,onSelect:(null==e?void 0:e.onSelect)||!1,onMultipleSelect:(null==e?void 0:e.onMultipleSelect)||!1};m.multiselect&&g.prop("multiple",!0);var b=function(){i.html(""),d.hide();var e=0;g.children("option").each((function(){var t=$(this),n=t.text(),l=r.val().toLowerCase(),a=t.val(),o=t.is(":selected");if(o&&e++,!l||n.toLowerCase().includes(l)){var c='<div class="select3-option '.concat(m.multiselect?"multiselect":""," ").concat(o?"active":"",'"\n                                  data-value="').concat(a,'" >\n                                  ').concat(m.multiselect?'<span class="select3-checkbox"></span>':"",'\n                                  <span class="select3-option-text">').concat(n,"</span>\n                                </div>");i.append(c)}i.children().length||d.show(),m.multiselect&&e&&s.find(".select3-uncheck").show().text("".concat(m.language.uncheckAll," (").concat(e,")"))}))},x=function e(){h&&f&&(1===v?(u.show(),i.html("")):p.show(),$.ajax({url:m.ajax.url,method:m.ajax.method,dataType:m.ajax.dataType,headers:m.ajax.headers,delay:m.ajax.delay,data:m.ajax.data({term:r.val(),page:v}),error:function(e){console.log(e),i.show(),u.hide(),p.hide()},success:function(t){setTimeout((function(){var n=m.ajax.processResults(t),l=n.results,a=n.pagination;if(f=!!r.val()||a.more,l.length){var o,c=_createForOfIteratorHelper(l);try{for(c.s();!(o=c.n()).done;){var i=o.value;g.children('option[value="'.concat(i.id,'"]')).length||g.append('<option value="'.concat(i.id,'">').concat(i.text,"</option>"))}}catch(e){c.e(e)}finally{c.f()}}g.children().length<=5&&f&&(v++,e()),u.hide(),p.hide(),b()}),m.ajax.delay)}}))};return g.init.prototype.setup=function(){c=g.wrap('<div class="select3-container"></div>').parent();var e='<label class="select3-title">'.concat(m.placeholder,'</label>\n              <input class="select3-search" type="text">\n              <div class="select3-searching" style="display:none;">').concat(m.language.searching,'</div>\n              <div class="select3-options-container"></div>\n              <div class="select3-empty" style="display:none;">').concat(m.language.noResults,'</div>\n              <div class="select3-loading" style="display:none;">').concat(m.language.loadingMore,"</div>");return m.multiselect&&(e+='<div class="select3-multi-controls">\n                <button class="select3-uncheck">'.concat(m.language.uncheckAll,'</button>\n                <button class="select3-apply">').concat(m.language.apply,"</button>\n              </div>")),c.append(e),(i=c.find(".select3-options-container")).unbind("scroll").bind("scroll",(function(){this.offsetHeight+this.scrollTop>=this.scrollHeight&&(v++,x())})),(s=c.find(".select3-multi-controls")).find(".select3-uncheck").on("click",(function(){g.val([]),$(this).hide(),b()})),s.find(".select3-apply").on("click",(function(){m.onSelect&&m.onSelect()})),c.on("keyup",".select3-search",(function(){f?(v=1,x()):b()})),c.on("click",".select3-option",(function(){if(m.multiselect){$(this).toggleClass("active");var e=$(this).data("value"),t=g.val(),n=t.indexOf(e);-1===n?t.push(e):t.splice(n,1),g.val(t);var l=t.length;l?s.find(".select3-uncheck").show().text("".concat(m.language.uncheckAll," (").concat(l,")")):s.find(".select3-uncheck").hide()}else c.find(".select3-option").removeClass("active"),$(this).addClass("active"),g.val($(this).data("value")),m.onSelect&&m.onSelect();g.trigger("change")})),r=c.find(".select3-search"),u=c.find(".select3-searching"),d=c.find(".select3-empty"),p=c.find(".select3-loading"),h=!!m.ajax,v=1,f=!0,r.val(""),h?x():b(),g},g.init.prototype.destroy=function(){return g=$(y),c.replaceWith(g),g},g.init.prototype.clear=function(){return $(this).destroy().setup()},g.setup()};
