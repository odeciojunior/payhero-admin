$(document).ready((function(){loadingOnScreen(),$.ajax({url:"/api/projects/create",dataType:"json",headers:{Authorization:$('meta[name="access-token"]').attr("content"),Accept:"application/json"},error:function(e){0==e.responseJSON.account_is_approved&&($("#card-project").hide(),$("#empty-companies-error").show(),$(".content-error").show()),$(".page").show(),loadingOnScreenRemove()},success:function(e){if(isEmpty(e))$("#card-project").hide(),$(".content-error").show();else{var o=0;$.each(e,(function(e,a){var t="";o+=1,"physical person"==a.company_type?t="approved"!=a.user_address_document_status||"approved"!=a.user_personal_document_status?"<option value=".concat(a.id," ").concat(0==a.active_flag?"disabled":""," disabled>").concat(a.name,"</option>"):"<option value=".concat(a.id," ").concat(0==a.active_flag?"disabled":"",">").concat(a.name,"</option>"):"juridical person"==a.company_type&&(t="approved"!=a.company_document_status||"approved"!=a.user_address_document_status||"approved"!=a.user_personal_document_status?"<option value=".concat(a.id," ").concat(0==a.active_flag?"disabled":""," disabled>").concat(a.name,"</option>"):"<option value=".concat(a.id," ").concat(0==a.active_flag?"disabled":"",">").concat(a.name,"</option>")),$("#company").append(t)})),0==o?($(".page-content").hide(),$("#empty-companies-error").show()):($(".page-content").show(),$("#empty-companies-error").hide())}$(".page").show(),loadingOnScreenRemove()}});var e=$("#btn-save");e.on("click",(function(){if(0===$("#name").val().length?(alertCustom("error","É obrigatório preencher o campo Nome!"),1):0===$("#company option:selected").val().length&&(alertCustom("error","É obrigatório selecionar uma empresa!"),1))return!1;e.prop("disabled",!0),loadingOnScreen();var o=new FormData(document.querySelector("#form-create-project"));return $.ajax({method:"post",url:"/api/projects",dataType:"json",headers:{Authorization:$('meta[name="access-token"]').attr("content"),Accept:"application/json"},data:o,processData:!1,contentType:!1,cache:!1,error:function(o){loadingOnScreenRemove(),errorAjaxResponse(o),e.prop("disabled",!1)},success:function(e){loadingOnScreenRemove(),alertCustom("success","Loja salvo com sucesso!"),window.location="/projects"}}),!1})),$("#product_photo").on("click",(function(){$("#product-photo").click()})),$("#product_photo").dropify({messages:{default:"Arraste e solte uma imagem ou ",replace:"Arraste e solte uma imagem ou selecione um arquivo",remove:"Remover",error:""},error:{fileSize:"O tamanho máximo do arquivo deve ser {{ value }}.",minWidth:"A imagem deve ter largura maior que 651px.",maxWidth:"A imagem deve ter largura menor que 651px.",minHeight:"A imagem deve ter altura maior que 651px.",maxHeight:"A imagem deve ter altura menor que 651px.",fileExtension:"A imagem deve ser algum dos formatos permitidos. ({{ value }})."},tpl:{message:'<div class="dropify-message"><span class="file-icon" /> <p>{{ default }}<span style="color: #2E85EC;">selecione um arquivo</span></p></div>',clearButton:'<button type="button" class="dropify-clear o-bin-1"></button>'},imgFileExtensions:["png","jpg","jpeg","gif","bmp","webp","svg"]})}));
