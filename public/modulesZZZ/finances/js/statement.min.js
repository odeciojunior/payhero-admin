function getRequestTime(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e="";return isEmpty(a.date_request)||(e='<div class="d-block d-md-none"> Solicitado em  </div>\n                        <div class="bold-mobile"> '.concat(a.date_request," </div>")),isEmpty(a.date_request_time)||(e+='<small style="color: #9E9E9E; font-size: 11px"> ás '.concat(a.date_request_time.replace(":","h")," </small>")),e}function getReleaseTime(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e="";return isEmpty(a.date_release)||(e='<div class="d-block d-md-none"> Liberado em  </div>\n                        <div class="bold-mobile"> '.concat(a.date_release," </div>")),isEmpty(a.date_release_time)||(e+='<small style="color: #9E9E9E; font-size: 11px"> ás '.concat(a.date_release_time.replace(":","h")," </small>")),e}window.loadStatementTable=function(){"w7YL9jZD6gp4qmv"==window.gatewayCode?updateAccountStatementData():updateTransfersTable()},window.updateTransfersTable=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;$("#table-transfers-body").html(""),loadOnTable("#table-transfers-body","#transfersTable"),a=null==a?"/api/transfers":"/api/transfers"+a;var e={company_id:$("#extract_company_select option:selected").val(),gateway_id:window.gatewayCode,date_type:$("#date_type").val(),date_range:$("#date_range").val(),reason:$("#reason").val(),transaction:$("#transaction").val(),type:$("#type").val(),value:$("#transaction-value").val()};function t(a){$("#pagination-transfers").html("");for($("#pagination-transfers").append("<button id='primeira_pagina' class='btn nav-btn'>1</button>"),"1"==a.meta.current_page&&($("#primeira_pagina").attr("disabled",!0),$("#primeira_pagina").addClass("nav-btn"),$("#primeira_pagina").addClass("active")),$("#primeira_pagina").unbind("click"),$("#primeira_pagina").on("click",(function(){updateTransfersTable("?page=1")})),x=3;x>0;x--)a.meta.current_page-x<=1||($("#pagination-transfers").append("<button id='pagina_"+(a.meta.current_page-x)+"' class='btn nav-btn'>"+(a.meta.current_page-x)+"</button>"),$("#pagina_"+(a.meta.current_page-x)).on("click",(function(){updateTransfersTable("?page="+$(this).html())})));if(1!=a.meta.current_page&&a.meta.current_page!=a.meta.last_page){var e="<button id='pagina_atual' class='btn nav-btn active'>"+a.meta.current_page+"</button>";$("#pagination-transfers").append(e),$("#pagina_atual").attr("disabled",!0).addClass("nav-btn").addClass("active")}for(x=1;x<4;x++)a.meta.current_page+x>=a.meta.last_page||($("#pagination-transfers").append("<button id='pagina_"+(a.meta.current_page+x)+"' class='btn nav-btn'>"+(a.meta.current_page+x)+"</button>"),$("#pagina_"+(a.meta.current_page+x)).on("click",(function(){updateTransfersTable("?page="+$(this).html())})));if("1"!=a.meta.last_page){var t="<button id='ultima_pagina' class='btn nav-btn'>"+a.meta.last_page+"</button>";$("#pagination-transfers").append(t),a.meta.current_page==a.meta.last_page&&($("#ultima_pagina").attr("disabled",!0),$("#ultima_pagina").addClass("nav-btn"),$("#ultima_pagina").addClass("active")),$("#ultima_pagina").on("click",(function(){updateTransfersTable("?page="+a.meta.last_page)}))}$("table").addClass("table-striped")}$.ajax({method:"GET",url:a,data:e,dataType:"json",headers:{Authorization:$('meta[name="access-token"]').attr("content"),Accept:"application/json"},error:function(a){errorAjaxResponse(a),$("#available-in-period").html('<span class="currency">R$ </span>0,00')},success:function(a){$("#table-transfers-body").html("");var n=a.meta.balance_in_period,s=parseFloat(n.replace(".","").replace(",",".")),r=$("#available-in-period");r.html("<span ".concat(s<0?' style="color:red;"':"",'><span class="currency">R$ </span>').concat(n,"</span>")),s<0?r.html('<span style="color:red;"><span class="currency">R$ </span>'.concat(n,"</span>")).parent().find(".grad-border").removeClass("green").addClass("red"):s>0?r.html('<span class="currency">R$ </span>'.concat(n)).parent().find(".grad-border").removeClass("red").addClass("green"):r.html('<span class="currency">R$ </span>0,00').parent().find(".grad-border").removeClass("red").addClass("green"),""==a.data?($("#table-transfers-body").html("\n                    <tr class='text-center bg-transparent'>\n                        <td style='height: 300px; border-radius: 16px !important' colspan='11' >\n                            <div class=\"d-flex justify-content-center align-items-center h-p100\">\n                                <div class=\"row m-0 row justify-content-center align-items-center h-p100 font-size-16\">\n                                        <img style='width:124px; margin-right:12px;' alt=\"\"\n                                        src='".concat($("#table-transfers-body").attr("img-empty"),"'>\n                                    Nenhum dado encontrado\n                                </div>\n                            </div>\n                        </td>\n                    </tr>\n                ")),$("#pagination-transfers").html("")):(e="",$.each(a.data,(function(a,t){e+='<tr class="s-table table-finance-schedule-new">';var n=getRequestTime(t),s=getReleaseTime(t);t.is_owner&&t.sale_id?e+='<td style="grid-area: sale" class="sale-finance-schedule text-center">\n                            <span class="d-block mb-10"> '.concat(t.reason,' </span>\n                            <a class="detalhes_venda pointer" data-target="#modal_detalhes" data-toggle="modal" venda="').concat(t.sale_id,'">\n                                <span class="transfers-sale">#').concat(t.sale_id,"</span>\n                            </a>\n                        </td>"):"Antecipação"===t.reason?e+='<td style="grid-area: sale" class="text-center sale-finance-schedule">\n                                        <span class="d-block mb-10"> '.concat(t.reason,' </span>\n                                        <span class="transfers-sale"> #').concat(t.anticipation_id," </span>\n                                    </td>"):e+='<td style="grid-area: sale" class="text-center sale-finance-schedule">\n                                        <span class="d-block mb-10"> '.concat(t.reason," </span>\n                                        ").concat(t.sale_id?'<span class="transfers-sale"> #'.concat(t.sale_id,"</span>"):"","\n                                    </td>"),e+='<td class="date-start-finance-transfers text-left" style="grid-area: date-start"> '.concat(n,' </td>\n                             <td class="date-end-finance-transfers text-left" style="grid-area: date-end"> ').concat(s," </td>"),1===t.type_enum?(e+='<td class="value-finance-schedule" style="grid-area: value">\n                                    <span class="font-md-size-20 bold" style="color:green"> R$ </span>\n                                    <strong class="font-md-size-20" style="color:green"> '.concat(t.value," </strong>"),"Antecipação"===t.reason?e+="<br><small style='color:#543333;'>(Taxa: ".concat(t.tax,")</small> </td>"):e+="</td>"):e+='<td class="value-finance-schedule" style="grid-area: value">\n                                    <span class="font-md-size-20 bold" style="color:red"> R$ </span>\n                                    <strong class="font-md-size-20" style="color:red"> '.concat(t.value," </strong></td> "),e+="</tr>"})),$("#table-transfers-body").html(e),t(a))}})},window.updateAccountStatementData=function(){loadOnAnyEllipsis("#nav-statement #available-in-period-statement"),$("#table-statement-body").html(""),$("#pagination-statement").html(""),loadOnTable("#table-statement-body","#statementTable");var a="/api/transfers?company_id="+$("#statement_company_select").val()+"&gateway_id="+window.gatewayCode+"&dateRange="+$("#date_range_statement").val()+"&sale="+encodeURIComponent($("#statement_sale").val())+"&status="+$("#statement_status_select").val()+"&statement_data_type="+$("#statement_data_type_select").val()+"&payment_method="+$("#payment_method").val()+"&withdrawal_id="+$("#withdrawal_id").val();function e(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;a.length>0?($("#table-statement-body").append(a),$("#statementTable").addClass("table-striped")):$("#table-statement-body").html("")}$(".numbers").hide(),$.ajax({method:"GET",url:a,dataType:"json",headers:{Authorization:$('meta[name="access-token"]').attr("content"),Accept:"application/json"},error:function(){$("#available-in-period").html('\n                <span>\n                   <small class="font-size-12">R$ </small> 0,00\n                </span>'),loadOnAnyEllipsis("#nav-statement #available-in-period-statement",!0);$("#export-excel").addClass("d-none"),$("#table-statement-body").html("\n            <tr class='text-center bg-transparent'>\n                        <td style='height: 300px; border-radius: 16px !important' colspan='11' >\n                            <div class=\"d-flex justify-content-center align-items-center h-p100\">\n                                <div class=\"row m-0 row justify-content-center align-items-center h-p100 font-size-16\">\n                                        <img style='width:124px; margin-right:12px;' alt=\"\"\n                                        src='".concat($("#table-transfers-body").attr("img-empty"),"'>\n                                    Erro ao gerar extrato\n                                </div>\n                            </div>\n                        </td>\n                    </tr>\n            ")),errorAjaxResponse("Erro ao gerar o extrato")},success:function(a){var t;e();var n=a.items;if(isEmpty(n))return loadOnAnyEllipsis("#nav-statement #available-in-period-statement",!0),$("#export-excel").addClass("d-none"),$("#table-statement-body").html("\n                    <tr class='text-center bg-transparent'>\n                        <td style='height: 300px; border-radius: 16px !important' colspan='11' >\n                            <div class=\"d-flex justify-content-center align-items-center h-p100\">\n                                <div class=\"row m-0 row justify-content-center align-items-center h-p100 font-size-16\">\n                                    <img style='width:124px; margin-right:12px;' alt=\"\"\n                                         src='".concat($("#table-transfers-body").attr("img-empty"),"'>\n                                        Nenhum dado encontrado\n                                </div>\n                            </div>\n                        </td>\n                    </tr>\n                ")),!1;var s={WAITING_FOR_VALID_POST:"warning",WAITING_LIQUIDATION:"warning",WAITING_WITHDRAWAL:"warning",WAITING_RELEASE:"warning",PAID:"success",REVERSED:"warning",ADJUSTMENT_CREDIT:"success",ADJUSTMENT_DEBIT:"danger",ERROR:"error"};n.forEach((function(a){var t={date_request:a.transactionDate,date_release:a.date},n=getRequestTime(t),r=getReleaseTime(t),l='<tr class="s-table table-finance-schedule">';a.order&&a.order.hashId&&a.isInvite?l+='\n                        <td class="text-center sale-finance-schedule">\n                            <a>\n                                <span class="transfers-sale m-0 p-0 border-0" style="grid-area: sale;">#'.concat(a.order.hashId,"</span>\n                            </a>\n                        </td>\n                    "):a.order&&a.order.hashId?l+='\n                        <td class="text-center sale-finance-schedule">\n                             <a class="detalhes_venda disabled pointer-md" data-target="#modal_detalhes" data-toggle="modal" venda="'.concat(a.order.hashId,'">\n                                <span class="transfers-sale m-0 p-0 border-0" style="grid-area: sale;">#').concat(a.order.hashId,"</span>\n                            </a>\n                        </td>\n                    "):l+='\n                        <td class="text-center sale-finance-schedule">\n                            <span class="transfers-sale m-0 p-0 border-0" style="grid-area: sale; color: #5D5D5D">'.concat(a.details.description,"</span>\n                        </td>\n                    "),l+='\n                    <td class="date-start-finance-transfers text-left" style="grid-area: date-start">'.concat(n,'</td>\n                    <td class="date-end-finance-transfers text-left" style="grid-area: date-end">').concat(r,'</td>\n                     <td style="grid-area: status;align-self: center;" class="text-center status-finance-schedule">\n                        <span data-toggle="tooltip" data-placement="left" title="').concat(a.details.status,'"\n                        class="badge badge-sm badge-').concat(s[a.details.type],'">\n                            ').concat(a.details.status,"\n                        </span>\n                     </td>"),a.amount>0?l+='\n                        <td class="text-left value-finance-schedule" style="grid-area: value;">\n                            <strong class="font-md-size-20" style="color:green">\n                                '.concat(a.amount.toLocaleString("pt-BR",{style:"currency",currency:"BRL"}).replace(/\s+/g,"").replace("-","- "),"\n                            </strong>\n                        </td>\n                    </tr>"):l+='\n                        <td class="text-left value-finance-schedule" style="grid-area: value;">\n                            <strong class="font-md-size-20" style="color:red">\n                                '.concat(a.amount.toLocaleString("pt-BR",{style:"currency",currency:"BRL"}).replace(/\s+/g,"").replace("-","- "),"\n                            </strong>\n                        </td>\n                    </tr>"),$((function(){$('[data-toggle="tooltip"]').tooltip()})),e(l)}));var r=null!==(t=a.totalInPeriod)&&void 0!==t?t:"0,00",l=!1;r<1&&(l=!0),$("#statement-money #available-in-period-statement").html("\n                <span".concat(l?' style="color:red;"':"",'>\n                   <small class="font-size-12">R$ </small> ').concat(r.toLocaleString("pt-BR"),"\n                </span>")),$("#available-in-period").html("<span ".concat(l?' style="color:red;"':"",'><span class="currency">R$ </span>').concat(r.toLocaleString("pt-BR"),"</span>")),$("#pagination-statement").jPages({containerID:"table-statement-body",perPage:10,startPage:1,startRange:1,first:!1,previous:!1,next:!1,last:!1,delay:1}),$("#export-excel").removeClass("d-none"),$("#pagination-statement span").addClass("jp-hidden"),$("#pagination-statement a").removeClass("active").addClass("btn nav-btn"),$("#pagination-statement a.jp-current").addClass("active"),$("#pagination-statement a").on("click",(function(){$("#pagination-statement a").removeClass("active"),$(this).addClass("active")})),$("#pagination-statement").on("click",(function(){$("#pagination-statement span").remove()})),loadOnAnyEllipsis("#nav-statement #statement-money  #available-in-period-statement",!0)}})},$(window).on("load",(function(){function a(){var a=function(){var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t={company:$("#extract_company_select").val(),reason:$("#reason").val(),transaction:$("#transaction").val().replace("#",""),type:$("#type").val(),value:$("#transaction-value").val(),date_range:$("#date_range").val(),date_type:$("#date_type").val(),email:$("#email_finance_export").val(),format:e,gateway_id:window.gatewayCode};if(a){var n="";for(var s in t)n+="&"+s+"="+t[s];return encodeURI(n)}return t}();$.ajax({method:"POST",url:"/api/finances/export",data:a,headers:{Authorization:$('meta[name="access-token"]').attr("content"),Accept:"application/json"},error:function(a){errorAjaxResponse(a),$("#bt_get_csv").prop("disabled",!1),$("#bt_get_xls").prop("disabled",!1)},success:function(a){$("#export-email").text(a.email),$("#alert-export").show().shake(),setTimeout((function(){$("#bt_get_csv").prop("disabled",!1),$("#bt_get_xls").prop("disabled",!1)}),6e3)}})}$(document).on("click","#bt_filtro, #bt_filtro_statement",(function(){$("#extract_company_select option[value="+$("#extract_company_select option:selected").val()+"]").prop("selected",!0),$("#transferred_value").hide(),loadStatementTable()}));var e="";$("#bt_get_xls").on("click",(function(){$("#bt_get_csv").prop("disabled",!0),$("#bt_get_xls").prop("disabled",!0),$("#modal-export-old-finance-getnet").modal("show"),e="xls"})),$("#bt_get_csv").on("click",(function(){$("#bt_get_csv").prop("disabled",!0),$("#bt_get_xls").prop("disabled",!0),$("#modal-export-old-finance-getnet").modal("show"),e="csv"})),$(".btn-confirm-export-old-finance-getnet").on("click",(function(){var e=new RegExp(/^[A-Za-z0-9_\-\.]+@[A-Za-z0-9_\-\.]{2,}\.[A-Za-z0-9]{2,}(\.[A-Za-z0-9])?/),t=$("#email_finance_export").val();if(""==t||!e.test(t))return alertCustom("error","Preencha o e-mail corretamente"),!1;a(),$("#modal-export-old-finance-getnet").modal("hide")})),$(".nav-link-finances-show-export").on("click",(function(){$("#export-excel").removeClass("d-none")})),$(".nav-link-finances-hide-export").on("click",(function(){$("#export-excel").addClass("d-none")})),$(document).on("keypress",(function(a){13==a.keyCode&&($("#extract_company_select option[value="+$("#extract_company_select option:selected").val()+"]").prop("selected",!0),updateTransfersTable())})),$(".btn-light-1").on("click",(function(){var a=$(this).find("#icon-filtro"),e=$(this).find("#text-filtro");e.fadeOut(10),"matrix(1, 0, 0, 1, 0, 0)"==a.css("transform")||"none"==a.css("transform")?(a.css("transform","rotate(180deg)"),e.text("Minimizar filtros").fadeIn()):(a.css("transform","rotate(0deg)"),e.text("Filtros avançados").fadeIn())})),document.getElementById("transaction-value").addEventListener("focusout",(function(){"0,00"==$("#transaction-value").val()&&(document.getElementById("transaction-value").value=null)})),$("#custom-input-addon, .custom-input-addon-m").on("input change",(function(a){var e=a.target.value;$("#custom-input-addon").val(e),$(".custom-input-addon-m").val(e)}))}));
