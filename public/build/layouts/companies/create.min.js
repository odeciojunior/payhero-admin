$(document).ready((function(){function a(a){var n="";return $.ajax({method:"POST",url:"/api/companies/verifycnpj",dataType:"json",headers:{Authorization:$('meta[name="access-token"]').attr("content"),Accept:"application/json"},data:{company_document:a},async:!1,error:function(a){},success:function(a){"true"==a.cnpj_exist?(alertCustom("error",a.message),n=!0):n=!1}}),n}$.ajax({method:"GET",url:"/api/companies/verify",dataType:"json",headers:{Authorization:$('meta[name="access-token"]').attr("content"),Accept:"application/json"},error:function(a){errorAjaxResponse(a)},success:function(a){"true"==a.has_physical_company?($("#company_document_label").text("CNPJ"),$(".company_document_1").mask("00.000.000/0000-00"),$("#div1").show(),$("#div-company-document").show()):($(".company_document_2").mask("00.000.000/0000-00"),$("#div2").show())}}),$(".btn-next-div1").on("click",(function(n){n.preventDefault();var e=$(".company_document_1").val().replace(/[^0-9]/g,""),t=$(".fantasy_name_1").val();if(""!=$(".company_document_1").val()&&a($(".company_document_1").val()))return!1;loadingOnScreen(),$.ajax({method:"POST",url:"/api/companies",dataType:"json",data:{company_document:e,fantasy_name:t,country:$("#country").val(),company_type:2},headers:{Authorization:$('meta[name="access-token"]').attr("content"),Accept:"application/json"},error:function(a){loadingOnScreenRemove(),errorAjaxResponse(a)},success:function(a){loadingOnScreenRemove(),alertCustom("success",a.message),window.location.replace("/companies/"+a.idEncoded+"/edit?type=2 ")}})})),$("#btn-juridical-person").on("click",(function(a){a.preventDefault(),$("#div-juridical-person").slideDown("fast"),$("#text-main").hide(),$("#text-company").show(),$("#btn-physical-person").hide(),$(this).hide()})),$(".btn-next-div2").on("click",(function(n){n.preventDefault();var e=$(".company_document_2").val().replace(/[^0-9]/g,""),t=$(".fantasy_name_2").val();if(""!=$(".company_document_2").val()&&a($(".company_document_2").val()))return!1;loadingOnScreen(),$.ajax({method:"POST",url:"/api/companies",dataType:"json",data:{company_document:e,fantasy_name:t,country:$("#country_2").val(),company_type:2},headers:{Authorization:$('meta[name="access-token"]').attr("content"),Accept:"application/json"},error:function(a){loadingOnScreenRemove(),errorAjaxResponse(a)},success:function(a){loadingOnScreenRemove(),alertCustom("success",a.message),window.location.replace("/companies/"+a.idEncoded+"/edit?type=2 ")}})})),$("#btn-physical-person").on("click",(function(a){a.preventDefault(),loadingOnScreen(),$.ajax({method:"POST",url:"/api/companies",dataType:"json",data:{country:$("#country").val(),company_type:1},headers:{Authorization:$('meta[name="access-token"]').attr("content"),Accept:"application/json"},error:function(a){loadingOnScreenRemove(),errorAjaxResponse(a)},success:function(a){loadingOnScreenRemove(),alertCustom("success",a.message),window.location.replace("/companies/"+a.idEncoded+"/edit?type=1 ")}})}));var n={brazil:"CNPJ",portugal:"NIPC",usa:"EIN",germany:"NIF",spain:"CIF",france:"SIRET",italy:"Partita IVA",unitedkingdom:"CNPJ"};$("#country").on("change",(function(){$("#company_document_label").text(n[$(this).val()]),$("#company_document").attr("placeholder",n[$(this).val()]),"brazil"==$(this).val()?($("#company_document").mask("00.000.000/0000-00"),$("#fantasy_name").attr("disabled",!0)):($("#company_document").unmask(),$("#fantasy_name").attr("disabled",!1))})),$("#country_2").on("change",(function(){$("#company_document_2_label").text(n[$(this).val()]),$("#company_document_2").attr("placeholder",n[$(this).val()]),"brazil"==$(this).val()?($("#company_document_2").mask("00.000.000/0000-00"),$("#fantasy_name_2").attr("disabled",!0)):($("#company_document_2").unmask(),$("#fantasy_name_2").attr("disabled",!1))})),$("#country").change(),$("#country_2").change(),$("#company_document_2").on("keyup",(function(a){var n=this.value.replace(/[^0-9]/g,"");14==n.length&&"brazil"==$("#country_2").val()&&$.ajax({method:"POST",url:"/api/companies/consultcnpj",dataType:"json",headers:{Authorization:$('meta[name="access-token"]').attr("content"),Accept:"application/json"},data:{cnpj:n},async:!1,error:function(a){console.log(a),$("#fantasy_name_2").attr("disabled",!1)},success:function(a){console.log(a),""!=a.name?($("#fantasy_name_2").val(a.name),$("#fantasy_name_2").attr("disabled",!0)):$("#fantasy_name_2").attr("disabled",!1)}})})),$("#company_document").on("keyup",(function(a){var n=this.value.replace(/[^0-9]/g,"");14==n.length&&"brazil"==$("#country").val()&&$.ajax({method:"POST",url:"/api/companies/consultcnpj",dataType:"json",headers:{Authorization:$('meta[name="access-token"]').attr("content"),Accept:"application/json"},data:{cnpj:n},async:!1,error:function(a){console.log(a),$("#fantasy_name").attr("disabled",!1)},success:function(a){console.log(a),""!=a.name?($("#fantasy_name").val(a.name),$("#fantasy_name").attr("disabled",!0)):$("#fantasy_name").attr("disabled",!1)}})}))}));
