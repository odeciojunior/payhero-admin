$((function(){loadingOnScreen(),$.ajax({url:"/api/projects",data:{status:"active"},dataType:"json",headers:{Authorization:$('meta[name="access-token"]').attr("content"),Accept:"application/json"},error:function(e){loadOnAny("#data-table-projects",!0),errorAjaxResponse(e)},success:function(e){verifyAccountFrozen()?$("#btn-config").css({visibility:"hidden"}):$("#btn-config").css({visibility:"visible"}),e.data.length?($("#project-empty").hide(),$("#company-empty").hide(),$.each(e.data,(function(e,t){verifyAccountFrozen()?linkProject="":linkProject='<a href="/projects/'.concat(t.id).concat(t.affiliated?"/"+t.affiliate_id:"",'" class="stretched-link"></a>');var a='<div class="col-xl-3 col-lg-3 col-md-4 col-sm-6 name_project" data-id="'.concat(t.id,'">\n                                        <div class="card">\n\n                                            ').concat(null!=t.woocommerce_id?'<div class="ribbon ribbon-woo"><span >WooCommerce <a class="ribbon-woocommerce-default"></a></span></div>':"","\n\n\n                                            ").concat(null==t.shopify_id||t.affiliated?"":'<div class="ribbon"><span>Shopify <a class="ribbon-shopify-default"></a></span></div>',"\n                                            ").concat(t.affiliated?'<div class="ribbon-left"><span>Afiliado</span></div>':"",'\n                                            <img class="card-img-top" onerror="this.src = \'/build/global/img/produto.svg\'" src="').concat(t.photo?t.photo:"/build/global/img/produto.svg",'" alt="').concat(t.name,'">\n                                            <div class="card-body">\n                                                <h5 class="card-title">').concat(t.name,'</h5>\n                                                <p class="card-text sm">Criado em ').concat(t.created_at,"</p>\n                                                ").concat(linkProject,"\n                                            </div>\n                                        </div>\n                                    </div>");$("#data-table-projects").append(a),verifyAccountFrozen()?$("#btn-add-project").hide():$("#btn-add-project").show()})),Sortable.create(document.getElementById("data-table-projects"),{onEnd:function(e){var t=[],a=$("#data-table-projects");$(a).find(".name_project").each((function(e,a){t.push($(a).data("id"))})),$.ajax({method:"POST",url:"/api/projects/updateorder",dataType:"json",data:{order:t},headers:{Authorization:$('meta[name="access-token"]').attr("content"),Accept:"application/json"},error:function(e){errorAjaxResponse(e)},success:function(e){alertCustom("success",e.message)}})}})):($("#data-table-projects").hide(),$("#btn-config").css({visibility:"hidden"}),e.no_company?($("#company-empty").show(),$("#project-empty").hide()):($("#project-empty").show(),$("#company-empty").hide())),loadingOnScreenRemove()}}),$("#btn-config").on("click",(function(){$("#modal_config").modal("show"),1==$("#deleted_project_filter").val()?$("#deleted_project_filter").attr("checked","checked"):$("#deleted_project_filter").attr("checked",!1)})),$("#btn_save_config").on("click",(function(){$.ajax({method:"POST",url:"/api/projects/updateconfig",dataType:"json",data:{deleted_project_filter:$("#deleted_project_filter").val()},headers:{Authorization:$('meta[name="access-token"]').attr("content"),Accept:"application/json"},error:function(e){$("#modal_config").modal("hide"),errorAjaxResponse(e)},success:function(e){$("#modal_config").modal("hide"),alertCustom("success",e.message)}})})),$(".check").on("change",(function(){$(this).is(":checked")?$(this).val(1):$(this).val(0)}))}));
