$(function(){$(document).on("click",".details_transaction",function(){var n=$(this).attr("withdrawal");loadOnAny("#modal-transactionsDetails > .modal-body",!1,{message:"Aguarde enquanto os dados do <br> saque estão sendo carregados."}),$("#withdrawal-code").html(""),$("#transactions-table-data").html(""),$("#pending_debt").hide().html(""),$("#modal_detalhes_transacao").modal("show"),$.ajax({method:"GET",url:"/api/withdrawals/get-transactions-by-brand/"+n,dataType:"json",headers:{Authorization:$('meta[name="access-token"]').attr("content"),Accept:"application/json"},error:function(n){$("#modal_detalhes_transacao").modal("hide"),errorAjaxResponse(n)},success:function(n){$("#withdrawal-code").html('<span class="mr-30">ID #'.concat(n.id,"</span><span>Solicitado em ").concat(n.date_request,"</span>")),null!=n.debt_pending_value&&"R$ 0,00"!=n.debt_pending_value&&$("#pending_debt").show().html('\n                        <span class="mr-30" style="color:#FF0404;">\n                            Desconto de - '.concat(n.debt_pending_value," em débitos pendentes\n                        </span>\n                    "));var a="";$.each(n.transactions,function(n,t){var e="";e=1==t.liquidated?"is-released-on":"is-released-off",a+="\n                        <tr>\n                            <td>\n                                <img src='/build/global/img/".concat(t.brand,'.svg\'   width=\'50px;\' style=\'border-radius:6px;\' alt="brand"><br>\n                            </td>\n                            <td>\n                                <div class="d-flex justify-content-center align-items-center align-self-center ">\n                                    <span class="transaction-status d-flex justify-content-center align-items-center align-self-center rounded-circle rounded-circle" >\n                                        <span class="rounded-circle ').concat(e," \" ></span>\n                                    </span>\n                                </div>\n                            </td>\n                            <td>\n                                <span class='small'>").concat(t.date,"</span>\n                            </td>\n                            <td>\n                                <span class='small font-weight-bold'>").concat(t.value,"</span>\n                            </td>\n                        </tr>\n                    ")}),a+="<tr>\n                                <td> </td>\n                                <td> </td>\n                                <td>\n                                    <span class='small font-weight-bold'>Total </span>\n                                </td>\n                                <td>\n                                    <span class='small font-weight-bold'>".concat(n.total_withdrawal,"</span>\n                                </td>\n                            </tr>"),$("#transactions-table-data").append(a),""==n.transactions&&$("#transactions-table-data").html("<tr><td colspan='10' class='text-center'>Nenhum saque realizado até o momento</td></tr>"),loadOnAny("#modal-transactionsDetails > .modal-body",!0)}}),$("#btn_exports").show();var a="xls";$("#bt_get_xls_transfer").on("click",function(){$("#export-finance-getnet-transfer").removeClass("d-none"),a="xls"}),$("#bt_get_csv_transfer").on("click",function(){$("#export-finance-getnet-transfer").removeClass("d-none"),a="csv"}),$(".btn-confirm-export-finance-getnet-transfer").on("click",function(){var t=new RegExp(/^[A-Za-z0-9_\-\.]+@[A-Za-z0-9_\-\.]{2,}\.[A-Za-z0-9]{2,}(\.[A-Za-z0-9])?/),e=$("#email_finance_export_transfer").val();if(""==e||!t.test(e))return alertCustom("error","Preencha o e-mail corretamente"),!1;!function(a){var t=$("#email_finance_export_transfer").val();loadOnAny("#loading-ajax-transfer"),$("#btn_exports").hide(),$.ajax({method:"POST",url:"/api/withdrawals/get-transactions/"+n,data:{email:t,format:a},dataType:"json",headers:{Authorization:$('meta[name="access-token"]').attr("content"),Accept:"application/json"},error:function(n){errorAjaxResponse(n)},success:function(n){$("#export-finance-email-transfer").text(t),$("#alert-finance-export-transfer").show().shake(),$("#btn_exports").show()},complete:function(n){loadOnAny("#loading-ajax-transfer",!0)}})}(a),$("#export-finance-getnet-transfer").addClass("d-none")})})});
