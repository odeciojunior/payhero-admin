function verifyWithdrawalIsValid(a,e){return a<1?(alertCustom("error","Valor do saque inválido!"),$("#custom-input-addon").val(""),$(".withdrawal-value").maskMoney({thousands:".",decimal:",",allowZero:!0}),!1):a>e?(alertCustom("error","O valor requerido ultrapassa o limite disponivel"),$("#custom-input-addon").val(""),$(".withdrawal-value").maskMoney({thousands:".",decimal:",",allowZero:!0}),!1):""==$("#custom-input-addon").val()?(alertCustom("error","Valor do saque inválido!"),!1):!(a<999)||void alertCustom("error","Valor mínimo de saque  R$ 10,00")}function modalDebitPending(a,e){var t=$("#debit-pending-informations"),n=$("#modal-withdrawal-custom-footer"),o=$("#modal-body-withdrawal-custom"),l=$("#modal-title-withdrawal-custom");o.html("").addClass("d-none"),l.text("Não é possivel realizar este saque").parent().addClass("debit-pending");var s=a-removeFormatNumbers(e);t.removeClass("d-none").html('\n                <h3 class="text-center mt-10" id="text-title-debit-pending">\n                    Você tem débitos pendentes superiores ao <br> valor do seu saldo disponível.\n                </h3>\n                <p id="text-description-debit-pending">\n                    Você só poderá solicitar um saque quando seu saldo disponível for maior <br>\n                    que o valor dos débitos pendentes.\n                </p>\n\n                <div id="debit-items">\n                    <div class="row mx-0">\n                        <div class=\'col-7\'><p> VALOR SOLICITADO </p></div>\n                        <div class="col-5 pl-0 text-right">\n                            <span class="currency">\n                                <span id="requested-amount-withdrawal" class="text-right" style="color: #636363;">\n                                    '.concat(formatMoney(removeFormatNumbers(a)),'\n                                </span>\n                            </span>\n                        </div>\n                    </div>\n                    <div class="row mx-0 my-20" style="background-color:#FFF2F2;;">\n                        <div class=\'col-7 d-flex align-items-center py-20\'><p> DÉBITOS PENDENTES </p></div>\n                        <div class="col-5 pl-0 d-flex align-items-center justify-content-end">\n                            <span class="currency">\n                                <span id="value-withdrawal-debt-pending" class="text-right" style="color: #FF003D;">\n                                    - ').concat(formatMoney(removeFormatNumbers(e)),'\n                                </span>\n                            </span>\n                        </div>\n                    </div>\n                    <div class="row mx-0">\n                        <div class=\'col-7\'><p> FINAL </p></div>\n                        <div class="col-5 pl-0 text-right">\n                            <span class="currency">\n                                <span id="value-withdrawal-received" class="text-right" style="color: #636363;">\n                                    ').concat(formatMoney(s),"\n                                </span>\n                            </span>\n                        </div>\n                    </div>\n                </div>\n            ")).show(),n.html('\n            <hr>\n            <div class="row justify-content-center w-p100">\n                <button class="btn col-auto s-btn-border" data-dismiss="modal" aria-label="Close"\n                style="background-color: #2E85EC; color: #FFF">\n                    Ok, entendi!\n                </button>\n            </div>\n        ')}function modalDebitWithdrawal(a,e,t){var n=$("#debit-pending-informations"),o=$("#modal-withdrawal-custom-footer"),l=$("#modal-body-withdrawal-custom"),s=$("#modal-title-withdrawal-custom");l.html("").addClass("d-none"),s.text("Não é possivel realizar este saque").parent().addClass("debit-pending"),$("#requested-amount-withdrawal").text(formatMoney(t));var r=removeFormatNumbers(t)-removeFormatNumbers(e);n.removeClass("d-none").html('\n                <h3 class="text-center mt-10" id="text-title-debit-pending">\n                    Você tem débitos pendentes superiores ao <br> valor do seu saldo disponível.\n                </h3>\n                <p id="text-description-debit-pending">\n                    Você só poderá solicitar um saque quando seu valor solicitado for maior <br>\n                    que o valor dos débitos pendentes.\n                </p>\n\n                <div id="debit-items">\n                    <div class="row mx-0">\n                        <div class=\'col-7\'><p> VALOR SOLICITADO </p></div>\n                        <div class="col-5 pl-0 text-right">\n                            <span class="currency">\n                                <span id="requested-amount-withdrawal" class="text-right" style="color: #636363;">\n                                    '.concat(formatMoney(removeFormatNumbers(a)),'\n                                </span>\n                            </span>\n                        </div>\n                    </div>\n                    <div class="row mx-0 my-20" style="background-color:#FFF2F2;;">\n                        <div class=\'col-7 d-flex align-items-center py-20\'><p> DÉBITOS PENDENTES </p></div>\n                        <div class="col-5 pl-0 d-flex align-items-center justify-content-end">\n                            <span class="currency">\n                                <span id="value-withdrawal-debt-pending" class="text-right" style="color: #FF003D;">\n                                    - ').concat(formatMoney(removeFormatNumbers(e)),'\n                                </span>\n                            </span>\n                        </div>\n                    </div>\n                    <div class="row mx-0">\n                        <div class=\'col-7\'><p> FINAL </p></div>\n                        <div class="col-5 pl-0 text-right">\n                            <span class="currency">\n                                <span id="value-withdrawal-received" class="text-right" style="color: #636363;">\n                                    ').concat(formatMoney(r),"\n                                </span>\n                            </span>\n                        </div>\n                    </div>\n                </div>\n            ")).show(),o.html('\n            <hr>\n            <div class="row justify-content-center w-p100">\n                <button class="btn col-auto s-btn-border" data-dismiss="modal" aria-label="Close"\n                style="background-color: #2E85EC; color: #FFF">\n                    Ok, entendi!\n                </button>\n            </div>\n        ')}function modalEmptyWithdrawal(a){var e=$("#debit-pending-informations"),t=$("#modal-withdrawal-custom-footer"),n=$("#modal-body-withdrawal-custom"),o=$("#modal-title-withdrawal-custom");n.html("").addClass("d-none"),o.text("Não é possivel realizar este saque").parent().addClass("debit-pending"),$("#requested-amount-withdrawal").text(formatMoney(a)),e.removeClass("d-none").html('\n                <h3 class="text-center mt-10" id="text-title-debit-pending">\n                    Você não possui nenhuma venda com o valor inferior ao saldo disponível para efetuar o saque.\n                </h3>\n            ').show(),t.html('\n            <hr>\n            <div class="row justify-content-center w-p100">\n                <button class="btn col-auto s-btn-border" data-dismiss="modal" aria-label="Close"\n                style="background-color: #2E85EC; color: #FFF">\n                    Ok, entendi!\n                </button>\n            </div>\n        ')}function modalCustomWithdrawal(a,e,t){var n=optionsValuesWithdrawal(a,e),o=$("#modal-body-withdrawal-custom"),l=$("#modal-withdrawal-custom-footer"),s=$("#debit-pending-informations"),r=$("#modal-title-withdrawal-custom");if(s.html("").addClass("d-none"),r.text("Confirmar saque").parent().removeClass("debit-pending"),o.removeClass("d-none").html('\n                <h3 id="text-title-withdrawal-custom" class="text-center mb-1">\n                    '.concat(a?"Valor a ser sacado":"Valores disponíveis:",'\n                </h3>\n                <p id="text-description-withdrawal-custom" class="text-center ').concat(a?"":"mb-30",'">\n                    ').concat(a?"":"Selecione o valor que mais se encaixa a sua solicitação",'\n                </p>\n                <div class="text-center">\n                    <div id="more-than-on-values-show">\n                        ').concat(n,"\n                    </div>\n                </div>\n            ")),!isEmptyValue(t)){var i=o.find(".value-select"),d=i.text().trim(),c=i.data("value")-removeFormatNumbers(t);s.removeClass("d-none").html('\n                    <h3 class="text-center mt-10 mb-0" id="text-title-debit-pending"> Débitos pendentes </h3>\n                    <p class="mt-5" id="text-description-debit-pending">\n                        Você tem alguns valores em aberto\n                    </p>\n\n                    <div id="debit-items">\n                        <div class="row mx-0">\n                            <div class=\'col-7\'><p> VALOR SOLICITADO </p></div>\n                            <div class="col-5 pl-0 text-right">\n                                <span class="currency">\n                                    <span id="requested-amount-withdrawal" class="text-right" style="color: #636363;">\n                                        '.concat(d,'\n                                    </span>\n                                </span>\n                            </div>\n                        </div>\n                        <div class="row mx-0 my-20" style="background-color:#FFF2F2;">\n                            <div class=\'col-7 d-flex align-items-center py-20\'><p> DÉBITOS PENDENTES </p></div>\n                            <div class="col-5 pl-0 d-flex align-items-center justify-content-end">\n                                <span class="currency">\n                                    <span id="value-withdrawal-debt-pending" class="text-right" style="color: #FF003D;">\n                                        - ').concat(formatMoney(removeFormatNumbers(t)),'\n                                    </span>\n                                </span>\n                            </div>\n                        </div>\n                        <div class="row mx-0">\n                            <div class=\'col-7\'><p>VALOR A RECEBER</p></div>\n                            <div class="col-5 pl-0 text-right">\n                                <span class="currency">\n                                    <span id="value-withdrawal-received" class="text-right" style="color: #1BE4A8;">\n                                        ').concat(formatMoney(c),"\n                                    </span>\n                                </span>\n                            </div>\n                        </div>\n                    </div>\n                ")).show()}l.html('\n                <div class="row justify-content-center w-p100">\n                    <button id="bt-cancel-withdrawal" data-dismiss="modal" aria-label="Close"\n                    class="btn col-auto s-btn-border mr-10"\n                    style="color: #959595;">\n                        Cancelar\n                    </button>\n\n                    <button id="bt-confirm-withdrawal-modal-custom"\n                    class="btn btn-success col-auto btn-confirmation s-btn-border m-0"\n                    style="background-color: #1BE4A8;">\n                        <strong>Confirmar</strong>\n                    </button>\n                </div>\n            ');var m=$("#bigger-value, #lower-value");m.off("click"),m.on("click",function(){var a=$(this),e=$("#requested-amount-withdrawal");if(m.removeClass("green value-select"),a.addClass("green value-select"),e.text(a.text().trim()),null!=t){var n=$("#value-withdrawal-received"),o=a.data("value")-removeFormatNumbers(t);n.text(formatMoney(o))}}),$(document).on("click","#bt-confirm-withdrawal-modal-custom",function(a){var e=$(this);if(e.data("clicked"))return a.preventDefault(),a.stopPropagation(),!1;e.data("clicked",!0),window.setTimeout(function(){e.removeData("clicked")},2e3),loadOnModal("#modal-body-withdrawal-custom"),$("#bt-confirm-withdrawal-modal-custom").attr("disabled","disabled"),$.ajax({url:"/api/withdrawals",type:"POST",data:{company_id:$(".company-navbar").val(),withdrawal_value:$(".value-select").data("value"),gateway_id:window.gatewayCode},dataType:"json",headers:{Authorization:$('meta[name="access-token"]').attr("content"),Accept:"application/json"},error:function(a){loadingOnScreenRemove(),errorAjaxResponse(a)},success:function(a){loadingOnScreenRemove(),loadOnAny(".price",!0),manipulateModalSuccessWithdrawal(),$(".btn-return").off("click"),$(".btn-return").on("click",function(){$("#custom-input-addon").val(""),$(".modal-body #modal-body-withdrawal-custom").modal("hide")}),updateBalances()},complete:function(a){$("#bt-confirm-withdrawal-modal-custom").removeAttr("disabled")}})})}function manipulateModalWithdrawal(a){a={lower_value:a.lower_value,bigger_value:a.bigger_value};var e=$(".available-balance").first().text().replace(/,/g,"").replace(/\./g,""),t=$("#custom-input-addon").first().val().replace(/,/g,"").replace(/\./g,""),n=onlyNumbers($(".debt-balance").first().text().replace(/,/g,"").replace(/\./g,"")),o=modalValueIsSingleValue(a,e,t,n),l=!1,s=!1;if(null!=n){var r=a.bigger_value-removeFormatNumbers(n),i=a.lower_value-removeFormatNumbers(n);removeFormatNumbers(e)-removeFormatNumbers(n)<1&&n>1?(s=!0,modalDebitPending(e,n)):r<1&&i<1&&n>1?(l=!0,modalDebitWithdrawal(a.bigger_value,n,t)):r<1&&i<1&&(l=!0,modalEmptyWithdrawal(t))}!1===l&&!1===s&&modalCustomWithdrawal(o,a,n),$("#modal-withdrawal-custom").modal("show")}function manipulateModalSuccessWithdrawal(){$("#debit-pending-informations").html(""),$("#modal-title-withdrawal-custom").text("Sucesso!"),$(".modal-body #modal-body-withdrawal-custom").html('\n        <svg style="max-width: 70px; max-height: 70px;" class="checkmark"\n        xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52 52">\n            <circle class="checkmark__circle" cx="26" cy="26" r="25" fill="none"/>\n            <path class="checkmark__check" fill="none" d="M14.1 27.2l7.1 7.2 16.7-16.8"/>\n        </svg>\n        <h3 id="text-title-withdrawal-custom" class="text-center">\n            <strong>Sua solicitação foi para avaliação!</strong>\n        </h3>'),$("#modal-withdrawal-custom-footer").html('\n        <div style="width:100%;text-align:center;padding-top:3%">\n            <span class="btn btn-success btn-return" data-dismiss="modal">\n                Retornar\n            </span>\n        </div>')}function modalValueIsSingleValue(a,e,t,n){var o=2;return null!=n&&(o=a.lower_value-removeFormatNumbers(n)),o<1||0==a.lower_value||a.bigger_value==t||a.lower_value==t||e==a.bigger_value}function optionsValuesWithdrawal(a,e){var t=formatMoney(e.bigger_value),n=formatMoney(e.lower_value);return a?'\n                <div id="just-value-show" class="text-center mt-25">\n                    <div id="single-value" class="value-select" data-value="'.concat(e.bigger_value,'">\n                        ').concat(t,"\n                    </div>\n                </div>\n            "):'\n            <div>\n                <div class="row justify-content-center w-p100 m-0">\n                    <div class="col-auto btn btn-primary s-btn s-btn-border mr-10" id="lower-value" data-value="'.concat(e.lower_value,'">\n                        ').concat(n,'\n                    </div>\n\n                    <div class="col-auto btn btn-primary s-btn s-btn-border green value-select" id="bigger-value" data-value="').concat(e.bigger_value,'">\n                        ').concat(t,"\n                    </div>\n                </div>\n            </div>\n        ")}function removeFormatNumbers(a){return(a+="").replace(/,/g,"").replace(/\./g,"")}function formatMoney(a){return(a/100).toLocaleString("pt-BR",{style:"currency",currency:"BRL"}).replace(/\s+/g,"").replace("-","- ")}$("#bt-withdrawal, #bt-withdrawal_m").on("click",function(){var a=$(".available-balance").html().replace(/,/g,"").replace(/\./g,""),e=$("#custom-input-addon").val().replace(/,/g,"").replace(/\./g,""),t=parseInt(a);verifyWithdrawalIsValid(parseFloat(e),t)&&($("#bt-withdrawal, #bt-withdrawal_m").attr("disabled","disabled"),$.ajax({url:"/api/withdrawals/getWithdrawalValues",type:"POST",dataType:"json",data:{company_id:$(".company-navbar").val(),gateway_id:window.gatewayCode,withdrawal_value:$("#custom-input-addon").val()},headers:{Authorization:$('meta[name="access-token"]').attr("content"),Accept:"application/json"},error:function(a){errorAjaxResponse(a)},success:function(a){manipulateModalWithdrawal(a.data)},complete:function(){$("#bt-withdrawal, #bt-withdrawal_m").removeAttr("disabled")}}))});
