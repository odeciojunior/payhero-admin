<<<<<<< HEAD
function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray2(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it["return"] != null) it["return"](); } finally { if (didErr) throw err; } } }; }

function _toArray(arr) { return _arrayWithHoles(arr) || _iterableToArray2(arr) || _unsupportedIterableToArray2(arr) || _nonIterableRest(); }

function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }

function _toConsumableArray2(arr) { return _arrayWithoutHoles2(arr) || _iterableToArray2(arr) || _unsupportedIterableToArray2(arr) || _nonIterableSpread2(); }

function _nonIterableSpread2() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function _unsupportedIterableToArray2(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray2(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray2(o, minLen); }

function _iterableToArray2(iter) { if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null) return Array.from(iter); }

function _arrayWithoutHoles2(arr) { if (Array.isArray(arr)) return _arrayLikeToArray2(arr); }

function _arrayLikeToArray2(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function _typeof2(obj) { "@babel/helpers - typeof"; return _typeof2 = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && "function" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }, _typeof2(obj); }

/*!
 * Cropper.js v1.5.12
 * https://fengyuanchen.github.io/cropperjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2021-06-12T08:00:17.411Z
 */
(function (global, factory) {
  (typeof exports === "undefined" ? "undefined" : _typeof2(exports)) === 'object' && typeof module !== 'undefined' ? module.exports = factory() : typeof define === 'function' && define.amd ? define(factory) : (global = typeof globalThis !== 'undefined' ? globalThis : global || self, global.Cropper = factory());
})(this, function () {
  'use strict';

  function ownKeys(object, enumerableOnly) {
    var keys = Object.keys(object);

    if (Object.getOwnPropertySymbols) {
      var symbols = Object.getOwnPropertySymbols(object);

      if (enumerableOnly) {
        symbols = symbols.filter(function (sym) {
          return Object.getOwnPropertyDescriptor(object, sym).enumerable;
        });
      }

      keys.push.apply(keys, symbols);
    }

    return keys;
  }

  function _objectSpread2(target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i] != null ? arguments[i] : {};

      if (i % 2) {
        ownKeys(Object(source), true).forEach(function (key) {
          _defineProperty(target, key, source[key]);
        });
      } else if (Object.getOwnPropertyDescriptors) {
        Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));
      } else {
        ownKeys(Object(source)).forEach(function (key) {
          Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
        });
      }
    }

    return target;
  }

  function _typeof(obj) {
    "@babel/helpers - typeof";

    if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
      _typeof = function _typeof(obj) {
        return typeof obj;
      };
    } else {
      _typeof = function _typeof(obj) {
        return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
      };
    }

    return _typeof(obj);
  }

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  function _defineProperties(target, props) {
    for (var i = 0; i < props.length; i++) {
      var descriptor = props[i];
      descriptor.enumerable = descriptor.enumerable || false;
      descriptor.configurable = true;
      if ("value" in descriptor) descriptor.writable = true;
      Object.defineProperty(target, descriptor.key, descriptor);
    }
  }

  function _createClass(Constructor, protoProps, staticProps) {
    if (protoProps) _defineProperties(Constructor.prototype, protoProps);
    if (staticProps) _defineProperties(Constructor, staticProps);
    return Constructor;
  }

  function _defineProperty(obj, key, value) {
    if (key in obj) {
      Object.defineProperty(obj, key, {
        value: value,
        enumerable: true,
        configurable: true,
        writable: true
      });
    } else {
      obj[key] = value;
    }

    return obj;
  }

  function _toConsumableArray(arr) {
    return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();
  }

  function _arrayWithoutHoles(arr) {
    if (Array.isArray(arr)) return _arrayLikeToArray(arr);
  }

  function _iterableToArray(iter) {
    if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null) return Array.from(iter);
  }

  function _unsupportedIterableToArray(o, minLen) {
    if (!o) return;
    if (typeof o === "string") return _arrayLikeToArray(o, minLen);
    var n = Object.prototype.toString.call(o).slice(8, -1);
    if (n === "Object" && o.constructor) n = o.constructor.name;
    if (n === "Map" || n === "Set") return Array.from(o);
    if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);
  }

  function _arrayLikeToArray(arr, len) {
    if (len == null || len > arr.length) len = arr.length;

    for (var i = 0, arr2 = new Array(len); i < len; i++) {
      arr2[i] = arr[i];
    }

    return arr2;
  }

  function _nonIterableSpread() {
    throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
  }

  var IS_BROWSER = typeof window !== 'undefined' && typeof window.document !== 'undefined';
  var WINDOW = IS_BROWSER ? window : {};
  var IS_TOUCH_DEVICE = IS_BROWSER && WINDOW.document.documentElement ? 'ontouchstart' in WINDOW.document.documentElement : false;
  var HAS_POINTER_EVENT = IS_BROWSER ? 'PointerEvent' in WINDOW : false;
  var NAMESPACE = 'cropper'; // Actions

  var ACTION_ALL = 'all';
  var ACTION_CROP = 'crop';
  var ACTION_MOVE = 'move';
  var ACTION_ZOOM = 'zoom';
  var ACTION_EAST = 'e';
  var ACTION_WEST = 'w';
  var ACTION_SOUTH = 's';
  var ACTION_NORTH = 'n';
  var ACTION_NORTH_EAST = 'ne';
  var ACTION_NORTH_WEST = 'nw';
  var ACTION_SOUTH_EAST = 'se';
  var ACTION_SOUTH_WEST = 'sw'; // Classes

  var CLASS_CROP = "".concat(NAMESPACE, "-crop");
  var CLASS_DISABLED = "".concat(NAMESPACE, "-disabled");
  var CLASS_HIDDEN = "".concat(NAMESPACE, "-hidden");
  var CLASS_HIDE = "".concat(NAMESPACE, "-hide");
  var CLASS_INVISIBLE = "".concat(NAMESPACE, "-invisible");
  var CLASS_MODAL = "".concat(NAMESPACE, "-modal");
  var CLASS_MOVE = "".concat(NAMESPACE, "-move"); // Data keys

  var DATA_ACTION = "".concat(NAMESPACE, "Action");
  var DATA_PREVIEW = "".concat(NAMESPACE, "Preview"); // Drag modes

  var DRAG_MODE_CROP = 'crop';
  var DRAG_MODE_MOVE = 'move';
  var DRAG_MODE_NONE = 'none'; // Events

  var EVENT_CROP = 'crop';
  var EVENT_CROP_END = 'cropend';
  var EVENT_CROP_MOVE = 'cropmove';
  var EVENT_CROP_START = 'cropstart';
  var EVENT_DBLCLICK = 'dblclick';
  var EVENT_TOUCH_START = IS_TOUCH_DEVICE ? 'touchstart' : 'mousedown';
  var EVENT_TOUCH_MOVE = IS_TOUCH_DEVICE ? 'touchmove' : 'mousemove';
  var EVENT_TOUCH_END = IS_TOUCH_DEVICE ? 'touchend touchcancel' : 'mouseup';
  var EVENT_POINTER_DOWN = HAS_POINTER_EVENT ? 'pointerdown' : EVENT_TOUCH_START;
  var EVENT_POINTER_MOVE = HAS_POINTER_EVENT ? 'pointermove' : EVENT_TOUCH_MOVE;
  var EVENT_POINTER_UP = HAS_POINTER_EVENT ? 'pointerup pointercancel' : EVENT_TOUCH_END;
  var EVENT_READY = 'ready';
  var EVENT_RESIZE = 'resize';
  var EVENT_WHEEL = 'wheel';
  var EVENT_ZOOM = 'zoom'; // Mime types

  var MIME_TYPE_JPEG = 'image/jpeg'; // RegExps

  var REGEXP_ACTIONS = /^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/;
  var REGEXP_DATA_URL = /^data:/;
  var REGEXP_DATA_URL_JPEG = /^data:image\/jpeg;base64,/;
  var REGEXP_TAG_NAME = /^img|canvas$/i; // Misc
  // Inspired by the default width and height of a canvas element.

  var MIN_CONTAINER_WIDTH = 200;
  var MIN_CONTAINER_HEIGHT = 100;
  var DEFAULTS = {
    // Define the view mode of the cropper
    viewMode: 0,
    // 0, 1, 2, 3
    // Define the dragging mode of the cropper
    dragMode: DRAG_MODE_CROP,
    // 'crop', 'move' or 'none'
    // Define the initial aspect ratio of the crop box
    initialAspectRatio: NaN,
    // Define the aspect ratio of the crop box
    aspectRatio: NaN,
    // An object with the previous cropping result data
    data: null,
    // A selector for adding extra containers to preview
    preview: '',
    // Re-render the cropper when resize the window
    responsive: true,
    // Restore the cropped area after resize the window
    restore: true,
    // Check if the current image is a cross-origin image
    checkCrossOrigin: true,
    // Check the current image's Exif Orientation information
    checkOrientation: true,
    // Show the black modal
    modal: true,
    // Show the dashed lines for guiding
    guides: true,
    // Show the center indicator for guiding
    center: true,
    // Show the white modal to highlight the crop box
    highlight: true,
    // Show the grid background
    background: true,
    // Enable to crop the image automatically when initialize
    autoCrop: true,
    // Define the percentage of automatic cropping area when initializes
    autoCropArea: 0.8,
    // Enable to move the image
    movable: true,
    // Enable to rotate the image
    rotatable: true,
    // Enable to scale the image
    scalable: true,
    // Enable to zoom the image
    zoomable: true,
    // Enable to zoom the image by dragging touch
    zoomOnTouch: true,
    // Enable to zoom the image by wheeling mouse
    zoomOnWheel: true,
    // Define zoom ratio when zoom the image by wheeling mouse
    wheelZoomRatio: 0.1,
    // Enable to move the crop box
    cropBoxMovable: true,
    // Enable to resize the crop box
    cropBoxResizable: true,
    // Toggle drag mode between "crop" and "move" when click twice on the cropper
    toggleDragModeOnDblclick: true,
    // Size limitation
    minCanvasWidth: 0,
    minCanvasHeight: 0,
    minCropBoxWidth: 0,
    minCropBoxHeight: 0,
    minContainerWidth: MIN_CONTAINER_WIDTH,
    minContainerHeight: MIN_CONTAINER_HEIGHT,
    // Shortcuts of events
    ready: null,
    cropstart: null,
    cropmove: null,
    cropend: null,
    crop: null,
    zoom: null
  };
  var TEMPLATE = '<div class="cropper-container" touch-action="none">' + '<div class="cropper-wrap-box">' + '<div class="cropper-canvas"></div>' + '</div>' + '<div class="cropper-drag-box"></div>' + '<div class="cropper-crop-box">' + '<span class="cropper-view-box"></span>' + '<span class="cropper-dashed dashed-h"></span>' + '<span class="cropper-dashed dashed-v"></span>' + '<span class="cropper-center"></span>' + '<span class="cropper-face"></span>' + '<span class="cropper-line line-e" data-cropper-action="e"></span>' + '<span class="cropper-line line-n" data-cropper-action="n"></span>' + '<span class="cropper-line line-w" data-cropper-action="w"></span>' + '<span class="cropper-line line-s" data-cropper-action="s"></span>' + '<span class="cropper-point point-e" data-cropper-action="e"></span>' + '<span class="cropper-point point-n" data-cropper-action="n"></span>' + '<span class="cropper-point point-w" data-cropper-action="w"></span>' + '<span class="cropper-point point-s" data-cropper-action="s"></span>' + '<span class="cropper-point point-ne" data-cropper-action="ne"></span>' + '<span class="cropper-point point-nw" data-cropper-action="nw"></span>' + '<span class="cropper-point point-sw" data-cropper-action="sw"></span>' + '<span class="cropper-point point-se" data-cropper-action="se"></span>' + '</div>' + '</div>';
  /**
   * Check if the given value is not a number.
   */

  var isNaN = Number.isNaN || WINDOW.isNaN;
  /**
   * Check if the given value is a number.
   * @param {*} value - The value to check.
   * @returns {boolean} Returns `true` if the given value is a number, else `false`.
   */

  function isNumber(value) {
    return typeof value === 'number' && !isNaN(value);
  }
  /**
   * Check if the given value is a positive number.
   * @param {*} value - The value to check.
   * @returns {boolean} Returns `true` if the given value is a positive number, else `false`.
   */


  var isPositiveNumber = function isPositiveNumber(value) {
    return value > 0 && value < Infinity;
  };
  /**
   * Check if the given value is undefined.
   * @param {*} value - The value to check.
   * @returns {boolean} Returns `true` if the given value is undefined, else `false`.
   */


  function isUndefined(value) {
    return typeof value === 'undefined';
  }
  /**
   * Check if the given value is an object.
   * @param {*} value - The value to check.
   * @returns {boolean} Returns `true` if the given value is an object, else `false`.
   */


  function isObject(value) {
    return _typeof(value) === 'object' && value !== null;
  }

  var hasOwnProperty = Object.prototype.hasOwnProperty;
  /**
   * Check if the given value is a plain object.
   * @param {*} value - The value to check.
   * @returns {boolean} Returns `true` if the given value is a plain object, else `false`.
   */

  function isPlainObject(value) {
    if (!isObject(value)) {
      return false;
    }

    try {
      var _constructor = value.constructor;
      var prototype = _constructor.prototype;
      return _constructor && prototype && hasOwnProperty.call(prototype, 'isPrototypeOf');
    } catch (error) {
      return false;
    }
  }
  /**
   * Check if the given value is a function.
   * @param {*} value - The value to check.
   * @returns {boolean} Returns `true` if the given value is a function, else `false`.
   */


  function isFunction(value) {
    return typeof value === 'function';
  }

  var slice = Array.prototype.slice;
  /**
   * Convert array-like or iterable object to an array.
   * @param {*} value - The value to convert.
   * @returns {Array} Returns a new array.
   */

  function toArray(value) {
    return Array.from ? Array.from(value) : slice.call(value);
  }
  /**
   * Iterate the given data.
   * @param {*} data - The data to iterate.
   * @param {Function} callback - The process function for each element.
   * @returns {*} The original data.
   */


  function forEach(data, callback) {
    if (data && isFunction(callback)) {
      if (Array.isArray(data) || isNumber(data.length)
      /* array-like */
      ) {
        toArray(data).forEach(function (value, key) {
          callback.call(data, value, key, data);
        });
      } else if (isObject(data)) {
        Object.keys(data).forEach(function (key) {
          callback.call(data, data[key], key, data);
        });
      }
    }

    return data;
  }
  /**
   * Extend the given object.
   * @param {*} target - The target object to extend.
   * @param {*} args - The rest objects for merging to the target object.
   * @returns {Object} The extended object.
   */


  var assign = Object.assign || function assign(target) {
    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
      args[_key - 1] = arguments[_key];
    }

    if (isObject(target) && args.length > 0) {
      args.forEach(function (arg) {
        if (isObject(arg)) {
          Object.keys(arg).forEach(function (key) {
            target[key] = arg[key];
          });
        }
      });
    }

    return target;
  };

  var REGEXP_DECIMALS = /\.\d*(?:0|9){12}\d*$/;
  /**
   * Normalize decimal number.
   * Check out {@link https://0.30000000000000004.com/}
   * @param {number} value - The value to normalize.
   * @param {number} [times=100000000000] - The times for normalizing.
   * @returns {number} Returns the normalized number.
   */

  function normalizeDecimalNumber(value) {
    var times = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 100000000000;
    return REGEXP_DECIMALS.test(value) ? Math.round(value * times) / times : value;
  }

  var REGEXP_SUFFIX = /^width|height|left|top|marginLeft|marginTop$/;
  /**
   * Apply styles to the given element.
   * @param {Element} element - The target element.
   * @param {Object} styles - The styles for applying.
   */

  function setStyle(element, styles) {
    var style = element.style;
    forEach(styles, function (value, property) {
      if (REGEXP_SUFFIX.test(property) && isNumber(value)) {
        value = "".concat(value, "px");
      }

      style[property] = value;
    });
  }
  /**
   * Check if the given element has a special class.
   * @param {Element} element - The element to check.
   * @param {string} value - The class to search.
   * @returns {boolean} Returns `true` if the special class was found.
   */


  function hasClass(element, value) {
    return element.classList ? element.classList.contains(value) : element.className.indexOf(value) > -1;
  }
  /**
   * Add classes to the given element.
   * @param {Element} element - The target element.
   * @param {string} value - The classes to be added.
   */


  function addClass(element, value) {
    if (!value) {
      return;
    }

    if (isNumber(element.length)) {
      forEach(element, function (elem) {
        addClass(elem, value);
      });
      return;
    }

    if (element.classList) {
      element.classList.add(value);
      return;
    }

    var className = element.className.trim();

    if (!className) {
      element.className = value;
    } else if (className.indexOf(value) < 0) {
      element.className = "".concat(className, " ").concat(value);
    }
  }
  /**
   * Remove classes from the given element.
   * @param {Element} element - The target element.
   * @param {string} value - The classes to be removed.
   */


  function removeClass(element, value) {
    if (!value) {
      return;
    }

    if (isNumber(element.length)) {
      forEach(element, function (elem) {
        removeClass(elem, value);
      });
      return;
    }

    if (element.classList) {
      element.classList.remove(value);
      return;
    }

    if (element.className.indexOf(value) >= 0) {
      element.className = element.className.replace(value, '');
    }
  }
  /**
   * Add or remove classes from the given element.
   * @param {Element} element - The target element.
   * @param {string} value - The classes to be toggled.
   * @param {boolean} added - Add only.
   */


  function toggleClass(element, value, added) {
    if (!value) {
      return;
    }

    if (isNumber(element.length)) {
      forEach(element, function (elem) {
        toggleClass(elem, value, added);
      });
      return;
    } // IE10-11 doesn't support the second parameter of `classList.toggle`


    if (added) {
      addClass(element, value);
    } else {
      removeClass(element, value);
    }
  }

  var REGEXP_CAMEL_CASE = /([a-z\d])([A-Z])/g;
  /**
   * Transform the given string from camelCase to kebab-case
   * @param {string} value - The value to transform.
   * @returns {string} The transformed value.
   */

  function toParamCase(value) {
    return value.replace(REGEXP_CAMEL_CASE, '$1-$2').toLowerCase();
  }
  /**
   * Get data from the given element.
   * @param {Element} element - The target element.
   * @param {string} name - The data key to get.
   * @returns {string} The data value.
   */


  function getData(element, name) {
    if (isObject(element[name])) {
      return element[name];
    }

    if (element.dataset) {
      return element.dataset[name];
    }

    return element.getAttribute("data-".concat(toParamCase(name)));
  }
  /**
   * Set data to the given element.
   * @param {Element} element - The target element.
   * @param {string} name - The data key to set.
   * @param {string} data - The data value.
   */


  function setData(element, name, data) {
    if (isObject(data)) {
      element[name] = data;
    } else if (element.dataset) {
      element.dataset[name] = data;
    } else {
      element.setAttribute("data-".concat(toParamCase(name)), data);
    }
  }
  /**
   * Remove data from the given element.
   * @param {Element} element - The target element.
   * @param {string} name - The data key to remove.
   */


  function removeData(element, name) {
    if (isObject(element[name])) {
      try {
        delete element[name];
      } catch (error) {
        element[name] = undefined;
      }
    } else if (element.dataset) {
      // #128 Safari not allows to delete dataset property
      try {
        delete element.dataset[name];
      } catch (error) {
        element.dataset[name] = undefined;
      }
    } else {
      element.removeAttribute("data-".concat(toParamCase(name)));
    }
  }

  var REGEXP_SPACES = /\s\s*/;

  var onceSupported = function () {
    var supported = false;

    if (IS_BROWSER) {
      var once = false;

      var listener = function listener() {};

      var options = Object.defineProperty({}, 'once', {
        get: function get() {
          supported = true;
          return once;
        },

        /**
         * This setter can fix a `TypeError` in strict mode
         * {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Errors/Getter_only}
         * @param {boolean} value - The value to set
         */
        set: function set(value) {
          once = value;
        }
      });
      WINDOW.addEventListener('test', listener, options);
      WINDOW.removeEventListener('test', listener, options);
    }

    return supported;
  }();
  /**
   * Remove event listener from the target element.
   * @param {Element} element - The event target.
   * @param {string} type - The event type(s).
   * @param {Function} listener - The event listener.
   * @param {Object} options - The event options.
   */


  function removeListener(element, type, listener) {
    var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};
    var handler = listener;
    type.trim().split(REGEXP_SPACES).forEach(function (event) {
      if (!onceSupported) {
        var listeners = element.listeners;

        if (listeners && listeners[event] && listeners[event][listener]) {
          handler = listeners[event][listener];
          delete listeners[event][listener];

          if (Object.keys(listeners[event]).length === 0) {
            delete listeners[event];
          }

          if (Object.keys(listeners).length === 0) {
            delete element.listeners;
          }
        }
      }

      element.removeEventListener(event, handler, options);
    });
  }
  /**
   * Add event listener to the target element.
   * @param {Element} element - The event target.
   * @param {string} type - The event type(s).
   * @param {Function} listener - The event listener.
   * @param {Object} options - The event options.
   */


  function addListener(element, type, listener) {
    var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};
    var _handler = listener;
    type.trim().split(REGEXP_SPACES).forEach(function (event) {
      if (options.once && !onceSupported) {
        var _element$listeners = element.listeners,
            listeners = _element$listeners === void 0 ? {} : _element$listeners;

        _handler = function handler() {
          delete listeners[event][listener];
          element.removeEventListener(event, _handler, options);

          for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
            args[_key2] = arguments[_key2];
          }

          listener.apply(element, args);
        };

        if (!listeners[event]) {
          listeners[event] = {};
        }

        if (listeners[event][listener]) {
          element.removeEventListener(event, listeners[event][listener], options);
        }

        listeners[event][listener] = _handler;
        element.listeners = listeners;
      }

      element.addEventListener(event, _handler, options);
    });
  }
  /**
   * Dispatch event on the target element.
   * @param {Element} element - The event target.
   * @param {string} type - The event type(s).
   * @param {Object} data - The additional event data.
   * @returns {boolean} Indicate if the event is default prevented or not.
   */


  function dispatchEvent(element, type, data) {
    var event; // Event and CustomEvent on IE9-11 are global objects, not constructors

    if (isFunction(Event) && isFunction(CustomEvent)) {
      event = new CustomEvent(type, {
        detail: data,
        bubbles: true,
        cancelable: true
      });
    } else {
      event = document.createEvent('CustomEvent');
      event.initCustomEvent(type, true, true, data);
    }

    return element.dispatchEvent(event);
  }
  /**
   * Get the offset base on the document.
   * @param {Element} element - The target element.
   * @returns {Object} The offset data.
   */


  function getOffset(element) {
    var box = element.getBoundingClientRect();
    return {
      left: box.left + (window.pageXOffset - document.documentElement.clientLeft),
      top: box.top + (window.pageYOffset - document.documentElement.clientTop)
    };
  }

  var location = WINDOW.location;
  var REGEXP_ORIGINS = /^(\w+:)\/\/([^:/?#]*):?(\d*)/i;
  /**
   * Check if the given URL is a cross origin URL.
   * @param {string} url - The target URL.
   * @returns {boolean} Returns `true` if the given URL is a cross origin URL, else `false`.
   */

  function isCrossOriginURL(url) {
    var parts = url.match(REGEXP_ORIGINS);
    return parts !== null && (parts[1] !== location.protocol || parts[2] !== location.hostname || parts[3] !== location.port);
  }
  /**
   * Add timestamp to the given URL.
   * @param {string} url - The target URL.
   * @returns {string} The result URL.
   */


  function addTimestamp(url) {
    var timestamp = "timestamp=".concat(new Date().getTime());
    return url + (url.indexOf('?') === -1 ? '?' : '&') + timestamp;
  }
  /**
   * Get transforms base on the given object.
   * @param {Object} obj - The target object.
   * @returns {string} A string contains transform values.
   */


  function getTransforms(_ref) {
    var rotate = _ref.rotate,
        scaleX = _ref.scaleX,
        scaleY = _ref.scaleY,
        translateX = _ref.translateX,
        translateY = _ref.translateY;
    var values = [];

    if (isNumber(translateX) && translateX !== 0) {
      values.push("translateX(".concat(translateX, "px)"));
    }

    if (isNumber(translateY) && translateY !== 0) {
      values.push("translateY(".concat(translateY, "px)"));
    } // Rotate should come first before scale to match orientation transform


    if (isNumber(rotate) && rotate !== 0) {
      values.push("rotate(".concat(rotate, "deg)"));
    }

    if (isNumber(scaleX) && scaleX !== 1) {
      values.push("scaleX(".concat(scaleX, ")"));
    }

    if (isNumber(scaleY) && scaleY !== 1) {
      values.push("scaleY(".concat(scaleY, ")"));
    }

    var transform = values.length ? values.join(' ') : 'none';
    return {
      WebkitTransform: transform,
      msTransform: transform,
      transform: transform
    };
  }
  /**
   * Get the max ratio of a group of pointers.
   * @param {string} pointers - The target pointers.
   * @returns {number} The result ratio.
   */


  function getMaxZoomRatio(pointers) {
    var pointers2 = _objectSpread2({}, pointers);

    var maxRatio = 0;
    forEach(pointers, function (pointer, pointerId) {
      delete pointers2[pointerId];
      forEach(pointers2, function (pointer2) {
        var x1 = Math.abs(pointer.startX - pointer2.startX);
        var y1 = Math.abs(pointer.startY - pointer2.startY);
        var x2 = Math.abs(pointer.endX - pointer2.endX);
        var y2 = Math.abs(pointer.endY - pointer2.endY);
        var z1 = Math.sqrt(x1 * x1 + y1 * y1);
        var z2 = Math.sqrt(x2 * x2 + y2 * y2);
        var ratio = (z2 - z1) / z1;

        if (Math.abs(ratio) > Math.abs(maxRatio)) {
          maxRatio = ratio;
        }
      });
    });
    return maxRatio;
  }
  /**
   * Get a pointer from an event object.
   * @param {Object} event - The target event object.
   * @param {boolean} endOnly - Indicates if only returns the end point coordinate or not.
   * @returns {Object} The result pointer contains start and/or end point coordinates.
   */


  function getPointer(_ref2, endOnly) {
    var pageX = _ref2.pageX,
        pageY = _ref2.pageY;
    var end = {
      endX: pageX,
      endY: pageY
    };
    return endOnly ? end : _objectSpread2({
      startX: pageX,
      startY: pageY
    }, end);
  }
  /**
   * Get the center point coordinate of a group of pointers.
   * @param {Object} pointers - The target pointers.
   * @returns {Object} The center point coordinate.
   */


  function getPointersCenter(pointers) {
    var pageX = 0;
    var pageY = 0;
    var count = 0;
    forEach(pointers, function (_ref3) {
      var startX = _ref3.startX,
          startY = _ref3.startY;
      pageX += startX;
      pageY += startY;
      count += 1;
    });
    pageX /= count;
    pageY /= count;
    return {
      pageX: pageX,
      pageY: pageY
    };
  }
  /**
   * Get the max sizes in a rectangle under the given aspect ratio.
   * @param {Object} data - The original sizes.
   * @param {string} [type='contain'] - The adjust type.
   * @returns {Object} The result sizes.
   */


  function getAdjustedSizes(_ref4) // or 'cover'
  {
    var aspectRatio = _ref4.aspectRatio,
        height = _ref4.height,
        width = _ref4.width;
    var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'contain';
    var isValidWidth = isPositiveNumber(width);
    var isValidHeight = isPositiveNumber(height);

    if (isValidWidth && isValidHeight) {
      var adjustedWidth = height * aspectRatio;

      if (type === 'contain' && adjustedWidth > width || type === 'cover' && adjustedWidth < width) {
        height = width / aspectRatio;
      } else {
        width = height * aspectRatio;
      }
    } else if (isValidWidth) {
      height = width / aspectRatio;
    } else if (isValidHeight) {
      width = height * aspectRatio;
    }

    return {
      width: width,
      height: height
    };
  }
  /**
   * Get the new sizes of a rectangle after rotated.
   * @param {Object} data - The original sizes.
   * @returns {Object} The result sizes.
   */


  function getRotatedSizes(_ref5) {
    var width = _ref5.width,
        height = _ref5.height,
        degree = _ref5.degree;
    degree = Math.abs(degree) % 180;

    if (degree === 90) {
      return {
        width: height,
        height: width
      };
    }

    var arc = degree % 90 * Math.PI / 180;
    var sinArc = Math.sin(arc);
    var cosArc = Math.cos(arc);
    var newWidth = width * cosArc + height * sinArc;
    var newHeight = width * sinArc + height * cosArc;
    return degree > 90 ? {
      width: newHeight,
      height: newWidth
    } : {
      width: newWidth,
      height: newHeight
    };
  }
  /**
   * Get a canvas which drew the given image.
   * @param {HTMLImageElement} image - The image for drawing.
   * @param {Object} imageData - The image data.
   * @param {Object} canvasData - The canvas data.
   * @param {Object} options - The options.
   * @returns {HTMLCanvasElement} The result canvas.
   */


  function getSourceCanvas(image, _ref6, _ref7, _ref8) {
    var imageAspectRatio = _ref6.aspectRatio,
        imageNaturalWidth = _ref6.naturalWidth,
        imageNaturalHeight = _ref6.naturalHeight,
        _ref6$rotate = _ref6.rotate,
        rotate = _ref6$rotate === void 0 ? 0 : _ref6$rotate,
        _ref6$scaleX = _ref6.scaleX,
        scaleX = _ref6$scaleX === void 0 ? 1 : _ref6$scaleX,
        _ref6$scaleY = _ref6.scaleY,
        scaleY = _ref6$scaleY === void 0 ? 1 : _ref6$scaleY;
    var aspectRatio = _ref7.aspectRatio,
        naturalWidth = _ref7.naturalWidth,
        naturalHeight = _ref7.naturalHeight;
    var _ref8$fillColor = _ref8.fillColor,
        fillColor = _ref8$fillColor === void 0 ? 'transparent' : _ref8$fillColor,
        _ref8$imageSmoothingE = _ref8.imageSmoothingEnabled,
        imageSmoothingEnabled = _ref8$imageSmoothingE === void 0 ? true : _ref8$imageSmoothingE,
        _ref8$imageSmoothingQ = _ref8.imageSmoothingQuality,
        imageSmoothingQuality = _ref8$imageSmoothingQ === void 0 ? 'low' : _ref8$imageSmoothingQ,
        _ref8$maxWidth = _ref8.maxWidth,
        maxWidth = _ref8$maxWidth === void 0 ? Infinity : _ref8$maxWidth,
        _ref8$maxHeight = _ref8.maxHeight,
        maxHeight = _ref8$maxHeight === void 0 ? Infinity : _ref8$maxHeight,
        _ref8$minWidth = _ref8.minWidth,
        minWidth = _ref8$minWidth === void 0 ? 0 : _ref8$minWidth,
        _ref8$minHeight = _ref8.minHeight,
        minHeight = _ref8$minHeight === void 0 ? 0 : _ref8$minHeight;
    var canvas = document.createElement('canvas');
    var context = canvas.getContext('2d');
    var maxSizes = getAdjustedSizes({
      aspectRatio: aspectRatio,
      width: maxWidth,
      height: maxHeight
    });
    var minSizes = getAdjustedSizes({
      aspectRatio: aspectRatio,
      width: minWidth,
      height: minHeight
    }, 'cover');
    var width = Math.min(maxSizes.width, Math.max(minSizes.width, naturalWidth));
    var height = Math.min(maxSizes.height, Math.max(minSizes.height, naturalHeight)); // Note: should always use image's natural sizes for drawing as
    // imageData.naturalWidth === canvasData.naturalHeight when rotate % 180 === 90

    var destMaxSizes = getAdjustedSizes({
      aspectRatio: imageAspectRatio,
      width: maxWidth,
      height: maxHeight
    });
    var destMinSizes = getAdjustedSizes({
      aspectRatio: imageAspectRatio,
      width: minWidth,
      height: minHeight
    }, 'cover');
    var destWidth = Math.min(destMaxSizes.width, Math.max(destMinSizes.width, imageNaturalWidth));
    var destHeight = Math.min(destMaxSizes.height, Math.max(destMinSizes.height, imageNaturalHeight));
    var params = [-destWidth / 2, -destHeight / 2, destWidth, destHeight];
    canvas.width = normalizeDecimalNumber(width);
    canvas.height = normalizeDecimalNumber(height);
    context.fillStyle = fillColor;
    context.fillRect(0, 0, width, height);
    context.save();
    context.translate(width / 2, height / 2);
    context.rotate(rotate * Math.PI / 180);
    context.scale(scaleX, scaleY);
    context.imageSmoothingEnabled = imageSmoothingEnabled;
    context.imageSmoothingQuality = imageSmoothingQuality;
    context.drawImage.apply(context, [image].concat(_toConsumableArray(params.map(function (param) {
      return Math.floor(normalizeDecimalNumber(param));
    }))));
    context.restore();
    return canvas;
  }

  var fromCharCode = String.fromCharCode;
  /**
   * Get string from char code in data view.
   * @param {DataView} dataView - The data view for read.
   * @param {number} start - The start index.
   * @param {number} length - The read length.
   * @returns {string} The read result.
   */

  function getStringFromCharCode(dataView, start, length) {
    var str = '';
    length += start;

    for (var i = start; i < length; i += 1) {
      str += fromCharCode(dataView.getUint8(i));
    }

    return str;
  }

  var REGEXP_DATA_URL_HEAD = /^data:.*,/;
  /**
   * Transform Data URL to array buffer.
   * @param {string} dataURL - The Data URL to transform.
   * @returns {ArrayBuffer} The result array buffer.
   */

  function dataURLToArrayBuffer(dataURL) {
    var base64 = dataURL.replace(REGEXP_DATA_URL_HEAD, '');
    var binary = atob(base64);
    var arrayBuffer = new ArrayBuffer(binary.length);
    var uint8 = new Uint8Array(arrayBuffer);
    forEach(uint8, function (value, i) {
      uint8[i] = binary.charCodeAt(i);
    });
    return arrayBuffer;
  }
  /**
   * Transform array buffer to Data URL.
   * @param {ArrayBuffer} arrayBuffer - The array buffer to transform.
   * @param {string} mimeType - The mime type of the Data URL.
   * @returns {string} The result Data URL.
   */


  function arrayBufferToDataURL(arrayBuffer, mimeType) {
    var chunks = []; // Chunk Typed Array for better performance (#435)

    var chunkSize = 8192;
    var uint8 = new Uint8Array(arrayBuffer);

    while (uint8.length > 0) {
      // XXX: Babel's `toConsumableArray` helper will throw error in IE or Safari 9
      // eslint-disable-next-line prefer-spread
      chunks.push(fromCharCode.apply(null, toArray(uint8.subarray(0, chunkSize))));
      uint8 = uint8.subarray(chunkSize);
    }

    return "data:".concat(mimeType, ";base64,").concat(btoa(chunks.join('')));
  }
  /**
   * Get orientation value from given array buffer.
   * @param {ArrayBuffer} arrayBuffer - The array buffer to read.
   * @returns {number} The read orientation value.
   */


  function resetAndGetOrientation(arrayBuffer) {
    var dataView = new DataView(arrayBuffer);
    var orientation; // Ignores range error when the image does not have correct Exif information

    try {
      var littleEndian;
      var app1Start;
      var ifdStart; // Only handle JPEG image (start by 0xFFD8)

      if (dataView.getUint8(0) === 0xFF && dataView.getUint8(1) === 0xD8) {
        var length = dataView.byteLength;
        var offset = 2;

        while (offset + 1 < length) {
          if (dataView.getUint8(offset) === 0xFF && dataView.getUint8(offset + 1) === 0xE1) {
            app1Start = offset;
            break;
          }

          offset += 1;
        }
      }

      if (app1Start) {
        var exifIDCode = app1Start + 4;
        var tiffOffset = app1Start + 10;

        if (getStringFromCharCode(dataView, exifIDCode, 4) === 'Exif') {
          var endianness = dataView.getUint16(tiffOffset);
          littleEndian = endianness === 0x4949;

          if (littleEndian || endianness === 0x4D4D
          /* bigEndian */
          ) {
            if (dataView.getUint16(tiffOffset + 2, littleEndian) === 0x002A) {
              var firstIFDOffset = dataView.getUint32(tiffOffset + 4, littleEndian);

              if (firstIFDOffset >= 0x00000008) {
                ifdStart = tiffOffset + firstIFDOffset;
              }
            }
          }
        }
      }

      if (ifdStart) {
        var _length = dataView.getUint16(ifdStart, littleEndian);

        var _offset;

        var i;

        for (i = 0; i < _length; i += 1) {
          _offset = ifdStart + i * 12 + 2;

          if (dataView.getUint16(_offset, littleEndian) === 0x0112
          /* Orientation */
          ) {
            // 8 is the offset of the current tag's value
            _offset += 8; // Get the original orientation value

            orientation = dataView.getUint16(_offset, littleEndian); // Override the orientation with its default value

            dataView.setUint16(_offset, 1, littleEndian);
            break;
          }
        }
      }
    } catch (error) {
      orientation = 1;
    }

    return orientation;
  }
  /**
   * Parse Exif Orientation value.
   * @param {number} orientation - The orientation to parse.
   * @returns {Object} The parsed result.
   */


  function parseOrientation(orientation) {
    var rotate = 0;
    var scaleX = 1;
    var scaleY = 1;

    switch (orientation) {
      // Flip horizontal
      case 2:
        scaleX = -1;
        break;
      // Rotate left 180°

      case 3:
        rotate = -180;
        break;
      // Flip vertical

      case 4:
        scaleY = -1;
        break;
      // Flip vertical and rotate right 90°

      case 5:
        rotate = 90;
        scaleY = -1;
        break;
      // Rotate right 90°

      case 6:
        rotate = 90;
        break;
      // Flip horizontal and rotate right 90°

      case 7:
        rotate = 90;
        scaleX = -1;
        break;
      // Rotate left 90°

      case 8:
        rotate = -90;
        break;
    }

    return {
      rotate: rotate,
      scaleX: scaleX,
      scaleY: scaleY
    };
  }

  var render = {
    render: function render() {
      this.initContainer();
      this.initCanvas();
      this.initCropBox();
      this.renderCanvas();

      if (this.cropped) {
        this.renderCropBox();
      }
    },
    initContainer: function initContainer() {
      var element = this.element,
          options = this.options,
          container = this.container,
          cropper = this.cropper;
      var minWidth = Number(options.minContainerWidth);
      var minHeight = Number(options.minContainerHeight);
      addClass(cropper, CLASS_HIDDEN);
      removeClass(element, CLASS_HIDDEN);
      var containerData = {
        width: Math.max(container.offsetWidth, minWidth >= 0 ? minWidth : MIN_CONTAINER_WIDTH),
        height: Math.max(container.offsetHeight, minHeight >= 0 ? minHeight : MIN_CONTAINER_HEIGHT)
      };
      this.containerData = containerData;
      setStyle(cropper, {
        width: containerData.width,
        height: containerData.height
      });
      addClass(element, CLASS_HIDDEN);
      removeClass(cropper, CLASS_HIDDEN);
    },
    // Canvas (image wrapper)
    initCanvas: function initCanvas() {
      var containerData = this.containerData,
          imageData = this.imageData;
      var viewMode = this.options.viewMode;
      var rotated = Math.abs(imageData.rotate) % 180 === 90;
      var naturalWidth = rotated ? imageData.naturalHeight : imageData.naturalWidth;
      var naturalHeight = rotated ? imageData.naturalWidth : imageData.naturalHeight;
      var aspectRatio = naturalWidth / naturalHeight;
      var canvasWidth = containerData.width;
      var canvasHeight = containerData.height;

      if (containerData.height * aspectRatio > containerData.width) {
        if (viewMode === 3) {
          canvasWidth = containerData.height * aspectRatio;
        } else {
          canvasHeight = containerData.width / aspectRatio;
        }
      } else if (viewMode === 3) {
        canvasHeight = containerData.width / aspectRatio;
      } else {
        canvasWidth = containerData.height * aspectRatio;
      }

      var canvasData = {
        aspectRatio: aspectRatio,
        naturalWidth: naturalWidth,
        naturalHeight: naturalHeight,
        width: canvasWidth,
        height: canvasHeight
      };
      this.canvasData = canvasData;
      this.limited = viewMode === 1 || viewMode === 2;
      this.limitCanvas(true, true);
      canvasData.width = Math.min(Math.max(canvasData.width, canvasData.minWidth), canvasData.maxWidth);
      canvasData.height = Math.min(Math.max(canvasData.height, canvasData.minHeight), canvasData.maxHeight);
      canvasData.left = (containerData.width - canvasData.width) / 2;
      canvasData.top = (containerData.height - canvasData.height) / 2;
      canvasData.oldLeft = canvasData.left;
      canvasData.oldTop = canvasData.top;
      this.initialCanvasData = assign({}, canvasData);
    },
    limitCanvas: function limitCanvas(sizeLimited, positionLimited) {
      var options = this.options,
          containerData = this.containerData,
          canvasData = this.canvasData,
          cropBoxData = this.cropBoxData;
      var viewMode = options.viewMode;
      var aspectRatio = canvasData.aspectRatio;
      var cropped = this.cropped && cropBoxData;

      if (sizeLimited) {
        var minCanvasWidth = Number(options.minCanvasWidth) || 0;
        var minCanvasHeight = Number(options.minCanvasHeight) || 0;

        if (viewMode > 1) {
          minCanvasWidth = Math.max(minCanvasWidth, containerData.width);
          minCanvasHeight = Math.max(minCanvasHeight, containerData.height);

          if (viewMode === 3) {
            if (minCanvasHeight * aspectRatio > minCanvasWidth) {
              minCanvasWidth = minCanvasHeight * aspectRatio;
            } else {
              minCanvasHeight = minCanvasWidth / aspectRatio;
            }
          }
        } else if (viewMode > 0) {
          if (minCanvasWidth) {
            minCanvasWidth = Math.max(minCanvasWidth, cropped ? cropBoxData.width : 0);
          } else if (minCanvasHeight) {
            minCanvasHeight = Math.max(minCanvasHeight, cropped ? cropBoxData.height : 0);
          } else if (cropped) {
            minCanvasWidth = cropBoxData.width;
            minCanvasHeight = cropBoxData.height;

            if (minCanvasHeight * aspectRatio > minCanvasWidth) {
              minCanvasWidth = minCanvasHeight * aspectRatio;
            } else {
              minCanvasHeight = minCanvasWidth / aspectRatio;
            }
          }
        }

        var _getAdjustedSizes = getAdjustedSizes({
          aspectRatio: aspectRatio,
          width: minCanvasWidth,
          height: minCanvasHeight
        });

        minCanvasWidth = _getAdjustedSizes.width;
        minCanvasHeight = _getAdjustedSizes.height;
        canvasData.minWidth = minCanvasWidth;
        canvasData.minHeight = minCanvasHeight;
        canvasData.maxWidth = Infinity;
        canvasData.maxHeight = Infinity;
      }

      if (positionLimited) {
        if (viewMode > (cropped ? 0 : 1)) {
          var newCanvasLeft = containerData.width - canvasData.width;
          var newCanvasTop = containerData.height - canvasData.height;
          canvasData.minLeft = Math.min(0, newCanvasLeft);
          canvasData.minTop = Math.min(0, newCanvasTop);
          canvasData.maxLeft = Math.max(0, newCanvasLeft);
          canvasData.maxTop = Math.max(0, newCanvasTop);

          if (cropped && this.limited) {
            canvasData.minLeft = Math.min(cropBoxData.left, cropBoxData.left + (cropBoxData.width - canvasData.width));
            canvasData.minTop = Math.min(cropBoxData.top, cropBoxData.top + (cropBoxData.height - canvasData.height));
            canvasData.maxLeft = cropBoxData.left;
            canvasData.maxTop = cropBoxData.top;

            if (viewMode === 2) {
              if (canvasData.width >= containerData.width) {
                canvasData.minLeft = Math.min(0, newCanvasLeft);
                canvasData.maxLeft = Math.max(0, newCanvasLeft);
              }

              if (canvasData.height >= containerData.height) {
                canvasData.minTop = Math.min(0, newCanvasTop);
                canvasData.maxTop = Math.max(0, newCanvasTop);
              }
            }
          }
        } else {
          canvasData.minLeft = -canvasData.width;
          canvasData.minTop = -canvasData.height;
          canvasData.maxLeft = containerData.width;
          canvasData.maxTop = containerData.height;
        }
      }
    },
    renderCanvas: function renderCanvas(changed, transformed) {
      var canvasData = this.canvasData,
          imageData = this.imageData;

      if (transformed) {
        var _getRotatedSizes = getRotatedSizes({
          width: imageData.naturalWidth * Math.abs(imageData.scaleX || 1),
          height: imageData.naturalHeight * Math.abs(imageData.scaleY || 1),
          degree: imageData.rotate || 0
        }),
            naturalWidth = _getRotatedSizes.width,
            naturalHeight = _getRotatedSizes.height;

        var width = canvasData.width * (naturalWidth / canvasData.naturalWidth);
        var height = canvasData.height * (naturalHeight / canvasData.naturalHeight);
        canvasData.left -= (width - canvasData.width) / 2;
        canvasData.top -= (height - canvasData.height) / 2;
        canvasData.width = width;
        canvasData.height = height;
        canvasData.aspectRatio = naturalWidth / naturalHeight;
        canvasData.naturalWidth = naturalWidth;
        canvasData.naturalHeight = naturalHeight;
        this.limitCanvas(true, false);
      }

      if (canvasData.width > canvasData.maxWidth || canvasData.width < canvasData.minWidth) {
        canvasData.left = canvasData.oldLeft;
      }

      if (canvasData.height > canvasData.maxHeight || canvasData.height < canvasData.minHeight) {
        canvasData.top = canvasData.oldTop;
      }

      canvasData.width = Math.min(Math.max(canvasData.width, canvasData.minWidth), canvasData.maxWidth);
      canvasData.height = Math.min(Math.max(canvasData.height, canvasData.minHeight), canvasData.maxHeight);
      this.limitCanvas(false, true);
      canvasData.left = Math.min(Math.max(canvasData.left, canvasData.minLeft), canvasData.maxLeft);
      canvasData.top = Math.min(Math.max(canvasData.top, canvasData.minTop), canvasData.maxTop);
      canvasData.oldLeft = canvasData.left;
      canvasData.oldTop = canvasData.top;
      setStyle(this.canvas, assign({
        width: canvasData.width,
        height: canvasData.height
      }, getTransforms({
        translateX: canvasData.left,
        translateY: canvasData.top
      })));
      this.renderImage(changed);

      if (this.cropped && this.limited) {
        this.limitCropBox(true, true);
      }
    },
    renderImage: function renderImage(changed) {
      var canvasData = this.canvasData,
          imageData = this.imageData;
      var width = imageData.naturalWidth * (canvasData.width / canvasData.naturalWidth);
      var height = imageData.naturalHeight * (canvasData.height / canvasData.naturalHeight);
      assign(imageData, {
        width: width,
        height: height,
        left: (canvasData.width - width) / 2,
        top: (canvasData.height - height) / 2
      });
      setStyle(this.image, assign({
        width: imageData.width,
        height: imageData.height
      }, getTransforms(assign({
        translateX: imageData.left,
        translateY: imageData.top
      }, imageData))));

      if (changed) {
        this.output();
      }
    },
    initCropBox: function initCropBox() {
      var options = this.options,
          canvasData = this.canvasData;
      var aspectRatio = options.aspectRatio || options.initialAspectRatio;
      var autoCropArea = Number(options.autoCropArea) || 0.8;
      var cropBoxData = {
        width: canvasData.width,
        height: canvasData.height
      };

      if (aspectRatio) {
        if (canvasData.height * aspectRatio > canvasData.width) {
          cropBoxData.height = cropBoxData.width / aspectRatio;
        } else {
          cropBoxData.width = cropBoxData.height * aspectRatio;
        }
      }

      this.cropBoxData = cropBoxData;
      this.limitCropBox(true, true); // Initialize auto crop area

      cropBoxData.width = Math.min(Math.max(cropBoxData.width, cropBoxData.minWidth), cropBoxData.maxWidth);
      cropBoxData.height = Math.min(Math.max(cropBoxData.height, cropBoxData.minHeight), cropBoxData.maxHeight); // The width/height of auto crop area must large than "minWidth/Height"

      cropBoxData.width = Math.max(cropBoxData.minWidth, cropBoxData.width * autoCropArea);
      cropBoxData.height = Math.max(cropBoxData.minHeight, cropBoxData.height * autoCropArea);
      cropBoxData.left = canvasData.left + (canvasData.width - cropBoxData.width) / 2;
      cropBoxData.top = canvasData.top + (canvasData.height - cropBoxData.height) / 2;
      cropBoxData.oldLeft = cropBoxData.left;
      cropBoxData.oldTop = cropBoxData.top;
      this.initialCropBoxData = assign({}, cropBoxData);
    },
    limitCropBox: function limitCropBox(sizeLimited, positionLimited) {
      var options = this.options,
          containerData = this.containerData,
          canvasData = this.canvasData,
          cropBoxData = this.cropBoxData,
          limited = this.limited;
      var aspectRatio = options.aspectRatio;

      if (sizeLimited) {
        var minCropBoxWidth = Number(options.minCropBoxWidth) || 0;
        var minCropBoxHeight = Number(options.minCropBoxHeight) || 0;
        var maxCropBoxWidth = limited ? Math.min(containerData.width, canvasData.width, canvasData.width + canvasData.left, containerData.width - canvasData.left) : containerData.width;
        var maxCropBoxHeight = limited ? Math.min(containerData.height, canvasData.height, canvasData.height + canvasData.top, containerData.height - canvasData.top) : containerData.height; // The min/maxCropBoxWidth/Height must be less than container's width/height

        minCropBoxWidth = Math.min(minCropBoxWidth, containerData.width);
        minCropBoxHeight = Math.min(minCropBoxHeight, containerData.height);

        if (aspectRatio) {
          if (minCropBoxWidth && minCropBoxHeight) {
            if (minCropBoxHeight * aspectRatio > minCropBoxWidth) {
              minCropBoxHeight = minCropBoxWidth / aspectRatio;
            } else {
              minCropBoxWidth = minCropBoxHeight * aspectRatio;
            }
          } else if (minCropBoxWidth) {
            minCropBoxHeight = minCropBoxWidth / aspectRatio;
          } else if (minCropBoxHeight) {
            minCropBoxWidth = minCropBoxHeight * aspectRatio;
          }

          if (maxCropBoxHeight * aspectRatio > maxCropBoxWidth) {
            maxCropBoxHeight = maxCropBoxWidth / aspectRatio;
          } else {
            maxCropBoxWidth = maxCropBoxHeight * aspectRatio;
          }
        } // The minWidth/Height must be less than maxWidth/Height


        cropBoxData.minWidth = Math.min(minCropBoxWidth, maxCropBoxWidth);
        cropBoxData.minHeight = Math.min(minCropBoxHeight, maxCropBoxHeight);
        cropBoxData.maxWidth = maxCropBoxWidth;
        cropBoxData.maxHeight = maxCropBoxHeight;
      }

      if (positionLimited) {
        if (limited) {
          cropBoxData.minLeft = Math.max(0, canvasData.left);
          cropBoxData.minTop = Math.max(0, canvasData.top);
          cropBoxData.maxLeft = Math.min(containerData.width, canvasData.left + canvasData.width) - cropBoxData.width;
          cropBoxData.maxTop = Math.min(containerData.height, canvasData.top + canvasData.height) - cropBoxData.height;
        } else {
          cropBoxData.minLeft = 0;
          cropBoxData.minTop = 0;
          cropBoxData.maxLeft = containerData.width - cropBoxData.width;
          cropBoxData.maxTop = containerData.height - cropBoxData.height;
        }
      }
    },
    renderCropBox: function renderCropBox() {
      var options = this.options,
          containerData = this.containerData,
          cropBoxData = this.cropBoxData;

      if (cropBoxData.width > cropBoxData.maxWidth || cropBoxData.width < cropBoxData.minWidth) {
        cropBoxData.left = cropBoxData.oldLeft;
      }

      if (cropBoxData.height > cropBoxData.maxHeight || cropBoxData.height < cropBoxData.minHeight) {
        cropBoxData.top = cropBoxData.oldTop;
      }

      cropBoxData.width = Math.min(Math.max(cropBoxData.width, cropBoxData.minWidth), cropBoxData.maxWidth);
      cropBoxData.height = Math.min(Math.max(cropBoxData.height, cropBoxData.minHeight), cropBoxData.maxHeight);
      this.limitCropBox(false, true);
      cropBoxData.left = Math.min(Math.max(cropBoxData.left, cropBoxData.minLeft), cropBoxData.maxLeft);
      cropBoxData.top = Math.min(Math.max(cropBoxData.top, cropBoxData.minTop), cropBoxData.maxTop);
      cropBoxData.oldLeft = cropBoxData.left;
      cropBoxData.oldTop = cropBoxData.top;

      if (options.movable && options.cropBoxMovable) {
        // Turn to move the canvas when the crop box is equal to the container
        setData(this.face, DATA_ACTION, cropBoxData.width >= containerData.width && cropBoxData.height >= containerData.height ? ACTION_MOVE : ACTION_ALL);
      }

      setStyle(this.cropBox, assign({
        width: cropBoxData.width,
        height: cropBoxData.height
      }, getTransforms({
        translateX: cropBoxData.left,
        translateY: cropBoxData.top
      })));

      if (this.cropped && this.limited) {
        this.limitCanvas(true, true);
      }

      if (!this.disabled) {
        this.output();
      }
    },
    output: function output() {
      this.preview();
      dispatchEvent(this.element, EVENT_CROP, this.getData());
    }
  };
  var preview = {
    initPreview: function initPreview() {
      var element = this.element,
          crossOrigin = this.crossOrigin;
      var preview = this.options.preview;
      var url = crossOrigin ? this.crossOriginUrl : this.url;
      var alt = element.alt || 'The image to preview';
      var image = document.createElement('img');

      if (crossOrigin) {
        image.crossOrigin = crossOrigin;
      }

      image.src = url;
      image.alt = alt;
      this.viewBox.appendChild(image);
      this.viewBoxImage = image;

      if (!preview) {
        return;
      }

      var previews = preview;

      if (typeof preview === 'string') {
        previews = element.ownerDocument.querySelectorAll(preview);
      } else if (preview.querySelector) {
        previews = [preview];
      }

      this.previews = previews;
      forEach(previews, function (el) {
        var img = document.createElement('img'); // Save the original size for recover

        setData(el, DATA_PREVIEW, {
          width: el.offsetWidth,
          height: el.offsetHeight,
          html: el.innerHTML
        });

        if (crossOrigin) {
          img.crossOrigin = crossOrigin;
        }

        img.src = url;
        img.alt = alt;
        /**
         * Override img element styles
         * Add `display:block` to avoid margin top issue
         * Add `height:auto` to override `height` attribute on IE8
         * (Occur only when margin-top <= -height)
         */

        img.style.cssText = 'display:block;' + 'width:100%;' + 'height:auto;' + 'min-width:0!important;' + 'min-height:0!important;' + 'max-width:none!important;' + 'max-height:none!important;' + 'image-orientation:0deg!important;"';
        el.innerHTML = '';
        el.appendChild(img);
      });
    },
    resetPreview: function resetPreview() {
      forEach(this.previews, function (element) {
        var data = getData(element, DATA_PREVIEW);
        setStyle(element, {
          width: data.width,
          height: data.height
        });
        element.innerHTML = data.html;
        removeData(element, DATA_PREVIEW);
      });
    },
    preview: function preview() {
      var imageData = this.imageData,
          canvasData = this.canvasData,
          cropBoxData = this.cropBoxData;
      var cropBoxWidth = cropBoxData.width,
          cropBoxHeight = cropBoxData.height;
      var width = imageData.width,
          height = imageData.height;
      var left = cropBoxData.left - canvasData.left - imageData.left;
      var top = cropBoxData.top - canvasData.top - imageData.top;

      if (!this.cropped || this.disabled) {
        return;
      }

      setStyle(this.viewBoxImage, assign({
        width: width,
        height: height
      }, getTransforms(assign({
        translateX: -left,
        translateY: -top
      }, imageData))));
      forEach(this.previews, function (element) {
        var data = getData(element, DATA_PREVIEW);
        var originalWidth = data.width;
        var originalHeight = data.height;
        var newWidth = originalWidth;
        var newHeight = originalHeight;
        var ratio = 1;

        if (cropBoxWidth) {
          ratio = originalWidth / cropBoxWidth;
          newHeight = cropBoxHeight * ratio;
        }

        if (cropBoxHeight && newHeight > originalHeight) {
          ratio = originalHeight / cropBoxHeight;
          newWidth = cropBoxWidth * ratio;
          newHeight = originalHeight;
        }

        setStyle(element, {
          width: newWidth,
          height: newHeight
        });
        setStyle(element.getElementsByTagName('img')[0], assign({
          width: width * ratio,
          height: height * ratio
        }, getTransforms(assign({
          translateX: -left * ratio,
          translateY: -top * ratio
        }, imageData))));
      });
    }
  };
  var events = {
    bind: function bind() {
      var element = this.element,
          options = this.options,
          cropper = this.cropper;

      if (isFunction(options.cropstart)) {
        addListener(element, EVENT_CROP_START, options.cropstart);
      }

      if (isFunction(options.cropmove)) {
        addListener(element, EVENT_CROP_MOVE, options.cropmove);
      }

      if (isFunction(options.cropend)) {
        addListener(element, EVENT_CROP_END, options.cropend);
      }

      if (isFunction(options.crop)) {
        addListener(element, EVENT_CROP, options.crop);
      }

      if (isFunction(options.zoom)) {
        addListener(element, EVENT_ZOOM, options.zoom);
      }

      addListener(cropper, EVENT_POINTER_DOWN, this.onCropStart = this.cropStart.bind(this));

      if (options.zoomable && options.zoomOnWheel) {
        addListener(cropper, EVENT_WHEEL, this.onWheel = this.wheel.bind(this), {
          passive: false,
          capture: true
        });
      }

      if (options.toggleDragModeOnDblclick) {
        addListener(cropper, EVENT_DBLCLICK, this.onDblclick = this.dblclick.bind(this));
      }

      addListener(element.ownerDocument, EVENT_POINTER_MOVE, this.onCropMove = this.cropMove.bind(this));
      addListener(element.ownerDocument, EVENT_POINTER_UP, this.onCropEnd = this.cropEnd.bind(this));

      if (options.responsive) {
        addListener(window, EVENT_RESIZE, this.onResize = this.resize.bind(this));
      }
    },
    unbind: function unbind() {
      var element = this.element,
          options = this.options,
          cropper = this.cropper;

      if (isFunction(options.cropstart)) {
        removeListener(element, EVENT_CROP_START, options.cropstart);
      }

      if (isFunction(options.cropmove)) {
        removeListener(element, EVENT_CROP_MOVE, options.cropmove);
      }

      if (isFunction(options.cropend)) {
        removeListener(element, EVENT_CROP_END, options.cropend);
      }

      if (isFunction(options.crop)) {
        removeListener(element, EVENT_CROP, options.crop);
      }

      if (isFunction(options.zoom)) {
        removeListener(element, EVENT_ZOOM, options.zoom);
      }

      removeListener(cropper, EVENT_POINTER_DOWN, this.onCropStart);

      if (options.zoomable && options.zoomOnWheel) {
        removeListener(cropper, EVENT_WHEEL, this.onWheel, {
          passive: false,
          capture: true
        });
      }

      if (options.toggleDragModeOnDblclick) {
        removeListener(cropper, EVENT_DBLCLICK, this.onDblclick);
      }

      removeListener(element.ownerDocument, EVENT_POINTER_MOVE, this.onCropMove);
      removeListener(element.ownerDocument, EVENT_POINTER_UP, this.onCropEnd);

      if (options.responsive) {
        removeListener(window, EVENT_RESIZE, this.onResize);
      }
    }
  };
  var handlers = {
    resize: function resize() {
      if (this.disabled) {
        return;
      }

      var options = this.options,
          container = this.container,
          containerData = this.containerData;
      var ratioX = container.offsetWidth / containerData.width;
      var ratioY = container.offsetHeight / containerData.height;
      var ratio = Math.abs(ratioX - 1) > Math.abs(ratioY - 1) ? ratioX : ratioY; // Resize when width changed or height changed

      if (ratio !== 1) {
        var canvasData;
        var cropBoxData;

        if (options.restore) {
          canvasData = this.getCanvasData();
          cropBoxData = this.getCropBoxData();
        }

        this.render();

        if (options.restore) {
          this.setCanvasData(forEach(canvasData, function (n, i) {
            canvasData[i] = n * ratio;
          }));
          this.setCropBoxData(forEach(cropBoxData, function (n, i) {
            cropBoxData[i] = n * ratio;
          }));
        }
      }
    },
    dblclick: function dblclick() {
      if (this.disabled || this.options.dragMode === DRAG_MODE_NONE) {
        return;
      }

      this.setDragMode(hasClass(this.dragBox, CLASS_CROP) ? DRAG_MODE_MOVE : DRAG_MODE_CROP);
    },
    wheel: function wheel(event) {
      var _this = this;

      var ratio = Number(this.options.wheelZoomRatio) || 0.1;
      var delta = 1;

      if (this.disabled) {
        return;
      }

      event.preventDefault(); // Limit wheel speed to prevent zoom too fast (#21)

      if (this.wheeling) {
        return;
      }

      this.wheeling = true;
      setTimeout(function () {
        _this.wheeling = false;
      }, 50);

      if (event.deltaY) {
        delta = event.deltaY > 0 ? 1 : -1;
      } else if (event.wheelDelta) {
        delta = -event.wheelDelta / 120;
      } else if (event.detail) {
        delta = event.detail > 0 ? 1 : -1;
      }

      this.zoom(-delta * ratio, event);
    },
    cropStart: function cropStart(event) {
      var buttons = event.buttons,
          button = event.button;

      if (this.disabled // Handle mouse event and pointer event and ignore touch event
      || (event.type === 'mousedown' || event.type === 'pointerdown' && event.pointerType === 'mouse') && ( // No primary button (Usually the left button)
      isNumber(buttons) && buttons !== 1 || isNumber(button) && button !== 0 // Open context menu
      || event.ctrlKey)) {
        return;
      }

      var options = this.options,
          pointers = this.pointers;
      var action;

      if (event.changedTouches) {
        // Handle touch event
        forEach(event.changedTouches, function (touch) {
          pointers[touch.identifier] = getPointer(touch);
        });
      } else {
        // Handle mouse event and pointer event
        pointers[event.pointerId || 0] = getPointer(event);
      }

      if (Object.keys(pointers).length > 1 && options.zoomable && options.zoomOnTouch) {
        action = ACTION_ZOOM;
      } else {
        action = getData(event.target, DATA_ACTION);
      }

      if (!REGEXP_ACTIONS.test(action)) {
        return;
      }

      if (dispatchEvent(this.element, EVENT_CROP_START, {
        originalEvent: event,
        action: action
      }) === false) {
        return;
      } // This line is required for preventing page zooming in iOS browsers


      event.preventDefault();
      this.action = action;
      this.cropping = false;

      if (action === ACTION_CROP) {
        this.cropping = true;
        addClass(this.dragBox, CLASS_MODAL);
      }
    },
    cropMove: function cropMove(event) {
      var action = this.action;

      if (this.disabled || !action) {
        return;
      }

      var pointers = this.pointers;
      event.preventDefault();

      if (dispatchEvent(this.element, EVENT_CROP_MOVE, {
        originalEvent: event,
        action: action
      }) === false) {
        return;
      }

      if (event.changedTouches) {
        forEach(event.changedTouches, function (touch) {
          // The first parameter should not be undefined (#432)
          assign(pointers[touch.identifier] || {}, getPointer(touch, true));
        });
      } else {
        assign(pointers[event.pointerId || 0] || {}, getPointer(event, true));
      }

      this.change(event);
    },
    cropEnd: function cropEnd(event) {
      if (this.disabled) {
        return;
      }

      var action = this.action,
          pointers = this.pointers;

      if (event.changedTouches) {
        forEach(event.changedTouches, function (touch) {
          delete pointers[touch.identifier];
        });
      } else {
        delete pointers[event.pointerId || 0];
      }

      if (!action) {
        return;
      }

      event.preventDefault();

      if (!Object.keys(pointers).length) {
        this.action = '';
      }

      if (this.cropping) {
        this.cropping = false;
        toggleClass(this.dragBox, CLASS_MODAL, this.cropped && this.options.modal);
      }

      dispatchEvent(this.element, EVENT_CROP_END, {
        originalEvent: event,
        action: action
      });
    }
  };
  var change = {
    change: function change(event) {
      var options = this.options,
          canvasData = this.canvasData,
          containerData = this.containerData,
          cropBoxData = this.cropBoxData,
          pointers = this.pointers;
      var action = this.action;
      var aspectRatio = options.aspectRatio;
      var left = cropBoxData.left,
          top = cropBoxData.top,
          width = cropBoxData.width,
          height = cropBoxData.height;
      var right = left + width;
      var bottom = top + height;
      var minLeft = 0;
      var minTop = 0;
      var maxWidth = containerData.width;
      var maxHeight = containerData.height;
      var renderable = true;
      var offset; // Locking aspect ratio in "free mode" by holding shift key

      if (!aspectRatio && event.shiftKey) {
        aspectRatio = width && height ? width / height : 1;
      }

      if (this.limited) {
        minLeft = cropBoxData.minLeft;
        minTop = cropBoxData.minTop;
        maxWidth = minLeft + Math.min(containerData.width, canvasData.width, canvasData.left + canvasData.width);
        maxHeight = minTop + Math.min(containerData.height, canvasData.height, canvasData.top + canvasData.height);
      }

      var pointer = pointers[Object.keys(pointers)[0]];
      var range = {
        x: pointer.endX - pointer.startX,
        y: pointer.endY - pointer.startY
      };

      var check = function check(side) {
        switch (side) {
          case ACTION_EAST:
            if (right + range.x > maxWidth) {
              range.x = maxWidth - right;
            }

            break;

          case ACTION_WEST:
            if (left + range.x < minLeft) {
              range.x = minLeft - left;
            }

            break;

          case ACTION_NORTH:
            if (top + range.y < minTop) {
              range.y = minTop - top;
            }

            break;

          case ACTION_SOUTH:
            if (bottom + range.y > maxHeight) {
              range.y = maxHeight - bottom;
            }

            break;
        }
      };

      switch (action) {
        // Move crop box
        case ACTION_ALL:
          left += range.x;
          top += range.y;
          break;
        // Resize crop box

        case ACTION_EAST:
          if (range.x >= 0 && (right >= maxWidth || aspectRatio && (top <= minTop || bottom >= maxHeight))) {
            renderable = false;
            break;
          }

          check(ACTION_EAST);
          width += range.x;

          if (width < 0) {
            action = ACTION_WEST;
            width = -width;
            left -= width;
          }

          if (aspectRatio) {
            height = width / aspectRatio;
            top += (cropBoxData.height - height) / 2;
          }

          break;

        case ACTION_NORTH:
          if (range.y <= 0 && (top <= minTop || aspectRatio && (left <= minLeft || right >= maxWidth))) {
            renderable = false;
            break;
          }

          check(ACTION_NORTH);
          height -= range.y;
          top += range.y;

          if (height < 0) {
            action = ACTION_SOUTH;
            height = -height;
            top -= height;
          }

          if (aspectRatio) {
            width = height * aspectRatio;
            left += (cropBoxData.width - width) / 2;
          }

          break;

        case ACTION_WEST:
          if (range.x <= 0 && (left <= minLeft || aspectRatio && (top <= minTop || bottom >= maxHeight))) {
            renderable = false;
            break;
          }

          check(ACTION_WEST);
          width -= range.x;
          left += range.x;

          if (width < 0) {
            action = ACTION_EAST;
            width = -width;
            left -= width;
          }

          if (aspectRatio) {
            height = width / aspectRatio;
            top += (cropBoxData.height - height) / 2;
          }

          break;

        case ACTION_SOUTH:
          if (range.y >= 0 && (bottom >= maxHeight || aspectRatio && (left <= minLeft || right >= maxWidth))) {
            renderable = false;
            break;
          }

          check(ACTION_SOUTH);
          height += range.y;

          if (height < 0) {
            action = ACTION_NORTH;
            height = -height;
            top -= height;
          }

          if (aspectRatio) {
            width = height * aspectRatio;
            left += (cropBoxData.width - width) / 2;
          }

          break;

        case ACTION_NORTH_EAST:
          if (aspectRatio) {
            if (range.y <= 0 && (top <= minTop || right >= maxWidth)) {
              renderable = false;
              break;
            }

            check(ACTION_NORTH);
            height -= range.y;
            top += range.y;
            width = height * aspectRatio;
          } else {
            check(ACTION_NORTH);
            check(ACTION_EAST);

            if (range.x >= 0) {
              if (right < maxWidth) {
                width += range.x;
              } else if (range.y <= 0 && top <= minTop) {
                renderable = false;
              }
            } else {
              width += range.x;
            }

            if (range.y <= 0) {
              if (top > minTop) {
                height -= range.y;
                top += range.y;
              }
            } else {
              height -= range.y;
              top += range.y;
            }
          }

          if (width < 0 && height < 0) {
            action = ACTION_SOUTH_WEST;
            height = -height;
            width = -width;
            top -= height;
            left -= width;
          } else if (width < 0) {
            action = ACTION_NORTH_WEST;
            width = -width;
            left -= width;
          } else if (height < 0) {
            action = ACTION_SOUTH_EAST;
            height = -height;
            top -= height;
          }

          break;

        case ACTION_NORTH_WEST:
          if (aspectRatio) {
            if (range.y <= 0 && (top <= minTop || left <= minLeft)) {
              renderable = false;
              break;
            }

            check(ACTION_NORTH);
            height -= range.y;
            top += range.y;
            width = height * aspectRatio;
            left += cropBoxData.width - width;
          } else {
            check(ACTION_NORTH);
            check(ACTION_WEST);

            if (range.x <= 0) {
              if (left > minLeft) {
                width -= range.x;
                left += range.x;
              } else if (range.y <= 0 && top <= minTop) {
                renderable = false;
              }
            } else {
              width -= range.x;
              left += range.x;
            }

            if (range.y <= 0) {
              if (top > minTop) {
                height -= range.y;
                top += range.y;
              }
            } else {
              height -= range.y;
              top += range.y;
            }
          }

          if (width < 0 && height < 0) {
            action = ACTION_SOUTH_EAST;
            height = -height;
            width = -width;
            top -= height;
            left -= width;
          } else if (width < 0) {
            action = ACTION_NORTH_EAST;
            width = -width;
            left -= width;
          } else if (height < 0) {
            action = ACTION_SOUTH_WEST;
            height = -height;
            top -= height;
          }

          break;

        case ACTION_SOUTH_WEST:
          if (aspectRatio) {
            if (range.x <= 0 && (left <= minLeft || bottom >= maxHeight)) {
              renderable = false;
              break;
            }

            check(ACTION_WEST);
            width -= range.x;
            left += range.x;
            height = width / aspectRatio;
          } else {
            check(ACTION_SOUTH);
            check(ACTION_WEST);

            if (range.x <= 0) {
              if (left > minLeft) {
                width -= range.x;
                left += range.x;
              } else if (range.y >= 0 && bottom >= maxHeight) {
                renderable = false;
              }
            } else {
              width -= range.x;
              left += range.x;
            }

            if (range.y >= 0) {
              if (bottom < maxHeight) {
                height += range.y;
              }
            } else {
              height += range.y;
            }
          }

          if (width < 0 && height < 0) {
            action = ACTION_NORTH_EAST;
            height = -height;
            width = -width;
            top -= height;
            left -= width;
          } else if (width < 0) {
            action = ACTION_SOUTH_EAST;
            width = -width;
            left -= width;
          } else if (height < 0) {
            action = ACTION_NORTH_WEST;
            height = -height;
            top -= height;
          }

          break;

        case ACTION_SOUTH_EAST:
          if (aspectRatio) {
            if (range.x >= 0 && (right >= maxWidth || bottom >= maxHeight)) {
              renderable = false;
              break;
            }

            check(ACTION_EAST);
            width += range.x;
            height = width / aspectRatio;
          } else {
            check(ACTION_SOUTH);
            check(ACTION_EAST);

            if (range.x >= 0) {
              if (right < maxWidth) {
                width += range.x;
              } else if (range.y >= 0 && bottom >= maxHeight) {
                renderable = false;
              }
            } else {
              width += range.x;
            }

            if (range.y >= 0) {
              if (bottom < maxHeight) {
                height += range.y;
              }
            } else {
              height += range.y;
            }
          }

          if (width < 0 && height < 0) {
            action = ACTION_NORTH_WEST;
            height = -height;
            width = -width;
            top -= height;
            left -= width;
          } else if (width < 0) {
            action = ACTION_SOUTH_WEST;
            width = -width;
            left -= width;
          } else if (height < 0) {
            action = ACTION_NORTH_EAST;
            height = -height;
            top -= height;
          }

          break;
        // Move canvas

        case ACTION_MOVE:
          this.move(range.x, range.y);
          renderable = false;
          break;
        // Zoom canvas

        case ACTION_ZOOM:
          this.zoom(getMaxZoomRatio(pointers), event);
          renderable = false;
          break;
        // Create crop box

        case ACTION_CROP:
          if (!range.x || !range.y) {
            renderable = false;
            break;
          }

          offset = getOffset(this.cropper);
          left = pointer.startX - offset.left;
          top = pointer.startY - offset.top;
          width = cropBoxData.minWidth;
          height = cropBoxData.minHeight;

          if (range.x > 0) {
            action = range.y > 0 ? ACTION_SOUTH_EAST : ACTION_NORTH_EAST;
          } else if (range.x < 0) {
            left -= width;
            action = range.y > 0 ? ACTION_SOUTH_WEST : ACTION_NORTH_WEST;
          }

          if (range.y < 0) {
            top -= height;
          } // Show the crop box if is hidden


          if (!this.cropped) {
            removeClass(this.cropBox, CLASS_HIDDEN);
            this.cropped = true;

            if (this.limited) {
              this.limitCropBox(true, true);
            }
          }

          break;
      }

      if (renderable) {
        cropBoxData.width = width;
        cropBoxData.height = height;
        cropBoxData.left = left;
        cropBoxData.top = top;
        this.action = action;
        this.renderCropBox();
      } // Override


      forEach(pointers, function (p) {
        p.startX = p.endX;
        p.startY = p.endY;
      });
    }
  };
  var methods = {
    // Show the crop box manually
    crop: function crop() {
      if (this.ready && !this.cropped && !this.disabled) {
        this.cropped = true;
        this.limitCropBox(true, true);

        if (this.options.modal) {
          addClass(this.dragBox, CLASS_MODAL);
        }

        removeClass(this.cropBox, CLASS_HIDDEN);
        this.setCropBoxData(this.initialCropBoxData);
      }

      return this;
    },
    // Reset the image and crop box to their initial states
    reset: function reset() {
      if (this.ready && !this.disabled) {
        this.imageData = assign({}, this.initialImageData);
        this.canvasData = assign({}, this.initialCanvasData);
        this.cropBoxData = assign({}, this.initialCropBoxData);
        this.renderCanvas();

        if (this.cropped) {
          this.renderCropBox();
        }
      }

      return this;
    },
    // Clear the crop box
    clear: function clear() {
      if (this.cropped && !this.disabled) {
        assign(this.cropBoxData, {
          left: 0,
          top: 0,
          width: 0,
          height: 0
        });
        this.cropped = false;
        this.renderCropBox();
        this.limitCanvas(true, true); // Render canvas after crop box rendered

        this.renderCanvas();
        removeClass(this.dragBox, CLASS_MODAL);
        addClass(this.cropBox, CLASS_HIDDEN);
      }

      return this;
    },

    /**
     * Replace the image's src and rebuild the cropper
     * @param {string} url - The new URL.
     * @param {boolean} [hasSameSize] - Indicate if the new image has the same size as the old one.
     * @returns {Cropper} this
     */
    replace: function replace(url) {
      var hasSameSize = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;

      if (!this.disabled && url) {
        if (this.isImg) {
          this.element.src = url;
        }

        if (hasSameSize) {
          this.url = url;
          this.image.src = url;

          if (this.ready) {
            this.viewBoxImage.src = url;
            forEach(this.previews, function (element) {
              element.getElementsByTagName('img')[0].src = url;
            });
          }
        } else {
          if (this.isImg) {
            this.replaced = true;
          }

          this.options.data = null;
          this.uncreate();
          this.load(url);
        }
      }

      return this;
    },
    // Enable (unfreeze) the cropper
    enable: function enable() {
      if (this.ready && this.disabled) {
        this.disabled = false;
        removeClass(this.cropper, CLASS_DISABLED);
      }

      return this;
    },
    // Disable (freeze) the cropper
    disable: function disable() {
      if (this.ready && !this.disabled) {
        this.disabled = true;
        addClass(this.cropper, CLASS_DISABLED);
      }

      return this;
    },

    /**
     * Destroy the cropper and remove the instance from the image
     * @returns {Cropper} this
     */
    destroy: function destroy() {
      var element = this.element;

      if (!element[NAMESPACE]) {
        return this;
      }

      element[NAMESPACE] = undefined;

      if (this.isImg && this.replaced) {
        element.src = this.originalUrl;
      }

      this.uncreate();
      return this;
    },

    /**
     * Move the canvas with relative offsets
     * @param {number} offsetX - The relative offset distance on the x-axis.
     * @param {number} [offsetY=offsetX] - The relative offset distance on the y-axis.
     * @returns {Cropper} this
     */
    move: function move(offsetX) {
      var offsetY = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : offsetX;
      var _this$canvasData = this.canvasData,
          left = _this$canvasData.left,
          top = _this$canvasData.top;
      return this.moveTo(isUndefined(offsetX) ? offsetX : left + Number(offsetX), isUndefined(offsetY) ? offsetY : top + Number(offsetY));
    },

    /**
     * Move the canvas to an absolute point
     * @param {number} x - The x-axis coordinate.
     * @param {number} [y=x] - The y-axis coordinate.
     * @returns {Cropper} this
     */
    moveTo: function moveTo(x) {
      var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : x;
      var canvasData = this.canvasData;
      var changed = false;
      x = Number(x);
      y = Number(y);

      if (this.ready && !this.disabled && this.options.movable) {
        if (isNumber(x)) {
          canvasData.left = x;
          changed = true;
        }

        if (isNumber(y)) {
          canvasData.top = y;
          changed = true;
        }

        if (changed) {
          this.renderCanvas(true);
        }
      }

      return this;
    },

    /**
     * Zoom the canvas with a relative ratio
     * @param {number} ratio - The target ratio.
     * @param {Event} _originalEvent - The original event if any.
     * @returns {Cropper} this
     */
    zoom: function zoom(ratio, _originalEvent) {
      var canvasData = this.canvasData;
      ratio = Number(ratio);

      if (ratio < 0) {
        ratio = 1 / (1 - ratio);
      } else {
        ratio = 1 + ratio;
      }

      return this.zoomTo(canvasData.width * ratio / canvasData.naturalWidth, null, _originalEvent);
    },

    /**
     * Zoom the canvas to an absolute ratio
     * @param {number} ratio - The target ratio.
     * @param {Object} pivot - The zoom pivot point coordinate.
     * @param {Event} _originalEvent - The original event if any.
     * @returns {Cropper} this
     */
    zoomTo: function zoomTo(ratio, pivot, _originalEvent) {
      var options = this.options,
          canvasData = this.canvasData;
      var width = canvasData.width,
          height = canvasData.height,
          naturalWidth = canvasData.naturalWidth,
          naturalHeight = canvasData.naturalHeight;
      ratio = Number(ratio);

      if (ratio >= 0 && this.ready && !this.disabled && options.zoomable) {
        var newWidth = naturalWidth * ratio;
        var newHeight = naturalHeight * ratio;

        if (dispatchEvent(this.element, EVENT_ZOOM, {
          ratio: ratio,
          oldRatio: width / naturalWidth,
          originalEvent: _originalEvent
        }) === false) {
          return this;
        }

        if (_originalEvent) {
          var pointers = this.pointers;
          var offset = getOffset(this.cropper);
          var center = pointers && Object.keys(pointers).length ? getPointersCenter(pointers) : {
            pageX: _originalEvent.pageX,
            pageY: _originalEvent.pageY
          }; // Zoom from the triggering point of the event

          canvasData.left -= (newWidth - width) * ((center.pageX - offset.left - canvasData.left) / width);
          canvasData.top -= (newHeight - height) * ((center.pageY - offset.top - canvasData.top) / height);
        } else if (isPlainObject(pivot) && isNumber(pivot.x) && isNumber(pivot.y)) {
          canvasData.left -= (newWidth - width) * ((pivot.x - canvasData.left) / width);
          canvasData.top -= (newHeight - height) * ((pivot.y - canvasData.top) / height);
        } else {
          // Zoom from the center of the canvas
          canvasData.left -= (newWidth - width) / 2;
          canvasData.top -= (newHeight - height) / 2;
        }

        canvasData.width = newWidth;
        canvasData.height = newHeight;
        this.renderCanvas(true);
      }

      return this;
    },

    /**
     * Rotate the canvas with a relative degree
     * @param {number} degree - The rotate degree.
     * @returns {Cropper} this
     */
    rotate: function rotate(degree) {
      return this.rotateTo((this.imageData.rotate || 0) + Number(degree));
    },

    /**
     * Rotate the canvas to an absolute degree
     * @param {number} degree - The rotate degree.
     * @returns {Cropper} this
     */
    rotateTo: function rotateTo(degree) {
      degree = Number(degree);

      if (isNumber(degree) && this.ready && !this.disabled && this.options.rotatable) {
        this.imageData.rotate = degree % 360;
        this.renderCanvas(true, true);
      }

      return this;
    },

    /**
     * Scale the image on the x-axis.
     * @param {number} scaleX - The scale ratio on the x-axis.
     * @returns {Cropper} this
     */
    scaleX: function scaleX(_scaleX) {
      var scaleY = this.imageData.scaleY;
      return this.scale(_scaleX, isNumber(scaleY) ? scaleY : 1);
    },

    /**
     * Scale the image on the y-axis.
     * @param {number} scaleY - The scale ratio on the y-axis.
     * @returns {Cropper} this
     */
    scaleY: function scaleY(_scaleY) {
      var scaleX = this.imageData.scaleX;
      return this.scale(isNumber(scaleX) ? scaleX : 1, _scaleY);
    },

    /**
     * Scale the image
     * @param {number} scaleX - The scale ratio on the x-axis.
     * @param {number} [scaleY=scaleX] - The scale ratio on the y-axis.
     * @returns {Cropper} this
     */
    scale: function scale(scaleX) {
      var scaleY = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : scaleX;
      var imageData = this.imageData;
      var transformed = false;
      scaleX = Number(scaleX);
      scaleY = Number(scaleY);

      if (this.ready && !this.disabled && this.options.scalable) {
        if (isNumber(scaleX)) {
          imageData.scaleX = scaleX;
          transformed = true;
        }

        if (isNumber(scaleY)) {
          imageData.scaleY = scaleY;
          transformed = true;
        }

        if (transformed) {
          this.renderCanvas(true, true);
        }
      }

      return this;
    },

    /**
     * Get the cropped area position and size data (base on the original image)
     * @param {boolean} [rounded=false] - Indicate if round the data values or not.
     * @returns {Object} The result cropped data.
     */
    getData: function getData() {
      var rounded = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;
      var options = this.options,
          imageData = this.imageData,
          canvasData = this.canvasData,
          cropBoxData = this.cropBoxData;
      var data;

      if (this.ready && this.cropped) {
        data = {
          x: cropBoxData.left - canvasData.left,
          y: cropBoxData.top - canvasData.top,
          width: cropBoxData.width,
          height: cropBoxData.height
        };
        var ratio = imageData.width / imageData.naturalWidth;
        forEach(data, function (n, i) {
          data[i] = n / ratio;
        });

        if (rounded) {
          // In case rounding off leads to extra 1px in right or bottom border
          // we should round the top-left corner and the dimension (#343).
          var bottom = Math.round(data.y + data.height);
          var right = Math.round(data.x + data.width);
          data.x = Math.round(data.x);
          data.y = Math.round(data.y);
          data.width = right - data.x;
          data.height = bottom - data.y;
        }
      } else {
        data = {
          x: 0,
          y: 0,
          width: 0,
          height: 0
        };
      }

      if (options.rotatable) {
        data.rotate = imageData.rotate || 0;
      }

      if (options.scalable) {
        data.scaleX = imageData.scaleX || 1;
        data.scaleY = imageData.scaleY || 1;
      }

      return data;
    },

    /**
     * Set the cropped area position and size with new data
     * @param {Object} data - The new data.
     * @returns {Cropper} this
     */
    setData: function setData(data) {
      var options = this.options,
          imageData = this.imageData,
          canvasData = this.canvasData;
      var cropBoxData = {};

      if (this.ready && !this.disabled && isPlainObject(data)) {
        var transformed = false;

        if (options.rotatable) {
          if (isNumber(data.rotate) && data.rotate !== imageData.rotate) {
            imageData.rotate = data.rotate;
            transformed = true;
          }
        }

        if (options.scalable) {
          if (isNumber(data.scaleX) && data.scaleX !== imageData.scaleX) {
            imageData.scaleX = data.scaleX;
            transformed = true;
          }

          if (isNumber(data.scaleY) && data.scaleY !== imageData.scaleY) {
            imageData.scaleY = data.scaleY;
            transformed = true;
          }
        }

        if (transformed) {
          this.renderCanvas(true, true);
        }

        var ratio = imageData.width / imageData.naturalWidth;

        if (isNumber(data.x)) {
          cropBoxData.left = data.x * ratio + canvasData.left;
        }

        if (isNumber(data.y)) {
          cropBoxData.top = data.y * ratio + canvasData.top;
        }

        if (isNumber(data.width)) {
          cropBoxData.width = data.width * ratio;
        }

        if (isNumber(data.height)) {
          cropBoxData.height = data.height * ratio;
        }

        this.setCropBoxData(cropBoxData);
      }

      return this;
    },

    /**
     * Get the container size data.
     * @returns {Object} The result container data.
     */
    getContainerData: function getContainerData() {
      return this.ready ? assign({}, this.containerData) : {};
    },

    /**
     * Get the image position and size data.
     * @returns {Object} The result image data.
     */
    getImageData: function getImageData() {
      return this.sized ? assign({}, this.imageData) : {};
    },

    /**
     * Get the canvas position and size data.
     * @returns {Object} The result canvas data.
     */
    getCanvasData: function getCanvasData() {
      var canvasData = this.canvasData;
      var data = {};

      if (this.ready) {
        forEach(['left', 'top', 'width', 'height', 'naturalWidth', 'naturalHeight'], function (n) {
          data[n] = canvasData[n];
        });
      }

      return data;
    },

    /**
     * Set the canvas position and size with new data.
     * @param {Object} data - The new canvas data.
     * @returns {Cropper} this
     */
    setCanvasData: function setCanvasData(data) {
      var canvasData = this.canvasData;
      var aspectRatio = canvasData.aspectRatio;

      if (this.ready && !this.disabled && isPlainObject(data)) {
        if (isNumber(data.left)) {
          canvasData.left = data.left;
        }

        if (isNumber(data.top)) {
          canvasData.top = data.top;
        }

        if (isNumber(data.width)) {
          canvasData.width = data.width;
          canvasData.height = data.width / aspectRatio;
        } else if (isNumber(data.height)) {
          canvasData.height = data.height;
          canvasData.width = data.height * aspectRatio;
        }

        this.renderCanvas(true);
      }

      return this;
    },

    /**
     * Get the crop box position and size data.
     * @returns {Object} The result crop box data.
     */
    getCropBoxData: function getCropBoxData() {
      var cropBoxData = this.cropBoxData;
      var data;

      if (this.ready && this.cropped) {
        data = {
          left: cropBoxData.left,
          top: cropBoxData.top,
          width: cropBoxData.width,
          height: cropBoxData.height
        };
      }

      return data || {};
    },

    /**
     * Set the crop box position and size with new data.
     * @param {Object} data - The new crop box data.
     * @returns {Cropper} this
     */
    setCropBoxData: function setCropBoxData(data) {
      var cropBoxData = this.cropBoxData;
      var aspectRatio = this.options.aspectRatio;
      var widthChanged;
      var heightChanged;

      if (this.ready && this.cropped && !this.disabled && isPlainObject(data)) {
        if (isNumber(data.left)) {
          cropBoxData.left = data.left;
        }

        if (isNumber(data.top)) {
          cropBoxData.top = data.top;
        }

        if (isNumber(data.width) && data.width !== cropBoxData.width) {
          widthChanged = true;
          cropBoxData.width = data.width;
        }

        if (isNumber(data.height) && data.height !== cropBoxData.height) {
          heightChanged = true;
          cropBoxData.height = data.height;
        }

        if (aspectRatio) {
          if (widthChanged) {
            cropBoxData.height = cropBoxData.width / aspectRatio;
          } else if (heightChanged) {
            cropBoxData.width = cropBoxData.height * aspectRatio;
          }
        }

        this.renderCropBox();
      }

      return this;
    },

    /**
     * Get a canvas drawn the cropped image.
     * @param {Object} [options={}] - The config options.
     * @returns {HTMLCanvasElement} - The result canvas.
     */
    getCroppedCanvas: function getCroppedCanvas() {
      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

      if (!this.ready || !window.HTMLCanvasElement) {
        return null;
      }

      var canvasData = this.canvasData;
      var source = getSourceCanvas(this.image, this.imageData, canvasData, options); // Returns the source canvas if it is not cropped.

      if (!this.cropped) {
        return source;
      }

      var _this$getData = this.getData(),
          initialX = _this$getData.x,
          initialY = _this$getData.y,
          initialWidth = _this$getData.width,
          initialHeight = _this$getData.height;

      var ratio = source.width / Math.floor(canvasData.naturalWidth);

      if (ratio !== 1) {
        initialX *= ratio;
        initialY *= ratio;
        initialWidth *= ratio;
        initialHeight *= ratio;
      }

      var aspectRatio = initialWidth / initialHeight;
      var maxSizes = getAdjustedSizes({
        aspectRatio: aspectRatio,
        width: options.maxWidth || Infinity,
        height: options.maxHeight || Infinity
      });
      var minSizes = getAdjustedSizes({
        aspectRatio: aspectRatio,
        width: options.minWidth || 0,
        height: options.minHeight || 0
      }, 'cover');

      var _getAdjustedSizes = getAdjustedSizes({
        aspectRatio: aspectRatio,
        width: options.width || (ratio !== 1 ? source.width : initialWidth),
        height: options.height || (ratio !== 1 ? source.height : initialHeight)
      }),
          width = _getAdjustedSizes.width,
          height = _getAdjustedSizes.height;

      width = Math.min(maxSizes.width, Math.max(minSizes.width, width));
      height = Math.min(maxSizes.height, Math.max(minSizes.height, height));
      var canvas = document.createElement('canvas');
      var context = canvas.getContext('2d');
      canvas.width = normalizeDecimalNumber(width);
      canvas.height = normalizeDecimalNumber(height);
      context.fillStyle = options.fillColor || 'transparent';
      context.fillRect(0, 0, width, height);
      var _options$imageSmoothi = options.imageSmoothingEnabled,
          imageSmoothingEnabled = _options$imageSmoothi === void 0 ? true : _options$imageSmoothi,
          imageSmoothingQuality = options.imageSmoothingQuality;
      context.imageSmoothingEnabled = imageSmoothingEnabled;

      if (imageSmoothingQuality) {
        context.imageSmoothingQuality = imageSmoothingQuality;
      } // https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D.drawImage


      var sourceWidth = source.width;
      var sourceHeight = source.height; // Source canvas parameters

      var srcX = initialX;
      var srcY = initialY;
      var srcWidth;
      var srcHeight; // Destination canvas parameters

      var dstX;
      var dstY;
      var dstWidth;
      var dstHeight;

      if (srcX <= -initialWidth || srcX > sourceWidth) {
        srcX = 0;
        srcWidth = 0;
        dstX = 0;
        dstWidth = 0;
      } else if (srcX <= 0) {
        dstX = -srcX;
        srcX = 0;
        srcWidth = Math.min(sourceWidth, initialWidth + srcX);
        dstWidth = srcWidth;
      } else if (srcX <= sourceWidth) {
        dstX = 0;
        srcWidth = Math.min(initialWidth, sourceWidth - srcX);
        dstWidth = srcWidth;
      }

      if (srcWidth <= 0 || srcY <= -initialHeight || srcY > sourceHeight) {
        srcY = 0;
        srcHeight = 0;
        dstY = 0;
        dstHeight = 0;
      } else if (srcY <= 0) {
        dstY = -srcY;
        srcY = 0;
        srcHeight = Math.min(sourceHeight, initialHeight + srcY);
        dstHeight = srcHeight;
      } else if (srcY <= sourceHeight) {
        dstY = 0;
        srcHeight = Math.min(initialHeight, sourceHeight - srcY);
        dstHeight = srcHeight;
      }

      var params = [srcX, srcY, srcWidth, srcHeight]; // Avoid "IndexSizeError"

      if (dstWidth > 0 && dstHeight > 0) {
        var scale = width / initialWidth;
        params.push(dstX * scale, dstY * scale, dstWidth * scale, dstHeight * scale);
      } // All the numerical parameters should be integer for `drawImage`
      // https://github.com/fengyuanchen/cropper/issues/476


      context.drawImage.apply(context, [source].concat(_toConsumableArray(params.map(function (param) {
        return Math.floor(normalizeDecimalNumber(param));
      }))));
      return canvas;
    },

    /**
     * Change the aspect ratio of the crop box.
     * @param {number} aspectRatio - The new aspect ratio.
     * @returns {Cropper} this
     */
    setAspectRatio: function setAspectRatio(aspectRatio) {
      var options = this.options;

      if (!this.disabled && !isUndefined(aspectRatio)) {
        // 0 -> NaN
        options.aspectRatio = Math.max(0, aspectRatio) || NaN;

        if (this.ready) {
          this.initCropBox();

          if (this.cropped) {
            this.renderCropBox();
          }
        }
      }

      return this;
    },

    /**
     * Change the drag mode.
     * @param {string} mode - The new drag mode.
     * @returns {Cropper} this
     */
    setDragMode: function setDragMode(mode) {
      var options = this.options,
          dragBox = this.dragBox,
          face = this.face;

      if (this.ready && !this.disabled) {
        var croppable = mode === DRAG_MODE_CROP;
        var movable = options.movable && mode === DRAG_MODE_MOVE;
        mode = croppable || movable ? mode : DRAG_MODE_NONE;
        options.dragMode = mode;
        setData(dragBox, DATA_ACTION, mode);
        toggleClass(dragBox, CLASS_CROP, croppable);
        toggleClass(dragBox, CLASS_MOVE, movable);

        if (!options.cropBoxMovable) {
          // Sync drag mode to crop box when it is not movable
          setData(face, DATA_ACTION, mode);
          toggleClass(face, CLASS_CROP, croppable);
          toggleClass(face, CLASS_MOVE, movable);
        }
      }

      return this;
    }
  };
  var AnotherCropper = WINDOW.Cropper;

  var Cropper = /*#__PURE__*/function () {
    /**
     * Create a new Cropper.
     * @param {Element} element - The target element for cropping.
     * @param {Object} [options={}] - The configuration options.
     */
    function Cropper(element) {
      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

      _classCallCheck(this, Cropper);

      if (!element || !REGEXP_TAG_NAME.test(element.tagName)) {
        throw new Error('The first argument is required and must be an <img> or <canvas> element.');
      }

      this.element = element;
      this.options = assign({}, DEFAULTS, isPlainObject(options) && options);
      this.cropped = false;
      this.disabled = false;
      this.pointers = {};
      this.ready = false;
      this.reloading = false;
      this.replaced = false;
      this.sized = false;
      this.sizing = false;
      this.init();
    }

    _createClass(Cropper, [{
      key: "init",
      value: function init() {
        var element = this.element;
        var tagName = element.tagName.toLowerCase();
        var url;

        if (element[NAMESPACE]) {
          return;
        }

        element[NAMESPACE] = this;

        if (tagName === 'img') {
          this.isImg = true; // e.g.: "img/picture.jpg"

          url = element.getAttribute('src') || '';
          this.originalUrl = url; // Stop when it's a blank image

          if (!url) {
            return;
          } // e.g.: "https://example.com/img/picture.jpg"


          url = element.src;
        } else if (tagName === 'canvas' && window.HTMLCanvasElement) {
          url = element.toDataURL();
        }

        this.load(url);
      }
    }, {
      key: "load",
      value: function load(url) {
        var _this = this;

        if (!url) {
          return;
        }

        this.url = url;
        this.imageData = {};
        var element = this.element,
            options = this.options;

        if (!options.rotatable && !options.scalable) {
          options.checkOrientation = false;
        } // Only IE10+ supports Typed Arrays


        if (!options.checkOrientation || !window.ArrayBuffer) {
          this.clone();
          return;
        } // Detect the mime type of the image directly if it is a Data URL


        if (REGEXP_DATA_URL.test(url)) {
          // Read ArrayBuffer from Data URL of JPEG images directly for better performance
          if (REGEXP_DATA_URL_JPEG.test(url)) {
            this.read(dataURLToArrayBuffer(url));
          } else {
            // Only a JPEG image may contains Exif Orientation information,
            // the rest types of Data URLs are not necessary to check orientation at all.
            this.clone();
          }

          return;
        } // 1. Detect the mime type of the image by a XMLHttpRequest.
        // 2. Load the image as ArrayBuffer for reading orientation if its a JPEG image.


        var xhr = new XMLHttpRequest();
        var clone = this.clone.bind(this);
        this.reloading = true;
        this.xhr = xhr; // 1. Cross origin requests are only supported for protocol schemes:
        // http, https, data, chrome, chrome-extension.
        // 2. Access to XMLHttpRequest from a Data URL will be blocked by CORS policy
        // in some browsers as IE11 and Safari.

        xhr.onabort = clone;
        xhr.onerror = clone;
        xhr.ontimeout = clone;

        xhr.onprogress = function () {
          // Abort the request directly if it not a JPEG image for better performance
          if (xhr.getResponseHeader('content-type') !== MIME_TYPE_JPEG) {
            xhr.abort();
          }
        };

        xhr.onload = function () {
          _this.read(xhr.response);
        };

        xhr.onloadend = function () {
          _this.reloading = false;
          _this.xhr = null;
        }; // Bust cache when there is a "crossOrigin" property to avoid browser cache error


        if (options.checkCrossOrigin && isCrossOriginURL(url) && element.crossOrigin) {
          url = addTimestamp(url);
        } // The third parameter is required for avoiding side-effect (#682)


        xhr.open('GET', url, true);
        xhr.responseType = 'arraybuffer';
        xhr.withCredentials = element.crossOrigin === 'use-credentials';
        xhr.send();
      }
    }, {
      key: "read",
      value: function read(arrayBuffer) {
        var options = this.options,
            imageData = this.imageData; // Reset the orientation value to its default value 1
        // as some iOS browsers will render image with its orientation

        var orientation = resetAndGetOrientation(arrayBuffer);
        var rotate = 0;
        var scaleX = 1;
        var scaleY = 1;

        if (orientation > 1) {
          // Generate a new URL which has the default orientation value
          this.url = arrayBufferToDataURL(arrayBuffer, MIME_TYPE_JPEG);

          var _parseOrientation = parseOrientation(orientation);

          rotate = _parseOrientation.rotate;
          scaleX = _parseOrientation.scaleX;
          scaleY = _parseOrientation.scaleY;
        }

        if (options.rotatable) {
          imageData.rotate = rotate;
        }

        if (options.scalable) {
          imageData.scaleX = scaleX;
          imageData.scaleY = scaleY;
        }

        this.clone();
      }
    }, {
      key: "clone",
      value: function clone() {
        var element = this.element,
            url = this.url;
        var crossOrigin = element.crossOrigin;
        var crossOriginUrl = url;

        if (this.options.checkCrossOrigin && isCrossOriginURL(url)) {
          if (!crossOrigin) {
            crossOrigin = 'anonymous';
          } // Bust cache when there is not a "crossOrigin" property (#519)


          crossOriginUrl = addTimestamp(url);
        }

        this.crossOrigin = crossOrigin;
        this.crossOriginUrl = crossOriginUrl;
        var image = document.createElement('img');

        if (crossOrigin) {
          image.crossOrigin = crossOrigin;
        }

        image.src = crossOriginUrl || url;
        image.alt = element.alt || 'The image to crop';
        this.image = image;
        image.onload = this.start.bind(this);
        image.onerror = this.stop.bind(this);
        addClass(image, CLASS_HIDE);
        element.parentNode.insertBefore(image, element.nextSibling);
      }
    }, {
      key: "start",
      value: function start() {
        var _this2 = this;

        var image = this.image;
        image.onload = null;
        image.onerror = null;
        this.sizing = true; // Match all browsers that use WebKit as the layout engine in iOS devices,
        // such as Safari for iOS, Chrome for iOS, and in-app browsers.

        var isIOSWebKit = WINDOW.navigator && /(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(WINDOW.navigator.userAgent);

        var done = function done(naturalWidth, naturalHeight) {
          assign(_this2.imageData, {
            naturalWidth: naturalWidth,
            naturalHeight: naturalHeight,
            aspectRatio: naturalWidth / naturalHeight
          });
          _this2.initialImageData = assign({}, _this2.imageData);
          _this2.sizing = false;
          _this2.sized = true;

          _this2.build();
        }; // Most modern browsers (excepts iOS WebKit)


        if (image.naturalWidth && !isIOSWebKit) {
          done(image.naturalWidth, image.naturalHeight);
          return;
        }

        var sizingImage = document.createElement('img');
        var body = document.body || document.documentElement;
        this.sizingImage = sizingImage;

        sizingImage.onload = function () {
          done(sizingImage.width, sizingImage.height);

          if (!isIOSWebKit) {
            body.removeChild(sizingImage);
          }
        };

        sizingImage.src = image.src; // iOS WebKit will convert the image automatically
        // with its orientation once append it into DOM (#279)

        if (!isIOSWebKit) {
          sizingImage.style.cssText = 'left:0;' + 'max-height:none!important;' + 'max-width:none!important;' + 'min-height:0!important;' + 'min-width:0!important;' + 'opacity:0;' + 'position:absolute;' + 'top:0;' + 'z-index:-1;';
          body.appendChild(sizingImage);
        }
      }
    }, {
      key: "stop",
      value: function stop() {
        var image = this.image;
        image.onload = null;
        image.onerror = null;
        image.parentNode.removeChild(image);
        this.image = null;
      }
    }, {
      key: "build",
      value: function build() {
        if (!this.sized || this.ready) {
          return;
        }

        var element = this.element,
            options = this.options,
            image = this.image; // Create cropper elements

        var container = element.parentNode;
        var template = document.createElement('div');
        template.innerHTML = TEMPLATE;
        var cropper = template.querySelector(".".concat(NAMESPACE, "-container"));
        var canvas = cropper.querySelector(".".concat(NAMESPACE, "-canvas"));
        var dragBox = cropper.querySelector(".".concat(NAMESPACE, "-drag-box"));
        var cropBox = cropper.querySelector(".".concat(NAMESPACE, "-crop-box"));
        var face = cropBox.querySelector(".".concat(NAMESPACE, "-face"));
        this.container = container;
        this.cropper = cropper;
        this.canvas = canvas;
        this.dragBox = dragBox;
        this.cropBox = cropBox;
        this.viewBox = cropper.querySelector(".".concat(NAMESPACE, "-view-box"));
        this.face = face;
        canvas.appendChild(image); // Hide the original image

        addClass(element, CLASS_HIDDEN); // Inserts the cropper after to the current image

        container.insertBefore(cropper, element.nextSibling); // Show the image if is hidden

        if (!this.isImg) {
          removeClass(image, CLASS_HIDE);
        }

        this.initPreview();
        this.bind();
        options.initialAspectRatio = Math.max(0, options.initialAspectRatio) || NaN;
        options.aspectRatio = Math.max(0, options.aspectRatio) || NaN;
        options.viewMode = Math.max(0, Math.min(3, Math.round(options.viewMode))) || 0;
        addClass(cropBox, CLASS_HIDDEN);

        if (!options.guides) {
          addClass(cropBox.getElementsByClassName("".concat(NAMESPACE, "-dashed")), CLASS_HIDDEN);
        }

        if (!options.center) {
          addClass(cropBox.getElementsByClassName("".concat(NAMESPACE, "-center")), CLASS_HIDDEN);
        }

        if (options.background) {
          addClass(cropper, "".concat(NAMESPACE, "-bg"));
        }

        if (!options.highlight) {
          addClass(face, CLASS_INVISIBLE);
        }

        if (options.cropBoxMovable) {
          addClass(face, CLASS_MOVE);
          setData(face, DATA_ACTION, ACTION_ALL);
        }

        if (!options.cropBoxResizable) {
          addClass(cropBox.getElementsByClassName("".concat(NAMESPACE, "-line")), CLASS_HIDDEN);
          addClass(cropBox.getElementsByClassName("".concat(NAMESPACE, "-point")), CLASS_HIDDEN);
        }

        this.render();
        this.ready = true;
        this.setDragMode(options.dragMode);

        if (options.autoCrop) {
          this.crop();
        }

        this.setData(options.data);

        if (isFunction(options.ready)) {
          addListener(element, EVENT_READY, options.ready, {
            once: true
          });
        }

        dispatchEvent(element, EVENT_READY);
      }
    }, {
      key: "unbuild",
      value: function unbuild() {
        if (!this.ready) {
          return;
        }

        this.ready = false;
        this.unbind();
        this.resetPreview();
        this.cropper.parentNode.removeChild(this.cropper);
        removeClass(this.element, CLASS_HIDDEN);
      }
    }, {
      key: "uncreate",
      value: function uncreate() {
        if (this.ready) {
          this.unbuild();
          this.ready = false;
          this.cropped = false;
        } else if (this.sizing) {
          this.sizingImage.onload = null;
          this.sizing = false;
          this.sized = false;
        } else if (this.reloading) {
          this.xhr.onabort = null;
          this.xhr.abort();
        } else if (this.image) {
          this.stop();
        }
      }
      /**
       * Get the no conflict cropper class.
       * @returns {Cropper} The cropper class.
       */

    }], [{
      key: "noConflict",
      value: function noConflict() {
        window.Cropper = AnotherCropper;
        return Cropper;
      }
      /**
       * Change the default options.
       * @param {Object} options - The new default options.
       */

    }, {
      key: "setDefaults",
      value: function setDefaults(options) {
        assign(DEFAULTS, isPlainObject(options) && options);
      }
    }]);

    return Cropper;
  }();

  assign(Cropper.prototype, render, preview, events, handlers, change, methods);
  return Cropper;
});
/*!
 * =============================================================
 * dropify v0.2.1 - Override your input files with style.
 * https://github.com/JeremyFagis/dropify
 *
 * (c) 2016 - Jeremy FAGIS <jeremy@fagis.fr> (http://fagis.fr)
 * =============================================================
 */


!function (e, i) {
  "function" == typeof define && define.amd ? define(["jquery"], i) : "object" == (typeof exports === "undefined" ? "undefined" : _typeof2(exports)) ? module.exports = i(require("jquery")) : e.Dropify = i(e.jQuery);
}(this, function (e) {
  function i(i, t) {
    if (window.File && window.FileReader && window.FileList && window.Blob) {
      var s = {
        defaultFile: "",
        maxFileSize: 0,
        minWidth: 0,
        maxWidth: 0,
        minHeight: 0,
        maxHeight: 0,
        showRemove: !0,
        showLoader: !0,
        showErrors: !0,
        errorTimeout: 3e3,
        errorsPosition: "overlay",
        imgFileExtensions: ["png", "jpg", "jpeg", "gif", "bmp"],
        maxFileSizePreview: "5M",
        allowedFormats: ["portrait", "square", "landscape"],
        allowedFileExtensions: ["*"],
        messages: {
          "default": "Drag and drop a file here or click",
          replace: "Drag and drop or click to replace",
          remove: "Remove",
          error: "Ooops, something wrong appended."
        },
        error: {
          fileSize: "The file size is too big ({{ value }} max).",
          minWidth: "The image width is too small ({{ value }}}px min).",
          maxWidth: "The image width is too big ({{ value }}}px max).",
          minHeight: "The image height is too small ({{ value }}}px min).",
          maxHeight: "The image height is too big ({{ value }}px max).",
          imageFormat: "The image format is not allowed ({{ value }} only).",
          fileExtension: "The file is not allowed ({{ value }} only)."
        },
        tpl: {
          wrap: '<div class="dropify-wrapper"></div>',
          loader: '<div class="dropify-loader"></div>',
          message: '<div class="dropify-message"><span class="file-icon" /> <p>{{ default }}</p></div>',
          preview: '<div class="dropify-preview"><span class="dropify-render"></span><div class="dropify-infos"><div class="dropify-infos-inner"><p class="dropify-infos-message">{{ replace }}</p></div></div></div>',
          filename: '<p class="dropify-filename"><span class="file-icon"></span> <span class="dropify-filename-inner"></span></p>',
          clearButton: '<button type="button" class="dropify-clear">{{ remove }}</button>',
          errorLine: '<p class="dropify-error">{{ error }}</p>',
          errorsContainer: '<div class="dropify-errors-container"><ul></ul></div>'
        }
      };
      this.element = i, this.input = e(this.element), this.wrapper = null, this.preview = null, this.filenameWrapper = null, this.settings = e.extend(!0, s, t, this.input.data()), this.errorsEvent = e.Event("dropify.errors"), this.isDisabled = !1, this.isInit = !1, this.file = {
        object: null,
        name: null,
        size: null,
        width: null,
        height: null,
        type: null
      }, Array.isArray(this.settings.allowedFormats) || (this.settings.allowedFormats = this.settings.allowedFormats.split(" ")), Array.isArray(this.settings.allowedFileExtensions) || (this.settings.allowedFileExtensions = this.settings.allowedFileExtensions.split(" ")), this.onChange = this.onChange.bind(this), this.clearElement = this.clearElement.bind(this), this.onFileReady = this.onFileReady.bind(this), this.translateMessages(), this.createElements(), this.setContainerSize(), this.errorsEvent.errors = [], this.input.on("change", this.onChange);
    }
  }

  var t = "dropify";
  return i.prototype.onChange = function () {
    this.resetPreview(), this.readFile(this.element);
  }, i.prototype.createElements = function () {
    this.isInit = !0, this.input.wrap(e(this.settings.tpl.wrap)), this.wrapper = this.input.parent();
    var i = e(this.settings.tpl.message).insertBefore(this.input);
    e(this.settings.tpl.errorLine).appendTo(i), this.isTouchDevice() === !0 && this.wrapper.addClass("touch-fallback"), this.input.attr("disabled") && (this.isDisabled = !0, this.wrapper.addClass("disabled")), this.settings.showLoader === !0 && (this.loader = e(this.settings.tpl.loader), this.loader.insertBefore(this.input)), this.preview = e(this.settings.tpl.preview), this.preview.insertAfter(this.input), this.isDisabled === !1 && this.settings.showRemove === !0 && (this.clearButton = e(this.settings.tpl.clearButton), this.clearButton.insertAfter(this.input), this.clearButton.on("click", this.clearElement)), this.filenameWrapper = e(this.settings.tpl.filename), this.filenameWrapper.prependTo(this.preview.find(".dropify-infos-inner")), this.settings.showErrors === !0 && (this.errorsContainer = e(this.settings.tpl.errorsContainer), "outside" === this.settings.errorsPosition ? this.errorsContainer.insertAfter(this.wrapper) : this.errorsContainer.insertBefore(this.input));
    var t = this.settings.defaultFile || "";
    "" !== t.trim() && (this.file.name = this.cleanFilename(t), this.setPreview(this.isImage(), t));
  }, i.prototype.readFile = function (i) {
    if (i.files && i.files[0]) {
      var t = new FileReader(),
          s = new Image(),
          r = i.files[0],
          n = null,
          o = this,
          h = e.Event("dropify.fileReady");
      this.clearErrors(), this.showLoader(), this.setFileInformations(r), this.errorsEvent.errors = [], this.checkFileSize(), this.isFileExtensionAllowed(), this.isImage() && this.file.size < this.sizeToByte(this.settings.maxFileSizePreview) ? (this.input.on("dropify.fileReady", this.onFileReady), t.readAsDataURL(r), t.onload = function (e) {
        n = e.target.result, s.src = e.target.result, s.onload = function () {
          o.setFileDimensions(this.width, this.height), o.validateImage(), o.input.trigger(h, [!0, n]);
        };
      }.bind(this)) : this.onFileReady(!1);
    }
  }, i.prototype.onFileReady = function (e, i, t) {
    if (this.input.off("dropify.fileReady", this.onFileReady), 0 === this.errorsEvent.errors.length) this.setPreview(i, t);else {
      this.input.trigger(this.errorsEvent, [this]);

      for (var s = this.errorsEvent.errors.length - 1; s >= 0; s--) {
        var r = this.errorsEvent.errors[s].namespace,
            n = r.split(".").pop();
        this.showError(n);
      }

      if ("undefined" != typeof this.errorsContainer) {
        this.errorsContainer.addClass("visible");
        var o = this.errorsContainer;
        setTimeout(function () {
          o.removeClass("visible");
        }, this.settings.errorTimeout);
      }

      this.wrapper.addClass("has-error"), this.resetPreview(), this.clearElement();
    }
  }, i.prototype.setFileInformations = function (e) {
    this.file.object = e, this.file.name = e.name, this.file.size = e.size, this.file.type = e.type, this.file.width = null, this.file.height = null;
  }, i.prototype.setFileDimensions = function (e, i) {
    this.file.width = e, this.file.height = i;
  }, i.prototype.setPreview = function (i, t) {
    this.wrapper.removeClass("has-error").addClass("has-preview"), this.filenameWrapper.children(".dropify-filename-inner").html(this.file.name);
    var s = this.preview.children(".dropify-render");

    if (this.hideLoader(), i === !0) {
      var r = e("<img />").attr("src", t);
      this.settings.height && r.css("max-height", this.settings.height), r.appendTo(s);
    } else e("<i />").attr("class", "dropify-font-file").appendTo(s), e('<span class="dropify-extension" />').html(this.getFileType()).appendTo(s);

    this.preview.fadeIn();
  }, i.prototype.resetPreview = function () {
    this.wrapper.removeClass("has-preview");
    var e = this.preview.children(".dropify-render");
    e.find(".dropify-extension").remove(), e.find("i").remove(), e.find("img").remove(), this.preview.hide(), this.hideLoader();
  }, i.prototype.cleanFilename = function (e) {
    var i = e.split("\\").pop();
    return i == e && (i = e.split("/").pop()), "" !== e ? i : "";
  }, i.prototype.clearElement = function () {
    if (0 === this.errorsEvent.errors.length) {
      var i = e.Event("dropify.beforeClear");
      this.input.trigger(i, [this]), i.result !== !1 && (this.resetFile(), this.input.val(""), this.resetPreview(), this.input.trigger(e.Event("dropify.afterClear"), [this]));
    } else this.resetFile(), this.input.val(""), this.resetPreview();
  }, i.prototype.resetFile = function () {
    this.file.object = null, this.file.name = null, this.file.size = null, this.file.type = null, this.file.width = null, this.file.height = null;
  }, i.prototype.setContainerSize = function () {
    this.settings.height && this.wrapper.height(this.settings.height);
  }, i.prototype.isTouchDevice = function () {
    return "ontouchstart" in window || navigator.MaxTouchPoints > 0 || navigator.msMaxTouchPoints > 0;
  }, i.prototype.getFileType = function () {
    return this.file.name.split(".").pop().toLowerCase();
  }, i.prototype.isImage = function () {
    return "-1" != this.settings.imgFileExtensions.indexOf(this.getFileType()) ? !0 : !1;
  }, i.prototype.isFileExtensionAllowed = function () {
    return "-1" != this.settings.allowedFileExtensions.indexOf("*") || "-1" != this.settings.allowedFileExtensions.indexOf(this.getFileType()) ? !0 : (this.pushError("fileExtension"), !1);
  }, i.prototype.translateMessages = function () {
    for (var e in this.settings.tpl) {
      for (var i in this.settings.messages) {
        this.settings.tpl[e] = this.settings.tpl[e].replace("{{ " + i + " }}", this.settings.messages[i]);
      }
    }
  }, i.prototype.checkFileSize = function () {
    0 !== this.sizeToByte(this.settings.maxFileSize) && this.file.size > this.sizeToByte(this.settings.maxFileSize) && this.pushError("fileSize");
  }, i.prototype.sizeToByte = function (e) {
    var i = 0;

    if (0 !== e) {
      var t = e.slice(-1).toUpperCase(),
          s = 1024,
          r = 1024 * s,
          n = 1024 * r;
      "K" === t ? i = parseFloat(e) * s : "M" === t ? i = parseFloat(e) * r : "G" === t && (i = parseFloat(e) * n);
    }

    return i;
  }, i.prototype.validateImage = function () {
    0 !== this.settings.minWidth && this.settings.minWidth >= this.file.width && this.pushError("minWidth"), 0 !== this.settings.maxWidth && this.settings.maxWidth <= this.file.width && this.pushError("maxWidth"), 0 !== this.settings.minHeight && this.settings.minHeight >= this.file.height && this.pushError("minHeight"), 0 !== this.settings.maxHeight && this.settings.maxHeight <= this.file.height && this.pushError("maxHeight"), "-1" == this.settings.allowedFormats.indexOf(this.getImageFormat()) && this.pushError("imageFormat");
  }, i.prototype.getImageFormat = function () {
    return this.file.width == this.file.height ? "square" : this.file.width < this.file.height ? "portrait" : this.file.width > this.file.height ? "landscape" : void 0;
  }, i.prototype.pushError = function (i) {
    var t = e.Event("dropify.error." + i);
    this.errorsEvent.errors.push(t), this.input.trigger(t, [this]);
  }, i.prototype.clearErrors = function () {
    "undefined" != typeof this.errorsContainer && this.errorsContainer.children("ul").html("");
  }, i.prototype.showError = function (e) {
    "undefined" != typeof this.errorsContainer && this.errorsContainer.children("ul").append("<li>" + this.getError(e) + "</li>");
  }, i.prototype.getError = function (e) {
    var i = this.settings.error[e],
        t = "";
    return "fileSize" === e ? t = this.settings.maxFileSize : "minWidth" === e ? t = this.settings.minWidth : "maxWidth" === e ? t = this.settings.maxWidth : "minHeight" === e ? t = this.settings.minHeight : "maxHeight" === e ? t = this.settings.maxHeight : "imageFormat" === e ? t = this.settings.allowedFormats.join(", ") : "fileExtension" === e && (t = this.settings.allowedFileExtensions.join(", ")), "" !== t ? i.replace("{{ value }}", t) : i;
  }, i.prototype.showLoader = function () {
    "undefined" != typeof this.loader && this.loader.show();
  }, i.prototype.hideLoader = function () {
    "undefined" != typeof this.loader && this.loader.hide();
  }, i.prototype.destroy = function () {
    this.input.siblings().remove(), this.input.unwrap(), this.isInit = !1;
  }, i.prototype.init = function () {
    this.createElements();
  }, i.prototype.isDropified = function () {
    return this.isInit;
  }, e.fn[t] = function (s) {
    return this.each(function () {
      e.data(this, t) || e.data(this, t, new i(this, s));
    }), this;
  }, i;
});

(function (global, factory) {
  if (typeof define === "function" && define.amd) {
    define('/Plugin/dropify', ['exports', 'Plugin'], factory);
  } else if (typeof exports !== "undefined") {
    factory(exports, require('Plugin'));
  } else {
    var mod = {
      exports: {}
    };
    factory(mod.exports, global.Plugin);
    global.PluginDropify = mod.exports;
  }
})(this, function (exports, _Plugin2) {
  'use strict';

  Object.defineProperty(exports, "__esModule", {
    value: true
  });

  var _Plugin3 = babelHelpers.interopRequireDefault(_Plugin2);

  var NAME = 'dropify';

  var Dropify = function (_Plugin) {
    babelHelpers.inherits(Dropify, _Plugin);

    function Dropify() {
      babelHelpers.classCallCheck(this, Dropify);
      return babelHelpers.possibleConstructorReturn(this, (Dropify.__proto__ || Object.getPrototypeOf(Dropify)).apply(this, arguments));
    }

    babelHelpers.createClass(Dropify, [{
      key: 'getName',
      value: function getName() {
        return NAME;
      }
    }], [{
      key: 'getDefaults',
      value: function getDefaults() {
        return {};
      }
    }]);
    return Dropify;
  }(_Plugin3["default"]);

  _Plugin3["default"].register(NAME, Dropify);

  exports["default"] = Dropify;
});
/*!
 * Quill Editor v1.3.6
 * https://quilljs.com/
 * Copyright (c) 2014, Jason Chen
 * Copyright (c) 2013, salesforce.com
 */


!function (t, e) {
  "object" == (typeof exports === "undefined" ? "undefined" : _typeof2(exports)) && "object" == (typeof module === "undefined" ? "undefined" : _typeof2(module)) ? module.exports = e() : "function" == typeof define && define.amd ? define([], e) : "object" == (typeof exports === "undefined" ? "undefined" : _typeof2(exports)) ? exports.Quill = e() : t.Quill = e();
}("undefined" != typeof self ? self : this, function () {
  return function (t) {
    function e(r) {
      if (n[r]) return n[r].exports;
      var o = n[r] = {
        i: r,
        l: !1,
        exports: {}
      };
      return t[r].call(o.exports, o, o.exports, e), o.l = !0, o.exports;
    }

    var n = {};
    return e.m = t, e.c = n, e.d = function (t, n, r) {
      e.o(t, n) || Object.defineProperty(t, n, {
        configurable: !1,
        enumerable: !0,
        get: r
      });
    }, e.n = function (t) {
      var n = t && t.__esModule ? function () {
        return t["default"];
      } : function () {
        return t;
      };
      return e.d(n, "a", n), n;
    }, e.o = function (t, e) {
      return Object.prototype.hasOwnProperty.call(t, e);
    }, e.p = "", e(e.s = 45);
  }([function (t, e, n) {
    "use strict";

    Object.defineProperty(e, "__esModule", {
      value: !0
    });
    var r = n(17),
        o = n(18),
        i = n(19),
        l = n(48),
        a = n(49),
        s = n(50),
        u = n(51),
        c = n(52),
        f = n(11),
        h = n(29),
        p = n(30),
        d = n(28),
        y = n(1),
        v = {
      Scope: y.Scope,
      create: y.create,
      find: y.find,
      query: y.query,
      register: y.register,
      Container: r["default"],
      Format: o["default"],
      Leaf: i["default"],
      Embed: u["default"],
      Scroll: l["default"],
      Block: s["default"],
      Inline: a["default"],
      Text: c["default"],
      Attributor: {
        Attribute: f["default"],
        Class: h["default"],
        Style: p["default"],
        Store: d["default"]
      }
    };
    e["default"] = v;
  }, function (t, e, n) {
    "use strict";

    function r(t, e) {
      var n = i(t);
      if (null == n) throw new s("Unable to create " + t + " blot");
      var r = n;
      return new r(t instanceof Node || t.nodeType === Node.TEXT_NODE ? t : r.create(e), e);
    }

    function o(t, n) {
      return void 0 === n && (n = !1), null == t ? null : null != t[e.DATA_KEY] ? t[e.DATA_KEY].blot : n ? o(t.parentNode, n) : null;
    }

    function i(t, e) {
      void 0 === e && (e = p.ANY);
      var n;
      if ("string" == typeof t) n = h[t] || u[t];else if (t instanceof Text || t.nodeType === Node.TEXT_NODE) n = h.text;else if ("number" == typeof t) t & p.LEVEL & p.BLOCK ? n = h.block : t & p.LEVEL & p.INLINE && (n = h.inline);else if (t instanceof HTMLElement) {
        var r = (t.getAttribute("class") || "").split(/\s+/);

        for (var o in r) {
          if (n = c[r[o]]) break;
        }

        n = n || f[t.tagName];
      }
      return null == n ? null : e & p.LEVEL & n.scope && e & p.TYPE & n.scope ? n : null;
    }

    function l() {
      for (var t = [], e = 0; e < arguments.length; e++) {
        t[e] = arguments[e];
      }

      if (t.length > 1) return t.map(function (t) {
        return l(t);
      });
      var n = t[0];
      if ("string" != typeof n.blotName && "string" != typeof n.attrName) throw new s("Invalid definition");
      if ("abstract" === n.blotName) throw new s("Cannot register abstract class");
      if (h[n.blotName || n.attrName] = n, "string" == typeof n.keyName) u[n.keyName] = n;else if (null != n.className && (c[n.className] = n), null != n.tagName) {
        Array.isArray(n.tagName) ? n.tagName = n.tagName.map(function (t) {
          return t.toUpperCase();
        }) : n.tagName = n.tagName.toUpperCase();
        var r = Array.isArray(n.tagName) ? n.tagName : [n.tagName];
        r.forEach(function (t) {
          null != f[t] && null != n.className || (f[t] = n);
        });
      }
      return n;
    }

    var a = this && this.__extends || function () {
      var t = Object.setPrototypeOf || {
        __proto__: []
      } instanceof Array && function (t, e) {
        t.__proto__ = e;
      } || function (t, e) {
        for (var n in e) {
          e.hasOwnProperty(n) && (t[n] = e[n]);
        }
      };

      return function (e, n) {
        function r() {
          this.constructor = e;
        }

        t(e, n), e.prototype = null === n ? Object.create(n) : (r.prototype = n.prototype, new r());
      };
    }();

    Object.defineProperty(e, "__esModule", {
      value: !0
    });

    var s = function (t) {
      function e(e) {
        var n = this;
        return e = "[Parchment] " + e, n = t.call(this, e) || this, n.message = e, n.name = n.constructor.name, n;
      }

      return a(e, t), e;
    }(Error);

    e.ParchmentError = s;
    var u = {},
        c = {},
        f = {},
        h = {};
    e.DATA_KEY = "__blot";
    var p;
    !function (t) {
      t[t.TYPE = 3] = "TYPE", t[t.LEVEL = 12] = "LEVEL", t[t.ATTRIBUTE = 13] = "ATTRIBUTE", t[t.BLOT = 14] = "BLOT", t[t.INLINE = 7] = "INLINE", t[t.BLOCK = 11] = "BLOCK", t[t.BLOCK_BLOT = 10] = "BLOCK_BLOT", t[t.INLINE_BLOT = 6] = "INLINE_BLOT", t[t.BLOCK_ATTRIBUTE = 9] = "BLOCK_ATTRIBUTE", t[t.INLINE_ATTRIBUTE = 5] = "INLINE_ATTRIBUTE", t[t.ANY = 15] = "ANY";
    }(p = e.Scope || (e.Scope = {})), e.create = r, e.find = o, e.query = i, e.register = l;
  }, function (t, e) {
    "use strict";

    var n = Object.prototype.hasOwnProperty,
        r = Object.prototype.toString,
        o = function o(t) {
      return "function" == typeof Array.isArray ? Array.isArray(t) : "[object Array]" === r.call(t);
    },
        i = function i(t) {
      if (!t || "[object Object]" !== r.call(t)) return !1;
      var e = n.call(t, "constructor"),
          o = t.constructor && t.constructor.prototype && n.call(t.constructor.prototype, "isPrototypeOf");
      if (t.constructor && !e && !o) return !1;
      var i;

      for (i in t) {
        ;
      }

      return void 0 === i || n.call(t, i);
    };

    t.exports = function t() {
      var e,
          n,
          r,
          l,
          a,
          s,
          u = arguments[0],
          c = 1,
          f = arguments.length,
          h = !1;

      for ("boolean" == typeof u && (h = u, u = arguments[1] || {}, c = 2), (null == u || "object" != _typeof2(u) && "function" != typeof u) && (u = {}); c < f; ++c) {
        if (null != (e = arguments[c])) for (n in e) {
          r = u[n], l = e[n], u !== l && (h && l && (i(l) || (a = o(l))) ? (a ? (a = !1, s = r && o(r) ? r : []) : s = r && i(r) ? r : {}, u[n] = t(h, s, l)) : void 0 !== l && (u[n] = l));
        }
      }

      return u;
    };
  }, function (t, e, n) {
    "use strict";

    function r(t) {
      return t && t.__esModule ? t : {
        "default": t
      };
    }

    function o(t, e) {
      if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function");
    }

    function i(t, e) {
      if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
      return !e || "object" != _typeof2(e) && "function" != typeof e ? t : e;
    }

    function l(t, e) {
      if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + _typeof2(e));
      t.prototype = Object.create(e && e.prototype, {
        constructor: {
          value: t,
          enumerable: !1,
          writable: !0,
          configurable: !0
        }
      }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e);
    }

    function a(t) {
      var e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
      return null == t ? e : ("function" == typeof t.formats && (e = (0, f["default"])(e, t.formats())), null == t.parent || "scroll" == t.parent.blotName || t.parent.statics.scope !== t.statics.scope ? e : a(t.parent, e));
    }

    Object.defineProperty(e, "__esModule", {
      value: !0
    }), e["default"] = e.BlockEmbed = e.bubbleFormats = void 0;

    var s = function () {
      function t(t, e) {
        for (var n = 0; n < e.length; n++) {
          var r = e[n];
          r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r);
        }
      }

      return function (e, n, r) {
        return n && t(e.prototype, n), r && t(e, r), e;
      };
    }(),
        u = function t(e, n, r) {
      null === e && (e = Function.prototype);
      var o = Object.getOwnPropertyDescriptor(e, n);

      if (void 0 === o) {
        var i = Object.getPrototypeOf(e);
        return null === i ? void 0 : t(i, n, r);
      }

      if ("value" in o) return o.value;
      var l = o.get;
      if (void 0 !== l) return l.call(r);
    },
        c = n(2),
        f = r(c),
        h = n(4),
        p = r(h),
        d = n(0),
        y = r(d),
        v = n(14),
        b = r(v),
        g = n(5),
        m = r(g),
        _ = n(8),
        O = r(_),
        w = function (t) {
      function e() {
        return o(this, e), i(this, (e.__proto__ || Object.getPrototypeOf(e)).apply(this, arguments));
      }

      return l(e, t), s(e, [{
        key: "attach",
        value: function value() {
          u(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "attach", this).call(this), this.attributes = new y["default"].Attributor.Store(this.domNode);
        }
      }, {
        key: "delta",
        value: function value() {
          return new p["default"]().insert(this.value(), (0, f["default"])(this.formats(), this.attributes.values()));
        }
      }, {
        key: "format",
        value: function value(t, e) {
          var n = y["default"].query(t, y["default"].Scope.BLOCK_ATTRIBUTE);
          null != n && this.attributes.attribute(n, e);
        }
      }, {
        key: "formatAt",
        value: function value(t, e, n, r) {
          this.format(n, r);
        }
      }, {
        key: "insertAt",
        value: function value(t, n, r) {
          if ("string" == typeof n && n.endsWith("\n")) {
            var o = y["default"].create(x.blotName);
            this.parent.insertBefore(o, 0 === t ? this : this.next), o.insertAt(0, n.slice(0, -1));
          } else u(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "insertAt", this).call(this, t, n, r);
        }
      }]), e;
    }(y["default"].Embed);

    w.scope = y["default"].Scope.BLOCK_BLOT;

    var x = function (t) {
      function e(t) {
        o(this, e);
        var n = i(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this, t));
        return n.cache = {}, n;
      }

      return l(e, t), s(e, [{
        key: "delta",
        value: function value() {
          return null == this.cache.delta && (this.cache.delta = this.descendants(y["default"].Leaf).reduce(function (t, e) {
            return 0 === e.length() ? t : t.insert(e.value(), a(e));
          }, new p["default"]()).insert("\n", a(this))), this.cache.delta;
        }
      }, {
        key: "deleteAt",
        value: function value(t, n) {
          u(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "deleteAt", this).call(this, t, n), this.cache = {};
        }
      }, {
        key: "formatAt",
        value: function value(t, n, r, o) {
          n <= 0 || (y["default"].query(r, y["default"].Scope.BLOCK) ? t + n === this.length() && this.format(r, o) : u(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "formatAt", this).call(this, t, Math.min(n, this.length() - t - 1), r, o), this.cache = {});
        }
      }, {
        key: "insertAt",
        value: function value(t, n, r) {
          if (null != r) return u(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "insertAt", this).call(this, t, n, r);

          if (0 !== n.length) {
            var o = n.split("\n"),
                i = o.shift();
            i.length > 0 && (t < this.length() - 1 || null == this.children.tail ? u(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "insertAt", this).call(this, Math.min(t, this.length() - 1), i) : this.children.tail.insertAt(this.children.tail.length(), i), this.cache = {});
            var l = this;
            o.reduce(function (t, e) {
              return l = l.split(t, !0), l.insertAt(0, e), e.length;
            }, t + i.length);
          }
        }
      }, {
        key: "insertBefore",
        value: function value(t, n) {
          var r = this.children.head;
          u(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "insertBefore", this).call(this, t, n), r instanceof b["default"] && r.remove(), this.cache = {};
        }
      }, {
        key: "length",
        value: function value() {
          return null == this.cache.length && (this.cache.length = u(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "length", this).call(this) + 1), this.cache.length;
        }
      }, {
        key: "moveChildren",
        value: function value(t, n) {
          u(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "moveChildren", this).call(this, t, n), this.cache = {};
        }
      }, {
        key: "optimize",
        value: function value(t) {
          u(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "optimize", this).call(this, t), this.cache = {};
        }
      }, {
        key: "path",
        value: function value(t) {
          return u(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "path", this).call(this, t, !0);
        }
      }, {
        key: "removeChild",
        value: function value(t) {
          u(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "removeChild", this).call(this, t), this.cache = {};
        }
      }, {
        key: "split",
        value: function value(t) {
          var n = arguments.length > 1 && void 0 !== arguments[1] && arguments[1];

          if (n && (0 === t || t >= this.length() - 1)) {
            var r = this.clone();
            return 0 === t ? (this.parent.insertBefore(r, this), this) : (this.parent.insertBefore(r, this.next), r);
          }

          var o = u(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "split", this).call(this, t, n);
          return this.cache = {}, o;
        }
      }]), e;
    }(y["default"].Block);

    x.blotName = "block", x.tagName = "P", x.defaultChild = "break", x.allowedChildren = [m["default"], y["default"].Embed, O["default"]], e.bubbleFormats = a, e.BlockEmbed = w, e["default"] = x;
  }, function (t, e, n) {
    var r = n(54),
        o = n(12),
        i = n(2),
        l = n(20),
        a = String.fromCharCode(0),
        s = function s(t) {
      Array.isArray(t) ? this.ops = t : null != t && Array.isArray(t.ops) ? this.ops = t.ops : this.ops = [];
    };

    s.prototype.insert = function (t, e) {
      var n = {};
      return 0 === t.length ? this : (n.insert = t, null != e && "object" == _typeof2(e) && Object.keys(e).length > 0 && (n.attributes = e), this.push(n));
    }, s.prototype["delete"] = function (t) {
      return t <= 0 ? this : this.push({
        "delete": t
      });
    }, s.prototype.retain = function (t, e) {
      if (t <= 0) return this;
      var n = {
        retain: t
      };
      return null != e && "object" == _typeof2(e) && Object.keys(e).length > 0 && (n.attributes = e), this.push(n);
    }, s.prototype.push = function (t) {
      var e = this.ops.length,
          n = this.ops[e - 1];

      if (t = i(!0, {}, t), "object" == _typeof2(n)) {
        if ("number" == typeof t["delete"] && "number" == typeof n["delete"]) return this.ops[e - 1] = {
          "delete": n["delete"] + t["delete"]
        }, this;
        if ("number" == typeof n["delete"] && null != t.insert && (e -= 1, "object" != _typeof2(n = this.ops[e - 1]))) return this.ops.unshift(t), this;

        if (o(t.attributes, n.attributes)) {
          if ("string" == typeof t.insert && "string" == typeof n.insert) return this.ops[e - 1] = {
            insert: n.insert + t.insert
          }, "object" == _typeof2(t.attributes) && (this.ops[e - 1].attributes = t.attributes), this;
          if ("number" == typeof t.retain && "number" == typeof n.retain) return this.ops[e - 1] = {
            retain: n.retain + t.retain
          }, "object" == _typeof2(t.attributes) && (this.ops[e - 1].attributes = t.attributes), this;
        }
      }

      return e === this.ops.length ? this.ops.push(t) : this.ops.splice(e, 0, t), this;
    }, s.prototype.chop = function () {
      var t = this.ops[this.ops.length - 1];
      return t && t.retain && !t.attributes && this.ops.pop(), this;
    }, s.prototype.filter = function (t) {
      return this.ops.filter(t);
    }, s.prototype.forEach = function (t) {
      this.ops.forEach(t);
    }, s.prototype.map = function (t) {
      return this.ops.map(t);
    }, s.prototype.partition = function (t) {
      var e = [],
          n = [];
      return this.forEach(function (r) {
        (t(r) ? e : n).push(r);
      }), [e, n];
    }, s.prototype.reduce = function (t, e) {
      return this.ops.reduce(t, e);
    }, s.prototype.changeLength = function () {
      return this.reduce(function (t, e) {
        return e.insert ? t + l.length(e) : e["delete"] ? t - e["delete"] : t;
      }, 0);
    }, s.prototype.length = function () {
      return this.reduce(function (t, e) {
        return t + l.length(e);
      }, 0);
    }, s.prototype.slice = function (t, e) {
      t = t || 0, "number" != typeof e && (e = 1 / 0);

      for (var n = [], r = l.iterator(this.ops), o = 0; o < e && r.hasNext();) {
        var i;
        o < t ? i = r.next(t - o) : (i = r.next(e - o), n.push(i)), o += l.length(i);
      }

      return new s(n);
    }, s.prototype.compose = function (t) {
      for (var e = l.iterator(this.ops), n = l.iterator(t.ops), r = new s(); e.hasNext() || n.hasNext();) {
        if ("insert" === n.peekType()) r.push(n.next());else if ("delete" === e.peekType()) r.push(e.next());else {
          var o = Math.min(e.peekLength(), n.peekLength()),
              i = e.next(o),
              a = n.next(o);

          if ("number" == typeof a.retain) {
            var u = {};
            "number" == typeof i.retain ? u.retain = o : u.insert = i.insert;
            var c = l.attributes.compose(i.attributes, a.attributes, "number" == typeof i.retain);
            c && (u.attributes = c), r.push(u);
          } else "number" == typeof a["delete"] && "number" == typeof i.retain && r.push(a);
        }
      }

      return r.chop();
    }, s.prototype.concat = function (t) {
      var e = new s(this.ops.slice());
      return t.ops.length > 0 && (e.push(t.ops[0]), e.ops = e.ops.concat(t.ops.slice(1))), e;
    }, s.prototype.diff = function (t, e) {
      if (this.ops === t.ops) return new s();
      var n = [this, t].map(function (e) {
        return e.map(function (n) {
          if (null != n.insert) return "string" == typeof n.insert ? n.insert : a;
          var r = e === t ? "on" : "with";
          throw new Error("diff() called " + r + " non-document");
        }).join("");
      }),
          i = new s(),
          u = r(n[0], n[1], e),
          c = l.iterator(this.ops),
          f = l.iterator(t.ops);
      return u.forEach(function (t) {
        for (var e = t[1].length; e > 0;) {
          var n = 0;

          switch (t[0]) {
            case r.INSERT:
              n = Math.min(f.peekLength(), e), i.push(f.next(n));
              break;

            case r.DELETE:
              n = Math.min(e, c.peekLength()), c.next(n), i["delete"](n);
              break;

            case r.EQUAL:
              n = Math.min(c.peekLength(), f.peekLength(), e);
              var a = c.next(n),
                  s = f.next(n);
              o(a.insert, s.insert) ? i.retain(n, l.attributes.diff(a.attributes, s.attributes)) : i.push(s)["delete"](n);
          }

          e -= n;
        }
      }), i.chop();
    }, s.prototype.eachLine = function (t, e) {
      e = e || "\n";

      for (var n = l.iterator(this.ops), r = new s(), o = 0; n.hasNext();) {
        if ("insert" !== n.peekType()) return;
        var i = n.peek(),
            a = l.length(i) - n.peekLength(),
            u = "string" == typeof i.insert ? i.insert.indexOf(e, a) - a : -1;
        if (u < 0) r.push(n.next());else if (u > 0) r.push(n.next(u));else {
          if (!1 === t(r, n.next(1).attributes || {}, o)) return;
          o += 1, r = new s();
        }
      }

      r.length() > 0 && t(r, {}, o);
    }, s.prototype.transform = function (t, e) {
      if (e = !!e, "number" == typeof t) return this.transformPosition(t, e);

      for (var n = l.iterator(this.ops), r = l.iterator(t.ops), o = new s(); n.hasNext() || r.hasNext();) {
        if ("insert" !== n.peekType() || !e && "insert" === r.peekType()) {
          if ("insert" === r.peekType()) o.push(r.next());else {
            var i = Math.min(n.peekLength(), r.peekLength()),
                a = n.next(i),
                u = r.next(i);
            if (a["delete"]) continue;
            u["delete"] ? o.push(u) : o.retain(i, l.attributes.transform(a.attributes, u.attributes, e));
          }
        } else o.retain(l.length(n.next()));
      }

      return o.chop();
    }, s.prototype.transformPosition = function (t, e) {
      e = !!e;

      for (var n = l.iterator(this.ops), r = 0; n.hasNext() && r <= t;) {
        var o = n.peekLength(),
            i = n.peekType();
        n.next(), "delete" !== i ? ("insert" === i && (r < t || !e) && (t += o), r += o) : t -= Math.min(o, t - r);
      }

      return t;
    }, t.exports = s;
  }, function (t, e, n) {
    "use strict";

    function r(t) {
      return t && t.__esModule ? t : {
        "default": t
      };
    }

    function o(t, e) {
      if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function");
    }

    function i(t, e) {
      if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
      return !e || "object" != _typeof2(e) && "function" != typeof e ? t : e;
    }

    function l(t, e) {
      if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + _typeof2(e));
      t.prototype = Object.create(e && e.prototype, {
        constructor: {
          value: t,
          enumerable: !1,
          writable: !0,
          configurable: !0
        }
      }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e);
    }

    Object.defineProperty(e, "__esModule", {
      value: !0
    });

    var a = function () {
      function t(t, e) {
        for (var n = 0; n < e.length; n++) {
          var r = e[n];
          r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r);
        }
      }

      return function (e, n, r) {
        return n && t(e.prototype, n), r && t(e, r), e;
      };
    }(),
        s = function t(e, n, r) {
      null === e && (e = Function.prototype);
      var o = Object.getOwnPropertyDescriptor(e, n);

      if (void 0 === o) {
        var i = Object.getPrototypeOf(e);
        return null === i ? void 0 : t(i, n, r);
      }

      if ("value" in o) return o.value;
      var l = o.get;
      if (void 0 !== l) return l.call(r);
    },
        u = n(8),
        c = r(u),
        f = n(0),
        h = r(f),
        p = function (t) {
      function e() {
        return o(this, e), i(this, (e.__proto__ || Object.getPrototypeOf(e)).apply(this, arguments));
      }

      return l(e, t), a(e, [{
        key: "formatAt",
        value: function value(t, n, r, o) {
          if (e.compare(this.statics.blotName, r) < 0 && h["default"].query(r, h["default"].Scope.BLOT)) {
            var i = this.isolate(t, n);
            o && i.wrap(r, o);
          } else s(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "formatAt", this).call(this, t, n, r, o);
        }
      }, {
        key: "optimize",
        value: function value(t) {
          if (s(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "optimize", this).call(this, t), this.parent instanceof e && e.compare(this.statics.blotName, this.parent.statics.blotName) > 0) {
            var n = this.parent.isolate(this.offset(), this.length());
            this.moveChildren(n), n.wrap(this);
          }
        }
      }], [{
        key: "compare",
        value: function value(t, n) {
          var r = e.order.indexOf(t),
              o = e.order.indexOf(n);
          return r >= 0 || o >= 0 ? r - o : t === n ? 0 : t < n ? -1 : 1;
        }
      }]), e;
    }(h["default"].Inline);

    p.allowedChildren = [p, h["default"].Embed, c["default"]], p.order = ["cursor", "inline", "underline", "strike", "italic", "bold", "script", "link", "code"], e["default"] = p;
  }, function (t, e, n) {
    "use strict";

    function r(t) {
      return t && t.__esModule ? t : {
        "default": t
      };
    }

    function o(t, e, n) {
      return e in t ? Object.defineProperty(t, e, {
        value: n,
        enumerable: !0,
        configurable: !0,
        writable: !0
      }) : t[e] = n, t;
    }

    function i(t, e) {
      if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function");
    }

    function l(t, e) {
      if (e = (0, N["default"])(!0, {
        container: t,
        modules: {
          clipboard: !0,
          keyboard: !0,
          history: !0
        }
      }, e), e.theme && e.theme !== S.DEFAULTS.theme) {
        if (e.theme = S["import"]("themes/" + e.theme), null == e.theme) throw new Error("Invalid theme " + e.theme + ". Did you register it?");
      } else e.theme = T["default"];

      var n = (0, N["default"])(!0, {}, e.theme.DEFAULTS);
      [n, e].forEach(function (t) {
        t.modules = t.modules || {}, Object.keys(t.modules).forEach(function (e) {
          !0 === t.modules[e] && (t.modules[e] = {});
        });
      });
      var r = Object.keys(n.modules).concat(Object.keys(e.modules)),
          o = r.reduce(function (t, e) {
        var n = S["import"]("modules/" + e);
        return null == n ? P.error("Cannot load " + e + " module. Are you sure you registered it?") : t[e] = n.DEFAULTS || {}, t;
      }, {});
      return null != e.modules && e.modules.toolbar && e.modules.toolbar.constructor !== Object && (e.modules.toolbar = {
        container: e.modules.toolbar
      }), e = (0, N["default"])(!0, {}, S.DEFAULTS, {
        modules: o
      }, n, e), ["bounds", "container", "scrollingContainer"].forEach(function (t) {
        "string" == typeof e[t] && (e[t] = document.querySelector(e[t]));
      }), e.modules = Object.keys(e.modules).reduce(function (t, n) {
        return e.modules[n] && (t[n] = e.modules[n]), t;
      }, {}), e;
    }

    function a(t, e, n, r) {
      if (this.options.strict && !this.isEnabled() && e === g["default"].sources.USER) return new d["default"]();
      var o = null == n ? null : this.getSelection(),
          i = this.editor.delta,
          l = t();

      if (null != o && (!0 === n && (n = o.index), null == r ? o = u(o, l, e) : 0 !== r && (o = u(o, n, r, e)), this.setSelection(o, g["default"].sources.SILENT)), l.length() > 0) {
        var a,
            s = [g["default"].events.TEXT_CHANGE, l, i, e];

        if ((a = this.emitter).emit.apply(a, [g["default"].events.EDITOR_CHANGE].concat(s)), e !== g["default"].sources.SILENT) {
          var c;
          (c = this.emitter).emit.apply(c, s);
        }
      }

      return l;
    }

    function s(t, e, n, r, o) {
      var i = {};
      return "number" == typeof t.index && "number" == typeof t.length ? "number" != typeof e ? (o = r, r = n, n = e, e = t.length, t = t.index) : (e = t.length, t = t.index) : "number" != typeof e && (o = r, r = n, n = e, e = 0), "object" === (void 0 === n ? "undefined" : c(n)) ? (i = n, o = r) : "string" == typeof n && (null != r ? i[n] = r : o = n), o = o || g["default"].sources.API, [t, e, i, o];
    }

    function u(t, e, n, r) {
      if (null == t) return null;
      var o = void 0,
          i = void 0;

      if (e instanceof d["default"]) {
        var l = [t.index, t.index + t.length].map(function (t) {
          return e.transformPosition(t, r !== g["default"].sources.USER);
        }),
            a = f(l, 2);
        o = a[0], i = a[1];
      } else {
        var s = [t.index, t.index + t.length].map(function (t) {
          return t < e || t === e && r === g["default"].sources.USER ? t : n >= 0 ? t + n : Math.max(e, t + n);
        }),
            u = f(s, 2);
        o = u[0], i = u[1];
      }

      return new x.Range(o, i - o);
    }

    Object.defineProperty(e, "__esModule", {
      value: !0
    }), e["default"] = e.overload = e.expandConfig = void 0;

    var c = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function (t) {
      return _typeof2(t);
    } : function (t) {
      return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
    },
        f = function () {
      function t(t, e) {
        var n = [],
            r = !0,
            o = !1,
            i = void 0;

        try {
          for (var l, a = t[Symbol.iterator](); !(r = (l = a.next()).done) && (n.push(l.value), !e || n.length !== e); r = !0) {
            ;
          }
        } catch (t) {
          o = !0, i = t;
        } finally {
          try {
            !r && a["return"] && a["return"]();
          } finally {
            if (o) throw i;
          }
        }

        return n;
      }

      return function (e, n) {
        if (Array.isArray(e)) return e;
        if (Symbol.iterator in Object(e)) return t(e, n);
        throw new TypeError("Invalid attempt to destructure non-iterable instance");
      };
    }(),
        h = function () {
      function t(t, e) {
        for (var n = 0; n < e.length; n++) {
          var r = e[n];
          r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r);
        }
      }

      return function (e, n, r) {
        return n && t(e.prototype, n), r && t(e, r), e;
      };
    }();

    n(53);

    var p = n(4),
        d = r(p),
        y = n(57),
        v = r(y),
        b = n(9),
        g = r(b),
        m = n(7),
        _ = r(m),
        O = n(0),
        w = r(O),
        x = n(22),
        k = r(x),
        E = n(2),
        N = r(E),
        j = n(10),
        A = r(j),
        q = n(32),
        T = r(q),
        P = (0, A["default"])("quill"),
        S = function () {
      function t(e) {
        var n = this,
            r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
        if (i(this, t), this.options = l(e, r), this.container = this.options.container, null == this.container) return P.error("Invalid Quill container", e);
        this.options.debug && t.debug(this.options.debug);
        var o = this.container.innerHTML.trim();
        this.container.classList.add("ql-container"), this.container.innerHTML = "", this.container.__quill = this, this.root = this.addContainer("ql-editor"), this.root.classList.add("ql-blank"), this.root.setAttribute("data-gramm", !1), this.scrollingContainer = this.options.scrollingContainer || this.root, this.emitter = new g["default"](), this.scroll = w["default"].create(this.root, {
          emitter: this.emitter,
          whitelist: this.options.formats
        }), this.editor = new v["default"](this.scroll), this.selection = new k["default"](this.scroll, this.emitter), this.theme = new this.options.theme(this, this.options), this.keyboard = this.theme.addModule("keyboard"), this.clipboard = this.theme.addModule("clipboard"), this.history = this.theme.addModule("history"), this.theme.init(), this.emitter.on(g["default"].events.EDITOR_CHANGE, function (t) {
          t === g["default"].events.TEXT_CHANGE && n.root.classList.toggle("ql-blank", n.editor.isBlank());
        }), this.emitter.on(g["default"].events.SCROLL_UPDATE, function (t, e) {
          var r = n.selection.lastRange,
              o = r && 0 === r.length ? r.index : void 0;
          a.call(n, function () {
            return n.editor.update(null, e, o);
          }, t);
        });
        var s = this.clipboard.convert("<div class='ql-editor' style=\"white-space: normal;\">" + o + "<p><br></p></div>");
        this.setContents(s), this.history.clear(), this.options.placeholder && this.root.setAttribute("data-placeholder", this.options.placeholder), this.options.readOnly && this.disable();
      }

      return h(t, null, [{
        key: "debug",
        value: function value(t) {
          !0 === t && (t = "log"), A["default"].level(t);
        }
      }, {
        key: "find",
        value: function value(t) {
          return t.__quill || w["default"].find(t);
        }
      }, {
        key: "import",
        value: function value(t) {
          return null == this.imports[t] && P.error("Cannot import " + t + ". Are you sure it was registered?"), this.imports[t];
        }
      }, {
        key: "register",
        value: function value(t, e) {
          var n = this,
              r = arguments.length > 2 && void 0 !== arguments[2] && arguments[2];

          if ("string" != typeof t) {
            var o = t.attrName || t.blotName;
            "string" == typeof o ? this.register("formats/" + o, t, e) : Object.keys(t).forEach(function (r) {
              n.register(r, t[r], e);
            });
          } else null == this.imports[t] || r || P.warn("Overwriting " + t + " with", e), this.imports[t] = e, (t.startsWith("blots/") || t.startsWith("formats/")) && "abstract" !== e.blotName ? w["default"].register(e) : t.startsWith("modules") && "function" == typeof e.register && e.register();
        }
      }]), h(t, [{
        key: "addContainer",
        value: function value(t) {
          var e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : null;

          if ("string" == typeof t) {
            var n = t;
            t = document.createElement("div"), t.classList.add(n);
          }

          return this.container.insertBefore(t, e), t;
        }
      }, {
        key: "blur",
        value: function value() {
          this.selection.setRange(null);
        }
      }, {
        key: "deleteText",
        value: function value(t, e, n) {
          var r = this,
              o = s(t, e, n),
              i = f(o, 4);
          return t = i[0], e = i[1], n = i[3], a.call(this, function () {
            return r.editor.deleteText(t, e);
          }, n, t, -1 * e);
        }
      }, {
        key: "disable",
        value: function value() {
          this.enable(!1);
        }
      }, {
        key: "enable",
        value: function value() {
          var t = !(arguments.length > 0 && void 0 !== arguments[0]) || arguments[0];
          this.scroll.enable(t), this.container.classList.toggle("ql-disabled", !t);
        }
      }, {
        key: "focus",
        value: function value() {
          var t = this.scrollingContainer.scrollTop;
          this.selection.focus(), this.scrollingContainer.scrollTop = t, this.scrollIntoView();
        }
      }, {
        key: "format",
        value: function value(t, e) {
          var n = this,
              r = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : g["default"].sources.API;
          return a.call(this, function () {
            var r = n.getSelection(!0),
                i = new d["default"]();
            if (null == r) return i;
            if (w["default"].query(t, w["default"].Scope.BLOCK)) i = n.editor.formatLine(r.index, r.length, o({}, t, e));else {
              if (0 === r.length) return n.selection.format(t, e), i;
              i = n.editor.formatText(r.index, r.length, o({}, t, e));
            }
            return n.setSelection(r, g["default"].sources.SILENT), i;
          }, r);
        }
      }, {
        key: "formatLine",
        value: function value(t, e, n, r, o) {
          var i = this,
              l = void 0,
              u = s(t, e, n, r, o),
              c = f(u, 4);
          return t = c[0], e = c[1], l = c[2], o = c[3], a.call(this, function () {
            return i.editor.formatLine(t, e, l);
          }, o, t, 0);
        }
      }, {
        key: "formatText",
        value: function value(t, e, n, r, o) {
          var i = this,
              l = void 0,
              u = s(t, e, n, r, o),
              c = f(u, 4);
          return t = c[0], e = c[1], l = c[2], o = c[3], a.call(this, function () {
            return i.editor.formatText(t, e, l);
          }, o, t, 0);
        }
      }, {
        key: "getBounds",
        value: function value(t) {
          var e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0,
              n = void 0;
          n = "number" == typeof t ? this.selection.getBounds(t, e) : this.selection.getBounds(t.index, t.length);
          var r = this.container.getBoundingClientRect();
          return {
            bottom: n.bottom - r.top,
            height: n.height,
            left: n.left - r.left,
            right: n.right - r.left,
            top: n.top - r.top,
            width: n.width
          };
        }
      }, {
        key: "getContents",
        value: function value() {
          var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0,
              e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : this.getLength() - t,
              n = s(t, e),
              r = f(n, 2);
          return t = r[0], e = r[1], this.editor.getContents(t, e);
        }
      }, {
        key: "getFormat",
        value: function value() {
          var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : this.getSelection(!0),
              e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0;
          return "number" == typeof t ? this.editor.getFormat(t, e) : this.editor.getFormat(t.index, t.length);
        }
      }, {
        key: "getIndex",
        value: function value(t) {
          return t.offset(this.scroll);
        }
      }, {
        key: "getLength",
        value: function value() {
          return this.scroll.length();
        }
      }, {
        key: "getLeaf",
        value: function value(t) {
          return this.scroll.leaf(t);
        }
      }, {
        key: "getLine",
        value: function value(t) {
          return this.scroll.line(t);
        }
      }, {
        key: "getLines",
        value: function value() {
          var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0,
              e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : Number.MAX_VALUE;
          return "number" != typeof t ? this.scroll.lines(t.index, t.length) : this.scroll.lines(t, e);
        }
      }, {
        key: "getModule",
        value: function value(t) {
          return this.theme.modules[t];
        }
      }, {
        key: "getSelection",
        value: function value() {
          return arguments.length > 0 && void 0 !== arguments[0] && arguments[0] && this.focus(), this.update(), this.selection.getRange()[0];
        }
      }, {
        key: "getText",
        value: function value() {
          var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0,
              e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : this.getLength() - t,
              n = s(t, e),
              r = f(n, 2);
          return t = r[0], e = r[1], this.editor.getText(t, e);
        }
      }, {
        key: "hasFocus",
        value: function value() {
          return this.selection.hasFocus();
        }
      }, {
        key: "insertEmbed",
        value: function value(e, n, r) {
          var o = this,
              i = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : t.sources.API;
          return a.call(this, function () {
            return o.editor.insertEmbed(e, n, r);
          }, i, e);
        }
      }, {
        key: "insertText",
        value: function value(t, e, n, r, o) {
          var i = this,
              l = void 0,
              u = s(t, 0, n, r, o),
              c = f(u, 4);
          return t = c[0], l = c[2], o = c[3], a.call(this, function () {
            return i.editor.insertText(t, e, l);
          }, o, t, e.length);
        }
      }, {
        key: "isEnabled",
        value: function value() {
          return !this.container.classList.contains("ql-disabled");
        }
      }, {
        key: "off",
        value: function value() {
          return this.emitter.off.apply(this.emitter, arguments);
        }
      }, {
        key: "on",
        value: function value() {
          return this.emitter.on.apply(this.emitter, arguments);
        }
      }, {
        key: "once",
        value: function value() {
          return this.emitter.once.apply(this.emitter, arguments);
        }
      }, {
        key: "pasteHTML",
        value: function value(t, e, n) {
          this.clipboard.dangerouslyPasteHTML(t, e, n);
        }
      }, {
        key: "removeFormat",
        value: function value(t, e, n) {
          var r = this,
              o = s(t, e, n),
              i = f(o, 4);
          return t = i[0], e = i[1], n = i[3], a.call(this, function () {
            return r.editor.removeFormat(t, e);
          }, n, t);
        }
      }, {
        key: "scrollIntoView",
        value: function value() {
          this.selection.scrollIntoView(this.scrollingContainer);
        }
      }, {
        key: "setContents",
        value: function value(t) {
          var e = this,
              n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : g["default"].sources.API;
          return a.call(this, function () {
            t = new d["default"](t);
            var n = e.getLength(),
                r = e.editor.deleteText(0, n),
                o = e.editor.applyDelta(t),
                i = o.ops[o.ops.length - 1];
            return null != i && "string" == typeof i.insert && "\n" === i.insert[i.insert.length - 1] && (e.editor.deleteText(e.getLength() - 1, 1), o["delete"](1)), r.compose(o);
          }, n);
        }
      }, {
        key: "setSelection",
        value: function value(e, n, r) {
          if (null == e) this.selection.setRange(null, n || t.sources.API);else {
            var o = s(e, n, r),
                i = f(o, 4);
            e = i[0], n = i[1], r = i[3], this.selection.setRange(new x.Range(e, n), r), r !== g["default"].sources.SILENT && this.selection.scrollIntoView(this.scrollingContainer);
          }
        }
      }, {
        key: "setText",
        value: function value(t) {
          var e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : g["default"].sources.API,
              n = new d["default"]().insert(t);
          return this.setContents(n, e);
        }
      }, {
        key: "update",
        value: function value() {
          var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : g["default"].sources.USER,
              e = this.scroll.update(t);
          return this.selection.update(t), e;
        }
      }, {
        key: "updateContents",
        value: function value(t) {
          var e = this,
              n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : g["default"].sources.API;
          return a.call(this, function () {
            return t = new d["default"](t), e.editor.applyDelta(t, n);
          }, n, !0);
        }
      }]), t;
    }();

    S.DEFAULTS = {
      bounds: null,
      formats: null,
      modules: {},
      placeholder: "",
      readOnly: !1,
      scrollingContainer: null,
      strict: !0,
      theme: "default"
    }, S.events = g["default"].events, S.sources = g["default"].sources, S.version = "1.3.6", S.imports = {
      delta: d["default"],
      parchment: w["default"],
      "core/module": _["default"],
      "core/theme": T["default"]
    }, e.expandConfig = l, e.overload = s, e["default"] = S;
  }, function (t, e, n) {
    "use strict";

    function r(t, e) {
      if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function");
    }

    Object.defineProperty(e, "__esModule", {
      value: !0
    });

    var o = function t(e) {
      var n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
      r(this, t), this.quill = e, this.options = n;
    };

    o.DEFAULTS = {}, e["default"] = o;
  }, function (t, e, n) {
    "use strict";

    function r(t, e) {
      if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function");
    }

    function o(t, e) {
      if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
      return !e || "object" != _typeof2(e) && "function" != typeof e ? t : e;
    }

    function i(t, e) {
      if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + _typeof2(e));
      t.prototype = Object.create(e && e.prototype, {
        constructor: {
          value: t,
          enumerable: !1,
          writable: !0,
          configurable: !0
        }
      }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e);
    }

    Object.defineProperty(e, "__esModule", {
      value: !0
    });

    var l = n(0),
        a = function (t) {
      return t && t.__esModule ? t : {
        "default": t
      };
    }(l),
        s = function (t) {
      function e() {
        return r(this, e), o(this, (e.__proto__ || Object.getPrototypeOf(e)).apply(this, arguments));
      }

      return i(e, t), e;
    }(a["default"].Text);

    e["default"] = s;
  }, function (t, e, n) {
    "use strict";

    function r(t) {
      return t && t.__esModule ? t : {
        "default": t
      };
    }

    function o(t, e) {
      if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function");
    }

    function i(t, e) {
      if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
      return !e || "object" != _typeof2(e) && "function" != typeof e ? t : e;
    }

    function l(t, e) {
      if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + _typeof2(e));
      t.prototype = Object.create(e && e.prototype, {
        constructor: {
          value: t,
          enumerable: !1,
          writable: !0,
          configurable: !0
        }
      }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e);
    }

    Object.defineProperty(e, "__esModule", {
      value: !0
    });

    var a = function () {
      function t(t, e) {
        for (var n = 0; n < e.length; n++) {
          var r = e[n];
          r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r);
        }
      }

      return function (e, n, r) {
        return n && t(e.prototype, n), r && t(e, r), e;
      };
    }(),
        s = function t(e, n, r) {
      null === e && (e = Function.prototype);
      var o = Object.getOwnPropertyDescriptor(e, n);

      if (void 0 === o) {
        var i = Object.getPrototypeOf(e);
        return null === i ? void 0 : t(i, n, r);
      }

      if ("value" in o) return o.value;
      var l = o.get;
      if (void 0 !== l) return l.call(r);
    },
        u = n(58),
        c = r(u),
        f = n(10),
        h = r(f),
        p = (0, h["default"])("quill:events");

    ["selectionchange", "mousedown", "mouseup", "click"].forEach(function (t) {
      document.addEventListener(t, function () {
        for (var t = arguments.length, e = Array(t), n = 0; n < t; n++) {
          e[n] = arguments[n];
        }

        [].slice.call(document.querySelectorAll(".ql-container")).forEach(function (t) {
          if (t.__quill && t.__quill.emitter) {
            var n;

            (n = t.__quill.emitter).handleDOM.apply(n, e);
          }
        });
      });
    });

    var d = function (t) {
      function e() {
        o(this, e);
        var t = i(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this));
        return t.listeners = {}, t.on("error", p.error), t;
      }

      return l(e, t), a(e, [{
        key: "emit",
        value: function value() {
          p.log.apply(p, arguments), s(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "emit", this).apply(this, arguments);
        }
      }, {
        key: "handleDOM",
        value: function value(t) {
          for (var e = arguments.length, n = Array(e > 1 ? e - 1 : 0), r = 1; r < e; r++) {
            n[r - 1] = arguments[r];
          }

          (this.listeners[t.type] || []).forEach(function (e) {
            var r = e.node,
                o = e.handler;
            (t.target === r || r.contains(t.target)) && o.apply(void 0, [t].concat(n));
          });
        }
      }, {
        key: "listenDOM",
        value: function value(t, e, n) {
          this.listeners[t] || (this.listeners[t] = []), this.listeners[t].push({
            node: e,
            handler: n
          });
        }
      }]), e;
    }(c["default"]);

    d.events = {
      EDITOR_CHANGE: "editor-change",
      SCROLL_BEFORE_UPDATE: "scroll-before-update",
      SCROLL_OPTIMIZE: "scroll-optimize",
      SCROLL_UPDATE: "scroll-update",
      SELECTION_CHANGE: "selection-change",
      TEXT_CHANGE: "text-change"
    }, d.sources = {
      API: "api",
      SILENT: "silent",
      USER: "user"
    }, e["default"] = d;
  }, function (t, e, n) {
    "use strict";

    function r(t) {
      if (i.indexOf(t) <= i.indexOf(l)) {
        for (var e, n = arguments.length, r = Array(n > 1 ? n - 1 : 0), o = 1; o < n; o++) {
          r[o - 1] = arguments[o];
        }

        (e = console)[t].apply(e, r);
      }
    }

    function o(t) {
      return i.reduce(function (e, n) {
        return e[n] = r.bind(console, n, t), e;
      }, {});
    }

    Object.defineProperty(e, "__esModule", {
      value: !0
    });
    var i = ["error", "warn", "log", "info"],
        l = "warn";
    r.level = o.level = function (t) {
      l = t;
    }, e["default"] = o;
  }, function (t, e, n) {
    "use strict";

    Object.defineProperty(e, "__esModule", {
      value: !0
    });

    var r = n(1),
        o = function () {
      function t(t, e, n) {
        void 0 === n && (n = {}), this.attrName = t, this.keyName = e;
        var o = r.Scope.TYPE & r.Scope.ATTRIBUTE;
        null != n.scope ? this.scope = n.scope & r.Scope.LEVEL | o : this.scope = r.Scope.ATTRIBUTE, null != n.whitelist && (this.whitelist = n.whitelist);
      }

      return t.keys = function (t) {
        return [].map.call(t.attributes, function (t) {
          return t.name;
        });
      }, t.prototype.add = function (t, e) {
        return !!this.canAdd(t, e) && (t.setAttribute(this.keyName, e), !0);
      }, t.prototype.canAdd = function (t, e) {
        return null != r.query(t, r.Scope.BLOT & (this.scope | r.Scope.TYPE)) && (null == this.whitelist || ("string" == typeof e ? this.whitelist.indexOf(e.replace(/["']/g, "")) > -1 : this.whitelist.indexOf(e) > -1));
      }, t.prototype.remove = function (t) {
        t.removeAttribute(this.keyName);
      }, t.prototype.value = function (t) {
        var e = t.getAttribute(this.keyName);
        return this.canAdd(t, e) && e ? e : "";
      }, t;
    }();

    e["default"] = o;
  }, function (t, e, n) {
    function r(t) {
      return null === t || void 0 === t;
    }

    function o(t) {
      return !(!t || "object" != _typeof2(t) || "number" != typeof t.length) && "function" == typeof t.copy && "function" == typeof t.slice && !(t.length > 0 && "number" != typeof t[0]);
    }

    function i(t, e, n) {
      var i, c;
      if (r(t) || r(e)) return !1;
      if (t.prototype !== e.prototype) return !1;
      if (s(t)) return !!s(e) && (t = l.call(t), e = l.call(e), u(t, e, n));

      if (o(t)) {
        if (!o(e)) return !1;
        if (t.length !== e.length) return !1;

        for (i = 0; i < t.length; i++) {
          if (t[i] !== e[i]) return !1;
        }

        return !0;
      }

      try {
        var f = a(t),
            h = a(e);
      } catch (t) {
        return !1;
      }

      if (f.length != h.length) return !1;

      for (f.sort(), h.sort(), i = f.length - 1; i >= 0; i--) {
        if (f[i] != h[i]) return !1;
      }

      for (i = f.length - 1; i >= 0; i--) {
        if (c = f[i], !u(t[c], e[c], n)) return !1;
      }

      return _typeof2(t) == _typeof2(e);
    }

    var l = Array.prototype.slice,
        a = n(55),
        s = n(56),
        u = t.exports = function (t, e, n) {
      return n || (n = {}), t === e || (t instanceof Date && e instanceof Date ? t.getTime() === e.getTime() : !t || !e || "object" != _typeof2(t) && "object" != _typeof2(e) ? n.strict ? t === e : t == e : i(t, e, n));
    };
  }, function (t, e, n) {
    "use strict";

    function r(t) {
      return t && t.__esModule ? t : {
        "default": t
      };
    }

    function o(t, e) {
      if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function");
    }

    function i(t, e) {
      if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
      return !e || "object" != _typeof2(e) && "function" != typeof e ? t : e;
    }

    function l(t, e) {
      if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + _typeof2(e));
      t.prototype = Object.create(e && e.prototype, {
        constructor: {
          value: t,
          enumerable: !1,
          writable: !0,
          configurable: !0
        }
      }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e);
    }

    Object.defineProperty(e, "__esModule", {
      value: !0
    }), e["default"] = e.Code = void 0;

    var a = function () {
      function t(t, e) {
        var n = [],
            r = !0,
            o = !1,
            i = void 0;

        try {
          for (var l, a = t[Symbol.iterator](); !(r = (l = a.next()).done) && (n.push(l.value), !e || n.length !== e); r = !0) {
            ;
          }
        } catch (t) {
          o = !0, i = t;
        } finally {
          try {
            !r && a["return"] && a["return"]();
          } finally {
            if (o) throw i;
          }
        }

        return n;
      }

      return function (e, n) {
        if (Array.isArray(e)) return e;
        if (Symbol.iterator in Object(e)) return t(e, n);
        throw new TypeError("Invalid attempt to destructure non-iterable instance");
      };
    }(),
        s = function () {
      function t(t, e) {
        for (var n = 0; n < e.length; n++) {
          var r = e[n];
          r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r);
        }
      }

      return function (e, n, r) {
        return n && t(e.prototype, n), r && t(e, r), e;
      };
    }(),
        u = function t(e, n, r) {
      null === e && (e = Function.prototype);
      var o = Object.getOwnPropertyDescriptor(e, n);

      if (void 0 === o) {
        var i = Object.getPrototypeOf(e);
        return null === i ? void 0 : t(i, n, r);
      }

      if ("value" in o) return o.value;
      var l = o.get;
      if (void 0 !== l) return l.call(r);
    },
        c = n(4),
        f = r(c),
        h = n(0),
        p = r(h),
        d = n(3),
        y = r(d),
        v = n(5),
        b = r(v),
        g = n(8),
        m = r(g),
        _ = function (t) {
      function e() {
        return o(this, e), i(this, (e.__proto__ || Object.getPrototypeOf(e)).apply(this, arguments));
      }

      return l(e, t), e;
    }(b["default"]);

    _.blotName = "code", _.tagName = "CODE";

    var O = function (t) {
      function e() {
        return o(this, e), i(this, (e.__proto__ || Object.getPrototypeOf(e)).apply(this, arguments));
      }

      return l(e, t), s(e, [{
        key: "delta",
        value: function value() {
          var t = this,
              e = this.domNode.textContent;
          return e.endsWith("\n") && (e = e.slice(0, -1)), e.split("\n").reduce(function (e, n) {
            return e.insert(n).insert("\n", t.formats());
          }, new f["default"]());
        }
      }, {
        key: "format",
        value: function value(t, n) {
          if (t !== this.statics.blotName || !n) {
            var r = this.descendant(m["default"], this.length() - 1),
                o = a(r, 1),
                i = o[0];
            null != i && i.deleteAt(i.length() - 1, 1), u(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "format", this).call(this, t, n);
          }
        }
      }, {
        key: "formatAt",
        value: function value(t, n, r, o) {
          if (0 !== n && null != p["default"].query(r, p["default"].Scope.BLOCK) && (r !== this.statics.blotName || o !== this.statics.formats(this.domNode))) {
            var i = this.newlineIndex(t);

            if (!(i < 0 || i >= t + n)) {
              var l = this.newlineIndex(t, !0) + 1,
                  a = i - l + 1,
                  s = this.isolate(l, a),
                  u = s.next;
              s.format(r, o), u instanceof e && u.formatAt(0, t - l + n - a, r, o);
            }
          }
        }
      }, {
        key: "insertAt",
        value: function value(t, e, n) {
          if (null == n) {
            var r = this.descendant(m["default"], t),
                o = a(r, 2),
                i = o[0],
                l = o[1];
            i.insertAt(l, e);
          }
        }
      }, {
        key: "length",
        value: function value() {
          var t = this.domNode.textContent.length;
          return this.domNode.textContent.endsWith("\n") ? t : t + 1;
        }
      }, {
        key: "newlineIndex",
        value: function value(t) {
          if (arguments.length > 1 && void 0 !== arguments[1] && arguments[1]) return this.domNode.textContent.slice(0, t).lastIndexOf("\n");
          var e = this.domNode.textContent.slice(t).indexOf("\n");
          return e > -1 ? t + e : -1;
        }
      }, {
        key: "optimize",
        value: function value(t) {
          this.domNode.textContent.endsWith("\n") || this.appendChild(p["default"].create("text", "\n")), u(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "optimize", this).call(this, t);
          var n = this.next;
          null != n && n.prev === this && n.statics.blotName === this.statics.blotName && this.statics.formats(this.domNode) === n.statics.formats(n.domNode) && (n.optimize(t), n.moveChildren(this), n.remove());
        }
      }, {
        key: "replace",
        value: function value(t) {
          u(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "replace", this).call(this, t), [].slice.call(this.domNode.querySelectorAll("*")).forEach(function (t) {
            var e = p["default"].find(t);
            null == e ? t.parentNode.removeChild(t) : e instanceof p["default"].Embed ? e.remove() : e.unwrap();
          });
        }
      }], [{
        key: "create",
        value: function value(t) {
          var n = u(e.__proto__ || Object.getPrototypeOf(e), "create", this).call(this, t);
          return n.setAttribute("spellcheck", !1), n;
        }
      }, {
        key: "formats",
        value: function value() {
          return !0;
        }
      }]), e;
    }(y["default"]);

    O.blotName = "code-block", O.tagName = "PRE", O.TAB = "  ", e.Code = _, e["default"] = O;
  }, function (t, e, n) {
    "use strict";

    function r(t, e) {
      if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function");
    }

    function o(t, e) {
      if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
      return !e || "object" != _typeof2(e) && "function" != typeof e ? t : e;
    }

    function i(t, e) {
      if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + _typeof2(e));
      t.prototype = Object.create(e && e.prototype, {
        constructor: {
          value: t,
          enumerable: !1,
          writable: !0,
          configurable: !0
        }
      }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e);
    }

    Object.defineProperty(e, "__esModule", {
      value: !0
    });

    var l = function () {
      function t(t, e) {
        for (var n = 0; n < e.length; n++) {
          var r = e[n];
          r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r);
        }
      }

      return function (e, n, r) {
        return n && t(e.prototype, n), r && t(e, r), e;
      };
    }(),
        a = function t(e, n, r) {
      null === e && (e = Function.prototype);
      var o = Object.getOwnPropertyDescriptor(e, n);

      if (void 0 === o) {
        var i = Object.getPrototypeOf(e);
        return null === i ? void 0 : t(i, n, r);
      }

      if ("value" in o) return o.value;
      var l = o.get;
      if (void 0 !== l) return l.call(r);
    },
        s = n(0),
        u = function (t) {
      return t && t.__esModule ? t : {
        "default": t
      };
    }(s),
        c = function (t) {
      function e() {
        return r(this, e), o(this, (e.__proto__ || Object.getPrototypeOf(e)).apply(this, arguments));
      }

      return i(e, t), l(e, [{
        key: "insertInto",
        value: function value(t, n) {
          0 === t.children.length ? a(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "insertInto", this).call(this, t, n) : this.remove();
        }
      }, {
        key: "length",
        value: function value() {
          return 0;
        }
      }, {
        key: "value",
        value: function value() {
          return "";
        }
      }], [{
        key: "value",
        value: function value() {}
      }]), e;
    }(u["default"].Embed);

    c.blotName = "break", c.tagName = "BR", e["default"] = c;
  }, function (t, e, n) {
    "use strict";

    function r(t, e) {
      if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function");
    }

    function o(t, e) {
      if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
      return !e || "object" != _typeof2(e) && "function" != typeof e ? t : e;
    }

    function i(t, e) {
      if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + _typeof2(e));
      t.prototype = Object.create(e && e.prototype, {
        constructor: {
          value: t,
          enumerable: !1,
          writable: !0,
          configurable: !0
        }
      }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e);
    }

    function l(t, e) {
      var n = document.createElement("a");
      n.href = t;
      var r = n.href.slice(0, n.href.indexOf(":"));
      return e.indexOf(r) > -1;
    }

    Object.defineProperty(e, "__esModule", {
      value: !0
    }), e.sanitize = e["default"] = void 0;

    var a = function () {
      function t(t, e) {
        for (var n = 0; n < e.length; n++) {
          var r = e[n];
          r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r);
        }
      }

      return function (e, n, r) {
        return n && t(e.prototype, n), r && t(e, r), e;
      };
    }(),
        s = function t(e, n, r) {
      null === e && (e = Function.prototype);
      var o = Object.getOwnPropertyDescriptor(e, n);

      if (void 0 === o) {
        var i = Object.getPrototypeOf(e);
        return null === i ? void 0 : t(i, n, r);
      }

      if ("value" in o) return o.value;
      var l = o.get;
      if (void 0 !== l) return l.call(r);
    },
        u = n(5),
        c = function (t) {
      return t && t.__esModule ? t : {
        "default": t
      };
    }(u),
        f = function (t) {
      function e() {
        return r(this, e), o(this, (e.__proto__ || Object.getPrototypeOf(e)).apply(this, arguments));
      }

      return i(e, t), a(e, [{
        key: "format",
        value: function value(t, n) {
          if (t !== this.statics.blotName || !n) return s(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "format", this).call(this, t, n);
          n = this.constructor.sanitize(n), this.domNode.setAttribute("href", n);
        }
      }], [{
        key: "create",
        value: function value(t) {
          var n = s(e.__proto__ || Object.getPrototypeOf(e), "create", this).call(this, t);
          return t = this.sanitize(t), n.setAttribute("href", t), n.setAttribute("target", "_blank"), n;
        }
      }, {
        key: "formats",
        value: function value(t) {
          return t.getAttribute("href");
        }
      }, {
        key: "sanitize",
        value: function value(t) {
          return l(t, this.PROTOCOL_WHITELIST) ? t : this.SANITIZED_URL;
        }
      }]), e;
    }(c["default"]);

    f.blotName = "link", f.tagName = "A", f.SANITIZED_URL = "about:blank", f.PROTOCOL_WHITELIST = ["http", "https", "mailto", "tel"], e["default"] = f, e.sanitize = l;
  }, function (t, e, n) {
    "use strict";

    function r(t) {
      return t && t.__esModule ? t : {
        "default": t
      };
    }

    function o(t, e) {
      if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function");
    }

    function i(t, e) {
      t.setAttribute(e, !("true" === t.getAttribute(e)));
    }

    Object.defineProperty(e, "__esModule", {
      value: !0
    });

    var l = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function (t) {
      return _typeof2(t);
    } : function (t) {
      return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
    },
        a = function () {
      function t(t, e) {
        for (var n = 0; n < e.length; n++) {
          var r = e[n];
          r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r);
        }
      }

      return function (e, n, r) {
        return n && t(e.prototype, n), r && t(e, r), e;
      };
    }(),
        s = n(25),
        u = r(s),
        c = n(106),
        f = r(c),
        h = 0,
        p = function () {
      function t(e) {
        var n = this;
        o(this, t), this.select = e, this.container = document.createElement("span"), this.buildPicker(), this.select.style.display = "none", this.select.parentNode.insertBefore(this.container, this.select), this.label.addEventListener("mousedown", function () {
          n.togglePicker();
        }), this.label.addEventListener("keydown", function (t) {
          switch (t.keyCode) {
            case u["default"].keys.ENTER:
              n.togglePicker();
              break;

            case u["default"].keys.ESCAPE:
              n.escape(), t.preventDefault();
          }
        }), this.select.addEventListener("change", this.update.bind(this));
      }

      return a(t, [{
        key: "togglePicker",
        value: function value() {
          this.container.classList.toggle("ql-expanded"), i(this.label, "aria-expanded"), i(this.options, "aria-hidden");
        }
      }, {
        key: "buildItem",
        value: function value(t) {
          var e = this,
              n = document.createElement("span");
          return n.tabIndex = "0", n.setAttribute("role", "button"), n.classList.add("ql-picker-item"), t.hasAttribute("value") && n.setAttribute("data-value", t.getAttribute("value")), t.textContent && n.setAttribute("data-label", t.textContent), n.addEventListener("click", function () {
            e.selectItem(n, !0);
          }), n.addEventListener("keydown", function (t) {
            switch (t.keyCode) {
              case u["default"].keys.ENTER:
                e.selectItem(n, !0), t.preventDefault();
                break;

              case u["default"].keys.ESCAPE:
                e.escape(), t.preventDefault();
            }
          }), n;
        }
      }, {
        key: "buildLabel",
        value: function value() {
          var t = document.createElement("span");
          return t.classList.add("ql-picker-label"), t.innerHTML = f["default"], t.tabIndex = "0", t.setAttribute("role", "button"), t.setAttribute("aria-expanded", "false"), this.container.appendChild(t), t;
        }
      }, {
        key: "buildOptions",
        value: function value() {
          var t = this,
              e = document.createElement("span");
          e.classList.add("ql-picker-options"), e.setAttribute("aria-hidden", "true"), e.tabIndex = "-1", e.id = "ql-picker-options-" + h, h += 1, this.label.setAttribute("aria-controls", e.id), this.options = e, [].slice.call(this.select.options).forEach(function (n) {
            var r = t.buildItem(n);
            e.appendChild(r), !0 === n.selected && t.selectItem(r);
          }), this.container.appendChild(e);
        }
      }, {
        key: "buildPicker",
        value: function value() {
          var t = this;
          [].slice.call(this.select.attributes).forEach(function (e) {
            t.container.setAttribute(e.name, e.value);
          }), this.container.classList.add("ql-picker"), this.label = this.buildLabel(), this.buildOptions();
        }
      }, {
        key: "escape",
        value: function value() {
          var t = this;
          this.close(), setTimeout(function () {
            return t.label.focus();
          }, 1);
        }
      }, {
        key: "close",
        value: function value() {
          this.container.classList.remove("ql-expanded"), this.label.setAttribute("aria-expanded", "false"), this.options.setAttribute("aria-hidden", "true");
        }
      }, {
        key: "selectItem",
        value: function value(t) {
          var e = arguments.length > 1 && void 0 !== arguments[1] && arguments[1],
              n = this.container.querySelector(".ql-selected");

          if (t !== n && (null != n && n.classList.remove("ql-selected"), null != t && (t.classList.add("ql-selected"), this.select.selectedIndex = [].indexOf.call(t.parentNode.children, t), t.hasAttribute("data-value") ? this.label.setAttribute("data-value", t.getAttribute("data-value")) : this.label.removeAttribute("data-value"), t.hasAttribute("data-label") ? this.label.setAttribute("data-label", t.getAttribute("data-label")) : this.label.removeAttribute("data-label"), e))) {
            if ("function" == typeof Event) this.select.dispatchEvent(new Event("change"));else if ("object" === ("undefined" == typeof Event ? "undefined" : l(Event))) {
              var r = document.createEvent("Event");
              r.initEvent("change", !0, !0), this.select.dispatchEvent(r);
            }
            this.close();
          }
        }
      }, {
        key: "update",
        value: function value() {
          var t = void 0;

          if (this.select.selectedIndex > -1) {
            var e = this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];
            t = this.select.options[this.select.selectedIndex], this.selectItem(e);
          } else this.selectItem(null);

          var n = null != t && t !== this.select.querySelector("option[selected]");
          this.label.classList.toggle("ql-active", n);
        }
      }]), t;
    }();

    e["default"] = p;
  }, function (t, e, n) {
    "use strict";

    function r(t) {
      var e = a.find(t);
      if (null == e) try {
        e = a.create(t);
      } catch (n) {
        e = a.create(a.Scope.INLINE), [].slice.call(t.childNodes).forEach(function (t) {
          e.domNode.appendChild(t);
        }), t.parentNode && t.parentNode.replaceChild(e.domNode, t), e.attach();
      }
      return e;
    }

    var o = this && this.__extends || function () {
      var t = Object.setPrototypeOf || {
        __proto__: []
      } instanceof Array && function (t, e) {
        t.__proto__ = e;
      } || function (t, e) {
        for (var n in e) {
          e.hasOwnProperty(n) && (t[n] = e[n]);
        }
      };

      return function (e, n) {
        function r() {
          this.constructor = e;
        }

        t(e, n), e.prototype = null === n ? Object.create(n) : (r.prototype = n.prototype, new r());
      };
    }();

    Object.defineProperty(e, "__esModule", {
      value: !0
    });

    var i = n(47),
        l = n(27),
        a = n(1),
        s = function (t) {
      function e(e) {
        var n = t.call(this, e) || this;
        return n.build(), n;
      }

      return o(e, t), e.prototype.appendChild = function (t) {
        this.insertBefore(t);
      }, e.prototype.attach = function () {
        t.prototype.attach.call(this), this.children.forEach(function (t) {
          t.attach();
        });
      }, e.prototype.build = function () {
        var t = this;
        this.children = new i["default"](), [].slice.call(this.domNode.childNodes).reverse().forEach(function (e) {
          try {
            var n = r(e);
            t.insertBefore(n, t.children.head || void 0);
          } catch (t) {
            if (t instanceof a.ParchmentError) return;
            throw t;
          }
        });
      }, e.prototype.deleteAt = function (t, e) {
        if (0 === t && e === this.length()) return this.remove();
        this.children.forEachAt(t, e, function (t, e, n) {
          t.deleteAt(e, n);
        });
      }, e.prototype.descendant = function (t, n) {
        var r = this.children.find(n),
            o = r[0],
            i = r[1];
        return null == t.blotName && t(o) || null != t.blotName && o instanceof t ? [o, i] : o instanceof e ? o.descendant(t, i) : [null, -1];
      }, e.prototype.descendants = function (t, n, r) {
        void 0 === n && (n = 0), void 0 === r && (r = Number.MAX_VALUE);
        var o = [],
            i = r;
        return this.children.forEachAt(n, r, function (n, r, l) {
          (null == t.blotName && t(n) || null != t.blotName && n instanceof t) && o.push(n), n instanceof e && (o = o.concat(n.descendants(t, r, i))), i -= l;
        }), o;
      }, e.prototype.detach = function () {
        this.children.forEach(function (t) {
          t.detach();
        }), t.prototype.detach.call(this);
      }, e.prototype.formatAt = function (t, e, n, r) {
        this.children.forEachAt(t, e, function (t, e, o) {
          t.formatAt(e, o, n, r);
        });
      }, e.prototype.insertAt = function (t, e, n) {
        var r = this.children.find(t),
            o = r[0],
            i = r[1];
        if (o) o.insertAt(i, e, n);else {
          var l = null == n ? a.create("text", e) : a.create(e, n);
          this.appendChild(l);
        }
      }, e.prototype.insertBefore = function (t, e) {
        if (null != this.statics.allowedChildren && !this.statics.allowedChildren.some(function (e) {
          return t instanceof e;
        })) throw new a.ParchmentError("Cannot insert " + t.statics.blotName + " into " + this.statics.blotName);
        t.insertInto(this, e);
      }, e.prototype.length = function () {
        return this.children.reduce(function (t, e) {
          return t + e.length();
        }, 0);
      }, e.prototype.moveChildren = function (t, e) {
        this.children.forEach(function (n) {
          t.insertBefore(n, e);
        });
      }, e.prototype.optimize = function (e) {
        if (t.prototype.optimize.call(this, e), 0 === this.children.length) if (null != this.statics.defaultChild) {
          var n = a.create(this.statics.defaultChild);
          this.appendChild(n), n.optimize(e);
        } else this.remove();
      }, e.prototype.path = function (t, n) {
        void 0 === n && (n = !1);
        var r = this.children.find(t, n),
            o = r[0],
            i = r[1],
            l = [[this, t]];
        return o instanceof e ? l.concat(o.path(i, n)) : (null != o && l.push([o, i]), l);
      }, e.prototype.removeChild = function (t) {
        this.children.remove(t);
      }, e.prototype.replace = function (n) {
        n instanceof e && n.moveChildren(this), t.prototype.replace.call(this, n);
      }, e.prototype.split = function (t, e) {
        if (void 0 === e && (e = !1), !e) {
          if (0 === t) return this;
          if (t === this.length()) return this.next;
        }

        var n = this.clone();
        return this.parent.insertBefore(n, this.next), this.children.forEachAt(t, this.length(), function (t, r, o) {
          t = t.split(r, e), n.appendChild(t);
        }), n;
      }, e.prototype.unwrap = function () {
        this.moveChildren(this.parent, this.next), this.remove();
      }, e.prototype.update = function (t, e) {
        var n = this,
            o = [],
            i = [];
        t.forEach(function (t) {
          t.target === n.domNode && "childList" === t.type && (o.push.apply(o, t.addedNodes), i.push.apply(i, t.removedNodes));
        }), i.forEach(function (t) {
          if (!(null != t.parentNode && "IFRAME" !== t.tagName && document.body.compareDocumentPosition(t) & Node.DOCUMENT_POSITION_CONTAINED_BY)) {
            var e = a.find(t);
            null != e && (null != e.domNode.parentNode && e.domNode.parentNode !== n.domNode || e.detach());
          }
        }), o.filter(function (t) {
          return t.parentNode == n.domNode;
        }).sort(function (t, e) {
          return t === e ? 0 : t.compareDocumentPosition(e) & Node.DOCUMENT_POSITION_FOLLOWING ? 1 : -1;
        }).forEach(function (t) {
          var e = null;
          null != t.nextSibling && (e = a.find(t.nextSibling));
          var o = r(t);
          o.next == e && null != o.next || (null != o.parent && o.parent.removeChild(n), n.insertBefore(o, e || void 0));
        });
      }, e;
    }(l["default"]);

    e["default"] = s;
  }, function (t, e, n) {
    "use strict";

    var r = this && this.__extends || function () {
      var t = Object.setPrototypeOf || {
        __proto__: []
      } instanceof Array && function (t, e) {
        t.__proto__ = e;
      } || function (t, e) {
        for (var n in e) {
          e.hasOwnProperty(n) && (t[n] = e[n]);
        }
      };

      return function (e, n) {
        function r() {
          this.constructor = e;
        }

        t(e, n), e.prototype = null === n ? Object.create(n) : (r.prototype = n.prototype, new r());
      };
    }();

    Object.defineProperty(e, "__esModule", {
      value: !0
    });

    var o = n(11),
        i = n(28),
        l = n(17),
        a = n(1),
        s = function (t) {
      function e(e) {
        var n = t.call(this, e) || this;
        return n.attributes = new i["default"](n.domNode), n;
      }

      return r(e, t), e.formats = function (t) {
        return "string" == typeof this.tagName || (Array.isArray(this.tagName) ? t.tagName.toLowerCase() : void 0);
      }, e.prototype.format = function (t, e) {
        var n = a.query(t);
        n instanceof o["default"] ? this.attributes.attribute(n, e) : e && (null == n || t === this.statics.blotName && this.formats()[t] === e || this.replaceWith(t, e));
      }, e.prototype.formats = function () {
        var t = this.attributes.values(),
            e = this.statics.formats(this.domNode);
        return null != e && (t[this.statics.blotName] = e), t;
      }, e.prototype.replaceWith = function (e, n) {
        var r = t.prototype.replaceWith.call(this, e, n);
        return this.attributes.copy(r), r;
      }, e.prototype.update = function (e, n) {
        var r = this;
        t.prototype.update.call(this, e, n), e.some(function (t) {
          return t.target === r.domNode && "attributes" === t.type;
        }) && this.attributes.build();
      }, e.prototype.wrap = function (n, r) {
        var o = t.prototype.wrap.call(this, n, r);
        return o instanceof e && o.statics.scope === this.statics.scope && this.attributes.move(o), o;
      }, e;
    }(l["default"]);

    e["default"] = s;
  }, function (t, e, n) {
    "use strict";

    var r = this && this.__extends || function () {
      var t = Object.setPrototypeOf || {
        __proto__: []
      } instanceof Array && function (t, e) {
        t.__proto__ = e;
      } || function (t, e) {
        for (var n in e) {
          e.hasOwnProperty(n) && (t[n] = e[n]);
        }
      };

      return function (e, n) {
        function r() {
          this.constructor = e;
        }

        t(e, n), e.prototype = null === n ? Object.create(n) : (r.prototype = n.prototype, new r());
      };
    }();

    Object.defineProperty(e, "__esModule", {
      value: !0
    });

    var o = n(27),
        i = n(1),
        l = function (t) {
      function e() {
        return null !== t && t.apply(this, arguments) || this;
      }

      return r(e, t), e.value = function (t) {
        return !0;
      }, e.prototype.index = function (t, e) {
        return this.domNode === t || this.domNode.compareDocumentPosition(t) & Node.DOCUMENT_POSITION_CONTAINED_BY ? Math.min(e, 1) : -1;
      }, e.prototype.position = function (t, e) {
        var n = [].indexOf.call(this.parent.domNode.childNodes, this.domNode);
        return t > 0 && (n += 1), [this.parent.domNode, n];
      }, e.prototype.value = function () {
        return t = {}, t[this.statics.blotName] = this.statics.value(this.domNode) || !0, t;
        var t;
      }, e.scope = i.Scope.INLINE_BLOT, e;
    }(o["default"]);

    e["default"] = l;
  }, function (t, e, n) {
    function r(t) {
      this.ops = t, this.index = 0, this.offset = 0;
    }

    var o = n(12),
        i = n(2),
        l = {
      attributes: {
        compose: function compose(t, e, n) {
          "object" != _typeof2(t) && (t = {}), "object" != _typeof2(e) && (e = {});
          var r = i(!0, {}, e);
          n || (r = Object.keys(r).reduce(function (t, e) {
            return null != r[e] && (t[e] = r[e]), t;
          }, {}));

          for (var o in t) {
            void 0 !== t[o] && void 0 === e[o] && (r[o] = t[o]);
          }

          return Object.keys(r).length > 0 ? r : void 0;
        },
        diff: function diff(t, e) {
          "object" != _typeof2(t) && (t = {}), "object" != _typeof2(e) && (e = {});
          var n = Object.keys(t).concat(Object.keys(e)).reduce(function (n, r) {
            return o(t[r], e[r]) || (n[r] = void 0 === e[r] ? null : e[r]), n;
          }, {});
          return Object.keys(n).length > 0 ? n : void 0;
        },
        transform: function transform(t, e, n) {
          if ("object" != _typeof2(t)) return e;

          if ("object" == _typeof2(e)) {
            if (!n) return e;
            var r = Object.keys(e).reduce(function (n, r) {
              return void 0 === t[r] && (n[r] = e[r]), n;
            }, {});
            return Object.keys(r).length > 0 ? r : void 0;
          }
        }
      },
      iterator: function iterator(t) {
        return new r(t);
      },
      length: function length(t) {
        return "number" == typeof t["delete"] ? t["delete"] : "number" == typeof t.retain ? t.retain : "string" == typeof t.insert ? t.insert.length : 1;
      }
    };
    r.prototype.hasNext = function () {
      return this.peekLength() < 1 / 0;
    }, r.prototype.next = function (t) {
      t || (t = 1 / 0);
      var e = this.ops[this.index];

      if (e) {
        var n = this.offset,
            r = l.length(e);
        if (t >= r - n ? (t = r - n, this.index += 1, this.offset = 0) : this.offset += t, "number" == typeof e["delete"]) return {
          "delete": t
        };
        var o = {};
        return e.attributes && (o.attributes = e.attributes), "number" == typeof e.retain ? o.retain = t : "string" == typeof e.insert ? o.insert = e.insert.substr(n, t) : o.insert = e.insert, o;
      }

      return {
        retain: 1 / 0
      };
    }, r.prototype.peek = function () {
      return this.ops[this.index];
    }, r.prototype.peekLength = function () {
      return this.ops[this.index] ? l.length(this.ops[this.index]) - this.offset : 1 / 0;
    }, r.prototype.peekType = function () {
      return this.ops[this.index] ? "number" == typeof this.ops[this.index]["delete"] ? "delete" : "number" == typeof this.ops[this.index].retain ? "retain" : "insert" : "retain";
    }, t.exports = l;
  }, function (t, e) {
    var n = function () {
      "use strict";

      function t(t, e) {
        return null != e && t instanceof e;
      }

      function e(n, r, o, i, c) {
        function f(n, o) {
          if (null === n) return null;
          if (0 === o) return n;
          var y, v;
          if ("object" != _typeof2(n)) return n;
          if (t(n, a)) y = new a();else if (t(n, s)) y = new s();else if (t(n, u)) y = new u(function (t, e) {
            n.then(function (e) {
              t(f(e, o - 1));
            }, function (t) {
              e(f(t, o - 1));
            });
          });else if (e.__isArray(n)) y = [];else if (e.__isRegExp(n)) y = new RegExp(n.source, l(n)), n.lastIndex && (y.lastIndex = n.lastIndex);else if (e.__isDate(n)) y = new Date(n.getTime());else {
            if (d && Buffer.isBuffer(n)) return y = new Buffer(n.length), n.copy(y), y;
            t(n, Error) ? y = Object.create(n) : void 0 === i ? (v = Object.getPrototypeOf(n), y = Object.create(v)) : (y = Object.create(i), v = i);
          }

          if (r) {
            var b = h.indexOf(n);
            if (-1 != b) return p[b];
            h.push(n), p.push(y);
          }

          t(n, a) && n.forEach(function (t, e) {
            var n = f(e, o - 1),
                r = f(t, o - 1);
            y.set(n, r);
          }), t(n, s) && n.forEach(function (t) {
            var e = f(t, o - 1);
            y.add(e);
          });

          for (var g in n) {
            var m;
            v && (m = Object.getOwnPropertyDescriptor(v, g)), m && null == m.set || (y[g] = f(n[g], o - 1));
          }

          if (Object.getOwnPropertySymbols) for (var _ = Object.getOwnPropertySymbols(n), g = 0; g < _.length; g++) {
            var O = _[g],
                w = Object.getOwnPropertyDescriptor(n, O);
            (!w || w.enumerable || c) && (y[O] = f(n[O], o - 1), w.enumerable || Object.defineProperty(y, O, {
              enumerable: !1
            }));
          }
          if (c) for (var x = Object.getOwnPropertyNames(n), g = 0; g < x.length; g++) {
            var k = x[g],
                w = Object.getOwnPropertyDescriptor(n, k);
            w && w.enumerable || (y[k] = f(n[k], o - 1), Object.defineProperty(y, k, {
              enumerable: !1
            }));
          }
          return y;
        }

        "object" == _typeof2(r) && (o = r.depth, i = r.prototype, c = r.includeNonEnumerable, r = r.circular);
        var h = [],
            p = [],
            d = "undefined" != typeof Buffer;
        return void 0 === r && (r = !0), void 0 === o && (o = 1 / 0), f(n, o);
      }

      function n(t) {
        return Object.prototype.toString.call(t);
      }

      function r(t) {
        return "object" == _typeof2(t) && "[object Date]" === n(t);
      }

      function o(t) {
        return "object" == _typeof2(t) && "[object Array]" === n(t);
      }

      function i(t) {
        return "object" == _typeof2(t) && "[object RegExp]" === n(t);
      }

      function l(t) {
        var e = "";
        return t.global && (e += "g"), t.ignoreCase && (e += "i"), t.multiline && (e += "m"), e;
      }

      var a;

      try {
        a = Map;
      } catch (t) {
        a = function a() {};
      }

      var s;

      try {
        s = Set;
      } catch (t) {
        s = function s() {};
      }

      var u;

      try {
        u = Promise;
      } catch (t) {
        u = function u() {};
      }

      return e.clonePrototype = function (t) {
        if (null === t) return null;

        var e = function e() {};

        return e.prototype = t, new e();
      }, e.__objToStr = n, e.__isDate = r, e.__isArray = o, e.__isRegExp = i, e.__getRegExpFlags = l, e;
    }();

    "object" == _typeof2(t) && t.exports && (t.exports = n);
  }, function (t, e, n) {
    "use strict";

    function r(t) {
      return t && t.__esModule ? t : {
        "default": t
      };
    }

    function o(t) {
      if (Array.isArray(t)) {
        for (var e = 0, n = Array(t.length); e < t.length; e++) {
          n[e] = t[e];
        }

        return n;
      }

      return Array.from(t);
    }

    function i(t, e) {
      if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function");
    }

    function l(t, e) {
      try {
        e.parentNode;
      } catch (t) {
        return !1;
      }

      return e instanceof Text && (e = e.parentNode), t.contains(e);
    }

    Object.defineProperty(e, "__esModule", {
      value: !0
    }), e["default"] = e.Range = void 0;

    var a = function () {
      function t(t, e) {
        var n = [],
            r = !0,
            o = !1,
            i = void 0;

        try {
          for (var l, a = t[Symbol.iterator](); !(r = (l = a.next()).done) && (n.push(l.value), !e || n.length !== e); r = !0) {
            ;
          }
        } catch (t) {
          o = !0, i = t;
        } finally {
          try {
            !r && a["return"] && a["return"]();
          } finally {
            if (o) throw i;
          }
        }

        return n;
      }

      return function (e, n) {
        if (Array.isArray(e)) return e;
        if (Symbol.iterator in Object(e)) return t(e, n);
        throw new TypeError("Invalid attempt to destructure non-iterable instance");
      };
    }(),
        s = function () {
      function t(t, e) {
        for (var n = 0; n < e.length; n++) {
          var r = e[n];
          r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r);
        }
      }

      return function (e, n, r) {
        return n && t(e.prototype, n), r && t(e, r), e;
      };
    }(),
        u = n(0),
        c = r(u),
        f = n(21),
        h = r(f),
        p = n(12),
        d = r(p),
        y = n(9),
        v = r(y),
        b = n(10),
        g = r(b),
        m = (0, g["default"])("quill:selection"),
        _ = function t(e) {
      var n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0;
      i(this, t), this.index = e, this.length = n;
    },
        O = function () {
      function t(e, n) {
        var r = this;
        i(this, t), this.emitter = n, this.scroll = e, this.composing = !1, this.mouseDown = !1, this.root = this.scroll.domNode, this.cursor = c["default"].create("cursor", this), this.lastRange = this.savedRange = new _(0, 0), this.handleComposition(), this.handleDragging(), this.emitter.listenDOM("selectionchange", document, function () {
          r.mouseDown || setTimeout(r.update.bind(r, v["default"].sources.USER), 1);
        }), this.emitter.on(v["default"].events.EDITOR_CHANGE, function (t, e) {
          t === v["default"].events.TEXT_CHANGE && e.length() > 0 && r.update(v["default"].sources.SILENT);
        }), this.emitter.on(v["default"].events.SCROLL_BEFORE_UPDATE, function () {
          if (r.hasFocus()) {
            var t = r.getNativeRange();
            null != t && t.start.node !== r.cursor.textNode && r.emitter.once(v["default"].events.SCROLL_UPDATE, function () {
              try {
                r.setNativeRange(t.start.node, t.start.offset, t.end.node, t.end.offset);
              } catch (t) {}
            });
          }
        }), this.emitter.on(v["default"].events.SCROLL_OPTIMIZE, function (t, e) {
          if (e.range) {
            var n = e.range,
                o = n.startNode,
                i = n.startOffset,
                l = n.endNode,
                a = n.endOffset;
            r.setNativeRange(o, i, l, a);
          }
        }), this.update(v["default"].sources.SILENT);
      }

      return s(t, [{
        key: "handleComposition",
        value: function value() {
          var t = this;
          this.root.addEventListener("compositionstart", function () {
            t.composing = !0;
          }), this.root.addEventListener("compositionend", function () {
            if (t.composing = !1, t.cursor.parent) {
              var e = t.cursor.restore();
              if (!e) return;
              setTimeout(function () {
                t.setNativeRange(e.startNode, e.startOffset, e.endNode, e.endOffset);
              }, 1);
            }
          });
        }
      }, {
        key: "handleDragging",
        value: function value() {
          var t = this;
          this.emitter.listenDOM("mousedown", document.body, function () {
            t.mouseDown = !0;
          }), this.emitter.listenDOM("mouseup", document.body, function () {
            t.mouseDown = !1, t.update(v["default"].sources.USER);
          });
        }
      }, {
        key: "focus",
        value: function value() {
          this.hasFocus() || (this.root.focus(), this.setRange(this.savedRange));
        }
      }, {
        key: "format",
        value: function value(t, e) {
          if (null == this.scroll.whitelist || this.scroll.whitelist[t]) {
            this.scroll.update();
            var n = this.getNativeRange();

            if (null != n && n["native"].collapsed && !c["default"].query(t, c["default"].Scope.BLOCK)) {
              if (n.start.node !== this.cursor.textNode) {
                var r = c["default"].find(n.start.node, !1);
                if (null == r) return;

                if (r instanceof c["default"].Leaf) {
                  var o = r.split(n.start.offset);
                  r.parent.insertBefore(this.cursor, o);
                } else r.insertBefore(this.cursor, n.start.node);

                this.cursor.attach();
              }

              this.cursor.format(t, e), this.scroll.optimize(), this.setNativeRange(this.cursor.textNode, this.cursor.textNode.data.length), this.update();
            }
          }
        }
      }, {
        key: "getBounds",
        value: function value(t) {
          var e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0,
              n = this.scroll.length();
          t = Math.min(t, n - 1), e = Math.min(t + e, n - 1) - t;
          var r = void 0,
              o = this.scroll.leaf(t),
              i = a(o, 2),
              l = i[0],
              s = i[1];
          if (null == l) return null;
          var u = l.position(s, !0),
              c = a(u, 2);
          r = c[0], s = c[1];
          var f = document.createRange();

          if (e > 0) {
            f.setStart(r, s);
            var h = this.scroll.leaf(t + e),
                p = a(h, 2);
            if (l = p[0], s = p[1], null == l) return null;
            var d = l.position(s, !0),
                y = a(d, 2);
            return r = y[0], s = y[1], f.setEnd(r, s), f.getBoundingClientRect();
          }

          var v = "left",
              b = void 0;
          return r instanceof Text ? (s < r.data.length ? (f.setStart(r, s), f.setEnd(r, s + 1)) : (f.setStart(r, s - 1), f.setEnd(r, s), v = "right"), b = f.getBoundingClientRect()) : (b = l.domNode.getBoundingClientRect(), s > 0 && (v = "right")), {
            bottom: b.top + b.height,
            height: b.height,
            left: b[v],
            right: b[v],
            top: b.top,
            width: 0
          };
        }
      }, {
        key: "getNativeRange",
        value: function value() {
          var t = document.getSelection();
          if (null == t || t.rangeCount <= 0) return null;
          var e = t.getRangeAt(0);
          if (null == e) return null;
          var n = this.normalizeNative(e);
          return m.info("getNativeRange", n), n;
        }
      }, {
        key: "getRange",
        value: function value() {
          var t = this.getNativeRange();
          return null == t ? [null, null] : [this.normalizedToRange(t), t];
        }
      }, {
        key: "hasFocus",
        value: function value() {
          return document.activeElement === this.root;
        }
      }, {
        key: "normalizedToRange",
        value: function value(t) {
          var e = this,
              n = [[t.start.node, t.start.offset]];
          t["native"].collapsed || n.push([t.end.node, t.end.offset]);
          var r = n.map(function (t) {
            var n = a(t, 2),
                r = n[0],
                o = n[1],
                i = c["default"].find(r, !0),
                l = i.offset(e.scroll);
            return 0 === o ? l : i instanceof c["default"].Container ? l + i.length() : l + i.index(r, o);
          }),
              i = Math.min(Math.max.apply(Math, o(r)), this.scroll.length() - 1),
              l = Math.min.apply(Math, [i].concat(o(r)));
          return new _(l, i - l);
        }
      }, {
        key: "normalizeNative",
        value: function value(t) {
          if (!l(this.root, t.startContainer) || !t.collapsed && !l(this.root, t.endContainer)) return null;
          var e = {
            start: {
              node: t.startContainer,
              offset: t.startOffset
            },
            end: {
              node: t.endContainer,
              offset: t.endOffset
            },
            "native": t
          };
          return [e.start, e.end].forEach(function (t) {
            for (var e = t.node, n = t.offset; !(e instanceof Text) && e.childNodes.length > 0;) {
              if (e.childNodes.length > n) e = e.childNodes[n], n = 0;else {
                if (e.childNodes.length !== n) break;
                e = e.lastChild, n = e instanceof Text ? e.data.length : e.childNodes.length + 1;
              }
            }

            t.node = e, t.offset = n;
          }), e;
        }
      }, {
        key: "rangeToNative",
        value: function value(t) {
          var e = this,
              n = t.collapsed ? [t.index] : [t.index, t.index + t.length],
              r = [],
              o = this.scroll.length();
          return n.forEach(function (t, n) {
            t = Math.min(o - 1, t);
            var i = void 0,
                l = e.scroll.leaf(t),
                s = a(l, 2),
                u = s[0],
                c = s[1],
                f = u.position(c, 0 !== n),
                h = a(f, 2);
            i = h[0], c = h[1], r.push(i, c);
          }), r.length < 2 && (r = r.concat(r)), r;
        }
      }, {
        key: "scrollIntoView",
        value: function value(t) {
          var e = this.lastRange;

          if (null != e) {
            var n = this.getBounds(e.index, e.length);

            if (null != n) {
              var r = this.scroll.length() - 1,
                  o = this.scroll.line(Math.min(e.index, r)),
                  i = a(o, 1),
                  l = i[0],
                  s = l;

              if (e.length > 0) {
                var u = this.scroll.line(Math.min(e.index + e.length, r));
                s = a(u, 1)[0];
              }

              if (null != l && null != s) {
                var c = t.getBoundingClientRect();
                n.top < c.top ? t.scrollTop -= c.top - n.top : n.bottom > c.bottom && (t.scrollTop += n.bottom - c.bottom);
              }
            }
          }
        }
      }, {
        key: "setNativeRange",
        value: function value(t, e) {
          var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : t,
              r = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : e,
              o = arguments.length > 4 && void 0 !== arguments[4] && arguments[4];

          if (m.info("setNativeRange", t, e, n, r), null == t || null != this.root.parentNode && null != t.parentNode && null != n.parentNode) {
            var i = document.getSelection();
            if (null != i) if (null != t) {
              this.hasFocus() || this.root.focus();
              var l = (this.getNativeRange() || {})["native"];

              if (null == l || o || t !== l.startContainer || e !== l.startOffset || n !== l.endContainer || r !== l.endOffset) {
                "BR" == t.tagName && (e = [].indexOf.call(t.parentNode.childNodes, t), t = t.parentNode), "BR" == n.tagName && (r = [].indexOf.call(n.parentNode.childNodes, n), n = n.parentNode);
                var a = document.createRange();
                a.setStart(t, e), a.setEnd(n, r), i.removeAllRanges(), i.addRange(a);
              }
            } else i.removeAllRanges(), this.root.blur(), document.body.focus();
          }
        }
      }, {
        key: "setRange",
        value: function value(t) {
          var e = arguments.length > 1 && void 0 !== arguments[1] && arguments[1],
              n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : v["default"].sources.API;

          if ("string" == typeof e && (n = e, e = !1), m.info("setRange", t), null != t) {
            var r = this.rangeToNative(t);
            this.setNativeRange.apply(this, o(r).concat([e]));
          } else this.setNativeRange(null);

          this.update(n);
        }
      }, {
        key: "update",
        value: function value() {
          var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : v["default"].sources.USER,
              e = this.lastRange,
              n = this.getRange(),
              r = a(n, 2),
              o = r[0],
              i = r[1];

          if (this.lastRange = o, null != this.lastRange && (this.savedRange = this.lastRange), !(0, d["default"])(e, this.lastRange)) {
            var l;
            !this.composing && null != i && i["native"].collapsed && i.start.node !== this.cursor.textNode && this.cursor.restore();
            var s = [v["default"].events.SELECTION_CHANGE, (0, h["default"])(this.lastRange), (0, h["default"])(e), t];

            if ((l = this.emitter).emit.apply(l, [v["default"].events.EDITOR_CHANGE].concat(s)), t !== v["default"].sources.SILENT) {
              var u;
              (u = this.emitter).emit.apply(u, s);
            }
          }
        }
      }]), t;
    }();

    e.Range = _, e["default"] = O;
  }, function (t, e, n) {
    "use strict";

    function r(t) {
      return t && t.__esModule ? t : {
        "default": t
      };
    }

    function o(t, e) {
      if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function");
    }

    function i(t, e) {
      if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
      return !e || "object" != _typeof2(e) && "function" != typeof e ? t : e;
    }

    function l(t, e) {
      if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + _typeof2(e));
      t.prototype = Object.create(e && e.prototype, {
        constructor: {
          value: t,
          enumerable: !1,
          writable: !0,
          configurable: !0
        }
      }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e);
    }

    Object.defineProperty(e, "__esModule", {
      value: !0
    });

    var a = n(0),
        s = r(a),
        u = n(3),
        c = r(u),
        f = function (t) {
      function e() {
        return o(this, e), i(this, (e.__proto__ || Object.getPrototypeOf(e)).apply(this, arguments));
      }

      return l(e, t), e;
    }(s["default"].Container);

    f.allowedChildren = [c["default"], u.BlockEmbed, f], e["default"] = f;
  }, function (t, e, n) {
    "use strict";

    function r(t, e) {
      if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function");
    }

    function o(t, e) {
      if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
      return !e || "object" != _typeof2(e) && "function" != typeof e ? t : e;
    }

    function i(t, e) {
      if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + _typeof2(e));
      t.prototype = Object.create(e && e.prototype, {
        constructor: {
          value: t,
          enumerable: !1,
          writable: !0,
          configurable: !0
        }
      }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e);
    }

    Object.defineProperty(e, "__esModule", {
      value: !0
    }), e.ColorStyle = e.ColorClass = e.ColorAttributor = void 0;

    var l = function () {
      function t(t, e) {
        for (var n = 0; n < e.length; n++) {
          var r = e[n];
          r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r);
        }
      }

      return function (e, n, r) {
        return n && t(e.prototype, n), r && t(e, r), e;
      };
    }(),
        a = function t(e, n, r) {
      null === e && (e = Function.prototype);
      var o = Object.getOwnPropertyDescriptor(e, n);

      if (void 0 === o) {
        var i = Object.getPrototypeOf(e);
        return null === i ? void 0 : t(i, n, r);
      }

      if ("value" in o) return o.value;
      var l = o.get;
      if (void 0 !== l) return l.call(r);
    },
        s = n(0),
        u = function (t) {
      return t && t.__esModule ? t : {
        "default": t
      };
    }(s),
        c = function (t) {
      function e() {
        return r(this, e), o(this, (e.__proto__ || Object.getPrototypeOf(e)).apply(this, arguments));
      }

      return i(e, t), l(e, [{
        key: "value",
        value: function value(t) {
          var n = a(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "value", this).call(this, t);
          return n.startsWith("rgb(") ? (n = n.replace(/^[^\d]+/, "").replace(/[^\d]+$/, ""), "#" + n.split(",").map(function (t) {
            return ("00" + parseInt(t).toString(16)).slice(-2);
          }).join("")) : n;
        }
      }]), e;
    }(u["default"].Attributor.Style),
        f = new u["default"].Attributor.Class("color", "ql-color", {
      scope: u["default"].Scope.INLINE
    }),
        h = new c("color", "color", {
      scope: u["default"].Scope.INLINE
    });

    e.ColorAttributor = c, e.ColorClass = f, e.ColorStyle = h;
  }, function (t, e, n) {
    "use strict";

    function r(t) {
      return t && t.__esModule ? t : {
        "default": t
      };
    }

    function o(t, e, n) {
      return e in t ? Object.defineProperty(t, e, {
        value: n,
        enumerable: !0,
        configurable: !0,
        writable: !0
      }) : t[e] = n, t;
    }

    function i(t, e) {
      if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function");
    }

    function l(t, e) {
      if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
      return !e || "object" != _typeof2(e) && "function" != typeof e ? t : e;
    }

    function a(t, e) {
      if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + _typeof2(e));
      t.prototype = Object.create(e && e.prototype, {
        constructor: {
          value: t,
          enumerable: !1,
          writable: !0,
          configurable: !0
        }
      }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e);
    }

    function s(t, e) {
      var n,
          r = t === D.keys.LEFT ? "prefix" : "suffix";
      return n = {
        key: t,
        shiftKey: e,
        altKey: null
      }, o(n, r, /^$/), o(n, "handler", function (n) {
        var r = n.index;
        t === D.keys.RIGHT && (r += n.length + 1);
        var o = this.quill.getLeaf(r);
        return !(b(o, 1)[0] instanceof T["default"].Embed) || (t === D.keys.LEFT ? e ? this.quill.setSelection(n.index - 1, n.length + 1, S["default"].sources.USER) : this.quill.setSelection(n.index - 1, S["default"].sources.USER) : e ? this.quill.setSelection(n.index, n.length + 1, S["default"].sources.USER) : this.quill.setSelection(n.index + n.length + 1, S["default"].sources.USER), !1);
      }), n;
    }

    function u(t, e) {
      if (!(0 === t.index || this.quill.getLength() <= 1)) {
        var n = this.quill.getLine(t.index),
            r = b(n, 1),
            o = r[0],
            i = {};

        if (0 === e.offset) {
          var l = this.quill.getLine(t.index - 1),
              a = b(l, 1),
              s = a[0];

          if (null != s && s.length() > 1) {
            var u = o.formats(),
                c = this.quill.getFormat(t.index - 1, 1);
            i = A["default"].attributes.diff(u, c) || {};
          }
        }

        var f = /[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(e.prefix) ? 2 : 1;
        this.quill.deleteText(t.index - f, f, S["default"].sources.USER), Object.keys(i).length > 0 && this.quill.formatLine(t.index - f, f, i, S["default"].sources.USER), this.quill.focus();
      }
    }

    function c(t, e) {
      var n = /^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(e.suffix) ? 2 : 1;

      if (!(t.index >= this.quill.getLength() - n)) {
        var r = {},
            o = 0,
            i = this.quill.getLine(t.index),
            l = b(i, 1),
            a = l[0];

        if (e.offset >= a.length() - 1) {
          var s = this.quill.getLine(t.index + 1),
              u = b(s, 1),
              c = u[0];

          if (c) {
            var f = a.formats(),
                h = this.quill.getFormat(t.index, 1);
            r = A["default"].attributes.diff(f, h) || {}, o = c.length();
          }
        }

        this.quill.deleteText(t.index, n, S["default"].sources.USER), Object.keys(r).length > 0 && this.quill.formatLine(t.index + o - 1, n, r, S["default"].sources.USER);
      }
    }

    function f(t) {
      var e = this.quill.getLines(t),
          n = {};

      if (e.length > 1) {
        var r = e[0].formats(),
            o = e[e.length - 1].formats();
        n = A["default"].attributes.diff(o, r) || {};
      }

      this.quill.deleteText(t, S["default"].sources.USER), Object.keys(n).length > 0 && this.quill.formatLine(t.index, 1, n, S["default"].sources.USER), this.quill.setSelection(t.index, S["default"].sources.SILENT), this.quill.focus();
    }

    function h(t, e) {
      var n = this;
      t.length > 0 && this.quill.scroll.deleteAt(t.index, t.length);
      var r = Object.keys(e.format).reduce(function (t, n) {
        return T["default"].query(n, T["default"].Scope.BLOCK) && !Array.isArray(e.format[n]) && (t[n] = e.format[n]), t;
      }, {});
      this.quill.insertText(t.index, "\n", r, S["default"].sources.USER), this.quill.setSelection(t.index + 1, S["default"].sources.SILENT), this.quill.focus(), Object.keys(e.format).forEach(function (t) {
        null == r[t] && (Array.isArray(e.format[t]) || "link" !== t && n.quill.format(t, e.format[t], S["default"].sources.USER));
      });
    }

    function p(t) {
      return {
        key: D.keys.TAB,
        shiftKey: !t,
        format: {
          "code-block": !0
        },
        handler: function handler(e) {
          var n = T["default"].query("code-block"),
              r = e.index,
              o = e.length,
              i = this.quill.scroll.descendant(n, r),
              l = b(i, 2),
              a = l[0],
              s = l[1];

          if (null != a) {
            var u = this.quill.getIndex(a),
                c = a.newlineIndex(s, !0) + 1,
                f = a.newlineIndex(u + s + o),
                h = a.domNode.textContent.slice(c, f).split("\n");
            s = 0, h.forEach(function (e, i) {
              t ? (a.insertAt(c + s, n.TAB), s += n.TAB.length, 0 === i ? r += n.TAB.length : o += n.TAB.length) : e.startsWith(n.TAB) && (a.deleteAt(c + s, n.TAB.length), s -= n.TAB.length, 0 === i ? r -= n.TAB.length : o -= n.TAB.length), s += e.length + 1;
            }), this.quill.update(S["default"].sources.USER), this.quill.setSelection(r, o, S["default"].sources.SILENT);
          }
        }
      };
    }

    function d(t) {
      return {
        key: t[0].toUpperCase(),
        shortKey: !0,
        handler: function handler(e, n) {
          this.quill.format(t, !n.format[t], S["default"].sources.USER);
        }
      };
    }

    function y(t) {
      if ("string" == typeof t || "number" == typeof t) return y({
        key: t
      });
      if ("object" === (void 0 === t ? "undefined" : v(t)) && (t = (0, _["default"])(t, !1)), "string" == typeof t.key) if (null != D.keys[t.key.toUpperCase()]) t.key = D.keys[t.key.toUpperCase()];else {
        if (1 !== t.key.length) return null;
        t.key = t.key.toUpperCase().charCodeAt(0);
      }
      return t.shortKey && (t[B] = t.shortKey, delete t.shortKey), t;
    }

    Object.defineProperty(e, "__esModule", {
      value: !0
    }), e.SHORTKEY = e["default"] = void 0;

    var v = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function (t) {
      return _typeof2(t);
    } : function (t) {
      return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
    },
        b = function () {
      function t(t, e) {
        var n = [],
            r = !0,
            o = !1,
            i = void 0;

        try {
          for (var l, a = t[Symbol.iterator](); !(r = (l = a.next()).done) && (n.push(l.value), !e || n.length !== e); r = !0) {
            ;
          }
        } catch (t) {
          o = !0, i = t;
        } finally {
          try {
            !r && a["return"] && a["return"]();
          } finally {
            if (o) throw i;
          }
        }

        return n;
      }

      return function (e, n) {
        if (Array.isArray(e)) return e;
        if (Symbol.iterator in Object(e)) return t(e, n);
        throw new TypeError("Invalid attempt to destructure non-iterable instance");
      };
    }(),
        g = function () {
      function t(t, e) {
        for (var n = 0; n < e.length; n++) {
          var r = e[n];
          r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r);
        }
      }

      return function (e, n, r) {
        return n && t(e.prototype, n), r && t(e, r), e;
      };
    }(),
        m = n(21),
        _ = r(m),
        O = n(12),
        w = r(O),
        x = n(2),
        k = r(x),
        E = n(4),
        N = r(E),
        j = n(20),
        A = r(j),
        q = n(0),
        T = r(q),
        P = n(6),
        S = r(P),
        C = n(10),
        L = r(C),
        M = n(7),
        R = r(M),
        I = (0, L["default"])("quill:keyboard"),
        B = /Mac/i.test(navigator.platform) ? "metaKey" : "ctrlKey",
        D = function (t) {
      function e(t, n) {
        i(this, e);
        var r = l(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this, t, n));
        return r.bindings = {}, Object.keys(r.options.bindings).forEach(function (e) {
          ("list autofill" !== e || null == t.scroll.whitelist || t.scroll.whitelist.list) && r.options.bindings[e] && r.addBinding(r.options.bindings[e]);
        }), r.addBinding({
          key: e.keys.ENTER,
          shiftKey: null
        }, h), r.addBinding({
          key: e.keys.ENTER,
          metaKey: null,
          ctrlKey: null,
          altKey: null
        }, function () {}), /Firefox/i.test(navigator.userAgent) ? (r.addBinding({
          key: e.keys.BACKSPACE
        }, {
          collapsed: !0
        }, u), r.addBinding({
          key: e.keys.DELETE
        }, {
          collapsed: !0
        }, c)) : (r.addBinding({
          key: e.keys.BACKSPACE
        }, {
          collapsed: !0,
          prefix: /^.?$/
        }, u), r.addBinding({
          key: e.keys.DELETE
        }, {
          collapsed: !0,
          suffix: /^.?$/
        }, c)), r.addBinding({
          key: e.keys.BACKSPACE
        }, {
          collapsed: !1
        }, f), r.addBinding({
          key: e.keys.DELETE
        }, {
          collapsed: !1
        }, f), r.addBinding({
          key: e.keys.BACKSPACE,
          altKey: null,
          ctrlKey: null,
          metaKey: null,
          shiftKey: null
        }, {
          collapsed: !0,
          offset: 0
        }, u), r.listen(), r;
      }

      return a(e, t), g(e, null, [{
        key: "match",
        value: function value(t, e) {
          return e = y(e), !["altKey", "ctrlKey", "metaKey", "shiftKey"].some(function (n) {
            return !!e[n] !== t[n] && null !== e[n];
          }) && e.key === (t.which || t.keyCode);
        }
      }]), g(e, [{
        key: "addBinding",
        value: function value(t) {
          var e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {},
              n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {},
              r = y(t);
          if (null == r || null == r.key) return I.warn("Attempted to add invalid keyboard binding", r);
          "function" == typeof e && (e = {
            handler: e
          }), "function" == typeof n && (n = {
            handler: n
          }), r = (0, k["default"])(r, e, n), this.bindings[r.key] = this.bindings[r.key] || [], this.bindings[r.key].push(r);
        }
      }, {
        key: "listen",
        value: function value() {
          var t = this;
          this.quill.root.addEventListener("keydown", function (n) {
            if (!n.defaultPrevented) {
              var r = n.which || n.keyCode,
                  o = (t.bindings[r] || []).filter(function (t) {
                return e.match(n, t);
              });

              if (0 !== o.length) {
                var i = t.quill.getSelection();

                if (null != i && t.quill.hasFocus()) {
                  var l = t.quill.getLine(i.index),
                      a = b(l, 2),
                      s = a[0],
                      u = a[1],
                      c = t.quill.getLeaf(i.index),
                      f = b(c, 2),
                      h = f[0],
                      p = f[1],
                      d = 0 === i.length ? [h, p] : t.quill.getLeaf(i.index + i.length),
                      y = b(d, 2),
                      g = y[0],
                      m = y[1],
                      _ = h instanceof T["default"].Text ? h.value().slice(0, p) : "",
                      O = g instanceof T["default"].Text ? g.value().slice(m) : "",
                      x = {
                    collapsed: 0 === i.length,
                    empty: 0 === i.length && s.length() <= 1,
                    format: t.quill.getFormat(i),
                    offset: u,
                    prefix: _,
                    suffix: O
                  };

                  o.some(function (e) {
                    if (null != e.collapsed && e.collapsed !== x.collapsed) return !1;
                    if (null != e.empty && e.empty !== x.empty) return !1;
                    if (null != e.offset && e.offset !== x.offset) return !1;

                    if (Array.isArray(e.format)) {
                      if (e.format.every(function (t) {
                        return null == x.format[t];
                      })) return !1;
                    } else if ("object" === v(e.format) && !Object.keys(e.format).every(function (t) {
                      return !0 === e.format[t] ? null != x.format[t] : !1 === e.format[t] ? null == x.format[t] : (0, w["default"])(e.format[t], x.format[t]);
                    })) return !1;

                    return !(null != e.prefix && !e.prefix.test(x.prefix)) && !(null != e.suffix && !e.suffix.test(x.suffix)) && !0 !== e.handler.call(t, i, x);
                  }) && n.preventDefault();
                }
              }
            }
          });
        }
      }]), e;
    }(R["default"]);

    D.keys = {
      BACKSPACE: 8,
      TAB: 9,
      ENTER: 13,
      ESCAPE: 27,
      LEFT: 37,
      UP: 38,
      RIGHT: 39,
      DOWN: 40,
      DELETE: 46
    }, D.DEFAULTS = {
      bindings: {
        bold: d("bold"),
        italic: d("italic"),
        underline: d("underline"),
        indent: {
          key: D.keys.TAB,
          format: ["blockquote", "indent", "list"],
          handler: function handler(t, e) {
            if (e.collapsed && 0 !== e.offset) return !0;
            this.quill.format("indent", "+1", S["default"].sources.USER);
          }
        },
        outdent: {
          key: D.keys.TAB,
          shiftKey: !0,
          format: ["blockquote", "indent", "list"],
          handler: function handler(t, e) {
            if (e.collapsed && 0 !== e.offset) return !0;
            this.quill.format("indent", "-1", S["default"].sources.USER);
          }
        },
        "outdent backspace": {
          key: D.keys.BACKSPACE,
          collapsed: !0,
          shiftKey: null,
          metaKey: null,
          ctrlKey: null,
          altKey: null,
          format: ["indent", "list"],
          offset: 0,
          handler: function handler(t, e) {
            null != e.format.indent ? this.quill.format("indent", "-1", S["default"].sources.USER) : null != e.format.list && this.quill.format("list", !1, S["default"].sources.USER);
          }
        },
        "indent code-block": p(!0),
        "outdent code-block": p(!1),
        "remove tab": {
          key: D.keys.TAB,
          shiftKey: !0,
          collapsed: !0,
          prefix: /\t$/,
          handler: function handler(t) {
            this.quill.deleteText(t.index - 1, 1, S["default"].sources.USER);
          }
        },
        tab: {
          key: D.keys.TAB,
          handler: function handler(t) {
            this.quill.history.cutoff();
            var e = new N["default"]().retain(t.index)["delete"](t.length).insert("\t");
            this.quill.updateContents(e, S["default"].sources.USER), this.quill.history.cutoff(), this.quill.setSelection(t.index + 1, S["default"].sources.SILENT);
          }
        },
        "list empty enter": {
          key: D.keys.ENTER,
          collapsed: !0,
          format: ["list"],
          empty: !0,
          handler: function handler(t, e) {
            this.quill.format("list", !1, S["default"].sources.USER), e.format.indent && this.quill.format("indent", !1, S["default"].sources.USER);
          }
        },
        "checklist enter": {
          key: D.keys.ENTER,
          collapsed: !0,
          format: {
            list: "checked"
          },
          handler: function handler(t) {
            var e = this.quill.getLine(t.index),
                n = b(e, 2),
                r = n[0],
                o = n[1],
                i = (0, k["default"])({}, r.formats(), {
              list: "checked"
            }),
                l = new N["default"]().retain(t.index).insert("\n", i).retain(r.length() - o - 1).retain(1, {
              list: "unchecked"
            });
            this.quill.updateContents(l, S["default"].sources.USER), this.quill.setSelection(t.index + 1, S["default"].sources.SILENT), this.quill.scrollIntoView();
          }
        },
        "header enter": {
          key: D.keys.ENTER,
          collapsed: !0,
          format: ["header"],
          suffix: /^$/,
          handler: function handler(t, e) {
            var n = this.quill.getLine(t.index),
                r = b(n, 2),
                o = r[0],
                i = r[1],
                l = new N["default"]().retain(t.index).insert("\n", e.format).retain(o.length() - i - 1).retain(1, {
              header: null
            });
            this.quill.updateContents(l, S["default"].sources.USER), this.quill.setSelection(t.index + 1, S["default"].sources.SILENT), this.quill.scrollIntoView();
          }
        },
        "list autofill": {
          key: " ",
          collapsed: !0,
          format: {
            list: !1
          },
          prefix: /^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,
          handler: function handler(t, e) {
            var n = e.prefix.length,
                r = this.quill.getLine(t.index),
                o = b(r, 2),
                i = o[0],
                l = o[1];
            if (l > n) return !0;
            var a = void 0;

            switch (e.prefix.trim()) {
              case "[]":
              case "[ ]":
                a = "unchecked";
                break;

              case "[x]":
                a = "checked";
                break;

              case "-":
              case "*":
                a = "bullet";
                break;

              default:
                a = "ordered";
            }

            this.quill.insertText(t.index, " ", S["default"].sources.USER), this.quill.history.cutoff();
            var s = new N["default"]().retain(t.index - l)["delete"](n + 1).retain(i.length() - 2 - l).retain(1, {
              list: a
            });
            this.quill.updateContents(s, S["default"].sources.USER), this.quill.history.cutoff(), this.quill.setSelection(t.index - n, S["default"].sources.SILENT);
          }
        },
        "code exit": {
          key: D.keys.ENTER,
          collapsed: !0,
          format: ["code-block"],
          prefix: /\n\n$/,
          suffix: /^\s+$/,
          handler: function handler(t) {
            var e = this.quill.getLine(t.index),
                n = b(e, 2),
                r = n[0],
                o = n[1],
                i = new N["default"]().retain(t.index + r.length() - o - 2).retain(1, {
              "code-block": null
            })["delete"](1);
            this.quill.updateContents(i, S["default"].sources.USER);
          }
        },
        "embed left": s(D.keys.LEFT, !1),
        "embed left shift": s(D.keys.LEFT, !0),
        "embed right": s(D.keys.RIGHT, !1),
        "embed right shift": s(D.keys.RIGHT, !0)
      }
    }, e["default"] = D, e.SHORTKEY = B;
  }, function (t, e, n) {
    "use strict";

    t.exports = {
      align: {
        "": n(75),
        center: n(76),
        right: n(77),
        justify: n(78)
      },
      background: n(79),
      blockquote: n(80),
      bold: n(81),
      clean: n(82),
      code: n(40),
      "code-block": n(40),
      color: n(83),
      direction: {
        "": n(84),
        rtl: n(85)
      },
      "float": {
        center: n(86),
        full: n(87),
        left: n(88),
        right: n(89)
      },
      formula: n(90),
      header: {
        1: n(91),
        2: n(92)
      },
      italic: n(93),
      image: n(94),
      indent: {
        "+1": n(95),
        "-1": n(96)
      },
      link: n(97),
      list: {
        ordered: n(98),
        bullet: n(99),
        check: n(100)
      },
      script: {
        sub: n(101),
        "super": n(102)
      },
      strike: n(103),
      underline: n(104),
      video: n(105)
    };
  }, function (t, e, n) {
    "use strict";

    Object.defineProperty(e, "__esModule", {
      value: !0
    });

    var r = n(1),
        o = function () {
      function t(t) {
        this.domNode = t, this.domNode[r.DATA_KEY] = {
          blot: this
        };
      }

      return Object.defineProperty(t.prototype, "statics", {
        get: function get() {
          return this.constructor;
        },
        enumerable: !0,
        configurable: !0
      }), t.create = function (t) {
        if (null == this.tagName) throw new r.ParchmentError("Blot definition missing tagName");
        var e;
        return Array.isArray(this.tagName) ? ("string" == typeof t && (t = t.toUpperCase(), parseInt(t).toString() === t && (t = parseInt(t))), e = "number" == typeof t ? document.createElement(this.tagName[t - 1]) : this.tagName.indexOf(t) > -1 ? document.createElement(t) : document.createElement(this.tagName[0])) : e = document.createElement(this.tagName), this.className && e.classList.add(this.className), e;
      }, t.prototype.attach = function () {
        null != this.parent && (this.scroll = this.parent.scroll);
      }, t.prototype.clone = function () {
        var t = this.domNode.cloneNode(!1);
        return r.create(t);
      }, t.prototype.detach = function () {
        null != this.parent && this.parent.removeChild(this), delete this.domNode[r.DATA_KEY];
      }, t.prototype.deleteAt = function (t, e) {
        this.isolate(t, e).remove();
      }, t.prototype.formatAt = function (t, e, n, o) {
        var i = this.isolate(t, e);
        if (null != r.query(n, r.Scope.BLOT) && o) i.wrap(n, o);else if (null != r.query(n, r.Scope.ATTRIBUTE)) {
          var l = r.create(this.statics.scope);
          i.wrap(l), l.format(n, o);
        }
      }, t.prototype.insertAt = function (t, e, n) {
        var o = null == n ? r.create("text", e) : r.create(e, n),
            i = this.split(t);
        this.parent.insertBefore(o, i);
      }, t.prototype.insertInto = function (t, e) {
        void 0 === e && (e = null), null != this.parent && this.parent.children.remove(this);
        var n = null;
        t.children.insertBefore(this, e), null != e && (n = e.domNode), this.domNode.parentNode == t.domNode && this.domNode.nextSibling == n || t.domNode.insertBefore(this.domNode, n), this.parent = t, this.attach();
      }, t.prototype.isolate = function (t, e) {
        var n = this.split(t);
        return n.split(e), n;
      }, t.prototype.length = function () {
        return 1;
      }, t.prototype.offset = function (t) {
        return void 0 === t && (t = this.parent), null == this.parent || this == t ? 0 : this.parent.children.offset(this) + this.parent.offset(t);
      }, t.prototype.optimize = function (t) {
        null != this.domNode[r.DATA_KEY] && delete this.domNode[r.DATA_KEY].mutations;
      }, t.prototype.remove = function () {
        null != this.domNode.parentNode && this.domNode.parentNode.removeChild(this.domNode), this.detach();
      }, t.prototype.replace = function (t) {
        null != t.parent && (t.parent.insertBefore(this, t.next), t.remove());
      }, t.prototype.replaceWith = function (t, e) {
        var n = "string" == typeof t ? r.create(t, e) : t;
        return n.replace(this), n;
      }, t.prototype.split = function (t, e) {
        return 0 === t ? this : this.next;
      }, t.prototype.update = function (t, e) {}, t.prototype.wrap = function (t, e) {
        var n = "string" == typeof t ? r.create(t, e) : t;
        return null != this.parent && this.parent.insertBefore(n, this.next), n.appendChild(this), n;
      }, t.blotName = "abstract", t;
    }();

    e["default"] = o;
  }, function (t, e, n) {
    "use strict";

    Object.defineProperty(e, "__esModule", {
      value: !0
    });

    var r = n(11),
        o = n(29),
        i = n(30),
        l = n(1),
        a = function () {
      function t(t) {
        this.attributes = {}, this.domNode = t, this.build();
      }

      return t.prototype.attribute = function (t, e) {
        e ? t.add(this.domNode, e) && (null != t.value(this.domNode) ? this.attributes[t.attrName] = t : delete this.attributes[t.attrName]) : (t.remove(this.domNode), delete this.attributes[t.attrName]);
      }, t.prototype.build = function () {
        var t = this;
        this.attributes = {};
        var e = r["default"].keys(this.domNode),
            n = o["default"].keys(this.domNode),
            a = i["default"].keys(this.domNode);
        e.concat(n).concat(a).forEach(function (e) {
          var n = l.query(e, l.Scope.ATTRIBUTE);
          n instanceof r["default"] && (t.attributes[n.attrName] = n);
        });
      }, t.prototype.copy = function (t) {
        var e = this;
        Object.keys(this.attributes).forEach(function (n) {
          var r = e.attributes[n].value(e.domNode);
          t.format(n, r);
        });
      }, t.prototype.move = function (t) {
        var e = this;
        this.copy(t), Object.keys(this.attributes).forEach(function (t) {
          e.attributes[t].remove(e.domNode);
        }), this.attributes = {};
      }, t.prototype.values = function () {
        var t = this;
        return Object.keys(this.attributes).reduce(function (e, n) {
          return e[n] = t.attributes[n].value(t.domNode), e;
        }, {});
      }, t;
    }();

    e["default"] = a;
  }, function (t, e, n) {
    "use strict";

    function r(t, e) {
      return (t.getAttribute("class") || "").split(/\s+/).filter(function (t) {
        return 0 === t.indexOf(e + "-");
      });
    }

    var o = this && this.__extends || function () {
      var t = Object.setPrototypeOf || {
        __proto__: []
      } instanceof Array && function (t, e) {
        t.__proto__ = e;
      } || function (t, e) {
        for (var n in e) {
          e.hasOwnProperty(n) && (t[n] = e[n]);
        }
      };

      return function (e, n) {
        function r() {
          this.constructor = e;
        }

        t(e, n), e.prototype = null === n ? Object.create(n) : (r.prototype = n.prototype, new r());
      };
    }();

    Object.defineProperty(e, "__esModule", {
      value: !0
    });

    var i = n(11),
        l = function (t) {
      function e() {
        return null !== t && t.apply(this, arguments) || this;
      }

      return o(e, t), e.keys = function (t) {
        return (t.getAttribute("class") || "").split(/\s+/).map(function (t) {
          return t.split("-").slice(0, -1).join("-");
        });
      }, e.prototype.add = function (t, e) {
        return !!this.canAdd(t, e) && (this.remove(t), t.classList.add(this.keyName + "-" + e), !0);
      }, e.prototype.remove = function (t) {
        r(t, this.keyName).forEach(function (e) {
          t.classList.remove(e);
        }), 0 === t.classList.length && t.removeAttribute("class");
      }, e.prototype.value = function (t) {
        var e = r(t, this.keyName)[0] || "",
            n = e.slice(this.keyName.length + 1);
        return this.canAdd(t, n) ? n : "";
      }, e;
    }(i["default"]);

    e["default"] = l;
  }, function (t, e, n) {
    "use strict";

    function r(t) {
      var e = t.split("-"),
          n = e.slice(1).map(function (t) {
        return t[0].toUpperCase() + t.slice(1);
      }).join("");
      return e[0] + n;
    }

    var o = this && this.__extends || function () {
      var t = Object.setPrototypeOf || {
        __proto__: []
      } instanceof Array && function (t, e) {
        t.__proto__ = e;
      } || function (t, e) {
        for (var n in e) {
          e.hasOwnProperty(n) && (t[n] = e[n]);
        }
      };

      return function (e, n) {
        function r() {
          this.constructor = e;
        }

        t(e, n), e.prototype = null === n ? Object.create(n) : (r.prototype = n.prototype, new r());
      };
    }();

    Object.defineProperty(e, "__esModule", {
      value: !0
    });

    var i = n(11),
        l = function (t) {
      function e() {
        return null !== t && t.apply(this, arguments) || this;
      }

      return o(e, t), e.keys = function (t) {
        return (t.getAttribute("style") || "").split(";").map(function (t) {
          return t.split(":")[0].trim();
        });
      }, e.prototype.add = function (t, e) {
        return !!this.canAdd(t, e) && (t.style[r(this.keyName)] = e, !0);
      }, e.prototype.remove = function (t) {
        t.style[r(this.keyName)] = "", t.getAttribute("style") || t.removeAttribute("style");
      }, e.prototype.value = function (t) {
        var e = t.style[r(this.keyName)];
        return this.canAdd(t, e) ? e : "";
      }, e;
    }(i["default"]);

    e["default"] = l;
  }, function (t, e, n) {
    "use strict";

    function r(t) {
      return t && t.__esModule ? t : {
        "default": t
      };
    }

    function o(t, e) {
      if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function");
    }

    function i(t, e) {
      if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
      return !e || "object" != _typeof2(e) && "function" != typeof e ? t : e;
    }

    function l(t, e) {
      if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + _typeof2(e));
      t.prototype = Object.create(e && e.prototype, {
        constructor: {
          value: t,
          enumerable: !1,
          writable: !0,
          configurable: !0
        }
      }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e);
    }

    Object.defineProperty(e, "__esModule", {
      value: !0
    });

    var a = function () {
      function t(t, e) {
        var n = [],
            r = !0,
            o = !1,
            i = void 0;

        try {
          for (var l, a = t[Symbol.iterator](); !(r = (l = a.next()).done) && (n.push(l.value), !e || n.length !== e); r = !0) {
            ;
          }
        } catch (t) {
          o = !0, i = t;
        } finally {
          try {
            !r && a["return"] && a["return"]();
          } finally {
            if (o) throw i;
          }
        }

        return n;
      }

      return function (e, n) {
        if (Array.isArray(e)) return e;
        if (Symbol.iterator in Object(e)) return t(e, n);
        throw new TypeError("Invalid attempt to destructure non-iterable instance");
      };
    }(),
        s = function t(e, n, r) {
      null === e && (e = Function.prototype);
      var o = Object.getOwnPropertyDescriptor(e, n);

      if (void 0 === o) {
        var i = Object.getPrototypeOf(e);
        return null === i ? void 0 : t(i, n, r);
      }

      if ("value" in o) return o.value;
      var l = o.get;
      if (void 0 !== l) return l.call(r);
    },
        u = function () {
      function t(t, e) {
        for (var n = 0; n < e.length; n++) {
          var r = e[n];
          r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r);
        }
      }

      return function (e, n, r) {
        return n && t(e.prototype, n), r && t(e, r), e;
      };
    }(),
        c = n(0),
        f = r(c),
        h = n(8),
        p = r(h),
        d = function (t) {
      function e(t, n) {
        o(this, e);
        var r = i(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this, t));
        return r.selection = n, r.textNode = document.createTextNode(e.CONTENTS), r.domNode.appendChild(r.textNode), r._length = 0, r;
      }

      return l(e, t), u(e, null, [{
        key: "value",
        value: function value() {}
      }]), u(e, [{
        key: "detach",
        value: function value() {
          null != this.parent && this.parent.removeChild(this);
        }
      }, {
        key: "format",
        value: function value(t, n) {
          if (0 !== this._length) return s(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "format", this).call(this, t, n);

          for (var r = this, o = 0; null != r && r.statics.scope !== f["default"].Scope.BLOCK_BLOT;) {
            o += r.offset(r.parent), r = r.parent;
          }

          null != r && (this._length = e.CONTENTS.length, r.optimize(), r.formatAt(o, e.CONTENTS.length, t, n), this._length = 0);
        }
      }, {
        key: "index",
        value: function value(t, n) {
          return t === this.textNode ? 0 : s(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "index", this).call(this, t, n);
        }
      }, {
        key: "length",
        value: function value() {
          return this._length;
        }
      }, {
        key: "position",
        value: function value() {
          return [this.textNode, this.textNode.data.length];
        }
      }, {
        key: "remove",
        value: function value() {
          s(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "remove", this).call(this), this.parent = null;
        }
      }, {
        key: "restore",
        value: function value() {
          if (!this.selection.composing && null != this.parent) {
            var t = this.textNode,
                n = this.selection.getNativeRange(),
                r = void 0,
                o = void 0,
                i = void 0;

            if (null != n && n.start.node === t && n.end.node === t) {
              var l = [t, n.start.offset, n.end.offset];
              r = l[0], o = l[1], i = l[2];
            }

            for (; null != this.domNode.lastChild && this.domNode.lastChild !== this.textNode;) {
              this.domNode.parentNode.insertBefore(this.domNode.lastChild, this.domNode);
            }

            if (this.textNode.data !== e.CONTENTS) {
              var s = this.textNode.data.split(e.CONTENTS).join("");
              this.next instanceof p["default"] ? (r = this.next.domNode, this.next.insertAt(0, s), this.textNode.data = e.CONTENTS) : (this.textNode.data = s, this.parent.insertBefore(f["default"].create(this.textNode), this), this.textNode = document.createTextNode(e.CONTENTS), this.domNode.appendChild(this.textNode));
            }

            if (this.remove(), null != o) {
              var u = [o, i].map(function (t) {
                return Math.max(0, Math.min(r.data.length, t - 1));
              }),
                  c = a(u, 2);
              return o = c[0], i = c[1], {
                startNode: r,
                startOffset: o,
                endNode: r,
                endOffset: i
              };
            }
          }
        }
      }, {
        key: "update",
        value: function value(t, e) {
          var n = this;

          if (t.some(function (t) {
            return "characterData" === t.type && t.target === n.textNode;
          })) {
            var r = this.restore();
            r && (e.range = r);
          }
        }
      }, {
        key: "value",
        value: function value() {
          return "";
        }
      }]), e;
    }(f["default"].Embed);

    d.blotName = "cursor", d.className = "ql-cursor", d.tagName = "span", d.CONTENTS = "\uFEFF", e["default"] = d;
  }, function (t, e, n) {
    "use strict";

    function r(t, e) {
      if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function");
    }

    Object.defineProperty(e, "__esModule", {
      value: !0
    });

    var o = function () {
      function t(t, e) {
        for (var n = 0; n < e.length; n++) {
          var r = e[n];
          r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r);
        }
      }

      return function (e, n, r) {
        return n && t(e.prototype, n), r && t(e, r), e;
      };
    }(),
        i = function () {
      function t(e, n) {
        r(this, t), this.quill = e, this.options = n, this.modules = {};
      }

      return o(t, [{
        key: "init",
        value: function value() {
          var t = this;
          Object.keys(this.options.modules).forEach(function (e) {
            null == t.modules[e] && t.addModule(e);
          });
        }
      }, {
        key: "addModule",
        value: function value(t) {
          var e = this.quill.constructor["import"]("modules/" + t);
          return this.modules[t] = new e(this.quill, this.options.modules[t] || {}), this.modules[t];
        }
      }]), t;
    }();

    i.DEFAULTS = {
      modules: {}
    }, i.themes = {
      "default": i
    }, e["default"] = i;
  }, function (t, e, n) {
    "use strict";

    function r(t) {
      return t && t.__esModule ? t : {
        "default": t
      };
    }

    function o(t, e) {
      if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function");
    }

    function i(t, e) {
      if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
      return !e || "object" != _typeof2(e) && "function" != typeof e ? t : e;
    }

    function l(t, e) {
      if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + _typeof2(e));
      t.prototype = Object.create(e && e.prototype, {
        constructor: {
          value: t,
          enumerable: !1,
          writable: !0,
          configurable: !0
        }
      }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e);
    }

    Object.defineProperty(e, "__esModule", {
      value: !0
    });

    var a = function () {
      function t(t, e) {
        for (var n = 0; n < e.length; n++) {
          var r = e[n];
          r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r);
        }
      }

      return function (e, n, r) {
        return n && t(e.prototype, n), r && t(e, r), e;
      };
    }(),
        s = function t(e, n, r) {
      null === e && (e = Function.prototype);
      var o = Object.getOwnPropertyDescriptor(e, n);

      if (void 0 === o) {
        var i = Object.getPrototypeOf(e);
        return null === i ? void 0 : t(i, n, r);
      }

      if ("value" in o) return o.value;
      var l = o.get;
      if (void 0 !== l) return l.call(r);
    },
        u = n(0),
        c = r(u),
        f = n(8),
        h = r(f),
        p = "\uFEFF",
        d = function (t) {
      function e(t) {
        o(this, e);
        var n = i(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this, t));
        return n.contentNode = document.createElement("span"), n.contentNode.setAttribute("contenteditable", !1), [].slice.call(n.domNode.childNodes).forEach(function (t) {
          n.contentNode.appendChild(t);
        }), n.leftGuard = document.createTextNode(p), n.rightGuard = document.createTextNode(p), n.domNode.appendChild(n.leftGuard), n.domNode.appendChild(n.contentNode), n.domNode.appendChild(n.rightGuard), n;
      }

      return l(e, t), a(e, [{
        key: "index",
        value: function value(t, n) {
          return t === this.leftGuard ? 0 : t === this.rightGuard ? 1 : s(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "index", this).call(this, t, n);
        }
      }, {
        key: "restore",
        value: function value(t) {
          var e = void 0,
              n = void 0,
              r = t.data.split(p).join("");
          if (t === this.leftGuard) {
            if (this.prev instanceof h["default"]) {
              var o = this.prev.length();
              this.prev.insertAt(o, r), e = {
                startNode: this.prev.domNode,
                startOffset: o + r.length
              };
            } else n = document.createTextNode(r), this.parent.insertBefore(c["default"].create(n), this), e = {
              startNode: n,
              startOffset: r.length
            };
          } else t === this.rightGuard && (this.next instanceof h["default"] ? (this.next.insertAt(0, r), e = {
            startNode: this.next.domNode,
            startOffset: r.length
          }) : (n = document.createTextNode(r), this.parent.insertBefore(c["default"].create(n), this.next), e = {
            startNode: n,
            startOffset: r.length
          }));
          return t.data = p, e;
        }
      }, {
        key: "update",
        value: function value(t, e) {
          var n = this;
          t.forEach(function (t) {
            if ("characterData" === t.type && (t.target === n.leftGuard || t.target === n.rightGuard)) {
              var r = n.restore(t.target);
              r && (e.range = r);
            }
          });
        }
      }]), e;
    }(c["default"].Embed);

    e["default"] = d;
  }, function (t, e, n) {
    "use strict";

    Object.defineProperty(e, "__esModule", {
      value: !0
    }), e.AlignStyle = e.AlignClass = e.AlignAttribute = void 0;

    var r = n(0),
        o = function (t) {
      return t && t.__esModule ? t : {
        "default": t
      };
    }(r),
        i = {
      scope: o["default"].Scope.BLOCK,
      whitelist: ["right", "center", "justify"]
    },
        l = new o["default"].Attributor.Attribute("align", "align", i),
        a = new o["default"].Attributor.Class("align", "ql-align", i),
        s = new o["default"].Attributor.Style("align", "text-align", i);

    e.AlignAttribute = l, e.AlignClass = a, e.AlignStyle = s;
  }, function (t, e, n) {
    "use strict";

    Object.defineProperty(e, "__esModule", {
      value: !0
    }), e.BackgroundStyle = e.BackgroundClass = void 0;

    var r = n(0),
        o = function (t) {
      return t && t.__esModule ? t : {
        "default": t
      };
    }(r),
        i = n(24),
        l = new o["default"].Attributor.Class("background", "ql-bg", {
      scope: o["default"].Scope.INLINE
    }),
        a = new i.ColorAttributor("background", "background-color", {
      scope: o["default"].Scope.INLINE
    });

    e.BackgroundClass = l, e.BackgroundStyle = a;
  }, function (t, e, n) {
    "use strict";

    Object.defineProperty(e, "__esModule", {
      value: !0
    }), e.DirectionStyle = e.DirectionClass = e.DirectionAttribute = void 0;

    var r = n(0),
        o = function (t) {
      return t && t.__esModule ? t : {
        "default": t
      };
    }(r),
        i = {
      scope: o["default"].Scope.BLOCK,
      whitelist: ["rtl"]
    },
        l = new o["default"].Attributor.Attribute("direction", "dir", i),
        a = new o["default"].Attributor.Class("direction", "ql-direction", i),
        s = new o["default"].Attributor.Style("direction", "direction", i);

    e.DirectionAttribute = l, e.DirectionClass = a, e.DirectionStyle = s;
  }, function (t, e, n) {
    "use strict";

    function r(t, e) {
      if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function");
    }

    function o(t, e) {
      if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
      return !e || "object" != _typeof2(e) && "function" != typeof e ? t : e;
    }

    function i(t, e) {
      if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + _typeof2(e));
      t.prototype = Object.create(e && e.prototype, {
        constructor: {
          value: t,
          enumerable: !1,
          writable: !0,
          configurable: !0
        }
      }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e);
    }

    Object.defineProperty(e, "__esModule", {
      value: !0
    }), e.FontClass = e.FontStyle = void 0;

    var l = function () {
      function t(t, e) {
        for (var n = 0; n < e.length; n++) {
          var r = e[n];
          r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r);
        }
      }

      return function (e, n, r) {
        return n && t(e.prototype, n), r && t(e, r), e;
      };
    }(),
        a = function t(e, n, r) {
      null === e && (e = Function.prototype);
      var o = Object.getOwnPropertyDescriptor(e, n);

      if (void 0 === o) {
        var i = Object.getPrototypeOf(e);
        return null === i ? void 0 : t(i, n, r);
      }

      if ("value" in o) return o.value;
      var l = o.get;
      if (void 0 !== l) return l.call(r);
    },
        s = n(0),
        u = function (t) {
      return t && t.__esModule ? t : {
        "default": t
      };
    }(s),
        c = {
      scope: u["default"].Scope.INLINE,
      whitelist: ["serif", "monospace"]
    },
        f = new u["default"].Attributor.Class("font", "ql-font", c),
        h = function (t) {
      function e() {
        return r(this, e), o(this, (e.__proto__ || Object.getPrototypeOf(e)).apply(this, arguments));
      }

      return i(e, t), l(e, [{
        key: "value",
        value: function value(t) {
          return a(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "value", this).call(this, t).replace(/["']/g, "");
        }
      }]), e;
    }(u["default"].Attributor.Style),
        p = new h("font", "font-family", c);

    e.FontStyle = p, e.FontClass = f;
  }, function (t, e, n) {
    "use strict";

    Object.defineProperty(e, "__esModule", {
      value: !0
    }), e.SizeStyle = e.SizeClass = void 0;

    var r = n(0),
        o = function (t) {
      return t && t.__esModule ? t : {
        "default": t
      };
    }(r),
        i = new o["default"].Attributor.Class("size", "ql-size", {
      scope: o["default"].Scope.INLINE,
      whitelist: ["small", "large", "huge"]
    }),
        l = new o["default"].Attributor.Style("size", "font-size", {
      scope: o["default"].Scope.INLINE,
      whitelist: ["10px", "18px", "32px"]
    });

    e.SizeClass = i, e.SizeStyle = l;
  }, function (t, e, n) {
    "use strict";

    function r(t, e) {
      if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function");
    }

    function o(t, e) {
      if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
      return !e || "object" != _typeof2(e) && "function" != typeof e ? t : e;
    }

    function i(t, e) {
      if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + _typeof2(e));
      t.prototype = Object.create(e && e.prototype, {
        constructor: {
          value: t,
          enumerable: !1,
          writable: !0,
          configurable: !0
        }
      }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e);
    }

    Object.defineProperty(e, "__esModule", {
      value: !0
    });

    var l = function () {
      function t(t, e) {
        for (var n = 0; n < e.length; n++) {
          var r = e[n];
          r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r);
        }
      }

      return function (e, n, r) {
        return n && t(e.prototype, n), r && t(e, r), e;
      };
    }(),
        a = function t(e, n, r) {
      null === e && (e = Function.prototype);
      var o = Object.getOwnPropertyDescriptor(e, n);

      if (void 0 === o) {
        var i = Object.getPrototypeOf(e);
        return null === i ? void 0 : t(i, n, r);
      }

      if ("value" in o) return o.value;
      var l = o.get;
      if (void 0 !== l) return l.call(r);
    },
        s = n(5),
        u = function (t) {
      return t && t.__esModule ? t : {
        "default": t
      };
    }(s),
        c = function (t) {
      function e() {
        return r(this, e), o(this, (e.__proto__ || Object.getPrototypeOf(e)).apply(this, arguments));
      }

      return i(e, t), l(e, [{
        key: "optimize",
        value: function value(t) {
          a(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "optimize", this).call(this, t), this.domNode.tagName !== this.statics.tagName[0] && this.replaceWith(this.statics.blotName);
        }
      }], [{
        key: "create",
        value: function value() {
          return a(e.__proto__ || Object.getPrototypeOf(e), "create", this).call(this);
        }
      }, {
        key: "formats",
        value: function value() {
          return !0;
        }
      }]), e;
    }(u["default"]);

    c.blotName = "bold", c.tagName = ["STRONG", "B"], e["default"] = c;
  }, function (t, e) {
    t.exports = '<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>';
  }, function (t, e, n) {
    "use strict";

    function r(t, e) {
      if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function");
    }

    function o(t, e) {
      if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
      return !e || "object" != _typeof2(e) && "function" != typeof e ? t : e;
    }

    function i(t, e) {
      if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + _typeof2(e));
      t.prototype = Object.create(e && e.prototype, {
        constructor: {
          value: t,
          enumerable: !1,
          writable: !0,
          configurable: !0
        }
      }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e);
    }

    Object.defineProperty(e, "__esModule", {
      value: !0
    });

    var l = function () {
      function t(t, e) {
        for (var n = 0; n < e.length; n++) {
          var r = e[n];
          r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r);
        }
      }

      return function (e, n, r) {
        return n && t(e.prototype, n), r && t(e, r), e;
      };
    }(),
        a = function t(e, n, r) {
      null === e && (e = Function.prototype);
      var o = Object.getOwnPropertyDescriptor(e, n);

      if (void 0 === o) {
        var i = Object.getPrototypeOf(e);
        return null === i ? void 0 : t(i, n, r);
      }

      if ("value" in o) return o.value;
      var l = o.get;
      if (void 0 !== l) return l.call(r);
    },
        s = n(16),
        u = function (t) {
      return t && t.__esModule ? t : {
        "default": t
      };
    }(s),
        c = function (t) {
      function e(t, n) {
        r(this, e);
        var i = o(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this, t));
        return i.label.innerHTML = n, i.container.classList.add("ql-color-picker"), [].slice.call(i.container.querySelectorAll(".ql-picker-item"), 0, 7).forEach(function (t) {
          t.classList.add("ql-primary");
        }), i;
      }

      return i(e, t), l(e, [{
        key: "buildItem",
        value: function value(t) {
          var n = a(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "buildItem", this).call(this, t);
          return n.style.backgroundColor = t.getAttribute("value") || "", n;
        }
      }, {
        key: "selectItem",
        value: function value(t, n) {
          a(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "selectItem", this).call(this, t, n);
          var r = this.label.querySelector(".ql-color-label"),
              o = t ? t.getAttribute("data-value") || "" : "";
          r && ("line" === r.tagName ? r.style.stroke = o : r.style.fill = o);
        }
      }]), e;
    }(u["default"]);

    e["default"] = c;
  }, function (t, e, n) {
    "use strict";

    function r(t, e) {
      if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function");
    }

    function o(t, e) {
      if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
      return !e || "object" != _typeof2(e) && "function" != typeof e ? t : e;
    }

    function i(t, e) {
      if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + _typeof2(e));
      t.prototype = Object.create(e && e.prototype, {
        constructor: {
          value: t,
          enumerable: !1,
          writable: !0,
          configurable: !0
        }
      }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e);
    }

    Object.defineProperty(e, "__esModule", {
      value: !0
    });

    var l = function () {
      function t(t, e) {
        for (var n = 0; n < e.length; n++) {
          var r = e[n];
          r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r);
        }
      }

      return function (e, n, r) {
        return n && t(e.prototype, n), r && t(e, r), e;
      };
    }(),
        a = function t(e, n, r) {
      null === e && (e = Function.prototype);
      var o = Object.getOwnPropertyDescriptor(e, n);

      if (void 0 === o) {
        var i = Object.getPrototypeOf(e);
        return null === i ? void 0 : t(i, n, r);
      }

      if ("value" in o) return o.value;
      var l = o.get;
      if (void 0 !== l) return l.call(r);
    },
        s = n(16),
        u = function (t) {
      return t && t.__esModule ? t : {
        "default": t
      };
    }(s),
        c = function (t) {
      function e(t, n) {
        r(this, e);
        var i = o(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this, t));
        return i.container.classList.add("ql-icon-picker"), [].forEach.call(i.container.querySelectorAll(".ql-picker-item"), function (t) {
          t.innerHTML = n[t.getAttribute("data-value") || ""];
        }), i.defaultItem = i.container.querySelector(".ql-selected"), i.selectItem(i.defaultItem), i;
      }

      return i(e, t), l(e, [{
        key: "selectItem",
        value: function value(t, n) {
          a(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "selectItem", this).call(this, t, n), t = t || this.defaultItem, this.label.innerHTML = t.innerHTML;
        }
      }]), e;
    }(u["default"]);

    e["default"] = c;
  }, function (t, e, n) {
    "use strict";

    function r(t, e) {
      if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function");
    }

    Object.defineProperty(e, "__esModule", {
      value: !0
    });

    var o = function () {
      function t(t, e) {
        for (var n = 0; n < e.length; n++) {
          var r = e[n];
          r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r);
        }
      }

      return function (e, n, r) {
        return n && t(e.prototype, n), r && t(e, r), e;
      };
    }(),
        i = function () {
      function t(e, n) {
        var o = this;
        r(this, t), this.quill = e, this.boundsContainer = n || document.body, this.root = e.addContainer("ql-tooltip"), this.root.innerHTML = this.constructor.TEMPLATE, this.quill.root === this.quill.scrollingContainer && this.quill.root.addEventListener("scroll", function () {
          o.root.style.marginTop = -1 * o.quill.root.scrollTop + "px";
        }), this.hide();
      }

      return o(t, [{
        key: "hide",
        value: function value() {
          this.root.classList.add("ql-hidden");
        }
      }, {
        key: "position",
        value: function value(t) {
          var e = t.left + t.width / 2 - this.root.offsetWidth / 2,
              n = t.bottom + this.quill.root.scrollTop;
          this.root.style.left = e + "px", this.root.style.top = n + "px", this.root.classList.remove("ql-flip");
          var r = this.boundsContainer.getBoundingClientRect(),
              o = this.root.getBoundingClientRect(),
              i = 0;

          if (o.right > r.right && (i = r.right - o.right, this.root.style.left = e + i + "px"), o.left < r.left && (i = r.left - o.left, this.root.style.left = e + i + "px"), o.bottom > r.bottom) {
            var l = o.bottom - o.top,
                a = t.bottom - t.top + l;
            this.root.style.top = n - a + "px", this.root.classList.add("ql-flip");
          }

          return i;
        }
      }, {
        key: "show",
        value: function value() {
          this.root.classList.remove("ql-editing"), this.root.classList.remove("ql-hidden");
        }
      }]), t;
    }();

    e["default"] = i;
  }, function (t, e, n) {
    "use strict";

    function r(t) {
      return t && t.__esModule ? t : {
        "default": t
      };
    }

    function o(t, e) {
      if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function");
    }

    function i(t, e) {
      if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
      return !e || "object" != _typeof2(e) && "function" != typeof e ? t : e;
    }

    function l(t, e) {
      if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + _typeof2(e));
      t.prototype = Object.create(e && e.prototype, {
        constructor: {
          value: t,
          enumerable: !1,
          writable: !0,
          configurable: !0
        }
      }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e);
    }

    function a(t) {
      var e = t.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/) || t.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);
      return e ? (e[1] || "https") + "://www.youtube.com/embed/" + e[2] + "?showinfo=0" : (e = t.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/)) ? (e[1] || "https") + "://player.vimeo.com/video/" + e[2] + "/" : t;
    }

    function s(t, e) {
      var n = arguments.length > 2 && void 0 !== arguments[2] && arguments[2];
      e.forEach(function (e) {
        var r = document.createElement("option");
        e === n ? r.setAttribute("selected", "selected") : r.setAttribute("value", e), t.appendChild(r);
      });
    }

    Object.defineProperty(e, "__esModule", {
      value: !0
    }), e["default"] = e.BaseTooltip = void 0;

    var u = function () {
      function t(t, e) {
        for (var n = 0; n < e.length; n++) {
          var r = e[n];
          r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r);
        }
      }

      return function (e, n, r) {
        return n && t(e.prototype, n), r && t(e, r), e;
      };
    }(),
        c = function t(e, n, r) {
      null === e && (e = Function.prototype);
      var o = Object.getOwnPropertyDescriptor(e, n);

      if (void 0 === o) {
        var i = Object.getPrototypeOf(e);
        return null === i ? void 0 : t(i, n, r);
      }

      if ("value" in o) return o.value;
      var l = o.get;
      if (void 0 !== l) return l.call(r);
    },
        f = n(2),
        h = r(f),
        p = n(4),
        d = r(p),
        y = n(9),
        v = r(y),
        b = n(25),
        g = r(b),
        m = n(32),
        _ = r(m),
        O = n(41),
        w = r(O),
        x = n(42),
        k = r(x),
        E = n(16),
        N = r(E),
        j = n(43),
        A = r(j),
        q = [!1, "center", "right", "justify"],
        T = ["#000000", "#e60000", "#ff9900", "#ffff00", "#008a00", "#0066cc", "#9933ff", "#ffffff", "#facccc", "#ffebcc", "#ffffcc", "#cce8cc", "#cce0f5", "#ebd6ff", "#bbbbbb", "#f06666", "#ffc266", "#ffff66", "#66b966", "#66a3e0", "#c285ff", "#888888", "#a10000", "#b26b00", "#b2b200", "#006100", "#0047b2", "#6b24b2", "#444444", "#5c0000", "#663d00", "#666600", "#003700", "#002966", "#3d1466"],
        P = [!1, "serif", "monospace"],
        S = ["1", "2", "3", !1],
        C = ["small", !1, "large", "huge"],
        L = function (t) {
      function e(t, n) {
        o(this, e);

        var r = i(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this, t, n)),
            l = function e(n) {
          if (!document.body.contains(t.root)) return document.body.removeEventListener("click", e);
          null == r.tooltip || r.tooltip.root.contains(n.target) || document.activeElement === r.tooltip.textbox || r.quill.hasFocus() || r.tooltip.hide(), null != r.pickers && r.pickers.forEach(function (t) {
            t.container.contains(n.target) || t.close();
          });
        };

        return t.emitter.listenDOM("click", document.body, l), r;
      }

      return l(e, t), u(e, [{
        key: "addModule",
        value: function value(t) {
          var n = c(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "addModule", this).call(this, t);
          return "toolbar" === t && this.extendToolbar(n), n;
        }
      }, {
        key: "buildButtons",
        value: function value(t, e) {
          t.forEach(function (t) {
            (t.getAttribute("class") || "").split(/\s+/).forEach(function (n) {
              if (n.startsWith("ql-") && (n = n.slice("ql-".length), null != e[n])) if ("direction" === n) t.innerHTML = e[n][""] + e[n].rtl;else if ("string" == typeof e[n]) t.innerHTML = e[n];else {
                var r = t.value || "";
                null != r && e[n][r] && (t.innerHTML = e[n][r]);
              }
            });
          });
        }
      }, {
        key: "buildPickers",
        value: function value(t, e) {
          var n = this;
          this.pickers = t.map(function (t) {
            if (t.classList.contains("ql-align")) return null == t.querySelector("option") && s(t, q), new k["default"](t, e.align);

            if (t.classList.contains("ql-background") || t.classList.contains("ql-color")) {
              var n = t.classList.contains("ql-background") ? "background" : "color";
              return null == t.querySelector("option") && s(t, T, "background" === n ? "#ffffff" : "#000000"), new w["default"](t, e[n]);
            }

            return null == t.querySelector("option") && (t.classList.contains("ql-font") ? s(t, P) : t.classList.contains("ql-header") ? s(t, S) : t.classList.contains("ql-size") && s(t, C)), new N["default"](t);
          });

          var r = function r() {
            n.pickers.forEach(function (t) {
              t.update();
            });
          };

          this.quill.on(v["default"].events.EDITOR_CHANGE, r);
        }
      }]), e;
    }(_["default"]);

    L.DEFAULTS = (0, h["default"])(!0, {}, _["default"].DEFAULTS, {
      modules: {
        toolbar: {
          handlers: {
            formula: function formula() {
              this.quill.theme.tooltip.edit("formula");
            },
            image: function image() {
              var t = this,
                  e = this.container.querySelector("input.ql-image[type=file]");
              null == e && (e = document.createElement("input"), e.setAttribute("type", "file"), e.setAttribute("accept", "image/png, image/gif, image/jpeg, image/bmp, image/x-icon"), e.classList.add("ql-image"), e.addEventListener("change", function () {
                if (null != e.files && null != e.files[0]) {
                  var n = new FileReader();
                  n.onload = function (n) {
                    var r = t.quill.getSelection(!0);
                    t.quill.updateContents(new d["default"]().retain(r.index)["delete"](r.length).insert({
                      image: n.target.result
                    }), v["default"].sources.USER), t.quill.setSelection(r.index + 1, v["default"].sources.SILENT), e.value = "";
                  }, n.readAsDataURL(e.files[0]);
                }
              }), this.container.appendChild(e)), e.click();
            },
            video: function video() {
              this.quill.theme.tooltip.edit("video");
            }
          }
        }
      }
    });

    var M = function (t) {
      function e(t, n) {
        o(this, e);
        var r = i(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this, t, n));
        return r.textbox = r.root.querySelector('input[type="text"]'), r.listen(), r;
      }

      return l(e, t), u(e, [{
        key: "listen",
        value: function value() {
          var t = this;
          this.textbox.addEventListener("keydown", function (e) {
            g["default"].match(e, "enter") ? (t.save(), e.preventDefault()) : g["default"].match(e, "escape") && (t.cancel(), e.preventDefault());
          });
        }
      }, {
        key: "cancel",
        value: function value() {
          this.hide();
        }
      }, {
        key: "edit",
        value: function value() {
          var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "link",
              e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : null;
          this.root.classList.remove("ql-hidden"), this.root.classList.add("ql-editing"), null != e ? this.textbox.value = e : t !== this.root.getAttribute("data-mode") && (this.textbox.value = ""), this.position(this.quill.getBounds(this.quill.selection.savedRange)), this.textbox.select(), this.textbox.setAttribute("placeholder", this.textbox.getAttribute("data-" + t) || ""), this.root.setAttribute("data-mode", t);
        }
      }, {
        key: "restoreFocus",
        value: function value() {
          var t = this.quill.scrollingContainer.scrollTop;
          this.quill.focus(), this.quill.scrollingContainer.scrollTop = t;
        }
      }, {
        key: "save",
        value: function value() {
          var t = this.textbox.value;

          switch (this.root.getAttribute("data-mode")) {
            case "link":
              var e = this.quill.root.scrollTop;
              this.linkRange ? (this.quill.formatText(this.linkRange, "link", t, v["default"].sources.USER), delete this.linkRange) : (this.restoreFocus(), this.quill.format("link", t, v["default"].sources.USER)), this.quill.root.scrollTop = e;
              break;

            case "video":
              t = a(t);

            case "formula":
              if (!t) break;
              var n = this.quill.getSelection(!0);

              if (null != n) {
                var r = n.index + n.length;
                this.quill.insertEmbed(r, this.root.getAttribute("data-mode"), t, v["default"].sources.USER), "formula" === this.root.getAttribute("data-mode") && this.quill.insertText(r + 1, " ", v["default"].sources.USER), this.quill.setSelection(r + 2, v["default"].sources.USER);
              }

          }

          this.textbox.value = "", this.hide();
        }
      }]), e;
    }(A["default"]);

    e.BaseTooltip = M, e["default"] = L;
  }, function (t, e, n) {
    "use strict";

    function r(t) {
      return t && t.__esModule ? t : {
        "default": t
      };
    }

    Object.defineProperty(e, "__esModule", {
      value: !0
    });

    var o = n(46),
        i = r(o),
        l = n(34),
        a = n(36),
        s = n(62),
        u = n(63),
        c = r(u),
        f = n(64),
        h = r(f),
        p = n(65),
        d = r(p),
        y = n(35),
        v = n(24),
        b = n(37),
        g = n(38),
        m = n(39),
        _ = r(m),
        O = n(66),
        w = r(O),
        x = n(15),
        k = r(x),
        E = n(67),
        N = r(E),
        j = n(68),
        A = r(j),
        q = n(69),
        T = r(q),
        P = n(70),
        S = r(P),
        C = n(71),
        L = r(C),
        M = n(13),
        R = r(M),
        I = n(72),
        B = r(I),
        D = n(73),
        U = r(D),
        F = n(74),
        H = r(F),
        K = n(26),
        z = r(K),
        Z = n(16),
        V = r(Z),
        W = n(41),
        G = r(W),
        Y = n(42),
        X = r(Y),
        $ = n(43),
        Q = r($),
        J = n(107),
        tt = r(J),
        et = n(108),
        nt = r(et);

    i["default"].register({
      "attributors/attribute/direction": a.DirectionAttribute,
      "attributors/class/align": l.AlignClass,
      "attributors/class/background": y.BackgroundClass,
      "attributors/class/color": v.ColorClass,
      "attributors/class/direction": a.DirectionClass,
      "attributors/class/font": b.FontClass,
      "attributors/class/size": g.SizeClass,
      "attributors/style/align": l.AlignStyle,
      "attributors/style/background": y.BackgroundStyle,
      "attributors/style/color": v.ColorStyle,
      "attributors/style/direction": a.DirectionStyle,
      "attributors/style/font": b.FontStyle,
      "attributors/style/size": g.SizeStyle
    }, !0), i["default"].register({
      "formats/align": l.AlignClass,
      "formats/direction": a.DirectionClass,
      "formats/indent": s.IndentClass,
      "formats/background": y.BackgroundStyle,
      "formats/color": v.ColorStyle,
      "formats/font": b.FontClass,
      "formats/size": g.SizeClass,
      "formats/blockquote": c["default"],
      "formats/code-block": R["default"],
      "formats/header": h["default"],
      "formats/list": d["default"],
      "formats/bold": _["default"],
      "formats/code": M.Code,
      "formats/italic": w["default"],
      "formats/link": k["default"],
      "formats/script": N["default"],
      "formats/strike": A["default"],
      "formats/underline": T["default"],
      "formats/image": S["default"],
      "formats/video": L["default"],
      "formats/list/item": p.ListItem,
      "modules/formula": B["default"],
      "modules/syntax": U["default"],
      "modules/toolbar": H["default"],
      "themes/bubble": tt["default"],
      "themes/snow": nt["default"],
      "ui/icons": z["default"],
      "ui/picker": V["default"],
      "ui/icon-picker": X["default"],
      "ui/color-picker": G["default"],
      "ui/tooltip": Q["default"]
    }, !0), e["default"] = i["default"];
  }, function (t, e, n) {
    "use strict";

    function r(t) {
      return t && t.__esModule ? t : {
        "default": t
      };
    }

    Object.defineProperty(e, "__esModule", {
      value: !0
    });

    var o = n(0),
        i = r(o),
        l = n(6),
        a = r(l),
        s = n(3),
        u = r(s),
        c = n(14),
        f = r(c),
        h = n(23),
        p = r(h),
        d = n(31),
        y = r(d),
        v = n(33),
        b = r(v),
        g = n(5),
        m = r(g),
        _ = n(59),
        O = r(_),
        w = n(8),
        x = r(w),
        k = n(60),
        E = r(k),
        N = n(61),
        j = r(N),
        A = n(25),
        q = r(A);

    a["default"].register({
      "blots/block": u["default"],
      "blots/block/embed": s.BlockEmbed,
      "blots/break": f["default"],
      "blots/container": p["default"],
      "blots/cursor": y["default"],
      "blots/embed": b["default"],
      "blots/inline": m["default"],
      "blots/scroll": O["default"],
      "blots/text": x["default"],
      "modules/clipboard": E["default"],
      "modules/history": j["default"],
      "modules/keyboard": q["default"]
    }), i["default"].register(u["default"], f["default"], y["default"], m["default"], O["default"], x["default"]), e["default"] = a["default"];
  }, function (t, e, n) {
    "use strict";

    Object.defineProperty(e, "__esModule", {
      value: !0
    });

    var r = function () {
      function t() {
        this.head = this.tail = null, this.length = 0;
      }

      return t.prototype.append = function () {
        for (var t = [], e = 0; e < arguments.length; e++) {
          t[e] = arguments[e];
        }

        this.insertBefore(t[0], null), t.length > 1 && this.append.apply(this, t.slice(1));
      }, t.prototype.contains = function (t) {
        for (var e, n = this.iterator(); e = n();) {
          if (e === t) return !0;
        }

        return !1;
      }, t.prototype.insertBefore = function (t, e) {
        t && (t.next = e, null != e ? (t.prev = e.prev, null != e.prev && (e.prev.next = t), e.prev = t, e === this.head && (this.head = t)) : null != this.tail ? (this.tail.next = t, t.prev = this.tail, this.tail = t) : (t.prev = null, this.head = this.tail = t), this.length += 1);
      }, t.prototype.offset = function (t) {
        for (var e = 0, n = this.head; null != n;) {
          if (n === t) return e;
          e += n.length(), n = n.next;
        }

        return -1;
      }, t.prototype.remove = function (t) {
        this.contains(t) && (null != t.prev && (t.prev.next = t.next), null != t.next && (t.next.prev = t.prev), t === this.head && (this.head = t.next), t === this.tail && (this.tail = t.prev), this.length -= 1);
      }, t.prototype.iterator = function (t) {
        return void 0 === t && (t = this.head), function () {
          var e = t;
          return null != t && (t = t.next), e;
        };
      }, t.prototype.find = function (t, e) {
        void 0 === e && (e = !1);

        for (var n, r = this.iterator(); n = r();) {
          var o = n.length();
          if (t < o || e && t === o && (null == n.next || 0 !== n.next.length())) return [n, t];
          t -= o;
        }

        return [null, 0];
      }, t.prototype.forEach = function (t) {
        for (var e, n = this.iterator(); e = n();) {
          t(e);
        }
      }, t.prototype.forEachAt = function (t, e, n) {
        if (!(e <= 0)) for (var r, o = this.find(t), i = o[0], l = o[1], a = t - l, s = this.iterator(i); (r = s()) && a < t + e;) {
          var u = r.length();
          t > a ? n(r, t - a, Math.min(e, a + u - t)) : n(r, 0, Math.min(u, t + e - a)), a += u;
        }
      }, t.prototype.map = function (t) {
        return this.reduce(function (e, n) {
          return e.push(t(n)), e;
        }, []);
      }, t.prototype.reduce = function (t, e) {
        for (var n, r = this.iterator(); n = r();) {
          e = t(e, n);
        }

        return e;
      }, t;
    }();

    e["default"] = r;
  }, function (t, e, n) {
    "use strict";

    var r = this && this.__extends || function () {
      var t = Object.setPrototypeOf || {
        __proto__: []
      } instanceof Array && function (t, e) {
        t.__proto__ = e;
      } || function (t, e) {
        for (var n in e) {
          e.hasOwnProperty(n) && (t[n] = e[n]);
        }
      };

      return function (e, n) {
        function r() {
          this.constructor = e;
        }

        t(e, n), e.prototype = null === n ? Object.create(n) : (r.prototype = n.prototype, new r());
      };
    }();

    Object.defineProperty(e, "__esModule", {
      value: !0
    });

    var o = n(17),
        i = n(1),
        l = {
      attributes: !0,
      characterData: !0,
      characterDataOldValue: !0,
      childList: !0,
      subtree: !0
    },
        a = function (t) {
      function e(e) {
        var n = t.call(this, e) || this;
        return n.scroll = n, n.observer = new MutationObserver(function (t) {
          n.update(t);
        }), n.observer.observe(n.domNode, l), n.attach(), n;
      }

      return r(e, t), e.prototype.detach = function () {
        t.prototype.detach.call(this), this.observer.disconnect();
      }, e.prototype.deleteAt = function (e, n) {
        this.update(), 0 === e && n === this.length() ? this.children.forEach(function (t) {
          t.remove();
        }) : t.prototype.deleteAt.call(this, e, n);
      }, e.prototype.formatAt = function (e, n, r, o) {
        this.update(), t.prototype.formatAt.call(this, e, n, r, o);
      }, e.prototype.insertAt = function (e, n, r) {
        this.update(), t.prototype.insertAt.call(this, e, n, r);
      }, e.prototype.optimize = function (e, n) {
        var r = this;
        void 0 === e && (e = []), void 0 === n && (n = {}), t.prototype.optimize.call(this, n);

        for (var l = [].slice.call(this.observer.takeRecords()); l.length > 0;) {
          e.push(l.pop());
        }

        for (var a = function a(t, e) {
          void 0 === e && (e = !0), null != t && t !== r && null != t.domNode.parentNode && (null == t.domNode[i.DATA_KEY].mutations && (t.domNode[i.DATA_KEY].mutations = []), e && a(t.parent));
        }, s = function s(t) {
          null != t.domNode[i.DATA_KEY] && null != t.domNode[i.DATA_KEY].mutations && (t instanceof o["default"] && t.children.forEach(s), t.optimize(n));
        }, u = e, c = 0; u.length > 0; c += 1) {
          if (c >= 100) throw new Error("[Parchment] Maximum optimize iterations reached");

          for (u.forEach(function (t) {
            var e = i.find(t.target, !0);
            null != e && (e.domNode === t.target && ("childList" === t.type ? (a(i.find(t.previousSibling, !1)), [].forEach.call(t.addedNodes, function (t) {
              var e = i.find(t, !1);
              a(e, !1), e instanceof o["default"] && e.children.forEach(function (t) {
                a(t, !1);
              });
            })) : "attributes" === t.type && a(e.prev)), a(e));
          }), this.children.forEach(s), u = [].slice.call(this.observer.takeRecords()), l = u.slice(); l.length > 0;) {
            e.push(l.pop());
          }
        }
      }, e.prototype.update = function (e, n) {
        var r = this;
        void 0 === n && (n = {}), e = e || this.observer.takeRecords(), e.map(function (t) {
          var e = i.find(t.target, !0);
          return null == e ? null : null == e.domNode[i.DATA_KEY].mutations ? (e.domNode[i.DATA_KEY].mutations = [t], e) : (e.domNode[i.DATA_KEY].mutations.push(t), null);
        }).forEach(function (t) {
          null != t && t !== r && null != t.domNode[i.DATA_KEY] && t.update(t.domNode[i.DATA_KEY].mutations || [], n);
        }), null != this.domNode[i.DATA_KEY].mutations && t.prototype.update.call(this, this.domNode[i.DATA_KEY].mutations, n), this.optimize(e, n);
      }, e.blotName = "scroll", e.defaultChild = "block", e.scope = i.Scope.BLOCK_BLOT, e.tagName = "DIV", e;
    }(o["default"]);

    e["default"] = a;
  }, function (t, e, n) {
    "use strict";

    function r(t, e) {
      if (Object.keys(t).length !== Object.keys(e).length) return !1;

      for (var n in t) {
        if (t[n] !== e[n]) return !1;
      }

      return !0;
    }

    var o = this && this.__extends || function () {
      var t = Object.setPrototypeOf || {
        __proto__: []
      } instanceof Array && function (t, e) {
        t.__proto__ = e;
      } || function (t, e) {
        for (var n in e) {
          e.hasOwnProperty(n) && (t[n] = e[n]);
        }
      };

      return function (e, n) {
        function r() {
          this.constructor = e;
        }

        t(e, n), e.prototype = null === n ? Object.create(n) : (r.prototype = n.prototype, new r());
      };
    }();

    Object.defineProperty(e, "__esModule", {
      value: !0
    });

    var i = n(18),
        l = n(1),
        a = function (t) {
      function e() {
        return null !== t && t.apply(this, arguments) || this;
      }

      return o(e, t), e.formats = function (n) {
        if (n.tagName !== e.tagName) return t.formats.call(this, n);
      }, e.prototype.format = function (n, r) {
        var o = this;
        n !== this.statics.blotName || r ? t.prototype.format.call(this, n, r) : (this.children.forEach(function (t) {
          t instanceof i["default"] || (t = t.wrap(e.blotName, !0)), o.attributes.copy(t);
        }), this.unwrap());
      }, e.prototype.formatAt = function (e, n, r, o) {
        if (null != this.formats()[r] || l.query(r, l.Scope.ATTRIBUTE)) {
          this.isolate(e, n).format(r, o);
        } else t.prototype.formatAt.call(this, e, n, r, o);
      }, e.prototype.optimize = function (n) {
        t.prototype.optimize.call(this, n);
        var o = this.formats();
        if (0 === Object.keys(o).length) return this.unwrap();
        var i = this.next;
        i instanceof e && i.prev === this && r(o, i.formats()) && (i.moveChildren(this), i.remove());
      }, e.blotName = "inline", e.scope = l.Scope.INLINE_BLOT, e.tagName = "SPAN", e;
    }(i["default"]);

    e["default"] = a;
  }, function (t, e, n) {
    "use strict";

    var r = this && this.__extends || function () {
      var t = Object.setPrototypeOf || {
        __proto__: []
      } instanceof Array && function (t, e) {
        t.__proto__ = e;
      } || function (t, e) {
        for (var n in e) {
          e.hasOwnProperty(n) && (t[n] = e[n]);
        }
      };

      return function (e, n) {
        function r() {
          this.constructor = e;
        }

        t(e, n), e.prototype = null === n ? Object.create(n) : (r.prototype = n.prototype, new r());
      };
    }();

    Object.defineProperty(e, "__esModule", {
      value: !0
    });

    var o = n(18),
        i = n(1),
        l = function (t) {
      function e() {
        return null !== t && t.apply(this, arguments) || this;
      }

      return r(e, t), e.formats = function (n) {
        var r = i.query(e.blotName).tagName;
        if (n.tagName !== r) return t.formats.call(this, n);
      }, e.prototype.format = function (n, r) {
        null != i.query(n, i.Scope.BLOCK) && (n !== this.statics.blotName || r ? t.prototype.format.call(this, n, r) : this.replaceWith(e.blotName));
      }, e.prototype.formatAt = function (e, n, r, o) {
        null != i.query(r, i.Scope.BLOCK) ? this.format(r, o) : t.prototype.formatAt.call(this, e, n, r, o);
      }, e.prototype.insertAt = function (e, n, r) {
        if (null == r || null != i.query(n, i.Scope.INLINE)) t.prototype.insertAt.call(this, e, n, r);else {
          var o = this.split(e),
              l = i.create(n, r);
          o.parent.insertBefore(l, o);
        }
      }, e.prototype.update = function (e, n) {
        navigator.userAgent.match(/Trident/) ? this.build() : t.prototype.update.call(this, e, n);
      }, e.blotName = "block", e.scope = i.Scope.BLOCK_BLOT, e.tagName = "P", e;
    }(o["default"]);

    e["default"] = l;
  }, function (t, e, n) {
    "use strict";

    var r = this && this.__extends || function () {
      var t = Object.setPrototypeOf || {
        __proto__: []
      } instanceof Array && function (t, e) {
        t.__proto__ = e;
      } || function (t, e) {
        for (var n in e) {
          e.hasOwnProperty(n) && (t[n] = e[n]);
        }
      };

      return function (e, n) {
        function r() {
          this.constructor = e;
        }

        t(e, n), e.prototype = null === n ? Object.create(n) : (r.prototype = n.prototype, new r());
      };
    }();

    Object.defineProperty(e, "__esModule", {
      value: !0
    });

    var o = n(19),
        i = function (t) {
      function e() {
        return null !== t && t.apply(this, arguments) || this;
      }

      return r(e, t), e.formats = function (t) {}, e.prototype.format = function (e, n) {
        t.prototype.formatAt.call(this, 0, this.length(), e, n);
      }, e.prototype.formatAt = function (e, n, r, o) {
        0 === e && n === this.length() ? this.format(r, o) : t.prototype.formatAt.call(this, e, n, r, o);
      }, e.prototype.formats = function () {
        return this.statics.formats(this.domNode);
      }, e;
    }(o["default"]);

    e["default"] = i;
  }, function (t, e, n) {
    "use strict";

    var r = this && this.__extends || function () {
      var t = Object.setPrototypeOf || {
        __proto__: []
      } instanceof Array && function (t, e) {
        t.__proto__ = e;
      } || function (t, e) {
        for (var n in e) {
          e.hasOwnProperty(n) && (t[n] = e[n]);
        }
      };

      return function (e, n) {
        function r() {
          this.constructor = e;
        }

        t(e, n), e.prototype = null === n ? Object.create(n) : (r.prototype = n.prototype, new r());
      };
    }();

    Object.defineProperty(e, "__esModule", {
      value: !0
    });

    var o = n(19),
        i = n(1),
        l = function (t) {
      function e(e) {
        var n = t.call(this, e) || this;
        return n.text = n.statics.value(n.domNode), n;
      }

      return r(e, t), e.create = function (t) {
        return document.createTextNode(t);
      }, e.value = function (t) {
        var e = t.data;
        return e.normalize && (e = e.normalize()), e;
      }, e.prototype.deleteAt = function (t, e) {
        this.domNode.data = this.text = this.text.slice(0, t) + this.text.slice(t + e);
      }, e.prototype.index = function (t, e) {
        return this.domNode === t ? e : -1;
      }, e.prototype.insertAt = function (e, n, r) {
        null == r ? (this.text = this.text.slice(0, e) + n + this.text.slice(e), this.domNode.data = this.text) : t.prototype.insertAt.call(this, e, n, r);
      }, e.prototype.length = function () {
        return this.text.length;
      }, e.prototype.optimize = function (n) {
        t.prototype.optimize.call(this, n), this.text = this.statics.value(this.domNode), 0 === this.text.length ? this.remove() : this.next instanceof e && this.next.prev === this && (this.insertAt(this.length(), this.next.value()), this.next.remove());
      }, e.prototype.position = function (t, e) {
        return void 0 === e && (e = !1), [this.domNode, t];
      }, e.prototype.split = function (t, e) {
        if (void 0 === e && (e = !1), !e) {
          if (0 === t) return this;
          if (t === this.length()) return this.next;
        }

        var n = i.create(this.domNode.splitText(t));
        return this.parent.insertBefore(n, this.next), this.text = this.statics.value(this.domNode), n;
      }, e.prototype.update = function (t, e) {
        var n = this;
        t.some(function (t) {
          return "characterData" === t.type && t.target === n.domNode;
        }) && (this.text = this.statics.value(this.domNode));
      }, e.prototype.value = function () {
        return this.text;
      }, e.blotName = "text", e.scope = i.Scope.INLINE_BLOT, e;
    }(o["default"]);

    e["default"] = l;
  }, function (t, e, n) {
    "use strict";

    var r = document.createElement("div");

    if (r.classList.toggle("test-class", !1), r.classList.contains("test-class")) {
      var o = DOMTokenList.prototype.toggle;

      DOMTokenList.prototype.toggle = function (t, e) {
        return arguments.length > 1 && !this.contains(t) == !e ? e : o.call(this, t);
      };
    }

    String.prototype.startsWith || (String.prototype.startsWith = function (t, e) {
      return e = e || 0, this.substr(e, t.length) === t;
    }), String.prototype.endsWith || (String.prototype.endsWith = function (t, e) {
      var n = this.toString();
      ("number" != typeof e || !isFinite(e) || Math.floor(e) !== e || e > n.length) && (e = n.length), e -= t.length;
      var r = n.indexOf(t, e);
      return -1 !== r && r === e;
    }), Array.prototype.find || Object.defineProperty(Array.prototype, "find", {
      value: function value(t) {
        if (null === this) throw new TypeError("Array.prototype.find called on null or undefined");
        if ("function" != typeof t) throw new TypeError("predicate must be a function");

        for (var e, n = Object(this), r = n.length >>> 0, o = arguments[1], i = 0; i < r; i++) {
          if (e = n[i], t.call(o, e, i, n)) return e;
        }
      }
    }), document.addEventListener("DOMContentLoaded", function () {
      document.execCommand("enableObjectResizing", !1, !1), document.execCommand("autoUrlDetect", !1, !1);
    });
  }, function (t, e) {
    function n(t, e, n) {
      if (t == e) return t ? [[v, t]] : [];
      (n < 0 || t.length < n) && (n = null);
      var o = l(t, e),
          i = t.substring(0, o);
      t = t.substring(o), e = e.substring(o), o = a(t, e);
      var s = t.substring(t.length - o);
      t = t.substring(0, t.length - o), e = e.substring(0, e.length - o);
      var c = r(t, e);
      return i && c.unshift([v, i]), s && c.push([v, s]), u(c), null != n && (c = f(c, n)), c = h(c);
    }

    function r(t, e) {
      var r;
      if (!t) return [[y, e]];
      if (!e) return [[d, t]];
      var i = t.length > e.length ? t : e,
          l = t.length > e.length ? e : t,
          a = i.indexOf(l);
      if (-1 != a) return r = [[y, i.substring(0, a)], [v, l], [y, i.substring(a + l.length)]], t.length > e.length && (r[0][0] = r[2][0] = d), r;
      if (1 == l.length) return [[d, t], [y, e]];
      var u = s(t, e);

      if (u) {
        var c = u[0],
            f = u[1],
            h = u[2],
            p = u[3],
            b = u[4],
            g = n(c, h),
            m = n(f, p);
        return g.concat([[v, b]], m);
      }

      return o(t, e);
    }

    function o(t, e) {
      for (var n = t.length, r = e.length, o = Math.ceil((n + r) / 2), l = o, a = 2 * o, s = new Array(a), u = new Array(a), c = 0; c < a; c++) {
        s[c] = -1, u[c] = -1;
      }

      s[l + 1] = 0, u[l + 1] = 0;

      for (var f = n - r, h = f % 2 != 0, p = 0, v = 0, b = 0, g = 0, m = 0; m < o; m++) {
        for (var _ = -m + p; _ <= m - v; _ += 2) {
          var O,
              w = l + _;
          O = _ == -m || _ != m && s[w - 1] < s[w + 1] ? s[w + 1] : s[w - 1] + 1;

          for (var x = O - _; O < n && x < r && t.charAt(O) == e.charAt(x);) {
            O++, x++;
          }

          if (s[w] = O, O > n) v += 2;else if (x > r) p += 2;else if (h) {
            var k = l + f - _;

            if (k >= 0 && k < a && -1 != u[k]) {
              var E = n - u[k];
              if (O >= E) return i(t, e, O, x);
            }
          }
        }

        for (var N = -m + b; N <= m - g; N += 2) {
          var E,
              k = l + N;
          E = N == -m || N != m && u[k - 1] < u[k + 1] ? u[k + 1] : u[k - 1] + 1;

          for (var j = E - N; E < n && j < r && t.charAt(n - E - 1) == e.charAt(r - j - 1);) {
            E++, j++;
          }

          if (u[k] = E, E > n) g += 2;else if (j > r) b += 2;else if (!h) {
            var w = l + f - N;

            if (w >= 0 && w < a && -1 != s[w]) {
              var O = s[w],
                  x = l + O - w;
              if (E = n - E, O >= E) return i(t, e, O, x);
            }
          }
        }
      }

      return [[d, t], [y, e]];
    }

    function i(t, e, r, o) {
      var i = t.substring(0, r),
          l = e.substring(0, o),
          a = t.substring(r),
          s = e.substring(o),
          u = n(i, l),
          c = n(a, s);
      return u.concat(c);
    }

    function l(t, e) {
      if (!t || !e || t.charAt(0) != e.charAt(0)) return 0;

      for (var n = 0, r = Math.min(t.length, e.length), o = r, i = 0; n < o;) {
        t.substring(i, o) == e.substring(i, o) ? (n = o, i = n) : r = o, o = Math.floor((r - n) / 2 + n);
      }

      return o;
    }

    function a(t, e) {
      if (!t || !e || t.charAt(t.length - 1) != e.charAt(e.length - 1)) return 0;

      for (var n = 0, r = Math.min(t.length, e.length), o = r, i = 0; n < o;) {
        t.substring(t.length - o, t.length - i) == e.substring(e.length - o, e.length - i) ? (n = o, i = n) : r = o, o = Math.floor((r - n) / 2 + n);
      }

      return o;
    }

    function s(t, e) {
      function n(t, e, n) {
        for (var r, o, i, s, u = t.substring(n, n + Math.floor(t.length / 4)), c = -1, f = ""; -1 != (c = e.indexOf(u, c + 1));) {
          var h = l(t.substring(n), e.substring(c)),
              p = a(t.substring(0, n), e.substring(0, c));
          f.length < p + h && (f = e.substring(c - p, c) + e.substring(c, c + h), r = t.substring(0, n - p), o = t.substring(n + h), i = e.substring(0, c - p), s = e.substring(c + h));
        }

        return 2 * f.length >= t.length ? [r, o, i, s, f] : null;
      }

      var r = t.length > e.length ? t : e,
          o = t.length > e.length ? e : t;
      if (r.length < 4 || 2 * o.length < r.length) return null;
      var i,
          s = n(r, o, Math.ceil(r.length / 4)),
          u = n(r, o, Math.ceil(r.length / 2));
      if (!s && !u) return null;
      i = u ? s && s[4].length > u[4].length ? s : u : s;
      var c, f, h, p;
      return t.length > e.length ? (c = i[0], f = i[1], h = i[2], p = i[3]) : (h = i[0], p = i[1], c = i[2], f = i[3]), [c, f, h, p, i[4]];
    }

    function u(t) {
      t.push([v, ""]);

      for (var e, n = 0, r = 0, o = 0, i = "", s = ""; n < t.length;) {
        switch (t[n][0]) {
          case y:
            o++, s += t[n][1], n++;
            break;

          case d:
            r++, i += t[n][1], n++;
            break;

          case v:
            r + o > 1 ? (0 !== r && 0 !== o && (e = l(s, i), 0 !== e && (n - r - o > 0 && t[n - r - o - 1][0] == v ? t[n - r - o - 1][1] += s.substring(0, e) : (t.splice(0, 0, [v, s.substring(0, e)]), n++), s = s.substring(e), i = i.substring(e)), 0 !== (e = a(s, i)) && (t[n][1] = s.substring(s.length - e) + t[n][1], s = s.substring(0, s.length - e), i = i.substring(0, i.length - e))), 0 === r ? t.splice(n - o, r + o, [y, s]) : 0 === o ? t.splice(n - r, r + o, [d, i]) : t.splice(n - r - o, r + o, [d, i], [y, s]), n = n - r - o + (r ? 1 : 0) + (o ? 1 : 0) + 1) : 0 !== n && t[n - 1][0] == v ? (t[n - 1][1] += t[n][1], t.splice(n, 1)) : n++, o = 0, r = 0, i = "", s = "";
        }
      }

      "" === t[t.length - 1][1] && t.pop();
      var c = !1;

      for (n = 1; n < t.length - 1;) {
        t[n - 1][0] == v && t[n + 1][0] == v && (t[n][1].substring(t[n][1].length - t[n - 1][1].length) == t[n - 1][1] ? (t[n][1] = t[n - 1][1] + t[n][1].substring(0, t[n][1].length - t[n - 1][1].length), t[n + 1][1] = t[n - 1][1] + t[n + 1][1], t.splice(n - 1, 1), c = !0) : t[n][1].substring(0, t[n + 1][1].length) == t[n + 1][1] && (t[n - 1][1] += t[n + 1][1], t[n][1] = t[n][1].substring(t[n + 1][1].length) + t[n + 1][1], t.splice(n + 1, 1), c = !0)), n++;
      }

      c && u(t);
    }

    function c(t, e) {
      if (0 === e) return [v, t];

      for (var n = 0, r = 0; r < t.length; r++) {
        var o = t[r];

        if (o[0] === d || o[0] === v) {
          var i = n + o[1].length;
          if (e === i) return [r + 1, t];

          if (e < i) {
            t = t.slice();
            var l = e - n,
                a = [o[0], o[1].slice(0, l)],
                s = [o[0], o[1].slice(l)];
            return t.splice(r, 1, a, s), [r + 1, t];
          }

          n = i;
        }
      }

      throw new Error("cursor_pos is out of bounds!");
    }

    function f(t, e) {
      var n = c(t, e),
          r = n[1],
          o = n[0],
          i = r[o],
          l = r[o + 1];
      if (null == i) return t;
      if (i[0] !== v) return t;
      if (null != l && i[1] + l[1] === l[1] + i[1]) return r.splice(o, 2, l, i), p(r, o, 2);

      if (null != l && 0 === l[1].indexOf(i[1])) {
        r.splice(o, 2, [l[0], i[1]], [0, i[1]]);
        var a = l[1].slice(i[1].length);
        return a.length > 0 && r.splice(o + 2, 0, [l[0], a]), p(r, o, 3);
      }

      return t;
    }

    function h(t) {
      for (var e = !1, n = function n(t) {
        return t.charCodeAt(0) >= 56320 && t.charCodeAt(0) <= 57343;
      }, r = 2; r < t.length; r += 1) {
        t[r - 2][0] === v && function (t) {
          return t.charCodeAt(t.length - 1) >= 55296 && t.charCodeAt(t.length - 1) <= 56319;
        }(t[r - 2][1]) && t[r - 1][0] === d && n(t[r - 1][1]) && t[r][0] === y && n(t[r][1]) && (e = !0, t[r - 1][1] = t[r - 2][1].slice(-1) + t[r - 1][1], t[r][1] = t[r - 2][1].slice(-1) + t[r][1], t[r - 2][1] = t[r - 2][1].slice(0, -1));
      }

      if (!e) return t;

      for (var o = [], r = 0; r < t.length; r += 1) {
        t[r][1].length > 0 && o.push(t[r]);
      }

      return o;
    }

    function p(t, e, n) {
      for (var r = e + n - 1; r >= 0 && r >= e - 1; r--) {
        if (r + 1 < t.length) {
          var o = t[r],
              i = t[r + 1];
          o[0] === i[1] && t.splice(r, 2, [o[0], o[1] + i[1]]);
        }
      }

      return t;
    }

    var d = -1,
        y = 1,
        v = 0,
        b = n;
    b.INSERT = y, b.DELETE = d, b.EQUAL = v, t.exports = b;
  }, function (t, e) {
    function n(t) {
      var e = [];

      for (var n in t) {
        e.push(n);
      }

      return e;
    }

    e = t.exports = "function" == typeof Object.keys ? Object.keys : n, e.shim = n;
  }, function (t, e) {
    function n(t) {
      return "[object Arguments]" == Object.prototype.toString.call(t);
    }

    function r(t) {
      return t && "object" == _typeof2(t) && "number" == typeof t.length && Object.prototype.hasOwnProperty.call(t, "callee") && !Object.prototype.propertyIsEnumerable.call(t, "callee") || !1;
    }

    var o = "[object Arguments]" == function () {
      return Object.prototype.toString.call(arguments);
    }();

    e = t.exports = o ? n : r, e.supported = n, e.unsupported = r;
  }, function (t, e, n) {
    "use strict";

    function r(t) {
      return t && t.__esModule ? t : {
        "default": t
      };
    }

    function o(t, e, n) {
      return e in t ? Object.defineProperty(t, e, {
        value: n,
        enumerable: !0,
        configurable: !0,
        writable: !0
      }) : t[e] = n, t;
    }

    function i(t, e) {
      if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function");
    }

    function l(t, e) {
      return Object.keys(e).reduce(function (n, r) {
        return null == t[r] ? n : (e[r] === t[r] ? n[r] = e[r] : Array.isArray(e[r]) ? e[r].indexOf(t[r]) < 0 && (n[r] = e[r].concat([t[r]])) : n[r] = [e[r], t[r]], n);
      }, {});
    }

    function a(t) {
      return t.reduce(function (t, e) {
        if (1 === e.insert) {
          var n = (0, N["default"])(e.attributes);
          return delete n.image, t.insert({
            image: e.attributes.image
          }, n);
        }

        if (null == e.attributes || !0 !== e.attributes.list && !0 !== e.attributes.bullet || (e = (0, N["default"])(e), e.attributes.list ? e.attributes.list = "ordered" : (e.attributes.list = "bullet", delete e.attributes.bullet)), "string" == typeof e.insert) {
          var r = e.insert.replace(/\r\n/g, "\n").replace(/\r/g, "\n");
          return t.insert(r, e.attributes);
        }

        return t.push(e);
      }, new h["default"]());
    }

    Object.defineProperty(e, "__esModule", {
      value: !0
    });

    var s = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function (t) {
      return _typeof2(t);
    } : function (t) {
      return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
    },
        u = function () {
      function t(t, e) {
        var n = [],
            r = !0,
            o = !1,
            i = void 0;

        try {
          for (var l, a = t[Symbol.iterator](); !(r = (l = a.next()).done) && (n.push(l.value), !e || n.length !== e); r = !0) {
            ;
          }
        } catch (t) {
          o = !0, i = t;
        } finally {
          try {
            !r && a["return"] && a["return"]();
          } finally {
            if (o) throw i;
          }
        }

        return n;
      }

      return function (e, n) {
        if (Array.isArray(e)) return e;
        if (Symbol.iterator in Object(e)) return t(e, n);
        throw new TypeError("Invalid attempt to destructure non-iterable instance");
      };
    }(),
        c = function () {
      function t(t, e) {
        for (var n = 0; n < e.length; n++) {
          var r = e[n];
          r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r);
        }
      }

      return function (e, n, r) {
        return n && t(e.prototype, n), r && t(e, r), e;
      };
    }(),
        f = n(4),
        h = r(f),
        p = n(20),
        d = r(p),
        y = n(0),
        v = r(y),
        b = n(13),
        g = r(b),
        m = n(31),
        _ = r(m),
        O = n(3),
        w = r(O),
        x = n(14),
        k = r(x),
        E = n(21),
        N = r(E),
        j = n(12),
        A = r(j),
        q = n(2),
        T = r(q),
        P = /^[ -~]*$/,
        S = function () {
      function t(e) {
        i(this, t), this.scroll = e, this.delta = this.getDelta();
      }

      return c(t, [{
        key: "applyDelta",
        value: function value(t) {
          var e = this,
              n = !1;
          this.scroll.update();
          var r = this.scroll.length();
          return this.scroll.batchStart(), t = a(t), t.reduce(function (t, o) {
            var i = o.retain || o["delete"] || o.insert.length || 1,
                l = o.attributes || {};

            if (null != o.insert) {
              if ("string" == typeof o.insert) {
                var a = o.insert;
                a.endsWith("\n") && n && (n = !1, a = a.slice(0, -1)), t >= r && !a.endsWith("\n") && (n = !0), e.scroll.insertAt(t, a);
                var c = e.scroll.line(t),
                    f = u(c, 2),
                    h = f[0],
                    p = f[1],
                    y = (0, T["default"])({}, (0, O.bubbleFormats)(h));

                if (h instanceof w["default"]) {
                  var b = h.descendant(v["default"].Leaf, p),
                      g = u(b, 1),
                      m = g[0];
                  y = (0, T["default"])(y, (0, O.bubbleFormats)(m));
                }

                l = d["default"].attributes.diff(y, l) || {};
              } else if ("object" === s(o.insert)) {
                var _ = Object.keys(o.insert)[0];
                if (null == _) return t;
                e.scroll.insertAt(t, _, o.insert[_]);
              }

              r += i;
            }

            return Object.keys(l).forEach(function (n) {
              e.scroll.formatAt(t, i, n, l[n]);
            }), t + i;
          }, 0), t.reduce(function (t, n) {
            return "number" == typeof n["delete"] ? (e.scroll.deleteAt(t, n["delete"]), t) : t + (n.retain || n.insert.length || 1);
          }, 0), this.scroll.batchEnd(), this.update(t);
        }
      }, {
        key: "deleteText",
        value: function value(t, e) {
          return this.scroll.deleteAt(t, e), this.update(new h["default"]().retain(t)["delete"](e));
        }
      }, {
        key: "formatLine",
        value: function value(t, e) {
          var n = this,
              r = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {};
          return this.scroll.update(), Object.keys(r).forEach(function (o) {
            if (null == n.scroll.whitelist || n.scroll.whitelist[o]) {
              var i = n.scroll.lines(t, Math.max(e, 1)),
                  l = e;
              i.forEach(function (e) {
                var i = e.length();

                if (e instanceof g["default"]) {
                  var a = t - e.offset(n.scroll),
                      s = e.newlineIndex(a + l) - a + 1;
                  e.formatAt(a, s, o, r[o]);
                } else e.format(o, r[o]);

                l -= i;
              });
            }
          }), this.scroll.optimize(), this.update(new h["default"]().retain(t).retain(e, (0, N["default"])(r)));
        }
      }, {
        key: "formatText",
        value: function value(t, e) {
          var n = this,
              r = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {};
          return Object.keys(r).forEach(function (o) {
            n.scroll.formatAt(t, e, o, r[o]);
          }), this.update(new h["default"]().retain(t).retain(e, (0, N["default"])(r)));
        }
      }, {
        key: "getContents",
        value: function value(t, e) {
          return this.delta.slice(t, t + e);
        }
      }, {
        key: "getDelta",
        value: function value() {
          return this.scroll.lines().reduce(function (t, e) {
            return t.concat(e.delta());
          }, new h["default"]());
        }
      }, {
        key: "getFormat",
        value: function value(t) {
          var e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0,
              n = [],
              r = [];
          0 === e ? this.scroll.path(t).forEach(function (t) {
            var e = u(t, 1),
                o = e[0];
            o instanceof w["default"] ? n.push(o) : o instanceof v["default"].Leaf && r.push(o);
          }) : (n = this.scroll.lines(t, e), r = this.scroll.descendants(v["default"].Leaf, t, e));
          var o = [n, r].map(function (t) {
            if (0 === t.length) return {};

            for (var e = (0, O.bubbleFormats)(t.shift()); Object.keys(e).length > 0;) {
              var n = t.shift();
              if (null == n) return e;
              e = l((0, O.bubbleFormats)(n), e);
            }

            return e;
          });
          return T["default"].apply(T["default"], o);
        }
      }, {
        key: "getText",
        value: function value(t, e) {
          return this.getContents(t, e).filter(function (t) {
            return "string" == typeof t.insert;
          }).map(function (t) {
            return t.insert;
          }).join("");
        }
      }, {
        key: "insertEmbed",
        value: function value(t, e, n) {
          return this.scroll.insertAt(t, e, n), this.update(new h["default"]().retain(t).insert(o({}, e, n)));
        }
      }, {
        key: "insertText",
        value: function value(t, e) {
          var n = this,
              r = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {};
          return e = e.replace(/\r\n/g, "\n").replace(/\r/g, "\n"), this.scroll.insertAt(t, e), Object.keys(r).forEach(function (o) {
            n.scroll.formatAt(t, e.length, o, r[o]);
          }), this.update(new h["default"]().retain(t).insert(e, (0, N["default"])(r)));
        }
      }, {
        key: "isBlank",
        value: function value() {
          if (0 == this.scroll.children.length) return !0;
          if (this.scroll.children.length > 1) return !1;
          var t = this.scroll.children.head;
          return t.statics.blotName === w["default"].blotName && !(t.children.length > 1) && t.children.head instanceof k["default"];
        }
      }, {
        key: "removeFormat",
        value: function value(t, e) {
          var n = this.getText(t, e),
              r = this.scroll.line(t + e),
              o = u(r, 2),
              i = o[0],
              l = o[1],
              a = 0,
              s = new h["default"]();
          null != i && (a = i instanceof g["default"] ? i.newlineIndex(l) - l + 1 : i.length() - l, s = i.delta().slice(l, l + a - 1).insert("\n"));
          var c = this.getContents(t, e + a),
              f = c.diff(new h["default"]().insert(n).concat(s)),
              p = new h["default"]().retain(t).concat(f);
          return this.applyDelta(p);
        }
      }, {
        key: "update",
        value: function value(t) {
          var e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : [],
              n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : void 0,
              r = this.delta;

          if (1 === e.length && "characterData" === e[0].type && e[0].target.data.match(P) && v["default"].find(e[0].target)) {
            var o = v["default"].find(e[0].target),
                i = (0, O.bubbleFormats)(o),
                l = o.offset(this.scroll),
                a = e[0].oldValue.replace(_["default"].CONTENTS, ""),
                s = new h["default"]().insert(a),
                u = new h["default"]().insert(o.value());
            t = new h["default"]().retain(l).concat(s.diff(u, n)).reduce(function (t, e) {
              return e.insert ? t.insert(e.insert, i) : t.push(e);
            }, new h["default"]()), this.delta = r.compose(t);
          } else this.delta = this.getDelta(), t && (0, A["default"])(r.compose(t), this.delta) || (t = r.diff(this.delta, n));

          return t;
        }
      }]), t;
    }();

    e["default"] = S;
  }, function (t, e) {
    "use strict";

    function n() {}

    function r(t, e, n) {
      this.fn = t, this.context = e, this.once = n || !1;
    }

    function o() {
      this._events = new n(), this._eventsCount = 0;
    }

    var i = Object.prototype.hasOwnProperty,
        l = "~";
    Object.create && (n.prototype = Object.create(null), new n().__proto__ || (l = !1)), o.prototype.eventNames = function () {
      var t,
          e,
          n = [];
      if (0 === this._eventsCount) return n;

      for (e in t = this._events) {
        i.call(t, e) && n.push(l ? e.slice(1) : e);
      }

      return Object.getOwnPropertySymbols ? n.concat(Object.getOwnPropertySymbols(t)) : n;
    }, o.prototype.listeners = function (t, e) {
      var n = l ? l + t : t,
          r = this._events[n];
      if (e) return !!r;
      if (!r) return [];
      if (r.fn) return [r.fn];

      for (var o = 0, i = r.length, a = new Array(i); o < i; o++) {
        a[o] = r[o].fn;
      }

      return a;
    }, o.prototype.emit = function (t, e, n, r, o, i) {
      var a = l ? l + t : t;
      if (!this._events[a]) return !1;
      var s,
          u,
          c = this._events[a],
          f = arguments.length;

      if (c.fn) {
        switch (c.once && this.removeListener(t, c.fn, void 0, !0), f) {
          case 1:
            return c.fn.call(c.context), !0;

          case 2:
            return c.fn.call(c.context, e), !0;

          case 3:
            return c.fn.call(c.context, e, n), !0;

          case 4:
            return c.fn.call(c.context, e, n, r), !0;

          case 5:
            return c.fn.call(c.context, e, n, r, o), !0;

          case 6:
            return c.fn.call(c.context, e, n, r, o, i), !0;
        }

        for (u = 1, s = new Array(f - 1); u < f; u++) {
          s[u - 1] = arguments[u];
        }

        c.fn.apply(c.context, s);
      } else {
        var h,
            p = c.length;

        for (u = 0; u < p; u++) {
          switch (c[u].once && this.removeListener(t, c[u].fn, void 0, !0), f) {
            case 1:
              c[u].fn.call(c[u].context);
              break;

            case 2:
              c[u].fn.call(c[u].context, e);
              break;

            case 3:
              c[u].fn.call(c[u].context, e, n);
              break;

            case 4:
              c[u].fn.call(c[u].context, e, n, r);
              break;

            default:
              if (!s) for (h = 1, s = new Array(f - 1); h < f; h++) {
                s[h - 1] = arguments[h];
              }
              c[u].fn.apply(c[u].context, s);
          }
        }
      }

      return !0;
    }, o.prototype.on = function (t, e, n) {
      var o = new r(e, n || this),
          i = l ? l + t : t;
      return this._events[i] ? this._events[i].fn ? this._events[i] = [this._events[i], o] : this._events[i].push(o) : (this._events[i] = o, this._eventsCount++), this;
    }, o.prototype.once = function (t, e, n) {
      var o = new r(e, n || this, !0),
          i = l ? l + t : t;
      return this._events[i] ? this._events[i].fn ? this._events[i] = [this._events[i], o] : this._events[i].push(o) : (this._events[i] = o, this._eventsCount++), this;
    }, o.prototype.removeListener = function (t, e, r, o) {
      var i = l ? l + t : t;
      if (!this._events[i]) return this;
      if (!e) return 0 == --this._eventsCount ? this._events = new n() : delete this._events[i], this;
      var a = this._events[i];
      if (a.fn) a.fn !== e || o && !a.once || r && a.context !== r || (0 == --this._eventsCount ? this._events = new n() : delete this._events[i]);else {
        for (var s = 0, u = [], c = a.length; s < c; s++) {
          (a[s].fn !== e || o && !a[s].once || r && a[s].context !== r) && u.push(a[s]);
        }

        u.length ? this._events[i] = 1 === u.length ? u[0] : u : 0 == --this._eventsCount ? this._events = new n() : delete this._events[i];
      }
      return this;
    }, o.prototype.removeAllListeners = function (t) {
      var e;
      return t ? (e = l ? l + t : t, this._events[e] && (0 == --this._eventsCount ? this._events = new n() : delete this._events[e])) : (this._events = new n(), this._eventsCount = 0), this;
    }, o.prototype.off = o.prototype.removeListener, o.prototype.addListener = o.prototype.on, o.prototype.setMaxListeners = function () {
      return this;
    }, o.prefixed = l, o.EventEmitter = o, void 0 !== t && (t.exports = o);
  }, function (t, e, n) {
    "use strict";

    function r(t) {
      return t && t.__esModule ? t : {
        "default": t
      };
    }

    function o(t, e) {
      if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function");
    }

    function i(t, e) {
      if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
      return !e || "object" != _typeof2(e) && "function" != typeof e ? t : e;
    }

    function l(t, e) {
      if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + _typeof2(e));
      t.prototype = Object.create(e && e.prototype, {
        constructor: {
          value: t,
          enumerable: !1,
          writable: !0,
          configurable: !0
        }
      }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e);
    }

    function a(t) {
      return t instanceof v["default"] || t instanceof y.BlockEmbed;
    }

    Object.defineProperty(e, "__esModule", {
      value: !0
    });

    var s = function () {
      function t(t, e) {
        var n = [],
            r = !0,
            o = !1,
            i = void 0;

        try {
          for (var l, a = t[Symbol.iterator](); !(r = (l = a.next()).done) && (n.push(l.value), !e || n.length !== e); r = !0) {
            ;
          }
        } catch (t) {
          o = !0, i = t;
        } finally {
          try {
            !r && a["return"] && a["return"]();
          } finally {
            if (o) throw i;
          }
        }

        return n;
      }

      return function (e, n) {
        if (Array.isArray(e)) return e;
        if (Symbol.iterator in Object(e)) return t(e, n);
        throw new TypeError("Invalid attempt to destructure non-iterable instance");
      };
    }(),
        u = function () {
      function t(t, e) {
        for (var n = 0; n < e.length; n++) {
          var r = e[n];
          r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r);
        }
      }

      return function (e, n, r) {
        return n && t(e.prototype, n), r && t(e, r), e;
      };
    }(),
        c = function t(e, n, r) {
      null === e && (e = Function.prototype);
      var o = Object.getOwnPropertyDescriptor(e, n);

      if (void 0 === o) {
        var i = Object.getPrototypeOf(e);
        return null === i ? void 0 : t(i, n, r);
      }

      if ("value" in o) return o.value;
      var l = o.get;
      if (void 0 !== l) return l.call(r);
    },
        f = n(0),
        h = r(f),
        p = n(9),
        d = r(p),
        y = n(3),
        v = r(y),
        b = n(14),
        g = r(b),
        m = n(13),
        _ = r(m),
        O = n(23),
        w = r(O),
        x = function (t) {
      function e(t, n) {
        o(this, e);
        var r = i(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this, t));
        return r.emitter = n.emitter, Array.isArray(n.whitelist) && (r.whitelist = n.whitelist.reduce(function (t, e) {
          return t[e] = !0, t;
        }, {})), r.domNode.addEventListener("DOMNodeInserted", function () {}), r.optimize(), r.enable(), r;
      }

      return l(e, t), u(e, [{
        key: "batchStart",
        value: function value() {
          this.batch = !0;
        }
      }, {
        key: "batchEnd",
        value: function value() {
          this.batch = !1, this.optimize();
        }
      }, {
        key: "deleteAt",
        value: function value(t, n) {
          var r = this.line(t),
              o = s(r, 2),
              i = o[0],
              l = o[1],
              a = this.line(t + n),
              u = s(a, 1),
              f = u[0];

          if (c(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "deleteAt", this).call(this, t, n), null != f && i !== f && l > 0) {
            if (i instanceof y.BlockEmbed || f instanceof y.BlockEmbed) return void this.optimize();

            if (i instanceof _["default"]) {
              var h = i.newlineIndex(i.length(), !0);
              if (h > -1 && (i = i.split(h + 1)) === f) return void this.optimize();
            } else if (f instanceof _["default"]) {
              var p = f.newlineIndex(0);
              p > -1 && f.split(p + 1);
            }

            var d = f.children.head instanceof g["default"] ? null : f.children.head;
            i.moveChildren(f, d), i.remove();
          }

          this.optimize();
        }
      }, {
        key: "enable",
        value: function value() {
          var t = !(arguments.length > 0 && void 0 !== arguments[0]) || arguments[0];
          this.domNode.setAttribute("contenteditable", t);
        }
      }, {
        key: "formatAt",
        value: function value(t, n, r, o) {
          (null == this.whitelist || this.whitelist[r]) && (c(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "formatAt", this).call(this, t, n, r, o), this.optimize());
        }
      }, {
        key: "insertAt",
        value: function value(t, n, r) {
          if (null == r || null == this.whitelist || this.whitelist[n]) {
            if (t >= this.length()) {
              if (null == r || null == h["default"].query(n, h["default"].Scope.BLOCK)) {
                var o = h["default"].create(this.statics.defaultChild);
                this.appendChild(o), null == r && n.endsWith("\n") && (n = n.slice(0, -1)), o.insertAt(0, n, r);
              } else {
                var i = h["default"].create(n, r);
                this.appendChild(i);
              }
            } else c(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "insertAt", this).call(this, t, n, r);
            this.optimize();
          }
        }
      }, {
        key: "insertBefore",
        value: function value(t, n) {
          if (t.statics.scope === h["default"].Scope.INLINE_BLOT) {
            var r = h["default"].create(this.statics.defaultChild);
            r.appendChild(t), t = r;
          }

          c(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "insertBefore", this).call(this, t, n);
        }
      }, {
        key: "leaf",
        value: function value(t) {
          return this.path(t).pop() || [null, -1];
        }
      }, {
        key: "line",
        value: function value(t) {
          return t === this.length() ? this.line(t - 1) : this.descendant(a, t);
        }
      }, {
        key: "lines",
        value: function value() {
          var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0,
              e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : Number.MAX_VALUE;
          return function t(e, n, r) {
            var o = [],
                i = r;
            return e.children.forEachAt(n, r, function (e, n, r) {
              a(e) ? o.push(e) : e instanceof h["default"].Container && (o = o.concat(t(e, n, i))), i -= r;
            }), o;
          }(this, t, e);
        }
      }, {
        key: "optimize",
        value: function value() {
          var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : [],
              n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
          !0 !== this.batch && (c(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "optimize", this).call(this, t, n), t.length > 0 && this.emitter.emit(d["default"].events.SCROLL_OPTIMIZE, t, n));
        }
      }, {
        key: "path",
        value: function value(t) {
          return c(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "path", this).call(this, t).slice(1);
        }
      }, {
        key: "update",
        value: function value(t) {
          if (!0 !== this.batch) {
            var n = d["default"].sources.USER;
            "string" == typeof t && (n = t), Array.isArray(t) || (t = this.observer.takeRecords()), t.length > 0 && this.emitter.emit(d["default"].events.SCROLL_BEFORE_UPDATE, n, t), c(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "update", this).call(this, t.concat([])), t.length > 0 && this.emitter.emit(d["default"].events.SCROLL_UPDATE, n, t);
          }
        }
      }]), e;
    }(h["default"].Scroll);

    x.blotName = "scroll", x.className = "ql-editor", x.tagName = "DIV", x.defaultChild = "block", x.allowedChildren = [v["default"], y.BlockEmbed, w["default"]], e["default"] = x;
  }, function (t, e, n) {
    "use strict";

    function r(t) {
      return t && t.__esModule ? t : {
        "default": t
      };
    }

    function o(t, e, n) {
      return e in t ? Object.defineProperty(t, e, {
        value: n,
        enumerable: !0,
        configurable: !0,
        writable: !0
      }) : t[e] = n, t;
    }

    function i(t, e) {
      if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function");
    }

    function l(t, e) {
      if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
      return !e || "object" != _typeof2(e) && "function" != typeof e ? t : e;
    }

    function a(t, e) {
      if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + _typeof2(e));
      t.prototype = Object.create(e && e.prototype, {
        constructor: {
          value: t,
          enumerable: !1,
          writable: !0,
          configurable: !0
        }
      }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e);
    }

    function s(t, e, n) {
      return "object" === (void 0 === e ? "undefined" : x(e)) ? Object.keys(e).reduce(function (t, n) {
        return s(t, n, e[n]);
      }, t) : t.reduce(function (t, r) {
        return r.attributes && r.attributes[e] ? t.push(r) : t.insert(r.insert, (0, j["default"])({}, o({}, e, n), r.attributes));
      }, new q["default"]());
    }

    function u(t) {
      if (t.nodeType !== Node.ELEMENT_NODE) return {};
      return t["__ql-computed-style"] || (t["__ql-computed-style"] = window.getComputedStyle(t));
    }

    function c(t, e) {
      for (var n = "", r = t.ops.length - 1; r >= 0 && n.length < e.length; --r) {
        var o = t.ops[r];
        if ("string" != typeof o.insert) break;
        n = o.insert + n;
      }

      return n.slice(-1 * e.length) === e;
    }

    function f(t) {
      return 0 !== t.childNodes.length && ["block", "list-item"].indexOf(u(t).display) > -1;
    }

    function h(t, e, n) {
      return t.nodeType === t.TEXT_NODE ? n.reduce(function (e, n) {
        return n(t, e);
      }, new q["default"]()) : t.nodeType === t.ELEMENT_NODE ? [].reduce.call(t.childNodes || [], function (r, o) {
        var i = h(o, e, n);
        return o.nodeType === t.ELEMENT_NODE && (i = e.reduce(function (t, e) {
          return e(o, t);
        }, i), i = (o[W] || []).reduce(function (t, e) {
          return e(o, t);
        }, i)), r.concat(i);
      }, new q["default"]()) : new q["default"]();
    }

    function p(t, e, n) {
      return s(n, t, !0);
    }

    function d(t, e) {
      var n = P["default"].Attributor.Attribute.keys(t),
          r = P["default"].Attributor.Class.keys(t),
          o = P["default"].Attributor.Style.keys(t),
          i = {};
      return n.concat(r).concat(o).forEach(function (e) {
        var n = P["default"].query(e, P["default"].Scope.ATTRIBUTE);
        null != n && (i[n.attrName] = n.value(t), i[n.attrName]) || (n = Y[e], null == n || n.attrName !== e && n.keyName !== e || (i[n.attrName] = n.value(t) || void 0), null == (n = X[e]) || n.attrName !== e && n.keyName !== e || (n = X[e], i[n.attrName] = n.value(t) || void 0));
      }), Object.keys(i).length > 0 && (e = s(e, i)), e;
    }

    function y(t, e) {
      var n = P["default"].query(t);
      if (null == n) return e;

      if (n.prototype instanceof P["default"].Embed) {
        var r = {},
            o = n.value(t);
        null != o && (r[n.blotName] = o, e = new q["default"]().insert(r, n.formats(t)));
      } else "function" == typeof n.formats && (e = s(e, n.blotName, n.formats(t)));

      return e;
    }

    function v(t, e) {
      return c(e, "\n") || e.insert("\n"), e;
    }

    function b() {
      return new q["default"]();
    }

    function g(t, e) {
      var n = P["default"].query(t);
      if (null == n || "list-item" !== n.blotName || !c(e, "\n")) return e;

      for (var r = -1, o = t.parentNode; !o.classList.contains("ql-clipboard");) {
        "list" === (P["default"].query(o) || {}).blotName && (r += 1), o = o.parentNode;
      }

      return r <= 0 ? e : e.compose(new q["default"]().retain(e.length() - 1).retain(1, {
        indent: r
      }));
    }

    function m(t, e) {
      return c(e, "\n") || (f(t) || e.length() > 0 && t.nextSibling && f(t.nextSibling)) && e.insert("\n"), e;
    }

    function _(t, e) {
      if (f(t) && null != t.nextElementSibling && !c(e, "\n\n")) {
        var n = t.offsetHeight + parseFloat(u(t).marginTop) + parseFloat(u(t).marginBottom);
        t.nextElementSibling.offsetTop > t.offsetTop + 1.5 * n && e.insert("\n");
      }

      return e;
    }

    function O(t, e) {
      var n = {},
          r = t.style || {};
      return r.fontStyle && "italic" === u(t).fontStyle && (n.italic = !0), r.fontWeight && (u(t).fontWeight.startsWith("bold") || parseInt(u(t).fontWeight) >= 700) && (n.bold = !0), Object.keys(n).length > 0 && (e = s(e, n)), parseFloat(r.textIndent || 0) > 0 && (e = new q["default"]().insert("\t").concat(e)), e;
    }

    function w(t, e) {
      var n = t.data;
      if ("O:P" === t.parentNode.tagName) return e.insert(n.trim());
      if (0 === n.trim().length && t.parentNode.classList.contains("ql-clipboard")) return e;

      if (!u(t.parentNode).whiteSpace.startsWith("pre")) {
        var r = function r(t, e) {
          return e = e.replace(/[^\u00a0]/g, ""), e.length < 1 && t ? " " : e;
        };

        n = n.replace(/\r\n/g, " ").replace(/\n/g, " "), n = n.replace(/\s\s+/g, r.bind(r, !0)), (null == t.previousSibling && f(t.parentNode) || null != t.previousSibling && f(t.previousSibling)) && (n = n.replace(/^\s+/, r.bind(r, !1))), (null == t.nextSibling && f(t.parentNode) || null != t.nextSibling && f(t.nextSibling)) && (n = n.replace(/\s+$/, r.bind(r, !1)));
      }

      return e.insert(n);
    }

    Object.defineProperty(e, "__esModule", {
      value: !0
    }), e.matchText = e.matchSpacing = e.matchNewline = e.matchBlot = e.matchAttributor = e["default"] = void 0;

    var x = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function (t) {
      return _typeof2(t);
    } : function (t) {
      return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
    },
        k = function () {
      function t(t, e) {
        var n = [],
            r = !0,
            o = !1,
            i = void 0;

        try {
          for (var l, a = t[Symbol.iterator](); !(r = (l = a.next()).done) && (n.push(l.value), !e || n.length !== e); r = !0) {
            ;
          }
        } catch (t) {
          o = !0, i = t;
        } finally {
          try {
            !r && a["return"] && a["return"]();
          } finally {
            if (o) throw i;
          }
        }

        return n;
      }

      return function (e, n) {
        if (Array.isArray(e)) return e;
        if (Symbol.iterator in Object(e)) return t(e, n);
        throw new TypeError("Invalid attempt to destructure non-iterable instance");
      };
    }(),
        E = function () {
      function t(t, e) {
        for (var n = 0; n < e.length; n++) {
          var r = e[n];
          r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r);
        }
      }

      return function (e, n, r) {
        return n && t(e.prototype, n), r && t(e, r), e;
      };
    }(),
        N = n(2),
        j = r(N),
        A = n(4),
        q = r(A),
        T = n(0),
        P = r(T),
        S = n(6),
        C = r(S),
        L = n(10),
        M = r(L),
        R = n(7),
        I = r(R),
        B = n(34),
        D = n(35),
        U = n(13),
        F = r(U),
        H = n(24),
        K = n(36),
        z = n(37),
        Z = n(38),
        V = (0, M["default"])("quill:clipboard"),
        W = "__ql-matcher",
        G = [[Node.TEXT_NODE, w], [Node.TEXT_NODE, m], ["br", v], [Node.ELEMENT_NODE, m], [Node.ELEMENT_NODE, y], [Node.ELEMENT_NODE, _], [Node.ELEMENT_NODE, d], [Node.ELEMENT_NODE, O], ["li", g], ["b", p.bind(p, "bold")], ["i", p.bind(p, "italic")], ["style", b]],
        Y = [B.AlignAttribute, K.DirectionAttribute].reduce(function (t, e) {
      return t[e.keyName] = e, t;
    }, {}),
        X = [B.AlignStyle, D.BackgroundStyle, H.ColorStyle, K.DirectionStyle, z.FontStyle, Z.SizeStyle].reduce(function (t, e) {
      return t[e.keyName] = e, t;
    }, {}),
        $ = function (t) {
      function e(t, n) {
        i(this, e);
        var r = l(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this, t, n));
        return r.quill.root.addEventListener("paste", r.onPaste.bind(r)), r.container = r.quill.addContainer("ql-clipboard"), r.container.setAttribute("contenteditable", !0), r.container.setAttribute("tabindex", -1), r.matchers = [], G.concat(r.options.matchers).forEach(function (t) {
          var e = k(t, 2),
              o = e[0],
              i = e[1];
          (n.matchVisual || i !== _) && r.addMatcher(o, i);
        }), r;
      }

      return a(e, t), E(e, [{
        key: "addMatcher",
        value: function value(t, e) {
          this.matchers.push([t, e]);
        }
      }, {
        key: "convert",
        value: function value(t) {
          if ("string" == typeof t) return this.container.innerHTML = t.replace(/\>\r?\n +\</g, "><"), this.convert();
          var e = this.quill.getFormat(this.quill.selection.savedRange.index);

          if (e[F["default"].blotName]) {
            var n = this.container.innerText;
            return this.container.innerHTML = "", new q["default"]().insert(n, o({}, F["default"].blotName, e[F["default"].blotName]));
          }

          var r = this.prepareMatching(),
              i = k(r, 2),
              l = i[0],
              a = i[1],
              s = h(this.container, l, a);
          return c(s, "\n") && null == s.ops[s.ops.length - 1].attributes && (s = s.compose(new q["default"]().retain(s.length() - 1)["delete"](1))), V.log("convert", this.container.innerHTML, s), this.container.innerHTML = "", s;
        }
      }, {
        key: "dangerouslyPasteHTML",
        value: function value(t, e) {
          var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : C["default"].sources.API;
          if ("string" == typeof t) this.quill.setContents(this.convert(t), e), this.quill.setSelection(0, C["default"].sources.SILENT);else {
            var r = this.convert(e);
            this.quill.updateContents(new q["default"]().retain(t).concat(r), n), this.quill.setSelection(t + r.length(), C["default"].sources.SILENT);
          }
        }
      }, {
        key: "onPaste",
        value: function value(t) {
          var e = this;

          if (!t.defaultPrevented && this.quill.isEnabled()) {
            var n = this.quill.getSelection(),
                r = new q["default"]().retain(n.index),
                o = this.quill.scrollingContainer.scrollTop;
            this.container.focus(), this.quill.selection.update(C["default"].sources.SILENT), setTimeout(function () {
              r = r.concat(e.convert())["delete"](n.length), e.quill.updateContents(r, C["default"].sources.USER), e.quill.setSelection(r.length() - n.length, C["default"].sources.SILENT), e.quill.scrollingContainer.scrollTop = o, e.quill.focus();
            }, 1);
          }
        }
      }, {
        key: "prepareMatching",
        value: function value() {
          var t = this,
              e = [],
              n = [];
          return this.matchers.forEach(function (r) {
            var o = k(r, 2),
                i = o[0],
                l = o[1];

            switch (i) {
              case Node.TEXT_NODE:
                n.push(l);
                break;

              case Node.ELEMENT_NODE:
                e.push(l);
                break;

              default:
                [].forEach.call(t.container.querySelectorAll(i), function (t) {
                  t[W] = t[W] || [], t[W].push(l);
                });
            }
          }), [e, n];
        }
      }]), e;
    }(I["default"]);

    $.DEFAULTS = {
      matchers: [],
      matchVisual: !0
    }, e["default"] = $, e.matchAttributor = d, e.matchBlot = y, e.matchNewline = m, e.matchSpacing = _, e.matchText = w;
  }, function (t, e, n) {
    "use strict";

    function r(t) {
      return t && t.__esModule ? t : {
        "default": t
      };
    }

    function o(t, e) {
      if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function");
    }

    function i(t, e) {
      if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
      return !e || "object" != _typeof2(e) && "function" != typeof e ? t : e;
    }

    function l(t, e) {
      if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + _typeof2(e));
      t.prototype = Object.create(e && e.prototype, {
        constructor: {
          value: t,
          enumerable: !1,
          writable: !0,
          configurable: !0
        }
      }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e);
    }

    function a(t) {
      var e = t.ops[t.ops.length - 1];
      return null != e && (null != e.insert ? "string" == typeof e.insert && e.insert.endsWith("\n") : null != e.attributes && Object.keys(e.attributes).some(function (t) {
        return null != f["default"].query(t, f["default"].Scope.BLOCK);
      }));
    }

    function s(t) {
      var e = t.reduce(function (t, e) {
        return t += e["delete"] || 0;
      }, 0),
          n = t.length() - e;
      return a(t) && (n -= 1), n;
    }

    Object.defineProperty(e, "__esModule", {
      value: !0
    }), e.getLastChangeIndex = e["default"] = void 0;

    var u = function () {
      function t(t, e) {
        for (var n = 0; n < e.length; n++) {
          var r = e[n];
          r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r);
        }
      }

      return function (e, n, r) {
        return n && t(e.prototype, n), r && t(e, r), e;
      };
    }(),
        c = n(0),
        f = r(c),
        h = n(6),
        p = r(h),
        d = n(7),
        y = r(d),
        v = function (t) {
      function e(t, n) {
        o(this, e);
        var r = i(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this, t, n));
        return r.lastRecorded = 0, r.ignoreChange = !1, r.clear(), r.quill.on(p["default"].events.EDITOR_CHANGE, function (t, e, n, o) {
          t !== p["default"].events.TEXT_CHANGE || r.ignoreChange || (r.options.userOnly && o !== p["default"].sources.USER ? r.transform(e) : r.record(e, n));
        }), r.quill.keyboard.addBinding({
          key: "Z",
          shortKey: !0
        }, r.undo.bind(r)), r.quill.keyboard.addBinding({
          key: "Z",
          shortKey: !0,
          shiftKey: !0
        }, r.redo.bind(r)), /Win/i.test(navigator.platform) && r.quill.keyboard.addBinding({
          key: "Y",
          shortKey: !0
        }, r.redo.bind(r)), r;
      }

      return l(e, t), u(e, [{
        key: "change",
        value: function value(t, e) {
          if (0 !== this.stack[t].length) {
            var n = this.stack[t].pop();
            this.stack[e].push(n), this.lastRecorded = 0, this.ignoreChange = !0, this.quill.updateContents(n[t], p["default"].sources.USER), this.ignoreChange = !1;
            var r = s(n[t]);
            this.quill.setSelection(r);
          }
        }
      }, {
        key: "clear",
        value: function value() {
          this.stack = {
            undo: [],
            redo: []
          };
        }
      }, {
        key: "cutoff",
        value: function value() {
          this.lastRecorded = 0;
        }
      }, {
        key: "record",
        value: function value(t, e) {
          if (0 !== t.ops.length) {
            this.stack.redo = [];
            var n = this.quill.getContents().diff(e),
                r = Date.now();

            if (this.lastRecorded + this.options.delay > r && this.stack.undo.length > 0) {
              var o = this.stack.undo.pop();
              n = n.compose(o.undo), t = o.redo.compose(t);
            } else this.lastRecorded = r;

            this.stack.undo.push({
              redo: t,
              undo: n
            }), this.stack.undo.length > this.options.maxStack && this.stack.undo.shift();
          }
        }
      }, {
        key: "redo",
        value: function value() {
          this.change("redo", "undo");
        }
      }, {
        key: "transform",
        value: function value(t) {
          this.stack.undo.forEach(function (e) {
            e.undo = t.transform(e.undo, !0), e.redo = t.transform(e.redo, !0);
          }), this.stack.redo.forEach(function (e) {
            e.undo = t.transform(e.undo, !0), e.redo = t.transform(e.redo, !0);
          });
        }
      }, {
        key: "undo",
        value: function value() {
          this.change("undo", "redo");
        }
      }]), e;
    }(y["default"]);

    v.DEFAULTS = {
      delay: 1e3,
      maxStack: 100,
      userOnly: !1
    }, e["default"] = v, e.getLastChangeIndex = s;
  }, function (t, e, n) {
    "use strict";

    function r(t, e) {
      if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function");
    }

    function o(t, e) {
      if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
      return !e || "object" != _typeof2(e) && "function" != typeof e ? t : e;
    }

    function i(t, e) {
      if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + _typeof2(e));
      t.prototype = Object.create(e && e.prototype, {
        constructor: {
          value: t,
          enumerable: !1,
          writable: !0,
          configurable: !0
        }
      }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e);
    }

    Object.defineProperty(e, "__esModule", {
      value: !0
    }), e.IndentClass = void 0;

    var l = function () {
      function t(t, e) {
        for (var n = 0; n < e.length; n++) {
          var r = e[n];
          r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r);
        }
      }

      return function (e, n, r) {
        return n && t(e.prototype, n), r && t(e, r), e;
      };
    }(),
        a = function t(e, n, r) {
      null === e && (e = Function.prototype);
      var o = Object.getOwnPropertyDescriptor(e, n);

      if (void 0 === o) {
        var i = Object.getPrototypeOf(e);
        return null === i ? void 0 : t(i, n, r);
      }

      if ("value" in o) return o.value;
      var l = o.get;
      if (void 0 !== l) return l.call(r);
    },
        s = n(0),
        u = function (t) {
      return t && t.__esModule ? t : {
        "default": t
      };
    }(s),
        c = function (t) {
      function e() {
        return r(this, e), o(this, (e.__proto__ || Object.getPrototypeOf(e)).apply(this, arguments));
      }

      return i(e, t), l(e, [{
        key: "add",
        value: function value(t, n) {
          if ("+1" === n || "-1" === n) {
            var r = this.value(t) || 0;
            n = "+1" === n ? r + 1 : r - 1;
          }

          return 0 === n ? (this.remove(t), !0) : a(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "add", this).call(this, t, n);
        }
      }, {
        key: "canAdd",
        value: function value(t, n) {
          return a(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "canAdd", this).call(this, t, n) || a(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "canAdd", this).call(this, t, parseInt(n));
        }
      }, {
        key: "value",
        value: function value(t) {
          return parseInt(a(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "value", this).call(this, t)) || void 0;
        }
      }]), e;
    }(u["default"].Attributor.Class),
        f = new c("indent", "ql-indent", {
      scope: u["default"].Scope.BLOCK,
      whitelist: [1, 2, 3, 4, 5, 6, 7, 8]
    });

    e.IndentClass = f;
  }, function (t, e, n) {
    "use strict";

    function r(t, e) {
      if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function");
    }

    function o(t, e) {
      if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
      return !e || "object" != _typeof2(e) && "function" != typeof e ? t : e;
    }

    function i(t, e) {
      if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + _typeof2(e));
      t.prototype = Object.create(e && e.prototype, {
        constructor: {
          value: t,
          enumerable: !1,
          writable: !0,
          configurable: !0
        }
      }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e);
    }

    Object.defineProperty(e, "__esModule", {
      value: !0
    });

    var l = n(3),
        a = function (t) {
      return t && t.__esModule ? t : {
        "default": t
      };
    }(l),
        s = function (t) {
      function e() {
        return r(this, e), o(this, (e.__proto__ || Object.getPrototypeOf(e)).apply(this, arguments));
      }

      return i(e, t), e;
    }(a["default"]);

    s.blotName = "blockquote", s.tagName = "blockquote", e["default"] = s;
  }, function (t, e, n) {
    "use strict";

    function r(t, e) {
      if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function");
    }

    function o(t, e) {
      if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
      return !e || "object" != _typeof2(e) && "function" != typeof e ? t : e;
    }

    function i(t, e) {
      if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + _typeof2(e));
      t.prototype = Object.create(e && e.prototype, {
        constructor: {
          value: t,
          enumerable: !1,
          writable: !0,
          configurable: !0
        }
      }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e);
    }

    Object.defineProperty(e, "__esModule", {
      value: !0
    });

    var l = function () {
      function t(t, e) {
        for (var n = 0; n < e.length; n++) {
          var r = e[n];
          r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r);
        }
      }

      return function (e, n, r) {
        return n && t(e.prototype, n), r && t(e, r), e;
      };
    }(),
        a = n(3),
        s = function (t) {
      return t && t.__esModule ? t : {
        "default": t
      };
    }(a),
        u = function (t) {
      function e() {
        return r(this, e), o(this, (e.__proto__ || Object.getPrototypeOf(e)).apply(this, arguments));
      }

      return i(e, t), l(e, null, [{
        key: "formats",
        value: function value(t) {
          return this.tagName.indexOf(t.tagName) + 1;
        }
      }]), e;
    }(s["default"]);

    u.blotName = "header", u.tagName = ["H1", "H2", "H3", "H4", "H5", "H6"], e["default"] = u;
  }, function (t, e, n) {
    "use strict";

    function r(t) {
      return t && t.__esModule ? t : {
        "default": t
      };
    }

    function o(t, e, n) {
      return e in t ? Object.defineProperty(t, e, {
        value: n,
        enumerable: !0,
        configurable: !0,
        writable: !0
      }) : t[e] = n, t;
    }

    function i(t, e) {
      if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function");
    }

    function l(t, e) {
      if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
      return !e || "object" != _typeof2(e) && "function" != typeof e ? t : e;
    }

    function a(t, e) {
      if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + _typeof2(e));
      t.prototype = Object.create(e && e.prototype, {
        constructor: {
          value: t,
          enumerable: !1,
          writable: !0,
          configurable: !0
        }
      }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e);
    }

    Object.defineProperty(e, "__esModule", {
      value: !0
    }), e["default"] = e.ListItem = void 0;

    var s = function () {
      function t(t, e) {
        for (var n = 0; n < e.length; n++) {
          var r = e[n];
          r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r);
        }
      }

      return function (e, n, r) {
        return n && t(e.prototype, n), r && t(e, r), e;
      };
    }(),
        u = function t(e, n, r) {
      null === e && (e = Function.prototype);
      var o = Object.getOwnPropertyDescriptor(e, n);

      if (void 0 === o) {
        var i = Object.getPrototypeOf(e);
        return null === i ? void 0 : t(i, n, r);
      }

      if ("value" in o) return o.value;
      var l = o.get;
      if (void 0 !== l) return l.call(r);
    },
        c = n(0),
        f = r(c),
        h = n(3),
        p = r(h),
        d = n(23),
        y = r(d),
        v = function (t) {
      function e() {
        return i(this, e), l(this, (e.__proto__ || Object.getPrototypeOf(e)).apply(this, arguments));
      }

      return a(e, t), s(e, [{
        key: "format",
        value: function value(t, n) {
          t !== b.blotName || n ? u(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "format", this).call(this, t, n) : this.replaceWith(f["default"].create(this.statics.scope));
        }
      }, {
        key: "remove",
        value: function value() {
          null == this.prev && null == this.next ? this.parent.remove() : u(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "remove", this).call(this);
        }
      }, {
        key: "replaceWith",
        value: function value(t, n) {
          return this.parent.isolate(this.offset(this.parent), this.length()), t === this.parent.statics.blotName ? (this.parent.replaceWith(t, n), this) : (this.parent.unwrap(), u(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "replaceWith", this).call(this, t, n));
        }
      }], [{
        key: "formats",
        value: function value(t) {
          return t.tagName === this.tagName ? void 0 : u(e.__proto__ || Object.getPrototypeOf(e), "formats", this).call(this, t);
        }
      }]), e;
    }(p["default"]);

    v.blotName = "list-item", v.tagName = "LI";

    var b = function (t) {
      function e(t) {
        i(this, e);

        var n = l(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this, t)),
            r = function r(e) {
          if (e.target.parentNode === t) {
            var r = n.statics.formats(t),
                o = f["default"].find(e.target);
            "checked" === r ? o.format("list", "unchecked") : "unchecked" === r && o.format("list", "checked");
          }
        };

        return t.addEventListener("touchstart", r), t.addEventListener("mousedown", r), n;
      }

      return a(e, t), s(e, null, [{
        key: "create",
        value: function value(t) {
          var n = "ordered" === t ? "OL" : "UL",
              r = u(e.__proto__ || Object.getPrototypeOf(e), "create", this).call(this, n);
          return "checked" !== t && "unchecked" !== t || r.setAttribute("data-checked", "checked" === t), r;
        }
      }, {
        key: "formats",
        value: function value(t) {
          return "OL" === t.tagName ? "ordered" : "UL" === t.tagName ? t.hasAttribute("data-checked") ? "true" === t.getAttribute("data-checked") ? "checked" : "unchecked" : "bullet" : void 0;
        }
      }]), s(e, [{
        key: "format",
        value: function value(t, e) {
          this.children.length > 0 && this.children.tail.format(t, e);
        }
      }, {
        key: "formats",
        value: function value() {
          return o({}, this.statics.blotName, this.statics.formats(this.domNode));
        }
      }, {
        key: "insertBefore",
        value: function value(t, n) {
          if (t instanceof v) u(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "insertBefore", this).call(this, t, n);else {
            var r = null == n ? this.length() : n.offset(this),
                o = this.split(r);
            o.parent.insertBefore(t, o);
          }
        }
      }, {
        key: "optimize",
        value: function value(t) {
          u(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "optimize", this).call(this, t);
          var n = this.next;
          null != n && n.prev === this && n.statics.blotName === this.statics.blotName && n.domNode.tagName === this.domNode.tagName && n.domNode.getAttribute("data-checked") === this.domNode.getAttribute("data-checked") && (n.moveChildren(this), n.remove());
        }
      }, {
        key: "replace",
        value: function value(t) {
          if (t.statics.blotName !== this.statics.blotName) {
            var n = f["default"].create(this.statics.defaultChild);
            t.moveChildren(n), this.appendChild(n);
          }

          u(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "replace", this).call(this, t);
        }
      }]), e;
    }(y["default"]);

    b.blotName = "list", b.scope = f["default"].Scope.BLOCK_BLOT, b.tagName = ["OL", "UL"], b.defaultChild = "list-item", b.allowedChildren = [v], e.ListItem = v, e["default"] = b;
  }, function (t, e, n) {
    "use strict";

    function r(t, e) {
      if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function");
    }

    function o(t, e) {
      if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
      return !e || "object" != _typeof2(e) && "function" != typeof e ? t : e;
    }

    function i(t, e) {
      if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + _typeof2(e));
      t.prototype = Object.create(e && e.prototype, {
        constructor: {
          value: t,
          enumerable: !1,
          writable: !0,
          configurable: !0
        }
      }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e);
    }

    Object.defineProperty(e, "__esModule", {
      value: !0
    });

    var l = n(39),
        a = function (t) {
      return t && t.__esModule ? t : {
        "default": t
      };
    }(l),
        s = function (t) {
      function e() {
        return r(this, e), o(this, (e.__proto__ || Object.getPrototypeOf(e)).apply(this, arguments));
      }

      return i(e, t), e;
    }(a["default"]);

    s.blotName = "italic", s.tagName = ["EM", "I"], e["default"] = s;
  }, function (t, e, n) {
    "use strict";

    function r(t, e) {
      if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function");
    }

    function o(t, e) {
      if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
      return !e || "object" != _typeof2(e) && "function" != typeof e ? t : e;
    }

    function i(t, e) {
      if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + _typeof2(e));
      t.prototype = Object.create(e && e.prototype, {
        constructor: {
          value: t,
          enumerable: !1,
          writable: !0,
          configurable: !0
        }
      }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e);
    }

    Object.defineProperty(e, "__esModule", {
      value: !0
    });

    var l = function () {
      function t(t, e) {
        for (var n = 0; n < e.length; n++) {
          var r = e[n];
          r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r);
        }
      }

      return function (e, n, r) {
        return n && t(e.prototype, n), r && t(e, r), e;
      };
    }(),
        a = function t(e, n, r) {
      null === e && (e = Function.prototype);
      var o = Object.getOwnPropertyDescriptor(e, n);

      if (void 0 === o) {
        var i = Object.getPrototypeOf(e);
        return null === i ? void 0 : t(i, n, r);
      }

      if ("value" in o) return o.value;
      var l = o.get;
      if (void 0 !== l) return l.call(r);
    },
        s = n(5),
        u = function (t) {
      return t && t.__esModule ? t : {
        "default": t
      };
    }(s),
        c = function (t) {
      function e() {
        return r(this, e), o(this, (e.__proto__ || Object.getPrototypeOf(e)).apply(this, arguments));
      }

      return i(e, t), l(e, null, [{
        key: "create",
        value: function value(t) {
          return "super" === t ? document.createElement("sup") : "sub" === t ? document.createElement("sub") : a(e.__proto__ || Object.getPrototypeOf(e), "create", this).call(this, t);
        }
      }, {
        key: "formats",
        value: function value(t) {
          return "SUB" === t.tagName ? "sub" : "SUP" === t.tagName ? "super" : void 0;
        }
      }]), e;
    }(u["default"]);

    c.blotName = "script", c.tagName = ["SUB", "SUP"], e["default"] = c;
  }, function (t, e, n) {
    "use strict";

    function r(t, e) {
      if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function");
    }

    function o(t, e) {
      if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
      return !e || "object" != _typeof2(e) && "function" != typeof e ? t : e;
    }

    function i(t, e) {
      if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + _typeof2(e));
      t.prototype = Object.create(e && e.prototype, {
        constructor: {
          value: t,
          enumerable: !1,
          writable: !0,
          configurable: !0
        }
      }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e);
    }

    Object.defineProperty(e, "__esModule", {
      value: !0
    });

    var l = n(5),
        a = function (t) {
      return t && t.__esModule ? t : {
        "default": t
      };
    }(l),
        s = function (t) {
      function e() {
        return r(this, e), o(this, (e.__proto__ || Object.getPrototypeOf(e)).apply(this, arguments));
      }

      return i(e, t), e;
    }(a["default"]);

    s.blotName = "strike", s.tagName = "S", e["default"] = s;
  }, function (t, e, n) {
    "use strict";

    function r(t, e) {
      if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function");
    }

    function o(t, e) {
      if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
      return !e || "object" != _typeof2(e) && "function" != typeof e ? t : e;
    }

    function i(t, e) {
      if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + _typeof2(e));
      t.prototype = Object.create(e && e.prototype, {
        constructor: {
          value: t,
          enumerable: !1,
          writable: !0,
          configurable: !0
        }
      }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e);
    }

    Object.defineProperty(e, "__esModule", {
      value: !0
    });

    var l = n(5),
        a = function (t) {
      return t && t.__esModule ? t : {
        "default": t
      };
    }(l),
        s = function (t) {
      function e() {
        return r(this, e), o(this, (e.__proto__ || Object.getPrototypeOf(e)).apply(this, arguments));
      }

      return i(e, t), e;
    }(a["default"]);

    s.blotName = "underline", s.tagName = "U", e["default"] = s;
  }, function (t, e, n) {
    "use strict";

    function r(t, e) {
      if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function");
    }

    function o(t, e) {
      if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
      return !e || "object" != _typeof2(e) && "function" != typeof e ? t : e;
    }

    function i(t, e) {
      if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + _typeof2(e));
      t.prototype = Object.create(e && e.prototype, {
        constructor: {
          value: t,
          enumerable: !1,
          writable: !0,
          configurable: !0
        }
      }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e);
    }

    Object.defineProperty(e, "__esModule", {
      value: !0
    });

    var l = function () {
      function t(t, e) {
        for (var n = 0; n < e.length; n++) {
          var r = e[n];
          r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r);
        }
      }

      return function (e, n, r) {
        return n && t(e.prototype, n), r && t(e, r), e;
      };
    }(),
        a = function t(e, n, r) {
      null === e && (e = Function.prototype);
      var o = Object.getOwnPropertyDescriptor(e, n);

      if (void 0 === o) {
        var i = Object.getPrototypeOf(e);
        return null === i ? void 0 : t(i, n, r);
      }

      if ("value" in o) return o.value;
      var l = o.get;
      if (void 0 !== l) return l.call(r);
    },
        s = n(0),
        u = function (t) {
      return t && t.__esModule ? t : {
        "default": t
      };
    }(s),
        c = n(15),
        f = ["alt", "height", "width"],
        h = function (t) {
      function e() {
        return r(this, e), o(this, (e.__proto__ || Object.getPrototypeOf(e)).apply(this, arguments));
      }

      return i(e, t), l(e, [{
        key: "format",
        value: function value(t, n) {
          f.indexOf(t) > -1 ? n ? this.domNode.setAttribute(t, n) : this.domNode.removeAttribute(t) : a(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "format", this).call(this, t, n);
        }
      }], [{
        key: "create",
        value: function value(t) {
          var n = a(e.__proto__ || Object.getPrototypeOf(e), "create", this).call(this, t);
          return "string" == typeof t && n.setAttribute("src", this.sanitize(t)), n;
        }
      }, {
        key: "formats",
        value: function value(t) {
          return f.reduce(function (e, n) {
            return t.hasAttribute(n) && (e[n] = t.getAttribute(n)), e;
          }, {});
        }
      }, {
        key: "match",
        value: function value(t) {
          return /\.(jpe?g|gif|png)$/.test(t) || /^data:image\/.+;base64/.test(t);
        }
      }, {
        key: "sanitize",
        value: function value(t) {
          return (0, c.sanitize)(t, ["http", "https", "data"]) ? t : "//:0";
        }
      }, {
        key: "value",
        value: function value(t) {
          return t.getAttribute("src");
        }
      }]), e;
    }(u["default"].Embed);

    h.blotName = "image", h.tagName = "IMG", e["default"] = h;
  }, function (t, e, n) {
    "use strict";

    function r(t, e) {
      if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function");
    }

    function o(t, e) {
      if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
      return !e || "object" != _typeof2(e) && "function" != typeof e ? t : e;
    }

    function i(t, e) {
      if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + _typeof2(e));
      t.prototype = Object.create(e && e.prototype, {
        constructor: {
          value: t,
          enumerable: !1,
          writable: !0,
          configurable: !0
        }
      }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e);
    }

    Object.defineProperty(e, "__esModule", {
      value: !0
    });

    var l = function () {
      function t(t, e) {
        for (var n = 0; n < e.length; n++) {
          var r = e[n];
          r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r);
        }
      }

      return function (e, n, r) {
        return n && t(e.prototype, n), r && t(e, r), e;
      };
    }(),
        a = function t(e, n, r) {
      null === e && (e = Function.prototype);
      var o = Object.getOwnPropertyDescriptor(e, n);

      if (void 0 === o) {
        var i = Object.getPrototypeOf(e);
        return null === i ? void 0 : t(i, n, r);
      }

      if ("value" in o) return o.value;
      var l = o.get;
      if (void 0 !== l) return l.call(r);
    },
        s = n(3),
        u = n(15),
        c = function (t) {
      return t && t.__esModule ? t : {
        "default": t
      };
    }(u),
        f = ["height", "width"],
        h = function (t) {
      function e() {
        return r(this, e), o(this, (e.__proto__ || Object.getPrototypeOf(e)).apply(this, arguments));
      }

      return i(e, t), l(e, [{
        key: "format",
        value: function value(t, n) {
          f.indexOf(t) > -1 ? n ? this.domNode.setAttribute(t, n) : this.domNode.removeAttribute(t) : a(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "format", this).call(this, t, n);
        }
      }], [{
        key: "create",
        value: function value(t) {
          var n = a(e.__proto__ || Object.getPrototypeOf(e), "create", this).call(this, t);
          return n.setAttribute("frameborder", "0"), n.setAttribute("allowfullscreen", !0), n.setAttribute("src", this.sanitize(t)), n;
        }
      }, {
        key: "formats",
        value: function value(t) {
          return f.reduce(function (e, n) {
            return t.hasAttribute(n) && (e[n] = t.getAttribute(n)), e;
          }, {});
        }
      }, {
        key: "sanitize",
        value: function value(t) {
          return c["default"].sanitize(t);
        }
      }, {
        key: "value",
        value: function value(t) {
          return t.getAttribute("src");
        }
      }]), e;
    }(s.BlockEmbed);

    h.blotName = "video", h.className = "ql-video", h.tagName = "IFRAME", e["default"] = h;
  }, function (t, e, n) {
    "use strict";

    function r(t) {
      return t && t.__esModule ? t : {
        "default": t
      };
    }

    function o(t, e) {
      if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function");
    }

    function i(t, e) {
      if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
      return !e || "object" != _typeof2(e) && "function" != typeof e ? t : e;
    }

    function l(t, e) {
      if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + _typeof2(e));
      t.prototype = Object.create(e && e.prototype, {
        constructor: {
          value: t,
          enumerable: !1,
          writable: !0,
          configurable: !0
        }
      }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e);
    }

    Object.defineProperty(e, "__esModule", {
      value: !0
    }), e["default"] = e.FormulaBlot = void 0;

    var a = function () {
      function t(t, e) {
        for (var n = 0; n < e.length; n++) {
          var r = e[n];
          r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r);
        }
      }

      return function (e, n, r) {
        return n && t(e.prototype, n), r && t(e, r), e;
      };
    }(),
        s = function t(e, n, r) {
      null === e && (e = Function.prototype);
      var o = Object.getOwnPropertyDescriptor(e, n);

      if (void 0 === o) {
        var i = Object.getPrototypeOf(e);
        return null === i ? void 0 : t(i, n, r);
      }

      if ("value" in o) return o.value;
      var l = o.get;
      if (void 0 !== l) return l.call(r);
    },
        u = n(33),
        c = r(u),
        f = n(6),
        h = r(f),
        p = n(7),
        d = r(p),
        y = function (t) {
      function e() {
        return o(this, e), i(this, (e.__proto__ || Object.getPrototypeOf(e)).apply(this, arguments));
      }

      return l(e, t), a(e, null, [{
        key: "create",
        value: function value(t) {
          var n = s(e.__proto__ || Object.getPrototypeOf(e), "create", this).call(this, t);
          return "string" == typeof t && (window.katex.render(t, n, {
            throwOnError: !1,
            errorColor: "#f00"
          }), n.setAttribute("data-value", t)), n;
        }
      }, {
        key: "value",
        value: function value(t) {
          return t.getAttribute("data-value");
        }
      }]), e;
    }(c["default"]);

    y.blotName = "formula", y.className = "ql-formula", y.tagName = "SPAN";

    var v = function (t) {
      function e() {
        o(this, e);
        var t = i(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this));
        if (null == window.katex) throw new Error("Formula module requires KaTeX.");
        return t;
      }

      return l(e, t), a(e, null, [{
        key: "register",
        value: function value() {
          h["default"].register(y, !0);
        }
      }]), e;
    }(d["default"]);

    e.FormulaBlot = y, e["default"] = v;
  }, function (t, e, n) {
    "use strict";

    function r(t) {
      return t && t.__esModule ? t : {
        "default": t
      };
    }

    function o(t, e) {
      if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function");
    }

    function i(t, e) {
      if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
      return !e || "object" != _typeof2(e) && "function" != typeof e ? t : e;
    }

    function l(t, e) {
      if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + _typeof2(e));
      t.prototype = Object.create(e && e.prototype, {
        constructor: {
          value: t,
          enumerable: !1,
          writable: !0,
          configurable: !0
        }
      }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e);
    }

    Object.defineProperty(e, "__esModule", {
      value: !0
    }), e["default"] = e.CodeToken = e.CodeBlock = void 0;

    var a = function () {
      function t(t, e) {
        for (var n = 0; n < e.length; n++) {
          var r = e[n];
          r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r);
        }
      }

      return function (e, n, r) {
        return n && t(e.prototype, n), r && t(e, r), e;
      };
    }(),
        s = function t(e, n, r) {
      null === e && (e = Function.prototype);
      var o = Object.getOwnPropertyDescriptor(e, n);

      if (void 0 === o) {
        var i = Object.getPrototypeOf(e);
        return null === i ? void 0 : t(i, n, r);
      }

      if ("value" in o) return o.value;
      var l = o.get;
      if (void 0 !== l) return l.call(r);
    },
        u = n(0),
        c = r(u),
        f = n(6),
        h = r(f),
        p = n(7),
        d = r(p),
        y = n(13),
        v = r(y),
        b = function (t) {
      function e() {
        return o(this, e), i(this, (e.__proto__ || Object.getPrototypeOf(e)).apply(this, arguments));
      }

      return l(e, t), a(e, [{
        key: "replaceWith",
        value: function value(t) {
          this.domNode.textContent = this.domNode.textContent, this.attach(), s(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "replaceWith", this).call(this, t);
        }
      }, {
        key: "highlight",
        value: function value(t) {
          var e = this.domNode.textContent;
          this.cachedText !== e && ((e.trim().length > 0 || null == this.cachedText) && (this.domNode.innerHTML = t(e), this.domNode.normalize(), this.attach()), this.cachedText = e);
        }
      }]), e;
    }(v["default"]);

    b.className = "ql-syntax";

    var g = new c["default"].Attributor.Class("token", "hljs", {
      scope: c["default"].Scope.INLINE
    }),
        m = function (t) {
      function e(t, n) {
        o(this, e);
        var r = i(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this, t, n));
        if ("function" != typeof r.options.highlight) throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");
        var l = null;
        return r.quill.on(h["default"].events.SCROLL_OPTIMIZE, function () {
          clearTimeout(l), l = setTimeout(function () {
            r.highlight(), l = null;
          }, r.options.interval);
        }), r.highlight(), r;
      }

      return l(e, t), a(e, null, [{
        key: "register",
        value: function value() {
          h["default"].register(g, !0), h["default"].register(b, !0);
        }
      }]), a(e, [{
        key: "highlight",
        value: function value() {
          var t = this;

          if (!this.quill.selection.composing) {
            this.quill.update(h["default"].sources.USER);
            var e = this.quill.getSelection();
            this.quill.scroll.descendants(b).forEach(function (e) {
              e.highlight(t.options.highlight);
            }), this.quill.update(h["default"].sources.SILENT), null != e && this.quill.setSelection(e, h["default"].sources.SILENT);
          }
        }
      }]), e;
    }(d["default"]);

    m.DEFAULTS = {
      highlight: function () {
        return null == window.hljs ? null : function (t) {
          return window.hljs.highlightAuto(t).value;
        };
      }(),
      interval: 1e3
    }, e.CodeBlock = b, e.CodeToken = g, e["default"] = m;
  }, function (t, e, n) {
    "use strict";

    function r(t) {
      return t && t.__esModule ? t : {
        "default": t
      };
    }

    function o(t, e, n) {
      return e in t ? Object.defineProperty(t, e, {
        value: n,
        enumerable: !0,
        configurable: !0,
        writable: !0
      }) : t[e] = n, t;
    }

    function i(t, e) {
      if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function");
    }

    function l(t, e) {
      if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
      return !e || "object" != _typeof2(e) && "function" != typeof e ? t : e;
    }

    function a(t, e) {
      if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + _typeof2(e));
      t.prototype = Object.create(e && e.prototype, {
        constructor: {
          value: t,
          enumerable: !1,
          writable: !0,
          configurable: !0
        }
      }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e);
    }

    function s(t, e, n) {
      var r = document.createElement("button");
      r.setAttribute("type", "button"), r.classList.add("ql-" + e), null != n && (r.value = n), t.appendChild(r);
    }

    function u(t, e) {
      Array.isArray(e[0]) || (e = [e]), e.forEach(function (e) {
        var n = document.createElement("span");
        n.classList.add("ql-formats"), e.forEach(function (t) {
          if ("string" == typeof t) s(n, t);else {
            var e = Object.keys(t)[0],
                r = t[e];
            Array.isArray(r) ? c(n, e, r) : s(n, e, r);
          }
        }), t.appendChild(n);
      });
    }

    function c(t, e, n) {
      var r = document.createElement("select");
      r.classList.add("ql-" + e), n.forEach(function (t) {
        var e = document.createElement("option");
        !1 !== t ? e.setAttribute("value", t) : e.setAttribute("selected", "selected"), r.appendChild(e);
      }), t.appendChild(r);
    }

    Object.defineProperty(e, "__esModule", {
      value: !0
    }), e.addControls = e["default"] = void 0;

    var f = function () {
      function t(t, e) {
        var n = [],
            r = !0,
            o = !1,
            i = void 0;

        try {
          for (var l, a = t[Symbol.iterator](); !(r = (l = a.next()).done) && (n.push(l.value), !e || n.length !== e); r = !0) {
            ;
          }
        } catch (t) {
          o = !0, i = t;
        } finally {
          try {
            !r && a["return"] && a["return"]();
          } finally {
            if (o) throw i;
          }
        }

        return n;
      }

      return function (e, n) {
        if (Array.isArray(e)) return e;
        if (Symbol.iterator in Object(e)) return t(e, n);
        throw new TypeError("Invalid attempt to destructure non-iterable instance");
      };
    }(),
        h = function () {
      function t(t, e) {
        for (var n = 0; n < e.length; n++) {
          var r = e[n];
          r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r);
        }
      }

      return function (e, n, r) {
        return n && t(e.prototype, n), r && t(e, r), e;
      };
    }(),
        p = n(4),
        d = r(p),
        y = n(0),
        v = r(y),
        b = n(6),
        g = r(b),
        m = n(10),
        _ = r(m),
        O = n(7),
        w = r(O),
        x = (0, _["default"])("quill:toolbar"),
        k = function (t) {
      function e(t, n) {
        i(this, e);
        var r = l(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this, t, n));

        if (Array.isArray(r.options.container)) {
          var o = document.createElement("div");
          u(o, r.options.container), t.container.parentNode.insertBefore(o, t.container), r.container = o;
        } else "string" == typeof r.options.container ? r.container = document.querySelector(r.options.container) : r.container = r.options.container;

        if (!(r.container instanceof HTMLElement)) {
          var a;
          return a = x.error("Container required for toolbar", r.options), l(r, a);
        }

        return r.container.classList.add("ql-toolbar"), r.controls = [], r.handlers = {}, Object.keys(r.options.handlers).forEach(function (t) {
          r.addHandler(t, r.options.handlers[t]);
        }), [].forEach.call(r.container.querySelectorAll("button, select"), function (t) {
          r.attach(t);
        }), r.quill.on(g["default"].events.EDITOR_CHANGE, function (t, e) {
          t === g["default"].events.SELECTION_CHANGE && r.update(e);
        }), r.quill.on(g["default"].events.SCROLL_OPTIMIZE, function () {
          var t = r.quill.selection.getRange(),
              e = f(t, 1),
              n = e[0];
          r.update(n);
        }), r;
      }

      return a(e, t), h(e, [{
        key: "addHandler",
        value: function value(t, e) {
          this.handlers[t] = e;
        }
      }, {
        key: "attach",
        value: function value(t) {
          var e = this,
              n = [].find.call(t.classList, function (t) {
            return 0 === t.indexOf("ql-");
          });

          if (n) {
            if (n = n.slice("ql-".length), "BUTTON" === t.tagName && t.setAttribute("type", "button"), null == this.handlers[n]) {
              if (null != this.quill.scroll.whitelist && null == this.quill.scroll.whitelist[n]) return void x.warn("ignoring attaching to disabled format", n, t);
              if (null == v["default"].query(n)) return void x.warn("ignoring attaching to nonexistent format", n, t);
            }

            var r = "SELECT" === t.tagName ? "change" : "click";
            t.addEventListener(r, function (r) {
              var i = void 0;

              if ("SELECT" === t.tagName) {
                if (t.selectedIndex < 0) return;
                var l = t.options[t.selectedIndex];
                i = !l.hasAttribute("selected") && (l.value || !1);
              } else i = !t.classList.contains("ql-active") && (t.value || !t.hasAttribute("value")), r.preventDefault();

              e.quill.focus();
              var a = e.quill.selection.getRange(),
                  s = f(a, 1),
                  u = s[0];
              if (null != e.handlers[n]) e.handlers[n].call(e, i);else if (v["default"].query(n).prototype instanceof v["default"].Embed) {
                if (!(i = prompt("Enter " + n))) return;
                e.quill.updateContents(new d["default"]().retain(u.index)["delete"](u.length).insert(o({}, n, i)), g["default"].sources.USER);
              } else e.quill.format(n, i, g["default"].sources.USER);
              e.update(u);
            }), this.controls.push([n, t]);
          }
        }
      }, {
        key: "update",
        value: function value(t) {
          var e = null == t ? {} : this.quill.getFormat(t);
          this.controls.forEach(function (n) {
            var r = f(n, 2),
                o = r[0],
                i = r[1];

            if ("SELECT" === i.tagName) {
              var l = void 0;
              if (null == t) l = null;else if (null == e[o]) l = i.querySelector("option[selected]");else if (!Array.isArray(e[o])) {
                var a = e[o];
                "string" == typeof a && (a = a.replace(/\"/g, '\\"')), l = i.querySelector('option[value="' + a + '"]');
              }
              null == l ? (i.value = "", i.selectedIndex = -1) : l.selected = !0;
            } else if (null == t) i.classList.remove("ql-active");else if (i.hasAttribute("value")) {
              var s = e[o] === i.getAttribute("value") || null != e[o] && e[o].toString() === i.getAttribute("value") || null == e[o] && !i.getAttribute("value");
              i.classList.toggle("ql-active", s);
            } else i.classList.toggle("ql-active", null != e[o]);
          });
        }
      }]), e;
    }(w["default"]);

    k.DEFAULTS = {}, k.DEFAULTS = {
      container: null,
      handlers: {
        clean: function clean() {
          var t = this,
              e = this.quill.getSelection();
          if (null != e) if (0 == e.length) {
            var n = this.quill.getFormat();
            Object.keys(n).forEach(function (e) {
              null != v["default"].query(e, v["default"].Scope.INLINE) && t.quill.format(e, !1);
            });
          } else this.quill.removeFormat(e, g["default"].sources.USER);
        },
        direction: function direction(t) {
          var e = this.quill.getFormat().align;
          "rtl" === t && null == e ? this.quill.format("align", "right", g["default"].sources.USER) : t || "right" !== e || this.quill.format("align", !1, g["default"].sources.USER), this.quill.format("direction", t, g["default"].sources.USER);
        },
        indent: function indent(t) {
          var e = this.quill.getSelection(),
              n = this.quill.getFormat(e),
              r = parseInt(n.indent || 0);

          if ("+1" === t || "-1" === t) {
            var o = "+1" === t ? 1 : -1;
            "rtl" === n.direction && (o *= -1), this.quill.format("indent", r + o, g["default"].sources.USER);
          }
        },
        link: function link(t) {
          !0 === t && (t = prompt("Enter link URL:")), this.quill.format("link", t, g["default"].sources.USER);
        },
        list: function list(t) {
          var e = this.quill.getSelection(),
              n = this.quill.getFormat(e);
          "check" === t ? "checked" === n.list || "unchecked" === n.list ? this.quill.format("list", !1, g["default"].sources.USER) : this.quill.format("list", "unchecked", g["default"].sources.USER) : this.quill.format("list", t, g["default"].sources.USER);
        }
      }
    }, e["default"] = k, e.addControls = u;
  }, function (t, e) {
    t.exports = '<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>';
  }, function (t, e) {
    t.exports = '<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>';
  }, function (t, e) {
    t.exports = '<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>';
  }, function (t, e) {
    t.exports = '<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>';
  }, function (t, e) {
    t.exports = '<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>';
  }, function (t, e) {
    t.exports = '<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>';
  }, function (t, e) {
    t.exports = '<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>';
  }, function (t, e) {
    t.exports = '<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>';
  }, function (t, e) {
    t.exports = '<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>';
  }, function (t, e) {
    t.exports = '<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>';
  }, function (t, e) {
    t.exports = '<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>';
  }, function (t, e) {
    t.exports = '<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>';
  }, function (t, e) {
    t.exports = '<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>';
  }, function (t, e) {
    t.exports = '<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>';
  }, function (t, e) {
    t.exports = '<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>';
  }, function (t, e) {
    t.exports = '<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>';
  }, function (t, e) {
    t.exports = '<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>';
  }, function (t, e) {
    t.exports = '<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>';
  }, function (t, e) {
    t.exports = '<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>';
  }, function (t, e) {
    t.exports = '<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>';
  }, function (t, e) {
    t.exports = '<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>';
  }, function (t, e) {
    t.exports = '<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>';
  }, function (t, e) {
    t.exports = '<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>';
  }, function (t, e) {
    t.exports = '<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>';
  }, function (t, e) {
    t.exports = '<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>';
  }, function (t, e) {
    t.exports = '<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>';
  }, function (t, e) {
    t.exports = '<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>';
  }, function (t, e) {
    t.exports = '<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>';
  }, function (t, e) {
    t.exports = '<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>';
  }, function (t, e) {
    t.exports = '<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>';
  }, function (t, e) {
    t.exports = '<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>';
  }, function (t, e) {
    t.exports = '<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>';
  }, function (t, e, n) {
    "use strict";

    function r(t) {
      return t && t.__esModule ? t : {
        "default": t
      };
    }

    function o(t, e) {
      if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function");
    }

    function i(t, e) {
      if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
      return !e || "object" != _typeof2(e) && "function" != typeof e ? t : e;
    }

    function l(t, e) {
      if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + _typeof2(e));
      t.prototype = Object.create(e && e.prototype, {
        constructor: {
          value: t,
          enumerable: !1,
          writable: !0,
          configurable: !0
        }
      }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e);
    }

    Object.defineProperty(e, "__esModule", {
      value: !0
    }), e["default"] = e.BubbleTooltip = void 0;

    var a = function t(e, n, r) {
      null === e && (e = Function.prototype);
      var o = Object.getOwnPropertyDescriptor(e, n);

      if (void 0 === o) {
        var i = Object.getPrototypeOf(e);
        return null === i ? void 0 : t(i, n, r);
      }

      if ("value" in o) return o.value;
      var l = o.get;
      if (void 0 !== l) return l.call(r);
    },
        s = function () {
      function t(t, e) {
        for (var n = 0; n < e.length; n++) {
          var r = e[n];
          r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r);
        }
      }

      return function (e, n, r) {
        return n && t(e.prototype, n), r && t(e, r), e;
      };
    }(),
        u = n(2),
        c = r(u),
        f = n(9),
        h = r(f),
        p = n(44),
        d = r(p),
        y = n(22),
        v = n(26),
        b = r(v),
        g = [["bold", "italic", "link"], [{
      header: 1
    }, {
      header: 2
    }, "blockquote"]],
        m = function (t) {
      function e(t, n) {
        o(this, e), null != n.modules.toolbar && null == n.modules.toolbar.container && (n.modules.toolbar.container = g);
        var r = i(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this, t, n));
        return r.quill.container.classList.add("ql-bubble"), r;
      }

      return l(e, t), s(e, [{
        key: "extendToolbar",
        value: function value(t) {
          this.tooltip = new _(this.quill, this.options.bounds), this.tooltip.root.appendChild(t.container), this.buildButtons([].slice.call(t.container.querySelectorAll("button")), b["default"]), this.buildPickers([].slice.call(t.container.querySelectorAll("select")), b["default"]);
        }
      }]), e;
    }(d["default"]);

    m.DEFAULTS = (0, c["default"])(!0, {}, d["default"].DEFAULTS, {
      modules: {
        toolbar: {
          handlers: {
            link: function link(t) {
              t ? this.quill.theme.tooltip.edit() : this.quill.format("link", !1);
            }
          }
        }
      }
    });

    var _ = function (t) {
      function e(t, n) {
        o(this, e);
        var r = i(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this, t, n));
        return r.quill.on(h["default"].events.EDITOR_CHANGE, function (t, e, n, o) {
          if (t === h["default"].events.SELECTION_CHANGE) if (null != e && e.length > 0 && o === h["default"].sources.USER) {
            r.show(), r.root.style.left = "0px", r.root.style.width = "", r.root.style.width = r.root.offsetWidth + "px";
            var i = r.quill.getLines(e.index, e.length);
            if (1 === i.length) r.position(r.quill.getBounds(e));else {
              var l = i[i.length - 1],
                  a = r.quill.getIndex(l),
                  s = Math.min(l.length() - 1, e.index + e.length - a),
                  u = r.quill.getBounds(new y.Range(a, s));
              r.position(u);
            }
          } else document.activeElement !== r.textbox && r.quill.hasFocus() && r.hide();
        }), r;
      }

      return l(e, t), s(e, [{
        key: "listen",
        value: function value() {
          var t = this;
          a(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "listen", this).call(this), this.root.querySelector(".ql-close").addEventListener("click", function () {
            t.root.classList.remove("ql-editing");
          }), this.quill.on(h["default"].events.SCROLL_OPTIMIZE, function () {
            setTimeout(function () {
              if (!t.root.classList.contains("ql-hidden")) {
                var e = t.quill.getSelection();
                null != e && t.position(t.quill.getBounds(e));
              }
            }, 1);
          });
        }
      }, {
        key: "cancel",
        value: function value() {
          this.show();
        }
      }, {
        key: "position",
        value: function value(t) {
          var n = a(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "position", this).call(this, t),
              r = this.root.querySelector(".ql-tooltip-arrow");
          if (r.style.marginLeft = "", 0 === n) return n;
          r.style.marginLeft = -1 * n - r.offsetWidth / 2 + "px";
        }
      }]), e;
    }(p.BaseTooltip);

    _.TEMPLATE = ['<span class="ql-tooltip-arrow"></span>', '<div class="ql-tooltip-editor">', '<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">', '<a class="ql-close"></a>', "</div>"].join(""), e.BubbleTooltip = _, e["default"] = m;
  }, function (t, e, n) {
    "use strict";

    function r(t) {
      return t && t.__esModule ? t : {
        "default": t
      };
    }

    function o(t, e) {
      if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function");
    }

    function i(t, e) {
      if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
      return !e || "object" != _typeof2(e) && "function" != typeof e ? t : e;
    }

    function l(t, e) {
      if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + _typeof2(e));
      t.prototype = Object.create(e && e.prototype, {
        constructor: {
          value: t,
          enumerable: !1,
          writable: !0,
          configurable: !0
        }
      }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e);
    }

    Object.defineProperty(e, "__esModule", {
      value: !0
    });

    var a = function () {
      function t(t, e) {
        var n = [],
            r = !0,
            o = !1,
            i = void 0;

        try {
          for (var l, a = t[Symbol.iterator](); !(r = (l = a.next()).done) && (n.push(l.value), !e || n.length !== e); r = !0) {
            ;
          }
        } catch (t) {
          o = !0, i = t;
        } finally {
          try {
            !r && a["return"] && a["return"]();
          } finally {
            if (o) throw i;
          }
        }

        return n;
      }

      return function (e, n) {
        if (Array.isArray(e)) return e;
        if (Symbol.iterator in Object(e)) return t(e, n);
        throw new TypeError("Invalid attempt to destructure non-iterable instance");
      };
    }(),
        s = function t(e, n, r) {
      null === e && (e = Function.prototype);
      var o = Object.getOwnPropertyDescriptor(e, n);

      if (void 0 === o) {
        var i = Object.getPrototypeOf(e);
        return null === i ? void 0 : t(i, n, r);
      }

      if ("value" in o) return o.value;
      var l = o.get;
      if (void 0 !== l) return l.call(r);
    },
        u = function () {
      function t(t, e) {
        for (var n = 0; n < e.length; n++) {
          var r = e[n];
          r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r);
        }
      }

      return function (e, n, r) {
        return n && t(e.prototype, n), r && t(e, r), e;
      };
    }(),
        c = n(2),
        f = r(c),
        h = n(9),
        p = r(h),
        d = n(44),
        y = r(d),
        v = n(15),
        b = r(v),
        g = n(22),
        m = n(26),
        _ = r(m),
        O = [[{
      header: ["1", "2", "3", !1]
    }], ["bold", "italic", "underline", "link"], [{
      list: "ordered"
    }, {
      list: "bullet"
    }], ["clean"]],
        w = function (t) {
      function e(t, n) {
        o(this, e), null != n.modules.toolbar && null == n.modules.toolbar.container && (n.modules.toolbar.container = O);
        var r = i(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this, t, n));
        return r.quill.container.classList.add("ql-snow"), r;
      }

      return l(e, t), u(e, [{
        key: "extendToolbar",
        value: function value(t) {
          t.container.classList.add("ql-snow"), this.buildButtons([].slice.call(t.container.querySelectorAll("button")), _["default"]), this.buildPickers([].slice.call(t.container.querySelectorAll("select")), _["default"]), this.tooltip = new x(this.quill, this.options.bounds), t.container.querySelector(".ql-link") && this.quill.keyboard.addBinding({
            key: "K",
            shortKey: !0
          }, function (e, n) {
            t.handlers.link.call(t, !n.format.link);
          });
        }
      }]), e;
    }(y["default"]);

    w.DEFAULTS = (0, f["default"])(!0, {}, y["default"].DEFAULTS, {
      modules: {
        toolbar: {
          handlers: {
            link: function link(t) {
              if (t) {
                var e = this.quill.getSelection();
                if (null == e || 0 == e.length) return;
                var n = this.quill.getText(e);
                /^\S+@\S+\.\S+$/.test(n) && 0 !== n.indexOf("mailto:") && (n = "mailto:" + n);
                this.quill.theme.tooltip.edit("link", n);
              } else this.quill.format("link", !1);
            }
          }
        }
      }
    });

    var x = function (t) {
      function e(t, n) {
        o(this, e);
        var r = i(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this, t, n));
        return r.preview = r.root.querySelector("a.ql-preview"), r;
      }

      return l(e, t), u(e, [{
        key: "listen",
        value: function value() {
          var t = this;
          s(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "listen", this).call(this), this.root.querySelector("a.ql-action").addEventListener("click", function (e) {
            t.root.classList.contains("ql-editing") ? t.save() : t.edit("link", t.preview.textContent), e.preventDefault();
          }), this.root.querySelector("a.ql-remove").addEventListener("click", function (e) {
            if (null != t.linkRange) {
              var n = t.linkRange;
              t.restoreFocus(), t.quill.formatText(n, "link", !1, p["default"].sources.USER), delete t.linkRange;
            }

            e.preventDefault(), t.hide();
          }), this.quill.on(p["default"].events.SELECTION_CHANGE, function (e, n, r) {
            if (null != e) {
              if (0 === e.length && r === p["default"].sources.USER) {
                var o = t.quill.scroll.descendant(b["default"], e.index),
                    i = a(o, 2),
                    l = i[0],
                    s = i[1];

                if (null != l) {
                  t.linkRange = new g.Range(e.index - s, l.length());
                  var u = b["default"].formats(l.domNode);
                  return t.preview.textContent = u, t.preview.setAttribute("href", u), t.show(), void t.position(t.quill.getBounds(t.linkRange));
                }
              } else delete t.linkRange;

              t.hide();
            }
          });
        }
      }, {
        key: "show",
        value: function value() {
          s(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "show", this).call(this), this.root.removeAttribute("data-mode");
        }
      }]), e;
    }(d.BaseTooltip);

    x.TEMPLATE = ['<a class="ql-preview" target="_blank" href="about:blank"></a>', '<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">', '<a class="ql-action"></a>', '<a class="ql-remove"></a>'].join(""), e["default"] = w;
  }])["default"];
});
/*!
 * Cropper.js v1.5.12
 * https://fengyuanchen.github.io/cropperjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2021-06-12T08:00:17.411Z
 */

!function (t, e) {
  "object" == (typeof exports === "undefined" ? "undefined" : _typeof2(exports)) && "undefined" != typeof module ? module.exports = e() : "function" == typeof define && define.amd ? define(e) : (t = "undefined" != typeof globalThis ? globalThis : t || self).Cropper = e();
}(this, function () {
  "use strict";

  function e(e, t) {
    var i,
        a = Object.keys(e);
    return Object.getOwnPropertySymbols && (i = Object.getOwnPropertySymbols(e), t && (i = i.filter(function (t) {
      return Object.getOwnPropertyDescriptor(e, t).enumerable;
    })), a.push.apply(a, i)), a;
  }

  function B(a) {
    for (var t = 1; t < arguments.length; t++) {
      var n = null != arguments[t] ? arguments[t] : {};
      t % 2 ? e(Object(n), !0).forEach(function (t) {
        var e, i;
        e = a, t = n[i = t], i in e ? Object.defineProperty(e, i, {
          value: t,
          enumerable: !0,
          configurable: !0,
          writable: !0
        }) : e[i] = t;
      }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(a, Object.getOwnPropertyDescriptors(n)) : e(Object(n)).forEach(function (t) {
        Object.defineProperty(a, t, Object.getOwnPropertyDescriptor(n, t));
      });
    }

    return a;
  }

  function i(t) {
    return (i = "function" == typeof Symbol && "symbol" == _typeof2(Symbol.iterator) ? function (t) {
      return _typeof2(t);
    } : function (t) {
      return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : _typeof2(t);
    })(t);
  }

  function n(t, e) {
    for (var i = 0; i < e.length; i++) {
      var a = e[i];
      a.enumerable = a.enumerable || !1, a.configurable = !0, "value" in a && (a.writable = !0), Object.defineProperty(t, a.key, a);
    }
  }

  function T(t) {
    return function (t) {
      if (Array.isArray(t)) return a(t);
    }(t) || function (t) {
      if ("undefined" != typeof Symbol && null != t[Symbol.iterator] || null != t["@@iterator"]) return Array.from(t);
    }(t) || function (t, e) {
      if (t) {
        if ("string" == typeof t) return a(t, e);
        var i = Object.prototype.toString.call(t).slice(8, -1);
        return "Map" === (i = "Object" === i && t.constructor ? t.constructor.name : i) || "Set" === i ? Array.from(t) : "Arguments" === i || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i) ? a(t, e) : void 0;
      }
    }(t) || function () {
      throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
    }();
  }

  function a(t, e) {
    (null == e || e > t.length) && (e = t.length);

    for (var i = 0, a = new Array(e); i < e; i++) {
      a[i] = t[i];
    }

    return a;
  }

  var t = "undefined" != typeof window && void 0 !== window.document,
      h = t ? window : {},
      o = !(!t || !h.document.documentElement) && "ontouchstart" in h.document.documentElement,
      r = t && "PointerEvent" in h,
      c = "cropper",
      k = "all",
      O = "crop",
      E = "move",
      W = "zoom",
      H = "e",
      N = "w",
      L = "s",
      z = "n",
      Y = "ne",
      X = "nw",
      R = "se",
      S = "sw",
      s = "".concat(c, "-crop"),
      d = "".concat(c, "-disabled"),
      A = "".concat(c, "-hidden"),
      l = "".concat(c, "-hide"),
      p = "".concat(c, "-invisible"),
      m = "".concat(c, "-modal"),
      u = "".concat(c, "-move"),
      g = "".concat(c, "Action"),
      f = "".concat(c, "Preview"),
      v = "crop",
      w = "move",
      b = "none",
      y = "crop",
      x = "cropend",
      M = "cropmove",
      C = "cropstart",
      D = "dblclick",
      j = r ? "pointerdown" : o ? "touchstart" : "mousedown",
      I = r ? "pointermove" : o ? "touchmove" : "mousemove",
      P = r ? "pointerup pointercancel" : o ? "touchend touchcancel" : "mouseup",
      U = "zoom",
      q = "image/jpeg",
      $ = /^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,
      Q = /^data:/,
      K = /^data:image\/jpeg;base64,/,
      Z = /^img|canvas$/i,
      G = {
    viewMode: 0,
    dragMode: v,
    initialAspectRatio: NaN,
    aspectRatio: NaN,
    data: null,
    preview: "",
    responsive: !0,
    restore: !0,
    checkCrossOrigin: !0,
    checkOrientation: !0,
    modal: !0,
    guides: !0,
    center: !0,
    highlight: !0,
    background: !0,
    autoCrop: !0,
    autoCropArea: .8,
    movable: !0,
    rotatable: !0,
    scalable: !0,
    zoomable: !0,
    zoomOnTouch: !0,
    zoomOnWheel: !0,
    wheelZoomRatio: .1,
    cropBoxMovable: !0,
    cropBoxResizable: !0,
    toggleDragModeOnDblclick: !0,
    minCanvasWidth: 0,
    minCanvasHeight: 0,
    minCropBoxWidth: 0,
    minCropBoxHeight: 0,
    minContainerWidth: 200,
    minContainerHeight: 100,
    ready: null,
    cropstart: null,
    cropmove: null,
    cropend: null,
    crop: null,
    zoom: null
  },
      V = Number.isNaN || h.isNaN;

  function F(t) {
    return "number" == typeof t && !V(t);
  }

  var J = function J(t) {
    return 0 < t && t < 1 / 0;
  };

  function _(t) {
    return void 0 === t;
  }

  function tt(t) {
    return "object" === i(t) && null !== t;
  }

  var et = Object.prototype.hasOwnProperty;

  function it(t) {
    if (!tt(t)) return !1;

    try {
      var e = t.constructor,
          i = e.prototype;
      return e && i && et.call(i, "isPrototypeOf");
    } catch (t) {
      return !1;
    }
  }

  function at(t) {
    return "function" == typeof t;
  }

  var nt = Array.prototype.slice;

  function ot(t) {
    return Array.from ? Array.from(t) : nt.call(t);
  }

  function ht(i, a) {
    return i && at(a) && (Array.isArray(i) || F(i.length) ? ot(i).forEach(function (t, e) {
      a.call(i, t, e, i);
    }) : tt(i) && Object.keys(i).forEach(function (t) {
      a.call(i, i[t], t, i);
    })), i;
  }

  var rt = Object.assign || function (i) {
    for (var t = arguments.length, e = new Array(1 < t ? t - 1 : 0), a = 1; a < t; a++) {
      e[a - 1] = arguments[a];
    }

    return tt(i) && 0 < e.length && e.forEach(function (e) {
      tt(e) && Object.keys(e).forEach(function (t) {
        i[t] = e[t];
      });
    }), i;
  },
      st = /\.\d*(?:0|9){12}\d*$/;

  function ct(t, e) {
    e = 1 < arguments.length && void 0 !== e ? e : 1e11;
    return st.test(t) ? Math.round(t * e) / e : t;
  }

  var dt = /^width|height|left|top|marginLeft|marginTop$/;

  function lt(t, e) {
    var i = t.style;
    ht(e, function (t, e) {
      dt.test(e) && F(t) && (t = "".concat(t, "px")), i[e] = t;
    });
  }

  function pt(t, e) {
    var i;
    e && (F(t.length) ? ht(t, function (t) {
      pt(t, e);
    }) : t.classList ? t.classList.add(e) : (i = t.className.trim()) ? i.indexOf(e) < 0 && (t.className = "".concat(i, " ").concat(e)) : t.className = e);
  }

  function mt(t, e) {
    e && (F(t.length) ? ht(t, function (t) {
      mt(t, e);
    }) : t.classList ? t.classList.remove(e) : 0 <= t.className.indexOf(e) && (t.className = t.className.replace(e, "")));
  }

  function ut(t, e, i) {
    e && (F(t.length) ? ht(t, function (t) {
      ut(t, e, i);
    }) : (i ? pt : mt)(t, e));
  }

  var gt = /([a-z\d])([A-Z])/g;

  function ft(t) {
    return t.replace(gt, "$1-$2").toLowerCase();
  }

  function vt(t, e) {
    return tt(t[e]) ? t[e] : t.dataset ? t.dataset[e] : t.getAttribute("data-".concat(ft(e)));
  }

  function wt(t, e, i) {
    tt(i) ? t[e] = i : t.dataset ? t.dataset[e] = i : t.setAttribute("data-".concat(ft(e)), i);
  }

  var bt,
      yt,
      xt = /\s\s*/,
      Mt = (yt = !1, t && (bt = !1, At = function At() {}, It = Object.defineProperty({}, "once", {
    get: function get() {
      return yt = !0, bt;
    },
    set: function set(t) {
      bt = t;
    }
  }), h.addEventListener("test", At, It), h.removeEventListener("test", At, It)), yt);

  function Ct(i, t, a, e) {
    var n = 3 < arguments.length && void 0 !== e ? e : {},
        o = a;
    t.trim().split(xt).forEach(function (t) {
      var e;
      Mt || (e = i.listeners) && e[t] && e[t][a] && (o = e[t][a], delete e[t][a], 0 === Object.keys(e[t]).length && delete e[t], 0 === Object.keys(e).length && delete i.listeners), i.removeEventListener(t, o, n);
    });
  }

  function Dt(o, t, h, e) {
    var r = 3 < arguments.length && void 0 !== e ? e : {},
        _s = h;
    t.trim().split(xt).forEach(function (a) {
      var t, n;
      r.once && !Mt && (t = o.listeners, _s = function s() {
        delete n[a][h], o.removeEventListener(a, _s, r);

        for (var t = arguments.length, e = new Array(t), i = 0; i < t; i++) {
          e[i] = arguments[i];
        }

        h.apply(o, e);
      }, (n = void 0 === t ? {} : t)[a] || (n[a] = {}), n[a][h] && o.removeEventListener(a, n[a][h], r), n[a][h] = _s, o.listeners = n), o.addEventListener(a, _s, r);
    });
  }

  function Bt(t, e, i) {
    var a;
    return at(Event) && at(CustomEvent) ? a = new CustomEvent(e, {
      detail: i,
      bubbles: !0,
      cancelable: !0
    }) : (a = document.createEvent("CustomEvent")).initCustomEvent(e, !0, !0, i), t.dispatchEvent(a);
  }

  function kt(t) {
    t = t.getBoundingClientRect();
    return {
      left: t.left + (window.pageXOffset - document.documentElement.clientLeft),
      top: t.top + (window.pageYOffset - document.documentElement.clientTop)
    };
  }

  var Ot = h.location,
      Tt = /^(\w+:)\/\/([^:/?#]*):?(\d*)/i;

  function Et(t) {
    t = t.match(Tt);
    return null !== t && (t[1] !== Ot.protocol || t[2] !== Ot.hostname || t[3] !== Ot.port);
  }

  function Wt(t) {
    var e = "timestamp=".concat(new Date().getTime());
    return t + (-1 === t.indexOf("?") ? "?" : "&") + e;
  }

  function Ht(t) {
    var e = t.rotate,
        i = t.scaleX,
        a = t.scaleY,
        n = t.translateX,
        o = t.translateY,
        t = [];
    F(n) && 0 !== n && t.push("translateX(".concat(n, "px)")), F(o) && 0 !== o && t.push("translateY(".concat(o, "px)")), F(e) && 0 !== e && t.push("rotate(".concat(e, "deg)")), F(i) && 1 !== i && t.push("scaleX(".concat(i, ")")), F(a) && 1 !== a && t.push("scaleY(".concat(a, ")"));
    t = t.length ? t.join(" ") : "none";
    return {
      WebkitTransform: t,
      msTransform: t,
      transform: t
    };
  }

  function Nt(t, e) {
    var i = t.pageX,
        a = t.pageY,
        t = {
      endX: i,
      endY: a
    };
    return e ? t : B({
      startX: i,
      startY: a
    }, t);
  }

  function Lt(t, e) {
    var i = t.aspectRatio,
        a = t.height,
        n = t.width,
        o = 1 < arguments.length && void 0 !== e ? e : "contain",
        h = J(n),
        t = J(a);
    return h && t ? (e = a * i, "contain" === o && n < e || "cover" === o && e < n ? a = n / i : n = a * i) : h ? a = n / i : t && (n = a * i), {
      width: n,
      height: a
    };
  }

  var zt = String.fromCharCode;
  var Yt = /^data:.*,/;

  function Xt(t) {
    var e,
        i,
        a,
        n,
        o,
        h,
        r,
        s = new DataView(t);

    try {
      if (255 === s.getUint8(0) && 216 === s.getUint8(1)) for (var c = s.byteLength, d = 2; d + 1 < c;) {
        if (255 === s.getUint8(d) && 225 === s.getUint8(d + 1)) {
          i = d;
          break;
        }

        d += 1;
      }
      if (i && (n = i + 10, "Exif" === function (t, e, i) {
        var a = "";
        i += e;

        for (var n = e; n < i; n += 1) {
          a += zt(t.getUint8(n));
        }

        return a;
      }(s, i + 4, 4) && (!(r = 18761 === (o = s.getUint16(n))) && 19789 !== o || 42 !== s.getUint16(n + 2, r) || 8 <= (h = s.getUint32(n + 4, r)) && (a = n + h))), a) for (var l, p = s.getUint16(a, r), m = 0; m < p; m += 1) {
        if (l = a + 12 * m + 2, 274 === s.getUint16(l, r)) {
          l += 8, e = s.getUint16(l, r), s.setUint16(l, 1, r);
          break;
        }
      }
    } catch (t) {
      e = 1;
    }

    return e;
  }

  var Rt = {
    render: function render() {
      this.initContainer(), this.initCanvas(), this.initCropBox(), this.renderCanvas(), this.cropped && this.renderCropBox();
    },
    initContainer: function initContainer() {
      var t = this.element,
          e = this.options,
          i = this.container,
          a = this.cropper,
          n = Number(e.minContainerWidth),
          e = Number(e.minContainerHeight);
      pt(a, A), mt(t, A);
      e = {
        width: Math.max(i.offsetWidth, 0 <= n ? n : 200),
        height: Math.max(i.offsetHeight, 0 <= e ? e : 100)
      };
      lt(a, {
        width: (this.containerData = e).width,
        height: e.height
      }), pt(t, A), mt(a, A);
    },
    initCanvas: function initCanvas() {
      var t = this.containerData,
          e = this.imageData,
          i = this.options.viewMode,
          a = Math.abs(e.rotate) % 180 == 90,
          n = a ? e.naturalHeight : e.naturalWidth,
          o = a ? e.naturalWidth : e.naturalHeight,
          h = n / o,
          a = t.width,
          e = t.height;
      t.height * h > t.width ? 3 === i ? a = t.height * h : e = t.width / h : 3 === i ? e = t.width / h : a = t.height * h;
      e = {
        aspectRatio: h,
        naturalWidth: n,
        naturalHeight: o,
        width: a,
        height: e
      };
      this.canvasData = e, this.limited = 1 === i || 2 === i, this.limitCanvas(!0, !0), e.width = Math.min(Math.max(e.width, e.minWidth), e.maxWidth), e.height = Math.min(Math.max(e.height, e.minHeight), e.maxHeight), e.left = (t.width - e.width) / 2, e.top = (t.height - e.height) / 2, e.oldLeft = e.left, e.oldTop = e.top, this.initialCanvasData = rt({}, e);
    },
    limitCanvas: function limitCanvas(t, e) {
      var i,
          a = this.options,
          n = this.containerData,
          o = this.canvasData,
          h = this.cropBoxData,
          r = a.viewMode,
          s = o.aspectRatio,
          c = this.cropped && h;
      t && (t = Number(a.minCanvasWidth) || 0, i = Number(a.minCanvasHeight) || 0, 1 < r ? (t = Math.max(t, n.width), i = Math.max(i, n.height), 3 === r && (t < i * s ? t = i * s : i = t / s)) : 0 < r && (t ? t = Math.max(t, c ? h.width : 0) : i ? i = Math.max(i, c ? h.height : 0) : c && ((t = h.width) < (i = h.height) * s ? t = i * s : i = t / s)), t = (s = Lt({
        aspectRatio: s,
        width: t,
        height: i
      })).width, i = s.height, o.minWidth = t, o.minHeight = i, o.maxWidth = 1 / 0, o.maxHeight = 1 / 0), e && ((c ? 0 : 1) < r ? (i = n.width - o.width, e = n.height - o.height, o.minLeft = Math.min(0, i), o.minTop = Math.min(0, e), o.maxLeft = Math.max(0, i), o.maxTop = Math.max(0, e), c && this.limited && (o.minLeft = Math.min(h.left, h.left + (h.width - o.width)), o.minTop = Math.min(h.top, h.top + (h.height - o.height)), o.maxLeft = h.left, o.maxTop = h.top, 2 === r && (o.width >= n.width && (o.minLeft = Math.min(0, i), o.maxLeft = Math.max(0, i)), o.height >= n.height && (o.minTop = Math.min(0, e), o.maxTop = Math.max(0, e))))) : (o.minLeft = -o.width, o.minTop = -o.height, o.maxLeft = n.width, o.maxTop = n.height));
    },
    renderCanvas: function renderCanvas(t, e) {
      var i,
          a,
          n = this.canvasData,
          o = this.imageData;
      e && (i = (a = function (t) {
        var e = t.width,
            i = t.height,
            a = t.degree;
        if (90 == (a = Math.abs(a) % 180)) return {
          width: i,
          height: e
        };
        var n = a % 90 * Math.PI / 180,
            o = Math.sin(n),
            t = Math.cos(n),
            n = e * t + i * o,
            t = e * o + i * t;
        return 90 < a ? {
          width: t,
          height: n
        } : {
          width: n,
          height: t
        };
      }({
        width: o.naturalWidth * Math.abs(o.scaleX || 1),
        height: o.naturalHeight * Math.abs(o.scaleY || 1),
        degree: o.rotate || 0
      })).width, e = a.height, o = n.width * (i / n.naturalWidth), a = n.height * (e / n.naturalHeight), n.left -= (o - n.width) / 2, n.top -= (a - n.height) / 2, n.width = o, n.height = a, n.aspectRatio = i / e, n.naturalWidth = i, n.naturalHeight = e, this.limitCanvas(!0, !1)), (n.width > n.maxWidth || n.width < n.minWidth) && (n.left = n.oldLeft), (n.height > n.maxHeight || n.height < n.minHeight) && (n.top = n.oldTop), n.width = Math.min(Math.max(n.width, n.minWidth), n.maxWidth), n.height = Math.min(Math.max(n.height, n.minHeight), n.maxHeight), this.limitCanvas(!1, !0), n.left = Math.min(Math.max(n.left, n.minLeft), n.maxLeft), n.top = Math.min(Math.max(n.top, n.minTop), n.maxTop), n.oldLeft = n.left, n.oldTop = n.top, lt(this.canvas, rt({
        width: n.width,
        height: n.height
      }, Ht({
        translateX: n.left,
        translateY: n.top
      }))), this.renderImage(t), this.cropped && this.limited && this.limitCropBox(!0, !0);
    },
    renderImage: function renderImage(t) {
      var e = this.canvasData,
          i = this.imageData,
          a = i.naturalWidth * (e.width / e.naturalWidth),
          n = i.naturalHeight * (e.height / e.naturalHeight);
      rt(i, {
        width: a,
        height: n,
        left: (e.width - a) / 2,
        top: (e.height - n) / 2
      }), lt(this.image, rt({
        width: i.width,
        height: i.height
      }, Ht(rt({
        translateX: i.left,
        translateY: i.top
      }, i)))), t && this.output();
    },
    initCropBox: function initCropBox() {
      var t = this.options,
          e = this.canvasData,
          i = t.aspectRatio || t.initialAspectRatio,
          a = Number(t.autoCropArea) || .8,
          t = {
        width: e.width,
        height: e.height
      };
      i && (e.height * i > e.width ? t.height = t.width / i : t.width = t.height * i), this.cropBoxData = t, this.limitCropBox(!0, !0), t.width = Math.min(Math.max(t.width, t.minWidth), t.maxWidth), t.height = Math.min(Math.max(t.height, t.minHeight), t.maxHeight), t.width = Math.max(t.minWidth, t.width * a), t.height = Math.max(t.minHeight, t.height * a), t.left = e.left + (e.width - t.width) / 2, t.top = e.top + (e.height - t.height) / 2, t.oldLeft = t.left, t.oldTop = t.top, this.initialCropBoxData = rt({}, t);
    },
    limitCropBox: function limitCropBox(t, e) {
      var i,
          a,
          n = this.options,
          o = this.containerData,
          h = this.canvasData,
          r = this.cropBoxData,
          s = this.limited,
          c = n.aspectRatio;
      t && (i = Number(n.minCropBoxWidth) || 0, a = Number(n.minCropBoxHeight) || 0, t = s ? Math.min(o.width, h.width, h.width + h.left, o.width - h.left) : o.width, n = s ? Math.min(o.height, h.height, h.height + h.top, o.height - h.top) : o.height, i = Math.min(i, o.width), a = Math.min(a, o.height), c && (i && a ? i < a * c ? a = i / c : i = a * c : i ? a = i / c : a && (i = a * c), t < n * c ? n = t / c : t = n * c), r.minWidth = Math.min(i, t), r.minHeight = Math.min(a, n), r.maxWidth = t, r.maxHeight = n), e && (s ? (r.minLeft = Math.max(0, h.left), r.minTop = Math.max(0, h.top), r.maxLeft = Math.min(o.width, h.left + h.width) - r.width, r.maxTop = Math.min(o.height, h.top + h.height) - r.height) : (r.minLeft = 0, r.minTop = 0, r.maxLeft = o.width - r.width, r.maxTop = o.height - r.height));
    },
    renderCropBox: function renderCropBox() {
      var t = this.options,
          e = this.containerData,
          i = this.cropBoxData;
      (i.width > i.maxWidth || i.width < i.minWidth) && (i.left = i.oldLeft), (i.height > i.maxHeight || i.height < i.minHeight) && (i.top = i.oldTop), i.width = Math.min(Math.max(i.width, i.minWidth), i.maxWidth), i.height = Math.min(Math.max(i.height, i.minHeight), i.maxHeight), this.limitCropBox(!1, !0), i.left = Math.min(Math.max(i.left, i.minLeft), i.maxLeft), i.top = Math.min(Math.max(i.top, i.minTop), i.maxTop), i.oldLeft = i.left, i.oldTop = i.top, t.movable && t.cropBoxMovable && wt(this.face, g, i.width >= e.width && i.height >= e.height ? E : k), lt(this.cropBox, rt({
        width: i.width,
        height: i.height
      }, Ht({
        translateX: i.left,
        translateY: i.top
      }))), this.cropped && this.limited && this.limitCanvas(!0, !0), this.disabled || this.output();
    },
    output: function output() {
      this.preview(), Bt(this.element, y, this.getData());
    }
  },
      St = {
    initPreview: function initPreview() {
      var t = this.element,
          i = this.crossOrigin,
          e = this.options.preview,
          a = i ? this.crossOriginUrl : this.url,
          n = t.alt || "The image to preview",
          o = document.createElement("img");
      i && (o.crossOrigin = i), o.src = a, o.alt = n, this.viewBox.appendChild(o), this.viewBoxImage = o, e && ("string" == typeof (o = e) ? o = t.ownerDocument.querySelectorAll(e) : e.querySelector && (o = [e]), ht(this.previews = o, function (t) {
        var e = document.createElement("img");
        wt(t, f, {
          width: t.offsetWidth,
          height: t.offsetHeight,
          html: t.innerHTML
        }), i && (e.crossOrigin = i), e.src = a, e.alt = n, e.style.cssText = 'display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"', t.innerHTML = "", t.appendChild(e);
      }));
    },
    resetPreview: function resetPreview() {
      ht(this.previews, function (t) {
        var e = vt(t, f);
        lt(t, {
          width: e.width,
          height: e.height
        }), t.innerHTML = e.html, function (e, i) {
          if (tt(e[i])) try {
            delete e[i];
          } catch (t) {
            e[i] = void 0;
          } else if (e.dataset) try {
            delete e.dataset[i];
          } catch (t) {
            e.dataset[i] = void 0;
          } else e.removeAttribute("data-".concat(ft(i)));
        }(t, f);
      });
    },
    preview: function preview() {
      var h = this.imageData,
          t = this.canvasData,
          e = this.cropBoxData,
          r = e.width,
          s = e.height,
          c = h.width,
          d = h.height,
          l = e.left - t.left - h.left,
          p = e.top - t.top - h.top;
      this.cropped && !this.disabled && (lt(this.viewBoxImage, rt({
        width: c,
        height: d
      }, Ht(rt({
        translateX: -l,
        translateY: -p
      }, h)))), ht(this.previews, function (t) {
        var e = vt(t, f),
            i = e.width,
            a = e.height,
            n = i,
            o = a,
            e = 1;
        r && (o = s * (e = i / r)), s && a < o && (n = r * (e = a / s), o = a), lt(t, {
          width: n,
          height: o
        }), lt(t.getElementsByTagName("img")[0], rt({
          width: c * e,
          height: d * e
        }, Ht(rt({
          translateX: -l * e,
          translateY: -p * e
        }, h))));
      }));
    }
  },
      r = {
    bind: function bind() {
      var t = this.element,
          e = this.options,
          i = this.cropper;
      at(e.cropstart) && Dt(t, C, e.cropstart), at(e.cropmove) && Dt(t, M, e.cropmove), at(e.cropend) && Dt(t, x, e.cropend), at(e.crop) && Dt(t, y, e.crop), at(e.zoom) && Dt(t, U, e.zoom), Dt(i, j, this.onCropStart = this.cropStart.bind(this)), e.zoomable && e.zoomOnWheel && Dt(i, "wheel", this.onWheel = this.wheel.bind(this), {
        passive: !1,
        capture: !0
      }), e.toggleDragModeOnDblclick && Dt(i, D, this.onDblclick = this.dblclick.bind(this)), Dt(t.ownerDocument, I, this.onCropMove = this.cropMove.bind(this)), Dt(t.ownerDocument, P, this.onCropEnd = this.cropEnd.bind(this)), e.responsive && Dt(window, "resize", this.onResize = this.resize.bind(this));
    },
    unbind: function unbind() {
      var t = this.element,
          e = this.options,
          i = this.cropper;
      at(e.cropstart) && Ct(t, C, e.cropstart), at(e.cropmove) && Ct(t, M, e.cropmove), at(e.cropend) && Ct(t, x, e.cropend), at(e.crop) && Ct(t, y, e.crop), at(e.zoom) && Ct(t, U, e.zoom), Ct(i, j, this.onCropStart), e.zoomable && e.zoomOnWheel && Ct(i, "wheel", this.onWheel, {
        passive: !1,
        capture: !0
      }), e.toggleDragModeOnDblclick && Ct(i, D, this.onDblclick), Ct(t.ownerDocument, I, this.onCropMove), Ct(t.ownerDocument, P, this.onCropEnd), e.responsive && Ct(window, "resize", this.onResize);
    }
  },
      o = {
    resize: function resize() {
      var t, e, i, a, n, o, h;
      this.disabled || (t = this.options, e = this.container, a = this.containerData, i = e.offsetWidth / a.width, a = e.offsetHeight / a.height, 1 != (n = Math.abs(i - 1) > Math.abs(a - 1) ? i : a) && (t.restore && (o = this.getCanvasData(), h = this.getCropBoxData()), this.render(), t.restore && (this.setCanvasData(ht(o, function (t, e) {
        o[e] = t * n;
      })), this.setCropBoxData(ht(h, function (t, e) {
        h[e] = t * n;
      })))));
    },
    dblclick: function dblclick() {
      var t, e;
      this.disabled || this.options.dragMode === b || this.setDragMode((t = this.dragBox, e = s, (t.classList ? t.classList.contains(e) : -1 < t.className.indexOf(e)) ? w : v));
    },
    wheel: function wheel(t) {
      var e = this,
          i = Number(this.options.wheelZoomRatio) || .1,
          a = 1;
      this.disabled || (t.preventDefault(), this.wheeling || (this.wheeling = !0, setTimeout(function () {
        e.wheeling = !1;
      }, 50), t.deltaY ? a = 0 < t.deltaY ? 1 : -1 : t.wheelDelta ? a = -t.wheelDelta / 120 : t.detail && (a = 0 < t.detail ? 1 : -1), this.zoom(-a * i, t)));
    },
    cropStart: function cropStart(t) {
      var e,
          i = t.buttons,
          a = t.button;
      this.disabled || ("mousedown" === t.type || "pointerdown" === t.type && "mouse" === t.pointerType) && (F(i) && 1 !== i || F(a) && 0 !== a || t.ctrlKey) || (a = this.options, e = this.pointers, t.changedTouches ? ht(t.changedTouches, function (t) {
        e[t.identifier] = Nt(t);
      }) : e[t.pointerId || 0] = Nt(t), a = 1 < Object.keys(e).length && a.zoomable && a.zoomOnTouch ? W : vt(t.target, g), $.test(a) && !1 !== Bt(this.element, C, {
        originalEvent: t,
        action: a
      }) && (t.preventDefault(), this.action = a, this.cropping = !1, a === O && (this.cropping = !0, pt(this.dragBox, m))));
    },
    cropMove: function cropMove(t) {
      var e,
          i = this.action;
      !this.disabled && i && (e = this.pointers, t.preventDefault(), !1 !== Bt(this.element, M, {
        originalEvent: t,
        action: i
      }) && (t.changedTouches ? ht(t.changedTouches, function (t) {
        rt(e[t.identifier] || {}, Nt(t, !0));
      }) : rt(e[t.pointerId || 0] || {}, Nt(t, !0)), this.change(t)));
    },
    cropEnd: function cropEnd(t) {
      var e, i;
      this.disabled || (e = this.action, i = this.pointers, t.changedTouches ? ht(t.changedTouches, function (t) {
        delete i[t.identifier];
      }) : delete i[t.pointerId || 0], e && (t.preventDefault(), Object.keys(i).length || (this.action = ""), this.cropping && (this.cropping = !1, ut(this.dragBox, m, this.cropped && this.options.modal)), Bt(this.element, x, {
        originalEvent: t,
        action: e
      })));
    }
  },
      t = {
    change: function change(t) {
      var e = this.options,
          i = this.canvasData,
          a = this.containerData,
          n = this.cropBoxData,
          o = this.pointers,
          h = this.action,
          r = e.aspectRatio,
          s = n.left,
          c = n.top,
          d = n.width,
          l = n.height,
          p = s + d,
          m = c + l,
          u = 0,
          g = 0,
          f = a.width,
          v = a.height,
          w = !0;
      !r && t.shiftKey && (r = d && l ? d / l : 1), this.limited && (u = n.minLeft, g = n.minTop, f = u + Math.min(a.width, i.width, i.left + i.width), v = g + Math.min(a.height, i.height, i.top + i.height));

      function b(t) {
        switch (t) {
          case H:
            p + D.x > f && (D.x = f - p);
            break;

          case N:
            s + D.x < u && (D.x = u - s);
            break;

          case z:
            c + D.y < g && (D.y = g - c);
            break;

          case L:
            m + D.y > v && (D.y = v - m);
        }
      }

      var y,
          x,
          M,
          C = o[Object.keys(o)[0]],
          D = {
        x: C.endX - C.startX,
        y: C.endY - C.startY
      };

      switch (h) {
        case k:
          s += D.x, c += D.y;
          break;

        case H:
          if (0 <= D.x && (f <= p || r && (c <= g || v <= m))) {
            w = !1;
            break;
          }

          b(H), (d += D.x) < 0 && (h = N, s -= d = -d), r && (c += (n.height - (l = d / r)) / 2);
          break;

        case z:
          if (D.y <= 0 && (c <= g || r && (s <= u || f <= p))) {
            w = !1;
            break;
          }

          b(z), l -= D.y, c += D.y, l < 0 && (h = L, c -= l = -l), r && (s += (n.width - (d = l * r)) / 2);
          break;

        case N:
          if (D.x <= 0 && (s <= u || r && (c <= g || v <= m))) {
            w = !1;
            break;
          }

          b(N), d -= D.x, s += D.x, d < 0 && (h = H, s -= d = -d), r && (c += (n.height - (l = d / r)) / 2);
          break;

        case L:
          if (0 <= D.y && (v <= m || r && (s <= u || f <= p))) {
            w = !1;
            break;
          }

          b(L), (l += D.y) < 0 && (h = z, c -= l = -l), r && (s += (n.width - (d = l * r)) / 2);
          break;

        case Y:
          if (r) {
            if (D.y <= 0 && (c <= g || f <= p)) {
              w = !1;
              break;
            }

            b(z), l -= D.y, c += D.y, d = l * r;
          } else b(z), b(H), !(0 <= D.x) || p < f ? d += D.x : D.y <= 0 && c <= g && (w = !1), D.y <= 0 && !(g < c) || (l -= D.y, c += D.y);

          d < 0 && l < 0 ? (h = S, c -= l = -l, s -= d = -d) : d < 0 ? (h = X, s -= d = -d) : l < 0 && (h = R, c -= l = -l);
          break;

        case X:
          if (r) {
            if (D.y <= 0 && (c <= g || s <= u)) {
              w = !1;
              break;
            }

            b(z), l -= D.y, c += D.y, s += n.width - (d = l * r);
          } else b(z), b(N), !(D.x <= 0) || u < s ? (d -= D.x, s += D.x) : D.y <= 0 && c <= g && (w = !1), D.y <= 0 && !(g < c) || (l -= D.y, c += D.y);

          d < 0 && l < 0 ? (h = R, c -= l = -l, s -= d = -d) : d < 0 ? (h = Y, s -= d = -d) : l < 0 && (h = S, c -= l = -l);
          break;

        case S:
          if (r) {
            if (D.x <= 0 && (s <= u || v <= m)) {
              w = !1;
              break;
            }

            b(N), d -= D.x, s += D.x, l = d / r;
          } else b(L), b(N), !(D.x <= 0) || u < s ? (d -= D.x, s += D.x) : 0 <= D.y && v <= m && (w = !1), 0 <= D.y && !(m < v) || (l += D.y);

          d < 0 && l < 0 ? (h = Y, c -= l = -l, s -= d = -d) : d < 0 ? (h = R, s -= d = -d) : l < 0 && (h = X, c -= l = -l);
          break;

        case R:
          if (r) {
            if (0 <= D.x && (f <= p || v <= m)) {
              w = !1;
              break;
            }

            b(H), l = (d += D.x) / r;
          } else b(L), b(H), !(0 <= D.x) || p < f ? d += D.x : 0 <= D.y && v <= m && (w = !1), 0 <= D.y && !(m < v) || (l += D.y);

          d < 0 && l < 0 ? (h = X, c -= l = -l, s -= d = -d) : d < 0 ? (h = S, s -= d = -d) : l < 0 && (h = Y, c -= l = -l);
          break;

        case E:
          this.move(D.x, D.y), w = !1;
          break;

        case W:
          this.zoom((x = B({}, y = o), M = 0, ht(y, function (n, t) {
            delete x[t], ht(x, function (t) {
              var e = Math.abs(n.startX - t.startX),
                  i = Math.abs(n.startY - t.startY),
                  a = Math.abs(n.endX - t.endX),
                  t = Math.abs(n.endY - t.endY),
                  i = Math.sqrt(e * e + i * i),
                  i = (Math.sqrt(a * a + t * t) - i) / i;
              Math.abs(i) > Math.abs(M) && (M = i);
            });
          }), M), t), w = !1;
          break;

        case O:
          if (!D.x || !D.y) {
            w = !1;
            break;
          }

          y = kt(this.cropper), s = C.startX - y.left, c = C.startY - y.top, d = n.minWidth, l = n.minHeight, 0 < D.x ? h = 0 < D.y ? R : Y : D.x < 0 && (s -= d, h = 0 < D.y ? S : X), D.y < 0 && (c -= l), this.cropped || (mt(this.cropBox, A), this.cropped = !0, this.limited && this.limitCropBox(!0, !0));
      }

      w && (n.width = d, n.height = l, n.left = s, n.top = c, this.action = h, this.renderCropBox()), ht(o, function (t) {
        t.startX = t.endX, t.startY = t.endY;
      });
    }
  },
      At = {
    crop: function crop() {
      return !this.ready || this.cropped || this.disabled || (this.cropped = !0, this.limitCropBox(!0, !0), this.options.modal && pt(this.dragBox, m), mt(this.cropBox, A), this.setCropBoxData(this.initialCropBoxData)), this;
    },
    reset: function reset() {
      return this.ready && !this.disabled && (this.imageData = rt({}, this.initialImageData), this.canvasData = rt({}, this.initialCanvasData), this.cropBoxData = rt({}, this.initialCropBoxData), this.renderCanvas(), this.cropped && this.renderCropBox()), this;
    },
    clear: function clear() {
      return this.cropped && !this.disabled && (rt(this.cropBoxData, {
        left: 0,
        top: 0,
        width: 0,
        height: 0
      }), this.cropped = !1, this.renderCropBox(), this.limitCanvas(!0, !0), this.renderCanvas(), mt(this.dragBox, m), pt(this.cropBox, A)), this;
    },
    replace: function replace(e) {
      var t = 1 < arguments.length && void 0 !== arguments[1] && arguments[1];
      return !this.disabled && e && (this.isImg && (this.element.src = e), t ? (this.url = e, this.image.src = e, this.ready && (this.viewBoxImage.src = e, ht(this.previews, function (t) {
        t.getElementsByTagName("img")[0].src = e;
      }))) : (this.isImg && (this.replaced = !0), this.options.data = null, this.uncreate(), this.load(e))), this;
    },
    enable: function enable() {
      return this.ready && this.disabled && (this.disabled = !1, mt(this.cropper, d)), this;
    },
    disable: function disable() {
      return this.ready && !this.disabled && (this.disabled = !0, pt(this.cropper, d)), this;
    },
    destroy: function destroy() {
      var t = this.element;
      return t[c] && (t[c] = void 0, this.isImg && this.replaced && (t.src = this.originalUrl), this.uncreate()), this;
    },
    move: function move(t) {
      var e = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : t,
          i = this.canvasData,
          a = i.left,
          i = i.top;
      return this.moveTo(_(t) ? t : a + Number(t), _(e) ? e : i + Number(e));
    },
    moveTo: function moveTo(t) {
      var e = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : t,
          i = this.canvasData,
          a = !1;
      return t = Number(t), e = Number(e), this.ready && !this.disabled && this.options.movable && (F(t) && (i.left = t, a = !0), F(e) && (i.top = e, a = !0), a && this.renderCanvas(!0)), this;
    },
    zoom: function zoom(t, e) {
      var i = this.canvasData;
      return t = Number(t), this.zoomTo(i.width * (t = t < 0 ? 1 / (1 - t) : 1 + t) / i.naturalWidth, null, e);
    },
    zoomTo: function zoomTo(t, e, i) {
      var a,
          n,
          o,
          h = this.options,
          r = this.canvasData,
          s = r.width,
          c = r.height,
          d = r.naturalWidth,
          l = r.naturalHeight;

      if (0 <= (t = Number(t)) && this.ready && !this.disabled && h.zoomable) {
        h = d * t, l = l * t;
        if (!1 === Bt(this.element, U, {
          ratio: t,
          oldRatio: s / d,
          originalEvent: i
        })) return this;
        i ? (t = this.pointers, d = kt(this.cropper), i = t && Object.keys(t).length ? (o = n = a = 0, ht(t, function (t) {
          var e = t.startX,
              t = t.startY;
          a += e, n += t, o += 1;
        }), {
          pageX: a /= o,
          pageY: n /= o
        }) : {
          pageX: i.pageX,
          pageY: i.pageY
        }, r.left -= (h - s) * ((i.pageX - d.left - r.left) / s), r.top -= (l - c) * ((i.pageY - d.top - r.top) / c)) : it(e) && F(e.x) && F(e.y) ? (r.left -= (h - s) * ((e.x - r.left) / s), r.top -= (l - c) * ((e.y - r.top) / c)) : (r.left -= (h - s) / 2, r.top -= (l - c) / 2), r.width = h, r.height = l, this.renderCanvas(!0);
      }

      return this;
    },
    rotate: function rotate(t) {
      return this.rotateTo((this.imageData.rotate || 0) + Number(t));
    },
    rotateTo: function rotateTo(t) {
      return F(t = Number(t)) && this.ready && !this.disabled && this.options.rotatable && (this.imageData.rotate = t % 360, this.renderCanvas(!0, !0)), this;
    },
    scaleX: function scaleX(t) {
      var e = this.imageData.scaleY;
      return this.scale(t, F(e) ? e : 1);
    },
    scaleY: function scaleY(t) {
      var e = this.imageData.scaleX;
      return this.scale(F(e) ? e : 1, t);
    },
    scale: function scale(t) {
      var e = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : t,
          i = this.imageData,
          a = !1;
      return t = Number(t), e = Number(e), this.ready && !this.disabled && this.options.scalable && (F(t) && (i.scaleX = t, a = !0), F(e) && (i.scaleY = e, a = !0), a && this.renderCanvas(!0, !0)), this;
    },
    getData: function getData() {
      var i,
          a,
          t = 0 < arguments.length && void 0 !== arguments[0] && arguments[0],
          e = this.options,
          n = this.imageData,
          o = this.canvasData,
          h = this.cropBoxData;
      return this.ready && this.cropped ? (i = {
        x: h.left - o.left,
        y: h.top - o.top,
        width: h.width,
        height: h.height
      }, a = n.width / n.naturalWidth, ht(i, function (t, e) {
        i[e] = t / a;
      }), t && (h = Math.round(i.y + i.height), t = Math.round(i.x + i.width), i.x = Math.round(i.x), i.y = Math.round(i.y), i.width = t - i.x, i.height = h - i.y)) : i = {
        x: 0,
        y: 0,
        width: 0,
        height: 0
      }, e.rotatable && (i.rotate = n.rotate || 0), e.scalable && (i.scaleX = n.scaleX || 1, i.scaleY = n.scaleY || 1), i;
    },
    setData: function setData(t) {
      var e,
          i = this.options,
          a = this.imageData,
          n = this.canvasData,
          o = {};
      return this.ready && !this.disabled && it(t) && (e = !1, i.rotatable && F(t.rotate) && t.rotate !== a.rotate && (a.rotate = t.rotate, e = !0), i.scalable && (F(t.scaleX) && t.scaleX !== a.scaleX && (a.scaleX = t.scaleX, e = !0), F(t.scaleY) && t.scaleY !== a.scaleY && (a.scaleY = t.scaleY, e = !0)), e && this.renderCanvas(!0, !0), a = a.width / a.naturalWidth, F(t.x) && (o.left = t.x * a + n.left), F(t.y) && (o.top = t.y * a + n.top), F(t.width) && (o.width = t.width * a), F(t.height) && (o.height = t.height * a), this.setCropBoxData(o)), this;
    },
    getContainerData: function getContainerData() {
      return this.ready ? rt({}, this.containerData) : {};
    },
    getImageData: function getImageData() {
      return this.sized ? rt({}, this.imageData) : {};
    },
    getCanvasData: function getCanvasData() {
      var e = this.canvasData,
          i = {};
      return this.ready && ht(["left", "top", "width", "height", "naturalWidth", "naturalHeight"], function (t) {
        i[t] = e[t];
      }), i;
    },
    setCanvasData: function setCanvasData(t) {
      var e = this.canvasData,
          i = e.aspectRatio;
      return this.ready && !this.disabled && it(t) && (F(t.left) && (e.left = t.left), F(t.top) && (e.top = t.top), F(t.width) ? (e.width = t.width, e.height = t.width / i) : F(t.height) && (e.height = t.height, e.width = t.height * i), this.renderCanvas(!0)), this;
    },
    getCropBoxData: function getCropBoxData() {
      var t,
          e = this.cropBoxData;
      return (t = this.ready && this.cropped ? {
        left: e.left,
        top: e.top,
        width: e.width,
        height: e.height
      } : t) || {};
    },
    setCropBoxData: function setCropBoxData(t) {
      var e,
          i,
          a = this.cropBoxData,
          n = this.options.aspectRatio;
      return this.ready && this.cropped && !this.disabled && it(t) && (F(t.left) && (a.left = t.left), F(t.top) && (a.top = t.top), F(t.width) && t.width !== a.width && (e = !0, a.width = t.width), F(t.height) && t.height !== a.height && (i = !0, a.height = t.height), n && (e ? a.height = a.width / n : i && (a.width = a.height * n)), this.renderCropBox()), this;
    },
    getCroppedCanvas: function getCroppedCanvas() {
      var t = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : {};
      if (!this.ready || !window.HTMLCanvasElement) return null;
      var e,
          i,
          a,
          n,
          o,
          h,
          r,
          s,
          c,
          d,
          l,
          p,
          m,
          u = this.canvasData,
          h = (w = this.image, e = this.imageData, i = u, y = t, a = e.aspectRatio, n = e.naturalWidth, b = e.naturalHeight, o = void 0 === (m = e.rotate) ? 0 : m, h = void 0 === (v = e.scaleX) ? 1 : v, g = void 0 === (l = e.scaleY) ? 1 : l, r = i.aspectRatio, s = i.naturalWidth, c = i.naturalHeight, d = void 0 === (p = y.fillColor) ? "transparent" : p, x = y.imageSmoothingEnabled, f = void 0 === x || x, v = void 0 === (m = y.imageSmoothingQuality) ? "low" : m, l = void 0 === (e = y.maxWidth) ? 1 / 0 : e, p = void 0 === (i = y.maxHeight) ? 1 / 0 : i, m = void 0 === (x = y.minWidth) ? 0 : x, i = void 0 === (e = y.minHeight) ? 0 : e, y = (x = document.createElement("canvas")).getContext("2d"), e = Lt({
        aspectRatio: r,
        width: l,
        height: p
      }), r = Lt({
        aspectRatio: r,
        width: m,
        height: i
      }, "cover"), s = Math.min(e.width, Math.max(r.width, s)), c = Math.min(e.height, Math.max(r.height, c)), p = Lt({
        aspectRatio: a,
        width: l,
        height: p
      }), i = Lt({
        aspectRatio: a,
        width: m,
        height: i
      }, "cover"), n = Math.min(p.width, Math.max(i.width, n)), b = Math.min(p.height, Math.max(i.height, b)), b = [-n / 2, -b / 2, n, b], x.width = ct(s), x.height = ct(c), y.fillStyle = d, y.fillRect(0, 0, s, c), y.save(), y.translate(s / 2, c / 2), y.rotate(o * Math.PI / 180), y.scale(h, g), y.imageSmoothingEnabled = f, y.imageSmoothingQuality = v, y.drawImage.apply(y, [w].concat(T(b.map(function (t) {
        return Math.floor(ct(t));
      })))), y.restore(), x);
      if (!this.cropped) return h;
      var g = this.getData(),
          f = g.x,
          v = g.y,
          w = g.width,
          b = g.height,
          y = h.width / Math.floor(u.naturalWidth);
      1 != y && (f *= y, v *= y, w *= y, b *= y);
      var x = w / b,
          g = Lt({
        aspectRatio: x,
        width: t.maxWidth || 1 / 0,
        height: t.maxHeight || 1 / 0
      }),
          u = Lt({
        aspectRatio: x,
        width: t.minWidth || 0,
        height: t.minHeight || 0
      }, "cover"),
          x = Lt({
        aspectRatio: x,
        width: t.width || (1 != y ? h.width : w),
        height: t.height || (1 != y ? h.height : b)
      }),
          y = x.width,
          x = x.height,
          y = Math.min(g.width, Math.max(u.width, y)),
          x = Math.min(g.height, Math.max(u.height, x)),
          g = document.createElement("canvas"),
          u = g.getContext("2d");
      g.width = ct(y), g.height = ct(x), u.fillStyle = t.fillColor || "transparent", u.fillRect(0, 0, y, x);
      x = t.imageSmoothingEnabled, t = t.imageSmoothingQuality;
      u.imageSmoothingEnabled = void 0 === x || x, t && (u.imageSmoothingQuality = t);
      var M,
          C,
          D,
          B,
          k,
          x = h.width,
          t = h.height,
          f = f,
          v = v;
      f <= -w || x < f ? B = C = M = f = 0 : f <= 0 ? (C = -f, f = 0, B = M = Math.min(x, w + f)) : f <= x && (C = 0, B = M = Math.min(w, x - f)), M <= 0 || v <= -b || t < v ? k = D = O = v = 0 : v <= 0 ? (D = -v, v = 0, k = O = Math.min(t, b + v)) : v <= t && (D = 0, k = O = Math.min(b, t - v));
      var O = [f, v, M, O];
      return 0 < B && 0 < k && O.push(C * (w = y / w), D * w, B * w, k * w), u.drawImage.apply(u, [h].concat(T(O.map(function (t) {
        return Math.floor(ct(t));
      })))), g;
    },
    setAspectRatio: function setAspectRatio(t) {
      var e = this.options;
      return this.disabled || _(t) || (e.aspectRatio = Math.max(0, t) || NaN, this.ready && (this.initCropBox(), this.cropped && this.renderCropBox())), this;
    },
    setDragMode: function setDragMode(t) {
      var e,
          i,
          a = this.options,
          n = this.dragBox,
          o = this.face;
      return this.ready && !this.disabled && (i = a.movable && t === w, a.dragMode = t = (e = t === v) || i ? t : b, wt(n, g, t), ut(n, s, e), ut(n, u, i), a.cropBoxMovable || (wt(o, g, t), ut(o, s, e), ut(o, u, i))), this;
    }
  },
      jt = h.Cropper,
      It = function () {
    function i(t) {
      var e = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : {};
      if (!function (t, e) {
        if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function");
      }(this, i), !t || !Z.test(t.tagName)) throw new Error("The first argument is required and must be an <img> or <canvas> element.");
      this.element = t, this.options = rt({}, G, it(e) && e), this.cropped = !1, this.disabled = !1, this.pointers = {}, this.ready = !1, this.reloading = !1, this.replaced = !1, this.sized = !1, this.sizing = !1, this.init();
    }

    var t, e, a;
    return t = i, a = [{
      key: "noConflict",
      value: function value() {
        return window.Cropper = jt, i;
      }
    }, {
      key: "setDefaults",
      value: function value(t) {
        rt(G, it(t) && t);
      }
    }], (e = [{
      key: "init",
      value: function value() {
        var t,
            e = this.element,
            i = e.tagName.toLowerCase();

        if (!e[c]) {
          if (e[c] = this, "img" === i) {
            if (this.isImg = !0, t = e.getAttribute("src") || "", !(this.originalUrl = t)) return;
            t = e.src;
          } else "canvas" === i && window.HTMLCanvasElement && (t = e.toDataURL());

          this.load(t);
        }
      }
    }, {
      key: "load",
      value: function value(t) {
        var e,
            i,
            a,
            n,
            o,
            h,
            r = this;
        t && (this.url = t, this.imageData = {}, e = this.element, (i = this.options).rotatable || i.scalable || (i.checkOrientation = !1), i.checkOrientation && window.ArrayBuffer ? Q.test(t) ? K.test(t) ? this.read((h = (h = t).replace(Yt, ""), a = atob(h), h = new ArrayBuffer(a.length), ht(n = new Uint8Array(h), function (t, e) {
          n[e] = a.charCodeAt(e);
        }), h)) : this.clone() : (o = new XMLHttpRequest(), h = this.clone.bind(this), this.reloading = !0, (this.xhr = o).onabort = h, o.onerror = h, o.ontimeout = h, o.onprogress = function () {
          o.getResponseHeader("content-type") !== q && o.abort();
        }, o.onload = function () {
          r.read(o.response);
        }, o.onloadend = function () {
          r.reloading = !1, r.xhr = null;
        }, i.checkCrossOrigin && Et(t) && e.crossOrigin && (t = Wt(t)), o.open("GET", t, !0), o.responseType = "arraybuffer", o.withCredentials = "use-credentials" === e.crossOrigin, o.send()) : this.clone());
      }
    }, {
      key: "read",
      value: function value(t) {
        var e = this.options,
            i = this.imageData,
            a = Xt(t),
            n = 0,
            o = 1,
            h = 1;
        1 < a && (this.url = function (t, e) {
          for (var i = [], a = new Uint8Array(t); 0 < a.length;) {
            i.push(zt.apply(null, ot(a.subarray(0, 8192)))), a = a.subarray(8192);
          }

          return "data:".concat(e, ";base64,").concat(btoa(i.join("")));
        }(t, q), n = (a = function (t) {
          var e = 0,
              i = 1,
              a = 1;

          switch (t) {
            case 2:
              i = -1;
              break;

            case 3:
              e = -180;
              break;

            case 4:
              a = -1;
              break;

            case 5:
              e = 90, a = -1;
              break;

            case 6:
              e = 90;
              break;

            case 7:
              e = 90, i = -1;
              break;

            case 8:
              e = -90;
          }

          return {
            rotate: e,
            scaleX: i,
            scaleY: a
          };
        }(a)).rotate, o = a.scaleX, h = a.scaleY), e.rotatable && (i.rotate = n), e.scalable && (i.scaleX = o, i.scaleY = h), this.clone();
      }
    }, {
      key: "clone",
      value: function value() {
        var t = this.element,
            e = this.url,
            i = t.crossOrigin,
            a = e;
        this.options.checkCrossOrigin && Et(e) && (i = i || "anonymous", a = Wt(e)), this.crossOrigin = i, this.crossOriginUrl = a;
        var n = document.createElement("img");
        i && (n.crossOrigin = i), n.src = a || e, n.alt = t.alt || "The image to crop", (this.image = n).onload = this.start.bind(this), n.onerror = this.stop.bind(this), pt(n, l), t.parentNode.insertBefore(n, t.nextSibling);
      }
    }, {
      key: "start",
      value: function value() {
        var i = this,
            t = this.image;
        t.onload = null, t.onerror = null, this.sizing = !0;

        function e(t, e) {
          rt(i.imageData, {
            naturalWidth: t,
            naturalHeight: e,
            aspectRatio: t / e
          }), i.initialImageData = rt({}, i.imageData), i.sizing = !1, i.sized = !0, i.build();
        }

        var a,
            n,
            o = h.navigator && /(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(h.navigator.userAgent);
        !t.naturalWidth || o ? (a = document.createElement("img"), n = document.body || document.documentElement, (this.sizingImage = a).onload = function () {
          e(a.width, a.height), o || n.removeChild(a);
        }, a.src = t.src, o || (a.style.cssText = "left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;", n.appendChild(a))) : e(t.naturalWidth, t.naturalHeight);
      }
    }, {
      key: "stop",
      value: function value() {
        var t = this.image;
        t.onload = null, t.onerror = null, t.parentNode.removeChild(t), this.image = null;
      }
    }, {
      key: "build",
      value: function value() {
        var t, e, i, a, n, o, h, r, s;
        this.sized && !this.ready && (t = this.element, e = this.options, i = this.image, a = t.parentNode, (s = document.createElement("div")).innerHTML = '<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>', o = (n = s.querySelector(".".concat(c, "-container"))).querySelector(".".concat(c, "-canvas")), h = n.querySelector(".".concat(c, "-drag-box")), s = (r = n.querySelector(".".concat(c, "-crop-box"))).querySelector(".".concat(c, "-face")), this.container = a, this.cropper = n, this.canvas = o, this.dragBox = h, this.cropBox = r, this.viewBox = n.querySelector(".".concat(c, "-view-box")), this.face = s, o.appendChild(i), pt(t, A), a.insertBefore(n, t.nextSibling), this.isImg || mt(i, l), this.initPreview(), this.bind(), e.initialAspectRatio = Math.max(0, e.initialAspectRatio) || NaN, e.aspectRatio = Math.max(0, e.aspectRatio) || NaN, e.viewMode = Math.max(0, Math.min(3, Math.round(e.viewMode))) || 0, pt(r, A), e.guides || pt(r.getElementsByClassName("".concat(c, "-dashed")), A), e.center || pt(r.getElementsByClassName("".concat(c, "-center")), A), e.background && pt(n, "".concat(c, "-bg")), e.highlight || pt(s, p), e.cropBoxMovable && (pt(s, u), wt(s, g, k)), e.cropBoxResizable || (pt(r.getElementsByClassName("".concat(c, "-line")), A), pt(r.getElementsByClassName("".concat(c, "-point")), A)), this.render(), this.ready = !0, this.setDragMode(e.dragMode), e.autoCrop && this.crop(), this.setData(e.data), at(e.ready) && Dt(t, "ready", e.ready, {
          once: !0
        }), Bt(t, "ready"));
      }
    }, {
      key: "unbuild",
      value: function value() {
        this.ready && (this.ready = !1, this.unbind(), this.resetPreview(), this.cropper.parentNode.removeChild(this.cropper), mt(this.element, A));
      }
    }, {
      key: "uncreate",
      value: function value() {
        this.ready ? (this.unbuild(), this.ready = !1, this.cropped = !1) : this.sizing ? (this.sizingImage.onload = null, this.sizing = !1, this.sized = !1) : this.reloading ? (this.xhr.onabort = null, this.xhr.abort()) : this.image && this.stop();
      }
    }]) && n(t.prototype, e), a && n(t, a), i;
  }();

  return rt(It.prototype, Rt, St, r, o, t, At), It;
});
$(function () {
  var projectId = $(window.location.pathname.split("/")).get(-1);
  $("#verify_phone_open, #verified_phone_open").on("click", function () {
    // 1 - Verifica se o input não é vazio ou inválido via regex
    if ($("#support_phone").val() && testinput(/^\([1-9]{2}\)\s(?:[2-8]|9[1-9])[0-9]{3}\-[0-9]{4}$/, $("#support_phone").val())) {
      $("#support_phone").removeClass("warning-input"); // Abre o modal

      $("#modal_verify_phone").modal("show");
    } else {
      // Caso contrario alerta ao usuário destacando o input
      $("#support_phone").addClass("warning-input");
    }
  });
  $("#remove_phone").on("click", function () {
    $('#support_phone').val("");
    $('#remove_phone').hide('slow');
    $('#verified_phone_open').hide('slow');
    $('#verify_phone_open').show('slow');
    $('#checkout_editor').submit();
  });
  $("#modal_verify_phone").on("hidden.bs.modal", function () {
    $('.code-input').val("");
    $('#modal_verify_content').hide();
    $('#modal_verified_content').hide();
  });
  $("#modal_verify_phone").on("shown.bs.modal", function () {
    $('#modal_verify_content').show('slow');
    $("#phone_modal").empty();
    $("#phone_modal").append($("#support_phone").val()); // 2 - Envia o código;

    sendCode();
  });
  $("#verify_phone").on("click", function (e) {
    e.preventDefault();
    verifyPhone();
  });
  $("#resend_code").on("click", function () {
    if ($(this).hasClass("disabled")) {
      return;
    } else {
      sendCode();
    }
  });

  function verifyPhone() {
    loadOnAny("#modal_verify_content", false, {
      styles: {
        container: {
          minHeight: "350px",
          minWidth: "600px"
        }
      }
    });
    var config_id = $("#checkout_editor #checkout_editor_id").val();
    var confirmationCode = getCodeInput();
    $.ajax({
      method: "POST",
      url: "/api/checkouteditor/verifysupportphone",
      dataType: "json",
      headers: {
        Authorization: $('meta[name="access-token"]').attr("content"),
        Accept: "application/json"
      },
      data: {
        id: config_id,
        verification_code: confirmationCode
      },
      success: function success(response) {
        alertCustom("success", response.message);
        $('#verify_phone_open').hide();
        $('#verified_phone_open').show();
        $('#remove_phone').show();
        $('#modal_verify_content').hide();
        loadOnAny("#modal_verified_content", true);
      },
      error: function error(response) {
        startTimer();
        $(".code-input").addClass("warning-input");
        $(".verify-error").show("fast", "linear"); // errorAjaxResponse(response);

        loadOnAny("#modal_verify_content", true);
      }
    });
  }

  function sendCode() {
    startTimer(); // Ajax para verificar telefone

    var config_id = $("#checkout_editor #checkout_editor_id").val();
    var support_phone = $("#checkout_editor #support_phone").masked();
    $.ajax({
      method: "POST",
      url: "/api/checkouteditor/sendsupportphoneverification",
      dataType: "json",
      headers: {
        Authorization: $('meta[name="access-token"]').attr("content"),
        Accept: "application/json"
      },
      data: {
        id: config_id,
        support_phone: support_phone
      },
      success: function success(response) {
        alertCustom("success", response.message);
      },
      error: function error(response) {
        errorAjaxResponse(response);
      }
    });
  }

  function startTimer() {
    $("#resend_code").addClass("disabled");
    $("#timer").show("fast", "linear");
    display = document.querySelector("#timer");
    var timer = 59,
        seconds;
    var timeCounter = setInterval(function () {
      seconds = timer < 10 ? "0" + timer : timer;
      display.textContent = "Aguarde (".concat(seconds, ")");

      if (--timer < 0) {
        clearInterval(timeCounter); // Ao zerar o contador libera o reenvio do código.

        $("#resend_code").removeClass("disabled");
        $("#timer").hide("fast", "linear");
      }
    }, 1000);
  }

  function testinput(re, str) {
    if (re.test(str)) {
      return true;
    } else {
      return false;
    }
  }

  function getCodeInput() {
    var code = _toConsumableArray2(document.getElementsByName("verify-phone-code")).filter(function (_ref9) {
      var name = _ref9.name;
      return name;
    }).map(function (_ref10) {
      var value = _ref10.value;
      return value;
    }).join("");

    return code;
  }
});
$(document).ready(function () {
  var _this3 = this;

  // ----------------------- Funções de Botão ----------------------------
  $("#default_finish_color").on("change", function () {
    if ($(this).is(":checked")) {
      $(":root").css("--finish-button-color", "#23D07D");
      $("#color_buy_button").prop("disabled", true);
      $("#color_buy_button").css("opacity", "0.3");
    } else {
      $(":root").css("--finish-button-color", $("#color_buy_button").val());
      $("#color_buy_button").prop("disabled", false);
      $("#color_buy_button").css("opacity", "1");
    }
  });
  $("#checkout-type").on("click", ".btn", function () {
    $(this).addClass("btn-active").siblings().removeClass("btn-active");
  });
  $("#color_primary").on("input", function () {
    $(":root").css("--primary-color", $(this).val());
    $('.accepted-payment-card-creditcard svg path').fill = $(this).val();
  });
  $("#color_secondary").on("input", function () {
    $(":root").css("--secondary-color", $(this).val());
  });
  $("#color_buy_button").on("input", function () {
    $(":root").css("--finish-button-color", $(this).val());
  });
  $("#download_template_banner").on("click", function (e) {
    e.preventDefault();
    window.location.href = $(this).attr('data-href');
  });
  $(".accept-payment-type").on("change", function () {
    var form = document.querySelector("#checkout_editor");
    var checkboxes = form.querySelectorAll(".accept-payment-type");
    var checkboxLength = checkboxes.length;
    var oneChecked = false;

    for (var i = 0; i < checkboxLength; i++) {
      if (checkboxes[i].checked) oneChecked = true;
    }

    if (!oneChecked) {
      $(this).prop("checked", true);
    }
  });
  $(".accept-payment-method").on("change", function () {
    var form = document.querySelector("#checkout_editor");
    var checkboxes = form.querySelectorAll(".accept-payment-method");
    var checkboxLength = checkboxes.length;
    var oneChecked = false;

    for (var i = 0; i < checkboxLength; i++) {
      if (checkboxes[i].checked) oneChecked = true;
    }

    if (!oneChecked) {
      $(this).prop("checked", true);
    } else {
      if ($(this).is(":checked")) {
        $($(this).attr("data-preview")).show("slow", "swing");
        $("." + $(this).attr("data-target")).slideDown("slow", "swing");
      } else {
        $($(this).attr("data-preview")).hide("slow", "swing");
        $("." + $(this).attr("data-target")).slideUp("slow", "swing");
      }
    }
  });
  $("input[name=checkout_banner_type]").on("click", function () {
    var bannerType = $(this).val();

    if (bannerType === "0") {
      $(".preview-banner").addClass("retangle-banner");
      $(".logo-div").addClass("has-retangle-banner");
      $(".preview-banner").removeClass("wide-banner");
    } else {
      $(".preview-banner").removeClass("retangle-banner");
      $(".logo-div").removeClass("has-retangle-banner");
      $(".preview-banner").addClass("wide-banner");
    }
  });
  $("input[name=checkout_type_enum]").on("click", function () {
    var checkoutType = $(this).val();

    if (checkoutType === "1") {
      $(".visual-content-left").addClass("three-steps");
      $(".visual-content-left").removeClass("unique");
      $(".visual-content-mobile").addClass("three-steps");
      $(".visual-content-mobile").removeClass("unique");
      $(".steps-lines").slideDown("slow", "swing");
      $("#finish_button_preview_desktop_visual").slideDown("slow", "swing");
      $("#finish_button_preview_mobile_visual").slideDown("slow", "swing");
    } else {
      $(".visual-content-left").removeClass("three-steps");
      $(".visual-content-left").addClass("unique");
      $(".visual-content-mobile").removeClass("three-steps");
      $(".visual-content-mobile").addClass("unique");
      $(".steps-lines").slideUp("slow", "swing");
      $("#finish_button_preview_desktop_visual").slideUp("slow", "swing");
      $("#finish_button_preview_mobile_visual").slideUp("slow", "swing");
    }
  });
  $(".add-tag").on("click", function (e) {
    e.preventDefault();
    var input = $(this).attr("data-input");
    $(input).val($(input).val() + " " + $(this).attr("data-tag") + " ");
    $(input).focus();
  }); // ----------------- Função de Collapse --------------------

  $(".switch-checkout").off().on("click", function () {
    var checked = $(this).prop("checked");

    if (checked) {
      $("." + $(this).attr("data-target")).slideDown("slow", "swing");
      $($(this).attr("data-preview")).slideDown("slow", "swing");
      $($(this).attr("data-enable")).removeClass('low-opacity');
    } else {
      $("." + $(this).attr("data-target")).slideUp("slow", "swing");
      $($(this).attr("data-preview")).slideUp("slow", "swing");
      $($(this).attr("data-enable")).addClass('low-opacity');
    }
  });
  $(".switch-checkout-accordion").off().on("click", function () {
    var checked = $(this).prop("checked");

    if (checked) {
      $("." + $(this).attr("data-target")).slideDown("slow", "swing");
      $("." + $(this).attr("data-toggle")).slideUp("slow", "swing");
      var primaryColor = $("#color_primary").val();
      var secondaryColor = $("#color_secondary").val();
      var finishButtonColor = "#23D07D";

      if (!$("#default_finish_color").is(":checked")) {
        var finishButtonColor = $("#color_buy_button").val();
      }

      $(":root").css("--primary-color", primaryColor);
      $(":root").css("--secondary-color", secondaryColor);
      $(":root").css("--finish-button-color", finishButtonColor);
      $('.theme-ready-first-line').addClass('low-opacity');
    } else {
      $("." + $(this).attr("data-target")).slideUp("slow", "swing");
      $("." + $(this).attr("data-toggle")).slideDown("slow", "swing");
      var primaryColor = $('label[for="' + $("input[name=theme_enum]:checked").attr("id") + '"]').children(".theme-primary-color").css("background-color");
      var secondaryColor = $('label[for="' + $("input[name=theme_enum]:checked").attr("id") + '"]').children(".theme-secondary-color").css("background-color");
      $(":root").css("--primary-color", primaryColor);
      $(":root").css("--secondary-color", secondaryColor);
      $(":root").css("--finish-button-color", primaryColor);
      $('.theme-ready-first-line').removeClass('low-opacity');
    }
  }); // ----------------- Função Colors --------------------

  $(".theme-radio").on("click", function () {
    var primaryColor = $('label[for="' + $(this).attr("id") + '"]').children(".theme-primary-color").css("background-color");
    var secondaryColor = $('label[for="' + $(this).attr("id") + '"]').children(".theme-secondary-color").css("background-color");
    $(":root").css("--primary-color", primaryColor);
    $(":root").css("--secondary-color", secondaryColor);
    $(":root").css("--finish-button-color", primaryColor);
  });

  (function hideToogleAccordions() {
    if ($(".switch-checkout-accordion").is("checked")) {
      $("." + $(".switch-checkout-accordion").attr("data-toggle")).slideUp("slow", "swing");
    } else {
      $("." + $(".switch-checkout-accordion").attr("data-target")).slideUp("slow", "swing");
    }
  })();

  $("#whatsapp_phone").mask("(00) 00000-0000");
  $("#download_template_banner").on("click", function (e) {
    e.preventDefault();
    window.open($(_this3).attr("data-href"), "_blank");
  });
  $("#post_purchase_message_title").on("input", function () {
    $(".shop-message-preview-title").empty();
    $(".shop-message-preview-title").append($(this).val());
  }); // Enable all tooltips

  $('[data-toggle="tooltip"]').tooltip();
  $("input[name=number]").on("input", function () {
    $(_this3).attr("value", $(_this3).val().replace(/[^0-9.]/g, "").replace(/(\..*)\./g, "$1"));
  });
  $(".code-input").on("input", function () {
    $(_this3).attr("value", $(_this3).val().replace(/[^0-9.]/g, "").replace(/(\..*)\./g, "$1"));
  });
  $(".preview-type").on("change", function () {
    if ($(this).add(":checked")) {
      $("#" + $(this).attr("data-toggle")).fadeOut("slow", "swing");
      $("#" + $(this).attr("data-target")).fadeIn("slow", "swing");
    }
  });
  $(".switch-labeled").on("input", function () {
    if ($(this).is(":checked")) {
      $("#" + $(this).attr("data-label")).addClass("active");
    } else {
      $("#" + $(this).attr("data-label")).removeClass("active");
    }
  });
  $("#checkout_editor input[type=checkbox]").on("change", function () {
    if ($(this).is(":checked")) {
      $(this).val(1);
    } else {
      $(this).val(0);
    }
  });
  $("input[name='checkout_favicon_type'").on("change", function () {
    if ($(this).val() == '1') {
      $("#upload_favicon").addClass('low-opacity');
    } else {
      $("#upload_favicon").removeClass('low-opacity');
    }
  });
  $('#checkout_banner_enabled').on('change', function () {
    if ($(this).is(':checked')) {
      $("#banner_type").fadeIn("slow", "swing");
      $('.logo-div').addClass('has-banner');
      $('.logo-preview-container').addClass('has-banner');
      $('.menu-bar-mobile').hide('slow');
      $('.purchase-menu-mobile').fadeIn('slow');
    } else {
      $("#banner_type").fadeOut("slow", "swing");
      $('.logo-div').removeClass('has-banner');
      $('.logo-preview-container').removeClass('has-banner');
      $('.menu-bar-mobile').show('slow');
      $('.purchase-menu-mobile').fadeOut('slow');
    }
  });
  $('#installments_limit').on('change', function () {
    var installmentsLimit = parseInt($("#installments_limit option:selected").val());
    var interestFreeInstallments = parseInt($("#interest_free_installments option:selected").val());
    var preselectedInstallment = parseInt($("#preselected_installment option:selected").val());
    $("#interest_free_installments option").remove();
    $("#preselected_installment option").remove();

    if (installmentsLimit < interestFreeInstallments) {
      interestFreeInstallments = installmentsLimit;
    }

    for (var installments = 1; installments < installmentsLimit + 1; installments++) {
      $("#interest_free_installments").append("<option \n                    value=\"".concat(installments, "\" ").concat(installments == interestFreeInstallments ? 'selected' : '', ">\n                    ").concat(installments, "x \n                </option>"));
    }

    if (installmentsLimit < preselectedInstallment) {
      preselectedInstallment = installmentsLimit;
    }

    for (var installments = 1; installments < installmentsLimit + 1; installments++) {
      $("#preselected_installment").append("<option \n                    value=\"".concat(installments, "\" ").concat(installments == preselectedInstallment ? 'selected' : '', ">\n                    ").concat(installments, "x \n                </option>"));
    }
  });
  $('#selector-tooltip').on({
    mouseenter: function mouseenter() {
      $('#selector-tooltip-container').fadeIn();
    },
    mouseleave: function mouseleave() {
      $('#selector-tooltip-container').fadeOut();
    }
  });
  $('#favicon-tooltip').on({
    mouseenter: function mouseenter() {
      $('#favicon-tooltip-container').fadeIn();
    },
    mouseleave: function mouseleave() {
      $('#favicon-tooltip-container').fadeOut();
    }
  }); // ---------------- Functions Table - START ---------------------

  $('.selectable-notification').on('change', function () {
    var form = document.querySelector("#checkout_editor");
    var selectableCheckboxes = form.querySelectorAll(".selectable-notification:checked");

    if (selectableCheckboxes.length > 0 && selectableCheckboxes.length < 4) {
      $('#selectable-all-notification').addClass('dash-check');
      $('#selectable-all-notification').prop('checked', true);
    }

    if (selectableCheckboxes.length == 0) {
      $('#selectable-all-notification').prop('checked', false);
      $('#selectable-all-notification').removeClass('dash-check');
    }

    if (selectableCheckboxes.length == 4) {
      $('#selectable-all-notification').removeClass('dash-check');
    }
  });
  $('#selectable-all-notification').on('click', function () {
    if ($(this).is(':checked')) {
      $('.selectable-notification').prop('checked', true);
    } else {
      $('.selectable-notification').prop('checked', false);
      $('#selectable-all-notification').removeClass('dash-check');
    }
  }); // ---------------- Functions Table - END ---------------------   
});

function replacePreview(name, src) {
  var fname = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : "";
  var input = $('input[id="' + name + '"]');
  var wrapper = input.closest(".dropify-wrapper");
  var preview = wrapper.find(".dropify-preview");
  var filename = wrapper.find(".dropify-filename-inner");
  var render = wrapper.find(".dropify-render").html("");
  input.val("").attr("title", fname);
  wrapper.removeClass("has-error").addClass("has-preview");
  filename.html(fname);
  render.append($('<img style="width: 100%; border-radius: 8px; object-fit: cover;" />').attr("src", src).css("height", input.attr("height")));
  preview.fadeIn();
}

var inputElements = _toConsumableArray2(document.querySelectorAll("input.code-input"));

inputElements.forEach(function (ele, index) {
  ele.addEventListener("keydown", function (e) {
    if (e.keyCode === 8 && e.target.value === "") inputElements[Math.max(0, index - 1)].focus();
  });
  ele.addEventListener("input", function (e) {
    var _e$target$value = _toArray(e.target.value),
        first = _e$target$value[0],
        rest = _e$target$value.slice(1);

    e.target.value = first !== null && first !== void 0 ? first : "";

    if (index !== inputElements.length - 1 && first !== undefined) {
      inputElements[index + 1].focus();
      inputElements[index + 1].value = rest.join("");
      inputElements[index + 1].dispatchEvent(new Event("input"));
    }
  });
}); // const { fill } = require("lodash");

$(function () {
  var projectId = $(window.location.pathname.split("/")).get(-1);
  $("#tab-checkout").on("click", function () {
    loadData();
  });
  var checkout = null;

  function loadData() {
    loadOnAny(".checkout-container", false, {
      styles: {
        container: {
          minHeight: "500px"
        }
      }
    }); // ----------------- Editor de Texto --------------------

    var formats = ["bold", "italic", "underline"];
    var quillTextbar = new Quill("#topbar_content", {
      modules: {
        toolbar: "#topbar_content_toolbar_container"
      },
      placeholder: "",
      theme: "snow",
      formats: formats
    });
    var limit = 250;
    quillTextbar.on("text-change", function () {
      if (quillTextbar.getLength() > limit) {
        quillTextbar.deleteText(limit, quillTextbar.getLength());
      } // $("#save_changes").fadeIn("slow", "swing");

    });
    quillTextbar.on('selection-change', function (range, oldRange, source) {
      if (range === null && oldRange !== null) {
        $('#topbar_content').removeClass('focus-in');
      } else if (range !== null && oldRange === null) {
        $('#topbar_content').addClass('focus-in');
      }
    });
    var quillThanksPage = new Quill("#post_purchase_message_content", {
      modules: {
        toolbar: "#post_purchase_message_content_toolbar_container"
      },
      theme: "snow",
      formats: formats
    });
    quillThanksPage.on("text-change", function () {
      if (quillThanksPage.getLength() < limit) {
        $(".shop-message-preview-content").empty();
        $(".shop-message-preview-content").append($(quillThanksPage.root.innerHTML));
        $("#save_changes").fadeIn("slow", "swing");
      } else {
        quillThanksPage.deleteText(limit, quillThanksPage.getLength());
      }
    });
    quillThanksPage.on('selection-change', function (range, oldRange, source) {
      if (range === null && oldRange !== null) {
        $('#post_purchase_message_content').removeClass('focus-in');
      } else if (range !== null && oldRange === null) {
        $('#post_purchase_message_content').addClass('focus-in');
      }
    });
    $.ajax({
      method: "GET",
      url: "/api/checkouteditor/" + projectId,
      dataType: "json",
      headers: {
        Authorization: $('meta[name="access-token"]').attr("content"),
        Accept: "application/json"
      },
      success: function success(response) {
        checkout = response.data;

        if (checkout) {
          fillForm(checkout);
          $("#checkout_editor").on("input", function () {
            $("#save_changes").fadeIn("slow", "swing");
          });
          $('.sirius-select').on("change", function () {
            $("#save_changes").fadeIn("slow", "swing");
          }); // $('#save_changes').hide();
        }

        $(document).on("submit", "#checkout_editor", function (e) {
          e.preventDefault();
          $('.error-input').removeClass('error-input');
          $('.checkout-error').hide();
          $('#save_load').fadeIn('slow', 'linear');
          $('#save_changes').fadeOut('slow', 'linear');
          $('.select-type').addClass('low-opacity');
          $('.visual').addClass('low-opacity');
          $('.payment').addClass('low-opacity');
          $('.post-purchase-pages').addClass('low-opacity');
          $('.preview').addClass('low-opacity');
          var checkoutForm = document.getElementById("checkout_editor");
          var formData = new FormData(checkoutForm);

          if (quillTextbar.getText().trim().length === 0) {
            formData.append("topbar_content", '');
          } else {
            formData.append("topbar_content", $("#topbar_content").children().html());
          }

          if (quillThanksPage.getText().trim().length === 0) {
            formData.append("post_purchase_message_content", '');
          } else {
            formData.append("post_purchase_message_content", $("#post_purchase_message_content").children().html());
          }

          if (!formData.get('automatic_discount_credit_card')) {
            $('#automatic_discount_credit_card').val(0);
            formData.append("automatic_discount_credit_card", 0);
          }

          if (!formData.get('automatic_discount_bank_slip')) {
            $('#automatic_discount_bank_slip').val(0);
            formData.append("automatic_discount_bank_slip", 0);
          }

          if (!formData.get('automatic_discount_pix')) {
            $('#automatic_discount_pix').val(0);
            formData.append("automatic_discount_pix", 0);
          }

          if (!$("#theme_ready_enabled").is(":checked")) {
            var primaryColor = $('label[for="' + $("input[name=theme_enum]:checked").attr("id") + '"]').children(".theme-primary-color").attr("data-color");
            var secondaryColor = $('label[for="' + $("input[name=theme_enum]:checked").attr("id") + '"]').children(".theme-secondary-color").attr("data-color");
            formData.append("color_primary", primaryColor);
            formData.append("color_secondary", secondaryColor);
            formData.append("color_buy_button", primaryColor);
          } else {
            formData.set("theme_enum", 0);
          }

          if ($("#default_finish_color").is(":checked")) {
            formData.append("color_buy_button", '#23d07d');
          }

          $("#checkout_editor input[type=checkbox]:not(:checked)").map(function () {
            formData.append($(this).attr("name"), $(this).is(":checked") ? 1 : 0);
          }); // Printar Form
          // for (var form of formData.entries()) {
          //     console.log(form[0] + ": " + form[1]);
          // }

          if (validadeForm(formData)) {
            $.ajax({
              method: "POST",
              url: "/api/checkouteditor/" + checkout.id,
              processData: false,
              cache: false,
              contentType: false,
              dataType: "json",
              headers: {
                Authorization: $('meta[name="access-token"]').attr("content"),
                Accept: "application/json"
              },
              data: formData,
              success: function success() {
                $('.select-type').removeClass('low-opacity');
                $('.visual').removeClass('low-opacity');
                $('.payment').removeClass('low-opacity');
                $('.post-purchase-pages').removeClass('low-opacity');
                $('.preview').removeClass('low-opacity');
                $('#save_load').fadeOut('slow', 'linear');
                $('#save_success').fadeIn('slow', 'linear');
                setTimeout(function () {
                  $('#save_success').fadeOut('slow', 'linear');
                }, 4000);
              },
              error: function error(response) {
                console.log(response.responseText);
                $('.select-type').removeClass('low-opacity');
                $('.visual').removeClass('low-opacity');
                $('.payment').removeClass('low-opacity');
                $('.post-purchase-pages').removeClass('low-opacity');
                $('.preview').removeClass('low-opacity');
                $('#save_load').fadeOut('slow', 'linear');
                $('#save_error').fadeIn('slow', 'linear');
                setTimeout(function () {
                  $('#save_error').fadeOut('slow', 'linear');
                }, 4000);
              }
            });
          } else {
            $('.select-type').removeClass('low-opacity');
            $('.visual').removeClass('low-opacity');
            $('.payment').removeClass('low-opacity');
            $('.post-purchase-pages').removeClass('low-opacity');
            $('.preview').removeClass('low-opacity');
            $('#save_load').fadeOut('slow', 'linear');
            $('#save_empty_fields').fadeIn('slow', 'linear');
            setTimeout(function () {
              $('#save_empty_fields').fadeOut('slow', 'linear');
            }, 4000);
          }
        });
        setTimeout(function () {
          $('#save_changes').hide();
        }, 0);
        loadOnAny(".checkout-container", true);
      },
      error: function error(response) {
        errorAjaxResponse(response);
        $('#checkout_editor').addClass('low-opacity');
        $("#checkout_logo").dropify({
          messages: {
            "default": "",
            replace: "",
            error: ""
          },
          error: {
            fileSize: "O tamanho máximo do arquivo deve ser {{ value }}.",
            fileExtension: "A imagem deve ser algum dos formatos permitidos. ({{ value }}).",
            minWidth: "Imagem muito pequena. Sua imagem deve ter um largura minima de {{ value }}}px.",
            minHeight: "Imagem muito pequena. Sua imagem deve ter um altura minima de {{ value }}}px."
          },
          tpl: {
            message: '<div class="dropify-message"><span class="file-icon" /> <p>{{ default }}<span style="color: #2E85EC;">Clique ou arraste e solte aqui</span></p></div>',
            clearButton: '<button type="button" class="dropify-clear o-bin-1"></button>'
          },
          imgFileExtensions: ["png", "jpg", "jpeg"]
        });
        $("#checkout_favicon").dropify({
          messages: {
            "default": "",
            replace: ""
          },
          error: {
            fileSize: "",
            fileExtension: ""
          },
          tpl: {
            message: '<div class="dropify-message"><span class="file-icon" /></div>'
          },
          imgFileExtensions: ["png", "jpg", "jpeg", "ico"]
        });
        $("#checkout_banner").dropify({
          messages: {
            "default": "",
            replace: "",
            remove: "Remover",
            error: ""
          },
          error: {
            fileSize: "O tamanho máximo do arquivo deve ser {{ value }}.",
            fileExtension: "A imagem deve ser algum dos formatos permitidos. ({{ value }})."
          },
          tpl: {
            message: '<div class="dropify-message"><span class="file-icon" /> <p>{{ default }}<span style="color: #2E85EC;">Faça upload do seu banner</span></p></div>',
            clearButton: '<button type="button" class="dropify-clear o-bin-1"></button>'
          },
          imgFileExtensions: ["png", "jpg", "jpeg"]
        });
        loadOnAny(".checkout-container", true);
      }
    });
    $("#cancel_button").on("click", function () {
      fillForm(checkout);
      $("#save_changes").fadeOut("slow", "swing");
    });

    function fillForm(checkout) {
      if (checkout.checkout_type_enum == 1) {
        $("#checkout_editor #checkout_type_steps").prop("checked", true);
        $("#checkout_editor .visual-content-left").addClass("three-steps");
        $("#checkout_editor .visual-content-left").removeClass("unique");
        $("#checkout_editor .visual-content-mobile").addClass("three-steps");
        $("#checkout_editor .visual-content-mobile").removeClass("unique");
        $("#checkout_editor .steps-lines").slideDown("slow", "swing");
        $("#checkout_editor #finish_button_preview_desktop_visual").slideDown("slow", "swing");
        $("#checkout_editor #finish_button_preview_mobile_visual").slideDown("slow", "swing");
      } else {
        $("#checkout_editor #checkout_type_unique").prop("checked", true);
        $("#checkout_editor .visual-content-left").removeClass("three-steps");
        $("#checkout_editor .visual-content-left").addClass("unique");
        $("#checkout_editor .visual-content-mobile").removeClass("three-steps");
        $("#checkout_editor .visual-content-mobile").addClass("unique");
        $("#checkout_editor .steps-lines").slideUp("slow", "swing");
        $("#checkout_editor #finish_button_preview_desktop_visual").slideUp("slow", "swing");
        $("#checkout_editor #finish_button_preview_mobile_visual").slideUp("slow", "swing");
      }

      if (checkout.checkout_logo_enabled == 1) {
        $("#checkout_editor #checkout_logo_enabled").prop("checked", true);
        $("#checkout_editor #checkout_logo_enabled").prop("value", 1);
        $('.logo-content').removeClass('low-opacity');
        $("#checkout_editor .logo-preview-container").show();
      } else {
        $("#checkout_editor #checkout_logo_enabled").prop("checked", false);
        $("#checkout_editor #checkout_logo_enabled").prop("value", 0);
        $('.logo-content').addClass('low-opacity');
        $("#checkout_editor .logo-preview-container").hide();
      }

      if (checkout.checkout_logo) {
        // replacePreview("checkout_logo", checkout.checkout_logo, "Image.jpg");
        $("#logo_preview_mobile").attr("src", checkout.checkout_logo);
        $("#logo_preview_desktop").attr("src", checkout.checkout_logo);
        $("#has_checkout_logo").val("true");
        $("#logo_preview_mobile").fadeIn('slow');
        $("#logo_preview_desktop").fadeIn('slow');
      } else {
        $("#logo_preview_mobile").fadeOut('slow');
        $("#logo_preview_desktop").fadeOut('slow');
      }

      var drEventLogo = $("#checkout_logo").dropify({
        messages: {
          "default": "",
          replace: "",
          error: ""
        },
        error: {
          fileSize: "O tamanho máximo do arquivo deve ser {{ value }}.",
          fileExtension: "A imagem deve ser algum dos formatos permitidos. ({{ value }}).",
          minWidth: "Sua imagem deve ter um largura minima de {{ value }}}px.",
          minHeight: "Sua imagem deve ter um altura minima de {{ value }}}px."
        },
        tpl: {
          message: '<div class="dropify-message"><span class="file-icon" /> <p>{{ default }}<span style="color: #2E85EC;">Clique ou arraste e solte aqui</span></p></div>',
          clearButton: '<button type="button" class="dropify-clear o-bin-1"></button>'
        },
        imgFileExtensions: ["png", "jpg", "jpeg"],
        defaultFile: checkout.checkout_logo ? checkout.checkout_logo : ''
      });
      drEventLogo.on("dropify.fileReady", function (event, element) {
        var files = event.target.files;

        var done = function done(url) {
          $("#logo_preview_mobile").attr("src", url);
          $("#logo_preview_desktop").attr("src", url);
          $("#has_checkout_logo").val("true");
          $("#logo_preview_mobile").fadeIn('slow');
          $("#logo_preview_desktop").fadeIn('slow');
        };

        if (files && files.length > 0) {
          file = files[0];

          if (URL) {
            done(URL.createObjectURL(file));
          } else if (FileReader) {
            reader = new FileReader();

            reader.onload = function (e) {
              done(reader.result);
            };

            reader.readAsDataURL(file);
          }
        }
      });
      drEventLogo.on('dropify.errors', function (event, element) {
        $("#logo_preview_mobile").attr("src", '');
        $("#logo_preview_desktop").attr("src", '');
        $("#logo_preview_mobile").fadeOut('slow');
        $("#logo_preview_desktop").fadeOut('slow');
        $("#has_checkout_logo").val("false");
      });
      drEventLogo.on('dropify.afterClear', function (event, element) {
        $("#has_checkout_logo").val("false");
      });

      if (checkout.checkout_favicon_enabled == 1) {
        $("#checkout_editor #checkout_favicon_enabled").prop("checked", true);
        $("#checkout_editor #checkout_favicon_enabled").prop("value", 1);
        $('.favicon-content').removeClass('low-opacity');
      } else {
        $("#checkout_editor #checkout_favicon_enabled").prop("checked", false);
        $("#checkout_editor #checkout_favicon_enabled").prop("value", 0);
        $('.favicon-content').addClass('low-opacity');
      }

      if (checkout.checkout_favicon_type == '1') {
        $('#favicon_logo').attr("checked", true);
      } else {
        $('#favicon_uploaded').attr("checked", true);
        $('#upload_favicon').removeClass('low-opacity');
      }

      if (checkout.checkout_favicon) {
        $("#has_checkout_favicon").val("true");
      } else {
        $("#has_checkout_favicon").val("false");
      }

      var drEventFavicon = $("#checkout_favicon").dropify({
        messages: {
          "default": "",
          replace: ""
        },
        error: {
          fileSize: "",
          fileExtension: ""
        },
        tpl: {
          message: '<div class="dropify-message"><span class="file-icon" /></div>'
        },
        imgFileExtensions: ["png", "jpg", "jpeg", "ico"],
        defaultFile: checkout.checkout_favicon ? checkout.checkout_favicon : ''
      });
      drEventFavicon.on('dropify.errors', function (event, element) {
        $('#checkout_favicon_error').fadeIn('slow', 'linear');
        $("#has_checkout_favicon").val("false");
      });
      drEventFavicon.on('dropify.fileReady', function (event, element) {
        $('#checkout_favicon_error').hide();
        $("#has_checkout_favicon").val("true");
      });

      if (checkout.checkout_banner) {
        // $("#checkout_banner").attr('src', checkout.checkout_banner);
        $("#preview_banner_img_desktop").attr("src", checkout.checkout_banner);
        $("#preview_banner_img_mobile").attr("src", checkout.checkout_banner);
        $("#has_checkout_banner").val("true");
      }

      var drEventBanner = $("#checkout_banner").dropify({
        messages: {
          "default": "",
          replace: "",
          remove: "Remover",
          error: ""
        },
        error: {
          fileSize: "O tamanho máximo do arquivo deve ser {{ value }}.",
          fileExtension: "A imagem deve ser algum dos formatos permitidos. ({{ value }})."
        },
        tpl: {
          message: '<div class="dropify-message"><span class="file-icon" /> <p>{{ default }}<span style="color: #2E85EC;">Faça upload do seu banner</span></p></div>',
          clearButton: '<button type="button" class="dropify-clear o-bin-1"></button>'
        },
        imgFileExtensions: ["png", "jpg", "jpeg"],
        defaultFile: checkout.checkout_banner ? checkout.checkout_banner : ''
      });
      var bs_modal = $("#modal_banner");
      var image = document.getElementById("cropped_image");
      var cropper, reader, file;
      drEventBanner.on("dropify.fileReady", function (event, element) {
        var files = event.target.files;

        var done = function done(url) {
          image.src = url;
          bs_modal.modal("show");
        };

        if (files && files.length > 0) {
          file = files[0];

          if (URL) {
            done(URL.createObjectURL(file));
          } else if (FileReader) {
            reader = new FileReader();

            reader.onload = function (e) {
              done(reader.result);
            };

            reader.readAsDataURL(file);
          }
        }
      });
      drEventBanner.on('dropify.errors', function (event, element) {
        $("#preview_banner_img_mobile").attr("src", '');
        $("#preview_banner_img_desktop").attr("src", '');
        $("#has_checkout_banner").val("false");
        $("#preview_banner_img_mobile").fadeOut('slow');
        $("#preview_banner_img_desktop").fadeOut('slow');
      });
      drEventBanner.on('dropify.afterClear', function (event, element) {
        $("#has_checkout_banner").val("false");
      });
      $('.dropify-clear').hide(); //  ----------------- Crop Modal ----------------------

      var $dataZoom = $("#dataZoom");
      bs_modal.on("shown.bs.modal", function () {
        cropper = new Cropper(image, {
          highlight: false,
          movable: false,
          viewMode: 3,
          aspectRatio: 1280 / 198,
          zoom: function zoom(e) {
            var ratio = Math.round(e.ratio * 1000) / 10;
            $dataZoom.text(ratio);
          }
        });
      }).on("hidden.bs.modal", function () {
        cropper.destroy();
        cropper = null;
      });
      $("#zoom-in").on("click", function () {
        cropper.zoom(0.1);
      });
      $("#zoom-out").on("click", function () {
        cropper.zoom(-0.1);
      });
      var lastNum;
      $("#zoom-slide").on("input change", function () {
        if (lastNum < $("#zoom-slide").val()) {
          cropper.zoom(0.1);
        } else {
          cropper.zoom(-0.1);
        }

        lastNum = $("#zoom-slide").val();
      });
      $("#crop-reset").on("click", function () {
        cropper.reset();
        $("#zoom-slide").val(0);
      });
      $(".img-profile input").on("click", function (e) {
        e.stopPropagation();
      }).on("change", function () {
        var file = this.files[0];
        var reader = new FileReader();

        reader.onload = function (e) {
          var img = $(".img-profile").addClass("cropping").find("img").attr("src", e.target.result);
          cropper = new Cropper(img[0], {
            aspectRatio: 1,
            minContainerWidth: 150,
            minContainerHeight: 150
          });
          $("#btn-crop-cancel, #btn-crop").show();
        };

        reader.readAsDataURL(file);
      });
      $("#button-crop").on("click", function () {
        if (cropper) {
          var canvas = cropper.getCroppedCanvas();
          var src = canvas.toDataURL('image/png', 0.7);
          $("#preview_banner_img_mobile").attr("src", src);
          $("#preview_banner_img_desktop").attr("src", src);
          $("#has_checkout_banner").val("true");
          $("#preview_banner_img_mobile").fadeIn('slow');
          $("#preview_banner_img_desktop").fadeIn('slow');
          replacePreview("checkout_banner", src, "checkout_banner.jpg");
          cropper.getCroppedCanvas().toBlob(function (blob) {
            var dt = new DataTransfer();
            var file = new File([blob], "banner." + blob.type.split("/")[1]);
            dt.items.add(file);
            document.querySelector("#checkout_banner").files = dt.files;
          }, 'image/jpeg', 0.8);
        }

        bs_modal.modal("hide");
      });
      $("#button-cancel-crop").on("click", function () {
        $("#checkout_banner").parent().find(".dropify-clear").trigger("click");
      }); // replacePreview("checkout_banner", checkout.checkout_banner, "Image.jpg");

      if (checkout.checkout_banner_enabled) {
        $("#checkout_editor #checkout_banner_enabled").prop("checked", true);
        $("#checkout_editor #checkout_banner_enabled").prop("value", 1);
        $("#checkout_editor .banner-top-content").show();
        $("#checkout_editor .preview-banner").show();
        $("#checkout_editor #banner_type").show();
        $('.logo-div').addClass('has-banner');
        $('.logo-preview-container').addClass('has-banner');
        $('.menu-bar-mobile').hide('slow');
        $('.purchase-menu-mobile').fadeIn('slow');
      } else {
        $("#checkout_editor #checkout_banner_enabled").prop("checked", false);
        $("#checkout_editor #checkout_banner_enabled").prop("value", 0);
        $("#checkout_editor .banner-top-content").hide();
        $("#checkout_editor .preview-banner").hide();
        $("#checkout_editor #banner_type").hide();
        $('.logo-div').removeClass('has-banner');
        $('.logo-preview-container').removeClass('has-banner');
        $('.menu-bar-mobile').show('slow');
        $('.purchase-menu-mobile').fadeOut('slow');
      }

      if (checkout.checkout_banner_type === 1) {
        $("#checkout_editor #banner_type_wide").prop("checked", true);
        $(".preview-banner").removeClass("retangle-banner");
        $(".logo-div.logo-menu-bar").removeClass("retangle-banner");
        $(".preview-banner").addClass("wide-banner");
      } else {
        $("#checkout_editor #banner_type_square").prop("checked", true);
        $(".preview-banner").addClass("retangle-banner");
        $(".logo-div.logo-menu-bar").addClass("retangle-banner");
        $(".preview-banner").removeClass("wide-banner");
      }

      if (checkout.countdown_enabled) {
        $("#checkout_editor #countdown_enabled").prop("checked", true);
        $("#checkout_editor #countdown_enabled").prop("value", 1);
        $("#checkout_editor .countdown-content").show();
        $("#checkout_editor .countdown-preview").show();
      } else {
        $("#checkout_editor #countdown_enabled").prop("checked", false);
        $("#checkout_editor #countdown_enabled").prop("value", 0);
        $("#checkout_editor .countdown-content").hide();
        $("#checkout_editor .countdown-preview").hide();
      }

      $("#checkout_editor #countdown_time").val(checkout.countdown_time || 15);
      $("#checkout_editor #countdown_finish_message").val(checkout.countdown_finish_message || "Seu tempo acabou! Você precisa finalizar sua compra agora para ganhar o desconto extra.");

      if (checkout.topbar_enabled) {
        $("#checkout_editor #topbar_enabled").prop("checked", true);
        $("#checkout_editor #topbar_enabled").prop("value", 1);
        $("#checkout_editor .textbar-content").show();
        $("#checkout_editor .textbar-preview").show();
      } else {
        $("#checkout_editor #topbar_enabled").prop("checked", false);
        $("#checkout_editor #topbar_enabled").prop("value", 0);
        $("#checkout_editor .textbar-content").hide();
        $("#checkout_editor .textbar-preview").hide();
      }

      quillTextbar.root.innerHTML = checkout.topbar_content || "<p>Aproveite o <b>desconto extra</b> ao comprar no <u>Cartão ou pelo PIX!</u> É por <b>tempo limitado</b>.</p>";

      if (checkout.notifications_enabled) {
        $("#checkout_editor #notifications_enabled").prop("checked", true);
        $("#checkout_editor #notifications_enabled").prop("value", 1);
        $("#checkout_editor .sales-notifications-content").show();
      } else {
        $("#checkout_editor #notifications_enabled").prop("checked", false);
        $("#checkout_editor #notifications_enabled").prop("value", 0);
        $("#checkout_editor .sales-notifications-content").hide();
      }

      switch (checkout.notifications_interval) {
        case 15:
          $("#checkout_editor #notifications_interval_15").prop("checked", true);
          break;

        case 30:
          $("#checkout_editor #notifications_interval_30").prop("checked", true);
          break;

        case 45:
          $("#checkout_editor #notifications_interval_45").prop("checked", true);
          break;

        case 60:
          $("#checkout_editor #notifications_interval_60").prop("checked", true);
          break;

        default:
          $("#checkout_editor #notifications_interval_15").prop("checked", true);
          break;
      }

      if (checkout.notification_buying_enabled) {
        $("#checkout_editor #notification_buying_enabled").prop("checked", true);
        $("#checkout_editor #notification_buying_enabled").prop("value", 1);
      } else {
        $("#checkout_editor #notification_buying_enabled").prop("checked", false);
        $("#checkout_editor #notification_buying_enabled").prop("value", 0);
      }

      if (checkout.notification_bought_30_minutes_enabled) {
        $("#checkout_editor #notification_bought_30_minutes_enabled").prop("checked", true);
        $("#checkout_editor #notification_bought_30_minutes_enabled").prop("value", 1);
      } else {
        $("#checkout_editor #notification_bought_30_minutes_enabled").prop("checked", false);
        $("#checkout_editor #notification_bought_30_minutes_enabled").prop("value", 0);
      }

      if (checkout.notification_bought_last_hour_enabled) {
        $("#checkout_editor #notification_bought_last_hour_enabled").prop("checked", true);
        $("#checkout_editor #notification_bought_last_hour_enabled").prop("value", 1);
      } else {
        $("#checkout_editor #notification_bought_last_hour_enabled").prop("checked", false);
        $("#checkout_editor #notification_bought_last_hour_enabled").prop("value", 0);
      }

      if (checkout.notification_just_bought_enabled) {
        $("#checkout_editor #notification_just_bought_enabled").prop("checked", true);
        $("#checkout_editor #notification_just_bought_enabled").prop("value", 1);
      } else {
        $("#checkout_editor #notification_just_bought_enabled").prop("checked", false);
        $("#checkout_editor #notification_just_bought_enabled").prop("value", 0);
      }

      if (checkout.notification_buying_enabled && checkout.notification_bought_30_minutes_enabled && checkout.notification_bought_last_hour_enabled && checkout.notification_just_bought_enabled) {
        $("#checkout_editor #notification-table .selectable-all").prop("checked", true);
      }

      $("#checkout_editor #notification_buying_minimum").val(checkout.notification_buying_minimum || 0);
      $("#checkout_editor #notification_bought_30_minutes_minimum").val(checkout.notification_bought_30_minutes_minimum || 0);
      $("#checkout_editor #notification_bought_last_hour_minimum").val(checkout.notification_bought_last_hour_minimum || 0);
      $("#checkout_editor #notification_just_bought_minimum").val(checkout.notification_just_bought_minimum || 0);
      var form = document.querySelector("#checkout_editor");
      var selectableCheckboxes = form.querySelectorAll(".selectable-notification:checked");

      if (selectableCheckboxes.length > 0 && selectableCheckboxes.length < 4) {
        $('#selectable-all-notification').addClass('dash-check');
        $('#selectable-all-notification').prop('checked', true);
      }

      if (selectableCheckboxes.length == 0) {
        $('#selectable-all-notification').prop('checked', false);
        $('#selectable-all-notification').removeClass('dash-check');
      }

      if (selectableCheckboxes.length == 4) {
        $('#selectable-all-notification').removeClass('dash-check');
        $('#selectable-all-notification').prop('checked', true);
      }

      if (checkout.social_proof_enabled) {
        $("#checkout_editor #social_proof_enabled").prop("checked", true);
        $("#checkout_editor #social_proof_enabled").prop("value", 1);
        $("#checkout_editor .social-proof-content").show();
      } else {
        $("#checkout_editor #social_proof_enabled").prop("checked", false);
        $("#checkout_editor #social_proof_enabled").prop("value", 0);
        $("#checkout_editor .social-proof-content").hide();
      }

      $("#checkout_editor #social_proof_message").val(checkout.social_proof_message || "Outras { num-visitantes } pessoas estão finalizando a compra neste momento.");
      $("#checkout_editor #social_proof_minimum").val(checkout.social_proof_minimum || 0);
      $("#checkout_editor #invoice_description").val(checkout.invoice_description || "");

      var _iterator = _createForOfIteratorHelper(checkout.companies),
          _step;

      try {
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          var company = _step.value;

          var _document = (company.document.replace(/\D/g, '').length > 11 ? 'CNPJ: ' : 'CPF: ') + company.document;

          if (company.status != "pending") {
            $("#checkout_editor #companies").append("<option value=\"".concat(company.id, "\" ").concat(company.id === checkout.company_id ? "selected" : "", " data-toggle=\"tooltip\" title=\"").concat(_document, "\" >\n                                                                ").concat(company.name, "\n                                                             </option>"));
          }
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }

      if (checkout.cpf_enabled) {
        $("#checkout_editor #cpf_enabled").prop("checked", true);
        $("#checkout_editor #cpf_enabled").prop("value", 1);
      } else {
        $("#checkout_editor #cpf_enabled").prop("checked", false);
        $("#checkout_editor #cpf_enabled").prop("value", 0);
      }

      if (checkout.cnpj_enabled) {
        $("#checkout_editor #cnpj_enabled").prop("checked", true);
        $("#checkout_editor #cnpj_enabled").prop("value", 1);
      } else {
        $("#checkout_editor #cnpj_enabled").prop("checked", false);
        $("#checkout_editor #cnpj_enabled").prop("value", 0);
      }

      if (checkout.bank_slip_enabled) {
        $("#checkout_editor #bank_slip_enabled").prop("checked", true);
        $("#checkout_editor #bank_slip_enabled").prop("value", 1);
      } else {
        $("#checkout_editor #bank_slip_enabled").prop("checked", false);
        $("#checkout_editor #bank_slip_enabled").prop("value", 0);
      }

      if (checkout.pix_enabled) {
        $("#checkout_editor #pix_enabled").prop("checked", true);
        $("#checkout_editor #pix_enabled").prop("value", 1);
      }

      {
        $("#checkout_editor #pix_enabled").prop("checked", false);
        $("#checkout_editor #pix_enabled").prop("value", 0);
      }

      if (checkout.credit_card_enabled) {
        $("#checkout_editor #credit_card_enabled").prop("checked", true);
        $("#checkout_editor #credit_card_enabled").prop("value", 1);
        $(".credit-card-container").show("slow", "swing");
        $(".accepted-payment-card-creditcard").slideDown("slow", "swing");
      } else {
        $("#checkout_editor #credit_card_enabled").prop("checked", false);
        $("#checkout_editor #credit_card_enabled").prop("value", 0);
        $(".credit-card-container").hide("slow", "swing");
        $(".accepted-payment-card-creditcard").slideUp("slow", "swing");
      }

      if (checkout.bank_slip_enabled) {
        $("#checkout_editor #bank_slip_enabled").prop("checked", true);
        $("#checkout_editor #bank_slip_enabled").prop("value", 1);
        $(".bank-billet-container").show("slow", "swing");
        $(".accepted-payment-bank-billet").slideDown("slow", "swing");
      } else {
        $("#checkout_editor #bank_slip_enabled").prop("checked", false);
        $(".bank-billet-container").hide("slow", "swing");
        $(".accepted-payment-bank-billet").slideUp("slow", "swing");
      }

      if (checkout.pix_enabled) {
        $("#checkout_editor #pix_enabled").prop("checked", true);
        $("#checkout_editor #pix_enabled").prop("value", 1);
        $(".pix-container").show("slow", "swing");
        $(".accepted-payment-pix").slideDown("slow", "swing");
      } else {
        $("#checkout_editor #pix_enabled").prop("checked", false);
        $(".pix-container").hide("slow", "swing");
        $(".accepted-payment-pix").slideUp("slow", "swing");
      }

      if (checkout.quantity_selector_enabled) {
        $("#checkout_editor #count-selector-label").addClass("active");
        $("#checkout_editor #quantity_selector_enabled").prop("checked", true);
        $("#checkout_editor #quantity_selector_enabled").prop("value", 1);
      } else {
        $("#checkout_editor #count-selector-label").removeClass("active");
        $("#checkout_editor #quantity_selector_enabled").prop("checked", false);
        $("#checkout_editor #quantity_selector_enabled").prop("value", 0);
      }

      if (checkout.email_required) {
        $("#checkout_editor #checkout-email-label").addClass("active");
        $("#checkout_editor #email_required").prop("checked", true);
        $("#checkout_editor #email_required").prop("value", 1);
      } else {
        $("#checkout_editor #checkout-email-label").removeClass("active");
        $("#checkout_editor #email_required").prop("checked", false);
        $("#checkout_editor #email_required").prop("value", 0);
      }

      $("#checkout_editor #bank_slip_due_days").val(checkout.bank_slip_due_days || 1);
      $("#checkout_editor #installments_limit").val(checkout.installments_limit || 1).change();
      $("#checkout_editor #interest_free_installments").val(checkout.interest_free_installments || 1).change();
      $("#checkout_editor #preselected_installment").val(checkout.preselected_installment || 1).change();
      $("#checkout_editor #automatic_discount_credit_card").val(checkout.automatic_discount_credit_card || 0);
      $("#checkout_editor #automatic_discount_bank_slip").val(checkout.automatic_discount_bank_slip || 0);
      $("#checkout_editor #automatic_discount_pix").val(checkout.automatic_discount_pix || 0);

      if (checkout.post_purchase_message_enabled) {
        $("#checkout_editor #post_purchase_message_enabled").prop("checked", true);
        $("#checkout_editor #post_purchase_message_enabled").prop("value", 1);
        $(".thanks-page-content").show("slow", "swing");
        $(".shop-message-preview").slideDown("slow", "swing");
      } else {
        $("#checkout_editor #post_purchase_message_enabled").prop("checked", false);
        $("#checkout_editor #post_purchase_message_enabled").prop("value", 0);
        $(".thanks-page-content").hide("slow", "swing");
        $(".shop-message-preview").slideUp("slow", "swing");
      }

      $("#checkout_editor #post_purchase_message_title").val(checkout.post_purchase_message_title || "Obrigado por comprar conosco!");
      $(".shop-message-preview-title").empty();
      $(".shop-message-preview-title").append(checkout.post_purchase_message_title || "Obrigado por comprar conosco!");
      quillThanksPage.root.innerHTML = checkout.post_purchase_message_content || "<p>Aproveite o <b>desconto extra</b> ao comprar no <u>Cartão ou pelo PIX!</u> É por <b>tempo limitado</b>.</p>";
      $(".shop-message-preview-content").empty();
      $(".shop-message-preview-content").append(checkout.post_purchase_message_content);

      if (checkout.whatsapp_enabled == 1) {
        $("#checkout_editor #whatsapp_enabled").prop("checked", true);
        $("#checkout_editor #whatsapp_enabled").prop("value", 1);
        $(".whatsapp-content").show("slow", "swing");
        $(".whatsapp-preview").slideDown("slow", "swing");
      } else {
        $("#checkout_editor #whatsapp_enabled").prop("checked", false);
        $("#checkout_editor #whatsapp_enabled").prop("value", 0);
        $(".whatsapp-content").hide("slow", "swing");
        $(".whatsapp-preview").slideUp("slow", "swing");
      }

      $("#checkout_editor #support_phone").val(checkout.support_phone || "");

      if (checkout.support_phone_verified == 1) {
        $("#verify_phone_open").hide();
        $("#verified_phone_open").show();
        $("#remove_phone").show();
      } else {
        $("#verify_phone_open").show();
        $("#verified_phone_open").hide();
        $("#remove_phone").hide();
      }

      if (checkout.theme_enum == 0 || !checkout.theme_enum) {
        $(":root").css("--primary-color", checkout.color_primary);
        $(":root").css("--secondary-color", checkout.color_secondary);
        $(":root").css("--finish-button-color", checkout.color_buy_button);
        $("#color_primary").val(checkout.color_primary);
        $("#color_secondary").val(checkout.color_secondary);
        $("#color_buy_button").val(checkout.color_buy_button);
        $("#checkout_editor #theme_ready_enabled").prop("checked", true);
        $("#checkout_editor #theme_ready_enabled").prop("value", 1);
        $(".custom-theme-content").show("slow", "swing");
        $('.theme-ready-first-line').addClass('low-opacity');
        $(".theme-ready-second-line").hide("slow", "swing");
      } else {
        $("#checkout_editor #theme_ready_enabled").prop("checked", false);
        $("#checkout_editor #theme_ready_enabled").prop("value", 0);
        $("input[name=theme_enum][value=" + checkout.theme_enum + "]").attr("checked", true);
        $(":root").css("--primary-color", checkout.color_primary);
        $(":root").css("--secondary-color", checkout.color_secondary);
        $(":root").css("--finish-button-color", checkout.color_buy_button);
        $(".custom-theme-content").hide("slow", "swing");
        $('.theme-ready-first-line').removeClass('low-opacity');
        $(".theme-ready-second-line").show("slow", "swing");
      }

      $('#checkout_editor_id').val(checkout.id);
      $('#upload_favicon .dropify-error').css('display', 'none');
      $('.dropify-clear').hide();
    }

    function validadeForm(form) {
      var validated = false;

      if (form.get('countdown_enabled') == "1") {
        if (form.get('countdown_time') != '' && form.get('countdown_time') != null) {
          validated = true;
        } else {
          $('#countdown_time').addClass('error-input');
          $('#countdown_time_error').show('slow', 'linear');
          scrollToElement('countdown_time');
          return false;
        }

        if (form.get('countdown_finish_message') != '' && form.get('countdown_finish_message') != null) {
          validated = true;
        } else {
          $('#countdown_finish_message').addClass('error-input');
          $('#countdown_finish_message_error').show('slow', 'linear');
          scrollToElement('countdown_finish_message');
          return false;
        }
      }

      if (form.get('topbar_enabled') == "1") {
        if (quillTextbar.getText().trim().length > 0) {
          validated = true;
        } else {
          $('#topbar_content').addClass('error-input');
          scrollToElement('topbar_content');
          $('#topbar_content_error').show('slow', 'linear');
          return false;
        }
      }

      if (form.get('notifications_enabled') == "1") {
        if (form.get('notification_buying_minimum') != '') {
          validated = true;
        } else {
          $('#notification_buying_minimum').addClass('error-input');
          $('#notification_buying_minimum_error').show('slow', 'linear');
          scrollToElement('notification_buying_minimum');
          $('#notification_error').show('slow', 'linear');
          return false;
        }

        if (form.get('notification_bought_30_minutes_minimum') != '') {
          validated = true;
        } else {
          $('#notification_bought_30_minutes_minimum').addClass('error-input');
          $('#notification_error').show('slow', 'linear');
          scrollToElement('notification_bought_30_minutes_minimum');
          return false;
        }

        if (form.get('notification_bought_last_hour_minimum') != '') {
          validated = true;
        } else {
          $('#notification_bought_last_hour_minimum').addClass('error-input');
          $('#notification_error').show('slow', 'linear');
          scrollToElement('notification_bought_last_hour_minimum');
          return false;
        }

        if (form.get('notification_just_bought_minimum') != '') {
          validated = true;
        } else {
          $('#notification_just_bought_minimum').addClass('error-input');
          $('#notification_error').show('slow', 'linear');
          scrollToElement('notification_just_bought_minimum');
          return false;
        }
      }

      if (form.get('social_proof_enabled') == "1") {
        if (form.get('social_proof_message') != '' && form.get('social_proof_message') != null) {
          validated = true;
        } else {
          $('#social_proof_message').addClass('error-input');
          $('#social_proof_message_error').show('slow', 'linear');
          scrollToElement('social_proof_message');
          return false;
        }

        if (form.get('social_proof_minimum') != '' && form.get('social_proof_minimum') != null) {
          validated = true;
        } else {
          $('#social_proof_minimum').addClass('error-input');
          $('#social_proof_minimum_error').show('slow', 'linear');
          scrollToElement('social_proof_minimum');
          return false;
        }
      }

      if (form.get('company_id') != '' && form.get('company_id') != null) {
        validated = true;
      } else {
        $('#company_billing_error').show('slow', 'linear');
        scrollToElement('companies');
        return false;
      }

      if (form.get('bank_slip_due_days') != '' && form.get('bank_slip_due_days') != null) {
        validated = true;
      } else {
        $('#bank_slip_due_days').addClass('error-input');
        $('#bank_slip_due_days_error').show('slow', 'linear');
        scrollToElement('bank_slip_due_days');
        return false;
      }

      if (form.get('post_purchase_message_enabled') == "1") {
        if (form.get('post_purchase_message_title') != '' && form.get('post_purchase_message_title') != null) {
          validated = true;
        } else {
          $('#post_purchase_message_title').addClass('error-input');
          $('#post_purchase_message_title_error').show('slow', 'linear');
          scrollToElement('post_purchase_message_title');
          return false;
        }

        if (quillThanksPage.getText().trim().length > 0) {
          validated = true;
        } else {
          $('#post_purchase_message_content').addClass('error-input');
          $('#post_purchase_message_content_error').show('slow', 'linear');
          scrollToElement('post_purchase_message_content');
          return false;
        }
      }

      if (form.get('checkout_logo_enabled') == "1") {
        if ($("#has_checkout_logo").val() == "true") {
          validated = true;
        } else {
          scrollToElement('upload_logo');
          $('#checkout_logo_error').show('slow', 'linear');
          return false;
        }
      }

      if (form.get('checkout_favicon_enabled') == "1") {
        if (form.get('checkout_favicon_type') == "1") {
          validated = true;
        } else {
          if ($("#has_checkout_favicon").val() == "true") {
            validated = true;
          } else {
            scrollToElement('upload_logo');
            $('#checkout_favicon_error').fadeIn('slow', 'linear');
            return false;
          }
        }
      }

      if (form.get('checkout_banner_enabled') == "1") {
        if ($("#has_checkout_banner").val() == "true") {
          validated = true;
        } else {
          scrollToElement('banner_type');
          $('#checkout_banner_error').show('slow', 'linear');
          return false;
        }
      }

      if (form.get('whatsapp_enabled') == "1") {
        if ($('#support_phone').val() == '') {
          validated = true;
        } else {
          if (testRegex(/^\([1-9]{2}\)\s(?:[2-8]|9[1-9])[0-9]{3}\-[0-9]{4}$/, $('#support_phone').val())) {
            validated = true;
          } else {
            $('#support_phone').addClass('error-input');
            $('#support_phone_error').show('slow', 'linear');
            scrollToElement('support_phone');
            return false;
          }
        }
      }

      return validated;
    }
  }

  function scrollToElement(elementId) {
    $([document.documentElement, document.body]).animate({
      scrollTop: $("#".concat(elementId)).position().top - 200
    }, 2000);
  }

  function testRegex(re, str) {
    if (re.test(str)) {
      return true;
    } else {
      return false;
    }
  }
});
$(function () {
  $("body,html").scroll(function () {
    if ($("#tab-checkout").hasClass("active")) {
      var scrollWindow = $(this).scrollTop();
      var topVisual = $("#checkout_type").position().top;
      var topPayment = $("#payment_container").position().top - 200;
      var topPostPurchase = $("#post_purchase").position().top - 350;

      if (scrollWindow > topVisual) {
        var marginTop = scrollWindow - topVisual;
        $("#preview_div").css("margin-top", marginTop + 10);
      } else {
        $("#preview_div").css("margin-top", 0);
      }

      if (scrollWindow < topPayment) {
        $("#preview_payment").fadeOut("slow", "swing");
        $("#preview_post_purchase").fadeOut("slow", "swing");
        $("#preview_visual").fadeIn("slow", "swing");
      } else if (scrollWindow > topPayment && scrollWindow < topPostPurchase) {
        $("#preview_visual").fadeOut("slow", "swing");
        $("#preview_post_purchase").fadeOut("slow", "swing");
        $("#preview_payment").fadeIn("slow", "swing");
      } else if (scrollWindow > topPostPurchase) {
        $("#preview_visual").fadeOut("slow", "swing");
        $("#preview_payment").fadeOut("slow", "swing");
        $("#preview_post_purchase").fadeIn("slow", "swing");
      }
    }
  });
});
=======
function _createForOfIteratorHelper(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=_unsupportedIterableToArray2(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,r=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw r}}}}function _toArray(t){return _arrayWithHoles(t)||_iterableToArray2(t)||_unsupportedIterableToArray2(t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _toConsumableArray2(t){return _arrayWithoutHoles2(t)||_iterableToArray2(t)||_unsupportedIterableToArray2(t)||_nonIterableSpread2()}function _nonIterableSpread2(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray2(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray2(t,e):void 0}}function _iterableToArray2(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function _arrayWithoutHoles2(t){if(Array.isArray(t))return _arrayLikeToArray2(t)}function _arrayLikeToArray2(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function _typeof2(t){return _typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof2(t)}function replacePreview(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=$('input[id="'+t+'"]'),o=i.closest(".dropify-wrapper"),r=o.find(".dropify-preview"),a=o.find(".dropify-filename-inner"),s=o.find(".dropify-render").html("");i.val("").attr("title",n),o.removeClass("has-error").addClass("has-preview"),a.html(n),s.append($('<img style="width: 100%; border-radius: 8px; object-fit: cover;" />').attr("src",e).css("height",i.attr("height"))),r.fadeIn()}!function(t,e){"object"===("undefined"==typeof exports?"undefined":_typeof2(exports))&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).Cropper=e()}(this,(function(){"use strict";function t(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function e(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?t(Object(i),!0).forEach((function(t){r(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):t(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t){return function(t){if(Array.isArray(t))return s(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var l="undefined"!=typeof window&&void 0!==window.document,c=l?window:{},u=!(!l||!c.document.documentElement)&&"ontouchstart"in c.document.documentElement,h=!!l&&"PointerEvent"in c,d="cropper",f="all",p="crop",v="move",m="zoom",y="e",g="w",b="s",_="n",w="ne",k="nw",x="se",O="sw",E="".concat(d,"-crop"),C="".concat(d,"-disabled"),A="".concat(d,"-hidden"),N="".concat(d,"-hide"),j="".concat(d,"-invisible"),$="".concat(d,"-modal"),T="".concat(d,"-move"),S="".concat(d,"Action"),q="".concat(d,"Preview"),M="crop",P="move",L="none",D="crop",R="cropend",B="cropmove",I="cropstart",H="dblclick",z=h?"pointerdown":u?"touchstart":"mousedown",U=h?"pointermove":u?"touchmove":"mousemove",F=h?"pointerup pointercancel":u?"touchend touchcancel":"mouseup",W="ready",Y="resize",X="wheel",K="zoom",Z="image/jpeg",V=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,G=/^data:/,Q=/^data:image\/jpeg;base64,/,J=/^img|canvas$/i,tt={viewMode:0,dragMode:M,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},et=Number.isNaN||c.isNaN;function nt(t){return"number"==typeof t&&!et(t)}var it=function(t){return t>0&&t<1/0};function ot(t){return void 0===t}function rt(t){return"object"===n(t)&&null!==t}var at=Object.prototype.hasOwnProperty;function st(t){if(!rt(t))return!1;try{var e=t.constructor,n=e.prototype;return e&&n&&at.call(n,"isPrototypeOf")}catch(t){return!1}}function lt(t){return"function"==typeof t}var ct=Array.prototype.slice;function ut(t){return Array.from?Array.from(t):ct.call(t)}function ht(t,e){return t&&lt(e)&&(Array.isArray(t)||nt(t.length)?ut(t).forEach((function(n,i){e.call(t,n,i,t)})):rt(t)&&Object.keys(t).forEach((function(n){e.call(t,t[n],n,t)}))),t}var dt=Object.assign||function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return rt(t)&&n.length>0&&n.forEach((function(e){rt(e)&&Object.keys(e).forEach((function(n){t[n]=e[n]}))})),t},ft=/\.\d*(?:0|9){12}\d*$/;function pt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e11;return ft.test(t)?Math.round(t*e)/e:t}var vt=/^width|height|left|top|marginLeft|marginTop$/;function mt(t,e){var n=t.style;ht(e,(function(t,e){vt.test(e)&&nt(t)&&(t="".concat(t,"px")),n[e]=t}))}function yt(t,e){if(e)if(nt(t.length))ht(t,(function(t){yt(t,e)}));else if(t.classList)t.classList.add(e);else{var n=t.className.trim();n?n.indexOf(e)<0&&(t.className="".concat(n," ").concat(e)):t.className=e}}function gt(t,e){e&&(nt(t.length)?ht(t,(function(t){gt(t,e)})):t.classList?t.classList.remove(e):t.className.indexOf(e)>=0&&(t.className=t.className.replace(e,"")))}function bt(t,e,n){e&&(nt(t.length)?ht(t,(function(t){bt(t,e,n)})):n?yt(t,e):gt(t,e))}var _t=/([a-z\d])([A-Z])/g;function wt(t){return t.replace(_t,"$1-$2").toLowerCase()}function kt(t,e){return rt(t[e])?t[e]:t.dataset?t.dataset[e]:t.getAttribute("data-".concat(wt(e)))}function xt(t,e,n){rt(n)?t[e]=n:t.dataset?t.dataset[e]=n:t.setAttribute("data-".concat(wt(e)),n)}var Ot=/\s\s*/,Et=function(){var t=!1;if(l){var e=!1,n=function(){},i=Object.defineProperty({},"once",{get:function(){return t=!0,e},set:function(t){e=t}});c.addEventListener("test",n,i),c.removeEventListener("test",n,i)}return t}();function Ct(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=n;e.trim().split(Ot).forEach((function(e){if(!Et){var r=t.listeners;r&&r[e]&&r[e][n]&&(o=r[e][n],delete r[e][n],0===Object.keys(r[e]).length&&delete r[e],0===Object.keys(r).length&&delete t.listeners)}t.removeEventListener(e,o,i)}))}function At(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=n;e.trim().split(Ot).forEach((function(e){if(i.once&&!Et){var r=t.listeners,a=void 0===r?{}:r;o=function(){delete a[e][n],t.removeEventListener(e,o,i);for(var r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];n.apply(t,s)},a[e]||(a[e]={}),a[e][n]&&t.removeEventListener(e,a[e][n],i),a[e][n]=o,t.listeners=a}t.addEventListener(e,o,i)}))}function Nt(t,e,n){var i;return lt(Event)&&lt(CustomEvent)?i=new CustomEvent(e,{detail:n,bubbles:!0,cancelable:!0}):(i=document.createEvent("CustomEvent")).initCustomEvent(e,!0,!0,n),t.dispatchEvent(i)}function jt(t){var e=t.getBoundingClientRect();return{left:e.left+(window.pageXOffset-document.documentElement.clientLeft),top:e.top+(window.pageYOffset-document.documentElement.clientTop)}}var $t=c.location,Tt=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function St(t){var e=t.match(Tt);return null!==e&&(e[1]!==$t.protocol||e[2]!==$t.hostname||e[3]!==$t.port)}function qt(t){var e="timestamp=".concat((new Date).getTime());return t+(-1===t.indexOf("?")?"?":"&")+e}function Mt(t){var e=t.rotate,n=t.scaleX,i=t.scaleY,o=t.translateX,r=t.translateY,a=[];nt(o)&&0!==o&&a.push("translateX(".concat(o,"px)")),nt(r)&&0!==r&&a.push("translateY(".concat(r,"px)")),nt(e)&&0!==e&&a.push("rotate(".concat(e,"deg)")),nt(n)&&1!==n&&a.push("scaleX(".concat(n,")")),nt(i)&&1!==i&&a.push("scaleY(".concat(i,")"));var s=a.length?a.join(" "):"none";return{WebkitTransform:s,msTransform:s,transform:s}}function Pt(t,n){var i=t.pageX,o=t.pageY,r={endX:i,endY:o};return n?r:e({startX:i,startY:o},r)}function Lt(t){var e=t.aspectRatio,n=t.height,i=t.width,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"contain",r=it(i),a=it(n);if(r&&a){var s=n*e;"contain"===o&&s>i||"cover"===o&&s<i?n=i/e:i=n*e}else r?n=i/e:a&&(i=n*e);return{width:i,height:n}}function Dt(t,e,n,i){var o=e.aspectRatio,r=e.naturalWidth,s=e.naturalHeight,l=e.rotate,c=void 0===l?0:l,u=e.scaleX,h=void 0===u?1:u,d=e.scaleY,f=void 0===d?1:d,p=n.aspectRatio,v=n.naturalWidth,m=n.naturalHeight,y=i.fillColor,g=void 0===y?"transparent":y,b=i.imageSmoothingEnabled,_=void 0===b||b,w=i.imageSmoothingQuality,k=void 0===w?"low":w,x=i.maxWidth,O=void 0===x?1/0:x,E=i.maxHeight,C=void 0===E?1/0:E,A=i.minWidth,N=void 0===A?0:A,j=i.minHeight,$=void 0===j?0:j,T=document.createElement("canvas"),S=T.getContext("2d"),q=Lt({aspectRatio:p,width:O,height:C}),M=Lt({aspectRatio:p,width:N,height:$},"cover"),P=Math.min(q.width,Math.max(M.width,v)),L=Math.min(q.height,Math.max(M.height,m)),D=Lt({aspectRatio:o,width:O,height:C}),R=Lt({aspectRatio:o,width:N,height:$},"cover"),B=Math.min(D.width,Math.max(R.width,r)),I=Math.min(D.height,Math.max(R.height,s)),H=[-B/2,-I/2,B,I];return T.width=pt(P),T.height=pt(L),S.fillStyle=g,S.fillRect(0,0,P,L),S.save(),S.translate(P/2,L/2),S.rotate(c*Math.PI/180),S.scale(h,f),S.imageSmoothingEnabled=_,S.imageSmoothingQuality=k,S.drawImage.apply(S,[t].concat(a(H.map((function(t){return Math.floor(pt(t))}))))),S.restore(),T}var Rt=String.fromCharCode;var Bt=/^data:.*,/;function It(t){var e,n=new DataView(t);try{var i,o,r;if(255===n.getUint8(0)&&216===n.getUint8(1))for(var a=n.byteLength,s=2;s+1<a;){if(255===n.getUint8(s)&&225===n.getUint8(s+1)){o=s;break}s+=1}if(o){var l=o+10;if("Exif"===function(t,e,n){var i="";n+=e;for(var o=e;o<n;o+=1)i+=Rt(t.getUint8(o));return i}(n,o+4,4)){var c=n.getUint16(l);if(((i=18761===c)||19789===c)&&42===n.getUint16(l+2,i)){var u=n.getUint32(l+4,i);u>=8&&(r=l+u)}}}if(r){var h,d,f=n.getUint16(r,i);for(d=0;d<f;d+=1)if(h=r+12*d+2,274===n.getUint16(h,i)){h+=8,e=n.getUint16(h,i),n.setUint16(h,1,i);break}}}catch(t){e=1}return e}var Ht={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var t=this.element,e=this.options,n=this.container,i=this.cropper,o=Number(e.minContainerWidth),r=Number(e.minContainerHeight);yt(i,A),gt(t,A);var a={width:Math.max(n.offsetWidth,o>=0?o:200),height:Math.max(n.offsetHeight,r>=0?r:100)};this.containerData=a,mt(i,{width:a.width,height:a.height}),yt(t,A),gt(i,A)},initCanvas:function(){var t=this.containerData,e=this.imageData,n=this.options.viewMode,i=Math.abs(e.rotate)%180==90,o=i?e.naturalHeight:e.naturalWidth,r=i?e.naturalWidth:e.naturalHeight,a=o/r,s=t.width,l=t.height;t.height*a>t.width?3===n?s=t.height*a:l=t.width/a:3===n?l=t.width/a:s=t.height*a;var c={aspectRatio:a,naturalWidth:o,naturalHeight:r,width:s,height:l};this.canvasData=c,this.limited=1===n||2===n,this.limitCanvas(!0,!0),c.width=Math.min(Math.max(c.width,c.minWidth),c.maxWidth),c.height=Math.min(Math.max(c.height,c.minHeight),c.maxHeight),c.left=(t.width-c.width)/2,c.top=(t.height-c.height)/2,c.oldLeft=c.left,c.oldTop=c.top,this.initialCanvasData=dt({},c)},limitCanvas:function(t,e){var n=this.options,i=this.containerData,o=this.canvasData,r=this.cropBoxData,a=n.viewMode,s=o.aspectRatio,l=this.cropped&&r;if(t){var c=Number(n.minCanvasWidth)||0,u=Number(n.minCanvasHeight)||0;a>1?(c=Math.max(c,i.width),u=Math.max(u,i.height),3===a&&(u*s>c?c=u*s:u=c/s)):a>0&&(c?c=Math.max(c,l?r.width:0):u?u=Math.max(u,l?r.height:0):l&&(c=r.width,(u=r.height)*s>c?c=u*s:u=c/s));var h=Lt({aspectRatio:s,width:c,height:u});c=h.width,u=h.height,o.minWidth=c,o.minHeight=u,o.maxWidth=1/0,o.maxHeight=1/0}if(e)if(a>(l?0:1)){var d=i.width-o.width,f=i.height-o.height;o.minLeft=Math.min(0,d),o.minTop=Math.min(0,f),o.maxLeft=Math.max(0,d),o.maxTop=Math.max(0,f),l&&this.limited&&(o.minLeft=Math.min(r.left,r.left+(r.width-o.width)),o.minTop=Math.min(r.top,r.top+(r.height-o.height)),o.maxLeft=r.left,o.maxTop=r.top,2===a&&(o.width>=i.width&&(o.minLeft=Math.min(0,d),o.maxLeft=Math.max(0,d)),o.height>=i.height&&(o.minTop=Math.min(0,f),o.maxTop=Math.max(0,f))))}else o.minLeft=-o.width,o.minTop=-o.height,o.maxLeft=i.width,o.maxTop=i.height},renderCanvas:function(t,e){var n=this.canvasData,i=this.imageData;if(e){var o=function(t){var e=t.width,n=t.height,i=t.degree;if(90==(i=Math.abs(i)%180))return{width:n,height:e};var o=i%90*Math.PI/180,r=Math.sin(o),a=Math.cos(o),s=e*a+n*r,l=e*r+n*a;return i>90?{width:l,height:s}:{width:s,height:l}}({width:i.naturalWidth*Math.abs(i.scaleX||1),height:i.naturalHeight*Math.abs(i.scaleY||1),degree:i.rotate||0}),r=o.width,a=o.height,s=n.width*(r/n.naturalWidth),l=n.height*(a/n.naturalHeight);n.left-=(s-n.width)/2,n.top-=(l-n.height)/2,n.width=s,n.height=l,n.aspectRatio=r/a,n.naturalWidth=r,n.naturalHeight=a,this.limitCanvas(!0,!1)}(n.width>n.maxWidth||n.width<n.minWidth)&&(n.left=n.oldLeft),(n.height>n.maxHeight||n.height<n.minHeight)&&(n.top=n.oldTop),n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth),n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight),this.limitCanvas(!1,!0),n.left=Math.min(Math.max(n.left,n.minLeft),n.maxLeft),n.top=Math.min(Math.max(n.top,n.minTop),n.maxTop),n.oldLeft=n.left,n.oldTop=n.top,mt(this.canvas,dt({width:n.width,height:n.height},Mt({translateX:n.left,translateY:n.top}))),this.renderImage(t),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(t){var e=this.canvasData,n=this.imageData,i=n.naturalWidth*(e.width/e.naturalWidth),o=n.naturalHeight*(e.height/e.naturalHeight);dt(n,{width:i,height:o,left:(e.width-i)/2,top:(e.height-o)/2}),mt(this.image,dt({width:n.width,height:n.height},Mt(dt({translateX:n.left,translateY:n.top},n)))),t&&this.output()},initCropBox:function(){var t=this.options,e=this.canvasData,n=t.aspectRatio||t.initialAspectRatio,i=Number(t.autoCropArea)||.8,o={width:e.width,height:e.height};n&&(e.height*n>e.width?o.height=o.width/n:o.width=o.height*n),this.cropBoxData=o,this.limitCropBox(!0,!0),o.width=Math.min(Math.max(o.width,o.minWidth),o.maxWidth),o.height=Math.min(Math.max(o.height,o.minHeight),o.maxHeight),o.width=Math.max(o.minWidth,o.width*i),o.height=Math.max(o.minHeight,o.height*i),o.left=e.left+(e.width-o.width)/2,o.top=e.top+(e.height-o.height)/2,o.oldLeft=o.left,o.oldTop=o.top,this.initialCropBoxData=dt({},o)},limitCropBox:function(t,e){var n=this.options,i=this.containerData,o=this.canvasData,r=this.cropBoxData,a=this.limited,s=n.aspectRatio;if(t){var l=Number(n.minCropBoxWidth)||0,c=Number(n.minCropBoxHeight)||0,u=a?Math.min(i.width,o.width,o.width+o.left,i.width-o.left):i.width,h=a?Math.min(i.height,o.height,o.height+o.top,i.height-o.top):i.height;l=Math.min(l,i.width),c=Math.min(c,i.height),s&&(l&&c?c*s>l?c=l/s:l=c*s:l?c=l/s:c&&(l=c*s),h*s>u?h=u/s:u=h*s),r.minWidth=Math.min(l,u),r.minHeight=Math.min(c,h),r.maxWidth=u,r.maxHeight=h}e&&(a?(r.minLeft=Math.max(0,o.left),r.minTop=Math.max(0,o.top),r.maxLeft=Math.min(i.width,o.left+o.width)-r.width,r.maxTop=Math.min(i.height,o.top+o.height)-r.height):(r.minLeft=0,r.minTop=0,r.maxLeft=i.width-r.width,r.maxTop=i.height-r.height))},renderCropBox:function(){var t=this.options,e=this.containerData,n=this.cropBoxData;(n.width>n.maxWidth||n.width<n.minWidth)&&(n.left=n.oldLeft),(n.height>n.maxHeight||n.height<n.minHeight)&&(n.top=n.oldTop),n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth),n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight),this.limitCropBox(!1,!0),n.left=Math.min(Math.max(n.left,n.minLeft),n.maxLeft),n.top=Math.min(Math.max(n.top,n.minTop),n.maxTop),n.oldLeft=n.left,n.oldTop=n.top,t.movable&&t.cropBoxMovable&&xt(this.face,S,n.width>=e.width&&n.height>=e.height?v:f),mt(this.cropBox,dt({width:n.width,height:n.height},Mt({translateX:n.left,translateY:n.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),Nt(this.element,D,this.getData())}},zt={initPreview:function(){var t=this.element,e=this.crossOrigin,n=this.options.preview,i=e?this.crossOriginUrl:this.url,o=t.alt||"The image to preview",r=document.createElement("img");if(e&&(r.crossOrigin=e),r.src=i,r.alt=o,this.viewBox.appendChild(r),this.viewBoxImage=r,n){var a=n;"string"==typeof n?a=t.ownerDocument.querySelectorAll(n):n.querySelector&&(a=[n]),this.previews=a,ht(a,(function(t){var n=document.createElement("img");xt(t,q,{width:t.offsetWidth,height:t.offsetHeight,html:t.innerHTML}),e&&(n.crossOrigin=e),n.src=i,n.alt=o,n.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',t.innerHTML="",t.appendChild(n)}))}},resetPreview:function(){ht(this.previews,(function(t){var e=kt(t,q);mt(t,{width:e.width,height:e.height}),t.innerHTML=e.html,function(t,e){if(rt(t[e]))try{delete t[e]}catch(n){t[e]=void 0}else if(t.dataset)try{delete t.dataset[e]}catch(n){t.dataset[e]=void 0}else t.removeAttribute("data-".concat(wt(e)))}(t,q)}))},preview:function(){var t=this.imageData,e=this.canvasData,n=this.cropBoxData,i=n.width,o=n.height,r=t.width,a=t.height,s=n.left-e.left-t.left,l=n.top-e.top-t.top;this.cropped&&!this.disabled&&(mt(this.viewBoxImage,dt({width:r,height:a},Mt(dt({translateX:-s,translateY:-l},t)))),ht(this.previews,(function(e){var n=kt(e,q),c=n.width,u=n.height,h=c,d=u,f=1;i&&(d=o*(f=c/i)),o&&d>u&&(h=i*(f=u/o),d=u),mt(e,{width:h,height:d}),mt(e.getElementsByTagName("img")[0],dt({width:r*f,height:a*f},Mt(dt({translateX:-s*f,translateY:-l*f},t))))})))}},Ut={bind:function(){var t=this.element,e=this.options,n=this.cropper;lt(e.cropstart)&&At(t,I,e.cropstart),lt(e.cropmove)&&At(t,B,e.cropmove),lt(e.cropend)&&At(t,R,e.cropend),lt(e.crop)&&At(t,D,e.crop),lt(e.zoom)&&At(t,K,e.zoom),At(n,z,this.onCropStart=this.cropStart.bind(this)),e.zoomable&&e.zoomOnWheel&&At(n,X,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),e.toggleDragModeOnDblclick&&At(n,H,this.onDblclick=this.dblclick.bind(this)),At(t.ownerDocument,U,this.onCropMove=this.cropMove.bind(this)),At(t.ownerDocument,F,this.onCropEnd=this.cropEnd.bind(this)),e.responsive&&At(window,Y,this.onResize=this.resize.bind(this))},unbind:function(){var t=this.element,e=this.options,n=this.cropper;lt(e.cropstart)&&Ct(t,I,e.cropstart),lt(e.cropmove)&&Ct(t,B,e.cropmove),lt(e.cropend)&&Ct(t,R,e.cropend),lt(e.crop)&&Ct(t,D,e.crop),lt(e.zoom)&&Ct(t,K,e.zoom),Ct(n,z,this.onCropStart),e.zoomable&&e.zoomOnWheel&&Ct(n,X,this.onWheel,{passive:!1,capture:!0}),e.toggleDragModeOnDblclick&&Ct(n,H,this.onDblclick),Ct(t.ownerDocument,U,this.onCropMove),Ct(t.ownerDocument,F,this.onCropEnd),e.responsive&&Ct(window,Y,this.onResize)}},Ft={resize:function(){if(!this.disabled){var t,e,n=this.options,i=this.container,o=this.containerData,r=i.offsetWidth/o.width,a=i.offsetHeight/o.height,s=Math.abs(r-1)>Math.abs(a-1)?r:a;if(1!==s)n.restore&&(t=this.getCanvasData(),e=this.getCropBoxData()),this.render(),n.restore&&(this.setCanvasData(ht(t,(function(e,n){t[n]=e*s}))),this.setCropBoxData(ht(e,(function(t,n){e[n]=t*s}))))}},dblclick:function(){var t,e;this.disabled||this.options.dragMode===L||this.setDragMode((t=this.dragBox,e=E,(t.classList?t.classList.contains(e):t.className.indexOf(e)>-1)?P:M))},wheel:function(t){var e=this,n=Number(this.options.wheelZoomRatio)||.1,i=1;this.disabled||(t.preventDefault(),this.wheeling||(this.wheeling=!0,setTimeout((function(){e.wheeling=!1}),50),t.deltaY?i=t.deltaY>0?1:-1:t.wheelDelta?i=-t.wheelDelta/120:t.detail&&(i=t.detail>0?1:-1),this.zoom(-i*n,t)))},cropStart:function(t){var e=t.buttons,n=t.button;if(!(this.disabled||("mousedown"===t.type||"pointerdown"===t.type&&"mouse"===t.pointerType)&&(nt(e)&&1!==e||nt(n)&&0!==n||t.ctrlKey))){var i,o=this.options,r=this.pointers;t.changedTouches?ht(t.changedTouches,(function(t){r[t.identifier]=Pt(t)})):r[t.pointerId||0]=Pt(t),i=Object.keys(r).length>1&&o.zoomable&&o.zoomOnTouch?m:kt(t.target,S),V.test(i)&&!1!==Nt(this.element,I,{originalEvent:t,action:i})&&(t.preventDefault(),this.action=i,this.cropping=!1,i===p&&(this.cropping=!0,yt(this.dragBox,$)))}},cropMove:function(t){var e=this.action;if(!this.disabled&&e){var n=this.pointers;t.preventDefault(),!1!==Nt(this.element,B,{originalEvent:t,action:e})&&(t.changedTouches?ht(t.changedTouches,(function(t){dt(n[t.identifier]||{},Pt(t,!0))})):dt(n[t.pointerId||0]||{},Pt(t,!0)),this.change(t))}},cropEnd:function(t){if(!this.disabled){var e=this.action,n=this.pointers;t.changedTouches?ht(t.changedTouches,(function(t){delete n[t.identifier]})):delete n[t.pointerId||0],e&&(t.preventDefault(),Object.keys(n).length||(this.action=""),this.cropping&&(this.cropping=!1,bt(this.dragBox,$,this.cropped&&this.options.modal)),Nt(this.element,R,{originalEvent:t,action:e}))}}},Wt={change:function(t){var n,i=this.options,o=this.canvasData,r=this.containerData,a=this.cropBoxData,s=this.pointers,l=this.action,c=i.aspectRatio,u=a.left,h=a.top,d=a.width,E=a.height,C=u+d,N=h+E,j=0,$=0,T=r.width,S=r.height,q=!0;!c&&t.shiftKey&&(c=d&&E?d/E:1),this.limited&&(j=a.minLeft,$=a.minTop,T=j+Math.min(r.width,o.width,o.left+o.width),S=$+Math.min(r.height,o.height,o.top+o.height));var M=s[Object.keys(s)[0]],P={x:M.endX-M.startX,y:M.endY-M.startY},L=function(t){switch(t){case y:C+P.x>T&&(P.x=T-C);break;case g:u+P.x<j&&(P.x=j-u);break;case _:h+P.y<$&&(P.y=$-h);break;case b:N+P.y>S&&(P.y=S-N)}};switch(l){case f:u+=P.x,h+=P.y;break;case y:if(P.x>=0&&(C>=T||c&&(h<=$||N>=S))){q=!1;break}L(y),(d+=P.x)<0&&(l=g,u-=d=-d),c&&(E=d/c,h+=(a.height-E)/2);break;case _:if(P.y<=0&&(h<=$||c&&(u<=j||C>=T))){q=!1;break}L(_),E-=P.y,h+=P.y,E<0&&(l=b,h-=E=-E),c&&(d=E*c,u+=(a.width-d)/2);break;case g:if(P.x<=0&&(u<=j||c&&(h<=$||N>=S))){q=!1;break}L(g),d-=P.x,u+=P.x,d<0&&(l=y,u-=d=-d),c&&(E=d/c,h+=(a.height-E)/2);break;case b:if(P.y>=0&&(N>=S||c&&(u<=j||C>=T))){q=!1;break}L(b),(E+=P.y)<0&&(l=_,h-=E=-E),c&&(d=E*c,u+=(a.width-d)/2);break;case w:if(c){if(P.y<=0&&(h<=$||C>=T)){q=!1;break}L(_),E-=P.y,h+=P.y,d=E*c}else L(_),L(y),P.x>=0?C<T?d+=P.x:P.y<=0&&h<=$&&(q=!1):d+=P.x,P.y<=0?h>$&&(E-=P.y,h+=P.y):(E-=P.y,h+=P.y);d<0&&E<0?(l=O,h-=E=-E,u-=d=-d):d<0?(l=k,u-=d=-d):E<0&&(l=x,h-=E=-E);break;case k:if(c){if(P.y<=0&&(h<=$||u<=j)){q=!1;break}L(_),E-=P.y,h+=P.y,d=E*c,u+=a.width-d}else L(_),L(g),P.x<=0?u>j?(d-=P.x,u+=P.x):P.y<=0&&h<=$&&(q=!1):(d-=P.x,u+=P.x),P.y<=0?h>$&&(E-=P.y,h+=P.y):(E-=P.y,h+=P.y);d<0&&E<0?(l=x,h-=E=-E,u-=d=-d):d<0?(l=w,u-=d=-d):E<0&&(l=O,h-=E=-E);break;case O:if(c){if(P.x<=0&&(u<=j||N>=S)){q=!1;break}L(g),d-=P.x,u+=P.x,E=d/c}else L(b),L(g),P.x<=0?u>j?(d-=P.x,u+=P.x):P.y>=0&&N>=S&&(q=!1):(d-=P.x,u+=P.x),P.y>=0?N<S&&(E+=P.y):E+=P.y;d<0&&E<0?(l=w,h-=E=-E,u-=d=-d):d<0?(l=x,u-=d=-d):E<0&&(l=k,h-=E=-E);break;case x:if(c){if(P.x>=0&&(C>=T||N>=S)){q=!1;break}L(y),E=(d+=P.x)/c}else L(b),L(y),P.x>=0?C<T?d+=P.x:P.y>=0&&N>=S&&(q=!1):d+=P.x,P.y>=0?N<S&&(E+=P.y):E+=P.y;d<0&&E<0?(l=k,h-=E=-E,u-=d=-d):d<0?(l=O,u-=d=-d):E<0&&(l=w,h-=E=-E);break;case v:this.move(P.x,P.y),q=!1;break;case m:this.zoom(function(t){var n=e({},t),i=0;return ht(t,(function(t,e){delete n[e],ht(n,(function(e){var n=Math.abs(t.startX-e.startX),o=Math.abs(t.startY-e.startY),r=Math.abs(t.endX-e.endX),a=Math.abs(t.endY-e.endY),s=Math.sqrt(n*n+o*o),l=(Math.sqrt(r*r+a*a)-s)/s;Math.abs(l)>Math.abs(i)&&(i=l)}))})),i}(s),t),q=!1;break;case p:if(!P.x||!P.y){q=!1;break}n=jt(this.cropper),u=M.startX-n.left,h=M.startY-n.top,d=a.minWidth,E=a.minHeight,P.x>0?l=P.y>0?x:w:P.x<0&&(u-=d,l=P.y>0?O:k),P.y<0&&(h-=E),this.cropped||(gt(this.cropBox,A),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0))}q&&(a.width=d,a.height=E,a.left=u,a.top=h,this.action=l,this.renderCropBox()),ht(s,(function(t){t.startX=t.endX,t.startY=t.endY}))}},Yt={crop:function(){return!this.ready||this.cropped||this.disabled||(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&yt(this.dragBox,$),gt(this.cropBox,A),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=dt({},this.initialImageData),this.canvasData=dt({},this.initialCanvasData),this.cropBoxData=dt({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(dt(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),gt(this.dragBox,$),yt(this.cropBox,A)),this},replace:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!this.disabled&&t&&(this.isImg&&(this.element.src=t),e?(this.url=t,this.image.src=t,this.ready&&(this.viewBoxImage.src=t,ht(this.previews,(function(e){e.getElementsByTagName("img")[0].src=t})))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(t))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,gt(this.cropper,C)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,yt(this.cropper,C)),this},destroy:function(){var t=this.element;return t.cropper?(t.cropper=void 0,this.isImg&&this.replaced&&(t.src=this.originalUrl),this.uncreate(),this):this},move:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=this.canvasData,i=n.left,o=n.top;return this.moveTo(ot(t)?t:i+Number(t),ot(e)?e:o+Number(e))},moveTo:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=this.canvasData,i=!1;return t=Number(t),e=Number(e),this.ready&&!this.disabled&&this.options.movable&&(nt(t)&&(n.left=t,i=!0),nt(e)&&(n.top=e,i=!0),i&&this.renderCanvas(!0)),this},zoom:function(t,e){var n=this.canvasData;return t=(t=Number(t))<0?1/(1-t):1+t,this.zoomTo(n.width*t/n.naturalWidth,null,e)},zoomTo:function(t,e,n){var i=this.options,o=this.canvasData,r=o.width,a=o.height,s=o.naturalWidth,l=o.naturalHeight;if((t=Number(t))>=0&&this.ready&&!this.disabled&&i.zoomable){var c=s*t,u=l*t;if(!1===Nt(this.element,K,{ratio:t,oldRatio:r/s,originalEvent:n}))return this;if(n){var h=this.pointers,d=jt(this.cropper),f=h&&Object.keys(h).length?function(t){var e=0,n=0,i=0;return ht(t,(function(t){var o=t.startX,r=t.startY;e+=o,n+=r,i+=1})),{pageX:e/=i,pageY:n/=i}}(h):{pageX:n.pageX,pageY:n.pageY};o.left-=(c-r)*((f.pageX-d.left-o.left)/r),o.top-=(u-a)*((f.pageY-d.top-o.top)/a)}else st(e)&&nt(e.x)&&nt(e.y)?(o.left-=(c-r)*((e.x-o.left)/r),o.top-=(u-a)*((e.y-o.top)/a)):(o.left-=(c-r)/2,o.top-=(u-a)/2);o.width=c,o.height=u,this.renderCanvas(!0)}return this},rotate:function(t){return this.rotateTo((this.imageData.rotate||0)+Number(t))},rotateTo:function(t){return nt(t=Number(t))&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=t%360,this.renderCanvas(!0,!0)),this},scaleX:function(t){var e=this.imageData.scaleY;return this.scale(t,nt(e)?e:1)},scaleY:function(t){var e=this.imageData.scaleX;return this.scale(nt(e)?e:1,t)},scale:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=this.imageData,i=!1;return t=Number(t),e=Number(e),this.ready&&!this.disabled&&this.options.scalable&&(nt(t)&&(n.scaleX=t,i=!0),nt(e)&&(n.scaleY=e,i=!0),i&&this.renderCanvas(!0,!0)),this},getData:function(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.options,i=this.imageData,o=this.canvasData,r=this.cropBoxData;if(this.ready&&this.cropped){t={x:r.left-o.left,y:r.top-o.top,width:r.width,height:r.height};var a=i.width/i.naturalWidth;if(ht(t,(function(e,n){t[n]=e/a})),e){var s=Math.round(t.y+t.height),l=Math.round(t.x+t.width);t.x=Math.round(t.x),t.y=Math.round(t.y),t.width=l-t.x,t.height=s-t.y}}else t={x:0,y:0,width:0,height:0};return n.rotatable&&(t.rotate=i.rotate||0),n.scalable&&(t.scaleX=i.scaleX||1,t.scaleY=i.scaleY||1),t},setData:function(t){var e=this.options,n=this.imageData,i=this.canvasData,o={};if(this.ready&&!this.disabled&&st(t)){var r=!1;e.rotatable&&nt(t.rotate)&&t.rotate!==n.rotate&&(n.rotate=t.rotate,r=!0),e.scalable&&(nt(t.scaleX)&&t.scaleX!==n.scaleX&&(n.scaleX=t.scaleX,r=!0),nt(t.scaleY)&&t.scaleY!==n.scaleY&&(n.scaleY=t.scaleY,r=!0)),r&&this.renderCanvas(!0,!0);var a=n.width/n.naturalWidth;nt(t.x)&&(o.left=t.x*a+i.left),nt(t.y)&&(o.top=t.y*a+i.top),nt(t.width)&&(o.width=t.width*a),nt(t.height)&&(o.height=t.height*a),this.setCropBoxData(o)}return this},getContainerData:function(){return this.ready?dt({},this.containerData):{}},getImageData:function(){return this.sized?dt({},this.imageData):{}},getCanvasData:function(){var t=this.canvasData,e={};return this.ready&&ht(["left","top","width","height","naturalWidth","naturalHeight"],(function(n){e[n]=t[n]})),e},setCanvasData:function(t){var e=this.canvasData,n=e.aspectRatio;return this.ready&&!this.disabled&&st(t)&&(nt(t.left)&&(e.left=t.left),nt(t.top)&&(e.top=t.top),nt(t.width)?(e.width=t.width,e.height=t.width/n):nt(t.height)&&(e.height=t.height,e.width=t.height*n),this.renderCanvas(!0)),this},getCropBoxData:function(){var t,e=this.cropBoxData;return this.ready&&this.cropped&&(t={left:e.left,top:e.top,width:e.width,height:e.height}),t||{}},setCropBoxData:function(t){var e,n,i=this.cropBoxData,o=this.options.aspectRatio;return this.ready&&this.cropped&&!this.disabled&&st(t)&&(nt(t.left)&&(i.left=t.left),nt(t.top)&&(i.top=t.top),nt(t.width)&&t.width!==i.width&&(e=!0,i.width=t.width),nt(t.height)&&t.height!==i.height&&(n=!0,i.height=t.height),o&&(e?i.height=i.width/o:n&&(i.width=i.height*o)),this.renderCropBox()),this},getCroppedCanvas:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var e=this.canvasData,n=Dt(this.image,this.imageData,e,t);if(!this.cropped)return n;var i=this.getData(),o=i.x,r=i.y,s=i.width,l=i.height,c=n.width/Math.floor(e.naturalWidth);1!==c&&(o*=c,r*=c,s*=c,l*=c);var u=s/l,h=Lt({aspectRatio:u,width:t.maxWidth||1/0,height:t.maxHeight||1/0}),d=Lt({aspectRatio:u,width:t.minWidth||0,height:t.minHeight||0},"cover"),f=Lt({aspectRatio:u,width:t.width||(1!==c?n.width:s),height:t.height||(1!==c?n.height:l)}),p=f.width,v=f.height;p=Math.min(h.width,Math.max(d.width,p)),v=Math.min(h.height,Math.max(d.height,v));var m=document.createElement("canvas"),y=m.getContext("2d");m.width=pt(p),m.height=pt(v),y.fillStyle=t.fillColor||"transparent",y.fillRect(0,0,p,v);var g=t.imageSmoothingEnabled,b=void 0===g||g,_=t.imageSmoothingQuality;y.imageSmoothingEnabled=b,_&&(y.imageSmoothingQuality=_);var w,k,x,O,E,C,A=n.width,N=n.height,j=o,$=r;j<=-s||j>A?(j=0,w=0,x=0,E=0):j<=0?(x=-j,j=0,E=w=Math.min(A,s+j)):j<=A&&(x=0,E=w=Math.min(s,A-j)),w<=0||$<=-l||$>N?($=0,k=0,O=0,C=0):$<=0?(O=-$,$=0,C=k=Math.min(N,l+$)):$<=N&&(O=0,C=k=Math.min(l,N-$));var T=[j,$,w,k];if(E>0&&C>0){var S=p/s;T.push(x*S,O*S,E*S,C*S)}return y.drawImage.apply(y,[n].concat(a(T.map((function(t){return Math.floor(pt(t))}))))),m},setAspectRatio:function(t){var e=this.options;return this.disabled||ot(t)||(e.aspectRatio=Math.max(0,t)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(t){var e=this.options,n=this.dragBox,i=this.face;if(this.ready&&!this.disabled){var o=t===M,r=e.movable&&t===P;t=o||r?t:L,e.dragMode=t,xt(n,S,t),bt(n,E,o),bt(n,T,r),e.cropBoxMovable||(xt(i,S,t),bt(i,E,o),bt(i,T,r))}return this}},Xt=c.Cropper,Kt=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(i(this,t),!e||!J.test(e.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=e,this.options=dt({},tt,st(n)&&n),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}var e,n,r;return e=t,r=[{key:"noConflict",value:function(){return window.Cropper=Xt,t}},{key:"setDefaults",value:function(t){dt(tt,st(t)&&t)}}],(n=[{key:"init",value:function(){var t,e=this.element,n=e.tagName.toLowerCase();if(!e.cropper){if(e.cropper=this,"img"===n){if(this.isImg=!0,t=e.getAttribute("src")||"",this.originalUrl=t,!t)return;t=e.src}else"canvas"===n&&window.HTMLCanvasElement&&(t=e.toDataURL());this.load(t)}}},{key:"load",value:function(t){var e=this;if(t){this.url=t,this.imageData={};var n=this.element,i=this.options;if(i.rotatable||i.scalable||(i.checkOrientation=!1),i.checkOrientation&&window.ArrayBuffer)if(G.test(t))Q.test(t)?this.read((o=t.replace(Bt,""),r=atob(o),a=new ArrayBuffer(r.length),ht(s=new Uint8Array(a),(function(t,e){s[e]=r.charCodeAt(e)})),a)):this.clone();else{var o,r,a,s,l=new XMLHttpRequest,c=this.clone.bind(this);this.reloading=!0,this.xhr=l,l.onabort=c,l.onerror=c,l.ontimeout=c,l.onprogress=function(){l.getResponseHeader("content-type")!==Z&&l.abort()},l.onload=function(){e.read(l.response)},l.onloadend=function(){e.reloading=!1,e.xhr=null},i.checkCrossOrigin&&St(t)&&n.crossOrigin&&(t=qt(t)),l.open("GET",t,!0),l.responseType="arraybuffer",l.withCredentials="use-credentials"===n.crossOrigin,l.send()}else this.clone()}}},{key:"read",value:function(t){var e=this.options,n=this.imageData,i=It(t),o=0,r=1,a=1;if(i>1){this.url=function(t,e){for(var n=[],i=new Uint8Array(t);i.length>0;)n.push(Rt.apply(null,ut(i.subarray(0,8192)))),i=i.subarray(8192);return"data:".concat(e,";base64,").concat(btoa(n.join("")))}(t,Z);var s=function(t){var e=0,n=1,i=1;switch(t){case 2:n=-1;break;case 3:e=-180;break;case 4:i=-1;break;case 5:e=90,i=-1;break;case 6:e=90;break;case 7:e=90,n=-1;break;case 8:e=-90}return{rotate:e,scaleX:n,scaleY:i}}(i);o=s.rotate,r=s.scaleX,a=s.scaleY}e.rotatable&&(n.rotate=o),e.scalable&&(n.scaleX=r,n.scaleY=a),this.clone()}},{key:"clone",value:function(){var t=this.element,e=this.url,n=t.crossOrigin,i=e;this.options.checkCrossOrigin&&St(e)&&(n||(n="anonymous"),i=qt(e)),this.crossOrigin=n,this.crossOriginUrl=i;var o=document.createElement("img");n&&(o.crossOrigin=n),o.src=i||e,o.alt=t.alt||"The image to crop",this.image=o,o.onload=this.start.bind(this),o.onerror=this.stop.bind(this),yt(o,N),t.parentNode.insertBefore(o,t.nextSibling)}},{key:"start",value:function(){var t=this,e=this.image;e.onload=null,e.onerror=null,this.sizing=!0;var n=c.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(c.navigator.userAgent),i=function(e,n){dt(t.imageData,{naturalWidth:e,naturalHeight:n,aspectRatio:e/n}),t.initialImageData=dt({},t.imageData),t.sizing=!1,t.sized=!0,t.build()};if(!e.naturalWidth||n){var o=document.createElement("img"),r=document.body||document.documentElement;this.sizingImage=o,o.onload=function(){i(o.width,o.height),n||r.removeChild(o)},o.src=e.src,n||(o.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",r.appendChild(o))}else i(e.naturalWidth,e.naturalHeight)}},{key:"stop",value:function(){var t=this.image;t.onload=null,t.onerror=null,t.parentNode.removeChild(t),this.image=null}},{key:"build",value:function(){if(this.sized&&!this.ready){var t=this.element,e=this.options,n=this.image,i=t.parentNode,o=document.createElement("div");o.innerHTML='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>';var r=o.querySelector(".".concat(d,"-container")),a=r.querySelector(".".concat(d,"-canvas")),s=r.querySelector(".".concat(d,"-drag-box")),l=r.querySelector(".".concat(d,"-crop-box")),c=l.querySelector(".".concat(d,"-face"));this.container=i,this.cropper=r,this.canvas=a,this.dragBox=s,this.cropBox=l,this.viewBox=r.querySelector(".".concat(d,"-view-box")),this.face=c,a.appendChild(n),yt(t,A),i.insertBefore(r,t.nextSibling),this.isImg||gt(n,N),this.initPreview(),this.bind(),e.initialAspectRatio=Math.max(0,e.initialAspectRatio)||NaN,e.aspectRatio=Math.max(0,e.aspectRatio)||NaN,e.viewMode=Math.max(0,Math.min(3,Math.round(e.viewMode)))||0,yt(l,A),e.guides||yt(l.getElementsByClassName("".concat(d,"-dashed")),A),e.center||yt(l.getElementsByClassName("".concat(d,"-center")),A),e.background&&yt(r,"".concat(d,"-bg")),e.highlight||yt(c,j),e.cropBoxMovable&&(yt(c,T),xt(c,S,f)),e.cropBoxResizable||(yt(l.getElementsByClassName("".concat(d,"-line")),A),yt(l.getElementsByClassName("".concat(d,"-point")),A)),this.render(),this.ready=!0,this.setDragMode(e.dragMode),e.autoCrop&&this.crop(),this.setData(e.data),lt(e.ready)&&At(t,W,e.ready,{once:!0}),Nt(t,W)}}},{key:"unbuild",value:function(){this.ready&&(this.ready=!1,this.unbind(),this.resetPreview(),this.cropper.parentNode.removeChild(this.cropper),gt(this.element,A))}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}])&&o(e.prototype,n),r&&o(e,r),t}();return dt(Kt.prototype,Ht,zt,Ut,Ft,Wt,Yt),Kt})),function(t,e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==("undefined"==typeof exports?"undefined":_typeof2(exports))?module.exports=e(require("jquery")):t.Dropify=e(t.jQuery)}(this,(function(t){function e(e,n){if(window.File&&window.FileReader&&window.FileList&&window.Blob){this.element=e,this.input=t(this.element),this.wrapper=null,this.preview=null,this.filenameWrapper=null,this.settings=t.extend(!0,{defaultFile:"",maxFileSize:0,minWidth:0,maxWidth:0,minHeight:0,maxHeight:0,showRemove:!0,showLoader:!0,showErrors:!0,errorTimeout:3e3,errorsPosition:"overlay",imgFileExtensions:["png","jpg","jpeg","gif","bmp"],maxFileSizePreview:"5M",allowedFormats:["portrait","square","landscape"],allowedFileExtensions:["*"],messages:{default:"Drag and drop a file here or click",replace:"Drag and drop or click to replace",remove:"Remove",error:"Ooops, something wrong appended."},error:{fileSize:"The file size is too big ({{ value }} max).",minWidth:"The image width is too small ({{ value }}}px min).",maxWidth:"The image width is too big ({{ value }}}px max).",minHeight:"The image height is too small ({{ value }}}px min).",maxHeight:"The image height is too big ({{ value }}px max).",imageFormat:"The image format is not allowed ({{ value }} only).",fileExtension:"The file is not allowed ({{ value }} only)."},tpl:{wrap:'<div class="dropify-wrapper"></div>',loader:'<div class="dropify-loader"></div>',message:'<div class="dropify-message"><span class="file-icon" /> <p>{{ default }}</p></div>',preview:'<div class="dropify-preview"><span class="dropify-render"></span><div class="dropify-infos"><div class="dropify-infos-inner"><p class="dropify-infos-message">{{ replace }}</p></div></div></div>',filename:'<p class="dropify-filename"><span class="file-icon"></span> <span class="dropify-filename-inner"></span></p>',clearButton:'<button type="button" class="dropify-clear">{{ remove }}</button>',errorLine:'<p class="dropify-error">{{ error }}</p>',errorsContainer:'<div class="dropify-errors-container"><ul></ul></div>'}},n,this.input.data()),this.errorsEvent=t.Event("dropify.errors"),this.isDisabled=!1,this.isInit=!1,this.file={object:null,name:null,size:null,width:null,height:null,type:null},Array.isArray(this.settings.allowedFormats)||(this.settings.allowedFormats=this.settings.allowedFormats.split(" ")),Array.isArray(this.settings.allowedFileExtensions)||(this.settings.allowedFileExtensions=this.settings.allowedFileExtensions.split(" ")),this.onChange=this.onChange.bind(this),this.clearElement=this.clearElement.bind(this),this.onFileReady=this.onFileReady.bind(this),this.translateMessages(),this.createElements(),this.setContainerSize(),this.errorsEvent.errors=[],this.input.on("change",this.onChange)}}var n="dropify";return e.prototype.onChange=function(){this.resetPreview(),this.readFile(this.element)},e.prototype.createElements=function(){this.isInit=!0,this.input.wrap(t(this.settings.tpl.wrap)),this.wrapper=this.input.parent();var e=t(this.settings.tpl.message).insertBefore(this.input);t(this.settings.tpl.errorLine).appendTo(e),!0===this.isTouchDevice()&&this.wrapper.addClass("touch-fallback"),this.input.attr("disabled")&&(this.isDisabled=!0,this.wrapper.addClass("disabled")),!0===this.settings.showLoader&&(this.loader=t(this.settings.tpl.loader),this.loader.insertBefore(this.input)),this.preview=t(this.settings.tpl.preview),this.preview.insertAfter(this.input),!1===this.isDisabled&&!0===this.settings.showRemove&&(this.clearButton=t(this.settings.tpl.clearButton),this.clearButton.insertAfter(this.input),this.clearButton.on("click",this.clearElement)),this.filenameWrapper=t(this.settings.tpl.filename),this.filenameWrapper.prependTo(this.preview.find(".dropify-infos-inner")),!0===this.settings.showErrors&&(this.errorsContainer=t(this.settings.tpl.errorsContainer),"outside"===this.settings.errorsPosition?this.errorsContainer.insertAfter(this.wrapper):this.errorsContainer.insertBefore(this.input));var n=this.settings.defaultFile||"";""!==n.trim()&&(this.file.name=this.cleanFilename(n),this.setPreview(this.isImage(),n))},e.prototype.readFile=function(e){if(e.files&&e.files[0]){var n=new FileReader,i=new Image,o=e.files[0],r=null,a=this,s=t.Event("dropify.fileReady");this.clearErrors(),this.showLoader(),this.setFileInformations(o),this.errorsEvent.errors=[],this.checkFileSize(),this.isFileExtensionAllowed(),this.isImage()&&this.file.size<this.sizeToByte(this.settings.maxFileSizePreview)?(this.input.on("dropify.fileReady",this.onFileReady),n.readAsDataURL(o),n.onload=function(t){r=t.target.result,i.src=t.target.result,i.onload=function(){a.setFileDimensions(this.width,this.height),a.validateImage(),a.input.trigger(s,[!0,r])}}.bind(this)):this.onFileReady(!1)}},e.prototype.onFileReady=function(t,e,n){if(this.input.off("dropify.fileReady",this.onFileReady),0===this.errorsEvent.errors.length)this.setPreview(e,n);else{this.input.trigger(this.errorsEvent,[this]);for(var i=this.errorsEvent.errors.length-1;i>=0;i--){var o=this.errorsEvent.errors[i].namespace.split(".").pop();this.showError(o)}if(void 0!==this.errorsContainer){this.errorsContainer.addClass("visible");var r=this.errorsContainer;setTimeout((function(){r.removeClass("visible")}),this.settings.errorTimeout)}this.wrapper.addClass("has-error"),this.resetPreview(),this.clearElement()}},e.prototype.setFileInformations=function(t){this.file.object=t,this.file.name=t.name,this.file.size=t.size,this.file.type=t.type,this.file.width=null,this.file.height=null},e.prototype.setFileDimensions=function(t,e){this.file.width=t,this.file.height=e},e.prototype.setPreview=function(e,n){this.wrapper.removeClass("has-error").addClass("has-preview"),this.filenameWrapper.children(".dropify-filename-inner").html(this.file.name);var i=this.preview.children(".dropify-render");if(this.hideLoader(),!0===e){var o=t("<img />").attr("src",n);this.settings.height&&o.css("max-height",this.settings.height),o.appendTo(i)}else t("<i />").attr("class","dropify-font-file").appendTo(i),t('<span class="dropify-extension" />').html(this.getFileType()).appendTo(i);this.preview.fadeIn()},e.prototype.resetPreview=function(){this.wrapper.removeClass("has-preview");var t=this.preview.children(".dropify-render");t.find(".dropify-extension").remove(),t.find("i").remove(),t.find("img").remove(),this.preview.hide(),this.hideLoader()},e.prototype.cleanFilename=function(t){var e=t.split("\\").pop();return e==t&&(e=t.split("/").pop()),""!==t?e:""},e.prototype.clearElement=function(){if(0===this.errorsEvent.errors.length){var e=t.Event("dropify.beforeClear");this.input.trigger(e,[this]),!1!==e.result&&(this.resetFile(),this.input.val(""),this.resetPreview(),this.input.trigger(t.Event("dropify.afterClear"),[this]))}else this.resetFile(),this.input.val(""),this.resetPreview()},e.prototype.resetFile=function(){this.file.object=null,this.file.name=null,this.file.size=null,this.file.type=null,this.file.width=null,this.file.height=null},e.prototype.setContainerSize=function(){this.settings.height&&this.wrapper.height(this.settings.height)},e.prototype.isTouchDevice=function(){return"ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0},e.prototype.getFileType=function(){return this.file.name.split(".").pop().toLowerCase()},e.prototype.isImage=function(){return"-1"!=this.settings.imgFileExtensions.indexOf(this.getFileType())},e.prototype.isFileExtensionAllowed=function(){return"-1"!=this.settings.allowedFileExtensions.indexOf("*")||"-1"!=this.settings.allowedFileExtensions.indexOf(this.getFileType())||(this.pushError("fileExtension"),!1)},e.prototype.translateMessages=function(){for(var t in this.settings.tpl)for(var e in this.settings.messages)this.settings.tpl[t]=this.settings.tpl[t].replace("{{ "+e+" }}",this.settings.messages[e])},e.prototype.checkFileSize=function(){0!==this.sizeToByte(this.settings.maxFileSize)&&this.file.size>this.sizeToByte(this.settings.maxFileSize)&&this.pushError("fileSize")},e.prototype.sizeToByte=function(t){var e=0;if(0!==t){var n=t.slice(-1).toUpperCase(),i=1048576;"K"===n?e=1024*parseFloat(t):"M"===n?e=parseFloat(t)*i:"G"===n&&(e=1073741824*parseFloat(t))}return e},e.prototype.validateImage=function(){0!==this.settings.minWidth&&this.settings.minWidth>=this.file.width&&this.pushError("minWidth"),0!==this.settings.maxWidth&&this.settings.maxWidth<=this.file.width&&this.pushError("maxWidth"),0!==this.settings.minHeight&&this.settings.minHeight>=this.file.height&&this.pushError("minHeight"),0!==this.settings.maxHeight&&this.settings.maxHeight<=this.file.height&&this.pushError("maxHeight"),"-1"==this.settings.allowedFormats.indexOf(this.getImageFormat())&&this.pushError("imageFormat")},e.prototype.getImageFormat=function(){return this.file.width==this.file.height?"square":this.file.width<this.file.height?"portrait":this.file.width>this.file.height?"landscape":void 0},e.prototype.pushError=function(e){var n=t.Event("dropify.error."+e);this.errorsEvent.errors.push(n),this.input.trigger(n,[this])},e.prototype.clearErrors=function(){void 0!==this.errorsContainer&&this.errorsContainer.children("ul").html("")},e.prototype.showError=function(t){void 0!==this.errorsContainer&&this.errorsContainer.children("ul").append("<li>"+this.getError(t)+"</li>")},e.prototype.getError=function(t){var e=this.settings.error[t],n="";return"fileSize"===t?n=this.settings.maxFileSize:"minWidth"===t?n=this.settings.minWidth:"maxWidth"===t?n=this.settings.maxWidth:"minHeight"===t?n=this.settings.minHeight:"maxHeight"===t?n=this.settings.maxHeight:"imageFormat"===t?n=this.settings.allowedFormats.join(", "):"fileExtension"===t&&(n=this.settings.allowedFileExtensions.join(", ")),""!==n?e.replace("{{ value }}",n):e},e.prototype.showLoader=function(){void 0!==this.loader&&this.loader.show()},e.prototype.hideLoader=function(){void 0!==this.loader&&this.loader.hide()},e.prototype.destroy=function(){this.input.siblings().remove(),this.input.unwrap(),this.isInit=!1},e.prototype.init=function(){this.createElements()},e.prototype.isDropified=function(){return this.isInit},t.fn[n]=function(i){return this.each((function(){t.data(this,n)||t.data(this,n,new e(this,i))})),this},e})),function(t,e){if("function"==typeof define&&define.amd)define("/Plugin/dropify",["exports","Plugin"],e);else if("undefined"!=typeof exports)e(exports,require("Plugin"));else{var n={exports:{}};e(n.exports,t.Plugin),t.PluginDropify=n.exports}}(this,(function(t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=babelHelpers.interopRequireDefault(e),i="dropify",o=function(t){function e(){return babelHelpers.classCallCheck(this,e),babelHelpers.possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return babelHelpers.inherits(e,t),babelHelpers.createClass(e,[{key:"getName",value:function(){return i}}],[{key:"getDefaults",value:function(){return{}}}]),e}(n.default);n.default.register(i,o),t.default=o})),function(t,e){"object"==("undefined"==typeof exports?"undefined":_typeof2(exports))&&"object"==("undefined"==typeof module?"undefined":_typeof2(module))?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==("undefined"==typeof exports?"undefined":_typeof2(exports))?exports.Quill=e():t.Quill=e()}("undefined"!=typeof self?self:this,(function(){return function(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=45)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(17),o=n(18),r=n(19),a=n(48),s=n(49),l=n(50),c=n(51),u=n(52),h=n(11),d=n(29),f=n(30),p=n(28),v=n(1),m={Scope:v.Scope,create:v.create,find:v.find,query:v.query,register:v.register,Container:i.default,Format:o.default,Leaf:r.default,Embed:c.default,Scroll:a.default,Block:l.default,Inline:s.default,Text:u.default,Attributor:{Attribute:h.default,Class:d.default,Style:f.default,Store:p.default}};e.default=m},function(t,e,n){"use strict";function i(t,e){var n;if(void 0===e&&(e=a.ANY),"string"==typeof t)n=u[t]||s[t];else if(t instanceof Text||t.nodeType===Node.TEXT_NODE)n=u.text;else if("number"==typeof t)t&a.LEVEL&a.BLOCK?n=u.block:t&a.LEVEL&a.INLINE&&(n=u.inline);else if(t instanceof HTMLElement){var i=(t.getAttribute("class")||"").split(/\s+/);for(var o in i)if(n=l[i[o]])break;n=n||c[t.tagName]}return null==n?null:e&a.LEVEL&n.scope&&e&a.TYPE&n.scope?n:null}var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e){var n=this;return e="[Parchment] "+e,(n=t.call(this,e)||this).message=e,n.name=n.constructor.name,n}return o(e,t),e}(Error);e.ParchmentError=r;var a,s={},l={},c={},u={};e.DATA_KEY="__blot",function(t){t[t.TYPE=3]="TYPE",t[t.LEVEL=12]="LEVEL",t[t.ATTRIBUTE=13]="ATTRIBUTE",t[t.BLOT=14]="BLOT",t[t.INLINE=7]="INLINE",t[t.BLOCK=11]="BLOCK",t[t.BLOCK_BLOT=10]="BLOCK_BLOT",t[t.INLINE_BLOT=6]="INLINE_BLOT",t[t.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",t[t.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",t[t.ANY=15]="ANY"}(a=e.Scope||(e.Scope={})),e.create=function(t,e){var n=i(t);if(null==n)throw new r("Unable to create "+t+" blot");var o=n;return new o(t instanceof Node||t.nodeType===Node.TEXT_NODE?t:o.create(e),e)},e.find=function t(n,i){return void 0===i&&(i=!1),null==n?null:null!=n[e.DATA_KEY]?n[e.DATA_KEY].blot:i?t(n.parentNode,i):null},e.query=i,e.register=function t(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(e.length>1)return e.map((function(e){return t(e)}));var i=e[0];if("string"!=typeof i.blotName&&"string"!=typeof i.attrName)throw new r("Invalid definition");if("abstract"===i.blotName)throw new r("Cannot register abstract class");if(u[i.blotName||i.attrName]=i,"string"==typeof i.keyName)s[i.keyName]=i;else if(null!=i.className&&(l[i.className]=i),null!=i.tagName){Array.isArray(i.tagName)?i.tagName=i.tagName.map((function(t){return t.toUpperCase()})):i.tagName=i.tagName.toUpperCase();var o=Array.isArray(i.tagName)?i.tagName:[i.tagName];o.forEach((function(t){null!=c[t]&&null!=i.className||(c[t]=i)}))}return i}},function(t,e){"use strict";var n=Object.prototype.hasOwnProperty,i=Object.prototype.toString,o=function(t){return"function"==typeof Array.isArray?Array.isArray(t):"[object Array]"===i.call(t)},r=function(t){if(!t||"[object Object]"!==i.call(t))return!1;var e,o=n.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&n.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!o&&!r)return!1;for(e in t);return void 0===e||n.call(t,e)};t.exports=function t(){var e,n,i,a,s,l,c=arguments[0],u=1,h=arguments.length,d=!1;for("boolean"==typeof c&&(d=c,c=arguments[1]||{},u=2),(null==c||"object"!=_typeof2(c)&&"function"!=typeof c)&&(c={});u<h;++u)if(null!=(e=arguments[u]))for(n in e)i=c[n],c!==(a=e[n])&&(d&&a&&(r(a)||(s=o(a)))?(s?(s=!1,l=i&&o(i)?i:[]):l=i&&r(i)?i:{},c[n]=t(d,l,a)):void 0!==a&&(c[n]=a));return c}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=_typeof2(e)&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null==t?e:("function"==typeof t.formats&&(e=(0,u.default)(e,t.formats())),null==t.parent||"scroll"==t.parent.blotName||t.parent.statics.scope!==t.statics.scope?e:s(t.parent,e))}Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.BlockEmbed=e.bubbleFormats=void 0;var l=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),c=function t(e,n,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,i)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(i):void 0},u=i(n(2)),h=i(n(4)),d=i(n(0)),f=i(n(14)),p=i(n(5)),v=i(n(8)),m=function(t){function e(){return o(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),l(e,[{key:"attach",value:function(){c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"attach",this).call(this),this.attributes=new d.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return(new h.default).insert(this.value(),(0,u.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(t,e){var n=d.default.query(t,d.default.Scope.BLOCK_ATTRIBUTE);null!=n&&this.attributes.attribute(n,e)}},{key:"formatAt",value:function(t,e,n,i){this.format(n,i)}},{key:"insertAt",value:function(t,n,i){if("string"==typeof n&&n.endsWith("\n")){var o=d.default.create(y.blotName);this.parent.insertBefore(o,0===t?this:this.next),o.insertAt(0,n.slice(0,-1))}else c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"insertAt",this).call(this,t,n,i)}}]),e}(d.default.Embed);m.scope=d.default.Scope.BLOCK_BLOT;var y=function(t){function e(t){o(this,e);var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.cache={},n}return a(e,t),l(e,[{key:"delta",value:function(){return null==this.cache.delta&&(this.cache.delta=this.descendants(d.default.Leaf).reduce((function(t,e){return 0===e.length()?t:t.insert(e.value(),s(e))}),new h.default).insert("\n",s(this))),this.cache.delta}},{key:"deleteAt",value:function(t,n){c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"deleteAt",this).call(this,t,n),this.cache={}}},{key:"formatAt",value:function(t,n,i,o){n<=0||(d.default.query(i,d.default.Scope.BLOCK)?t+n===this.length()&&this.format(i,o):c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"formatAt",this).call(this,t,Math.min(n,this.length()-t-1),i,o),this.cache={})}},{key:"insertAt",value:function(t,n,i){if(null!=i)return c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"insertAt",this).call(this,t,n,i);if(0!==n.length){var o=n.split("\n"),r=o.shift();r.length>0&&(t<this.length()-1||null==this.children.tail?c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"insertAt",this).call(this,Math.min(t,this.length()-1),r):this.children.tail.insertAt(this.children.tail.length(),r),this.cache={});var a=this;o.reduce((function(t,e){return(a=a.split(t,!0)).insertAt(0,e),e.length}),t+r.length)}}},{key:"insertBefore",value:function(t,n){var i=this.children.head;c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"insertBefore",this).call(this,t,n),i instanceof f.default&&i.remove(),this.cache={}}},{key:"length",value:function(){return null==this.cache.length&&(this.cache.length=c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"length",this).call(this)+1),this.cache.length}},{key:"moveChildren",value:function(t,n){c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"moveChildren",this).call(this,t,n),this.cache={}}},{key:"optimize",value:function(t){c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"optimize",this).call(this,t),this.cache={}}},{key:"path",value:function(t){return c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"path",this).call(this,t,!0)}},{key:"removeChild",value:function(t){c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removeChild",this).call(this,t),this.cache={}}},{key:"split",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(n&&(0===t||t>=this.length()-1)){var i=this.clone();return 0===t?(this.parent.insertBefore(i,this),this):(this.parent.insertBefore(i,this.next),i)}var o=c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"split",this).call(this,t,n);return this.cache={},o}}]),e}(d.default.Block);y.blotName="block",y.tagName="P",y.defaultChild="break",y.allowedChildren=[p.default,d.default.Embed,v.default],e.bubbleFormats=s,e.BlockEmbed=m,e.default=y},function(t,e,n){var i=n(54),o=n(12),r=n(2),a=n(20),s=String.fromCharCode(0),l=function(t){Array.isArray(t)?this.ops=t:null!=t&&Array.isArray(t.ops)?this.ops=t.ops:this.ops=[]};l.prototype.insert=function(t,e){var n={};return 0===t.length?this:(n.insert=t,null!=e&&"object"==_typeof2(e)&&Object.keys(e).length>0&&(n.attributes=e),this.push(n))},l.prototype.delete=function(t){return t<=0?this:this.push({delete:t})},l.prototype.retain=function(t,e){if(t<=0)return this;var n={retain:t};return null!=e&&"object"==_typeof2(e)&&Object.keys(e).length>0&&(n.attributes=e),this.push(n)},l.prototype.push=function(t){var e=this.ops.length,n=this.ops[e-1];if(t=r(!0,{},t),"object"==_typeof2(n)){if("number"==typeof t.delete&&"number"==typeof n.delete)return this.ops[e-1]={delete:n.delete+t.delete},this;if("number"==typeof n.delete&&null!=t.insert&&(e-=1,"object"!=_typeof2(n=this.ops[e-1])))return this.ops.unshift(t),this;if(o(t.attributes,n.attributes)){if("string"==typeof t.insert&&"string"==typeof n.insert)return this.ops[e-1]={insert:n.insert+t.insert},"object"==_typeof2(t.attributes)&&(this.ops[e-1].attributes=t.attributes),this;if("number"==typeof t.retain&&"number"==typeof n.retain)return this.ops[e-1]={retain:n.retain+t.retain},"object"==_typeof2(t.attributes)&&(this.ops[e-1].attributes=t.attributes),this}}return e===this.ops.length?this.ops.push(t):this.ops.splice(e,0,t),this},l.prototype.chop=function(){var t=this.ops[this.ops.length-1];return t&&t.retain&&!t.attributes&&this.ops.pop(),this},l.prototype.filter=function(t){return this.ops.filter(t)},l.prototype.forEach=function(t){this.ops.forEach(t)},l.prototype.map=function(t){return this.ops.map(t)},l.prototype.partition=function(t){var e=[],n=[];return this.forEach((function(i){(t(i)?e:n).push(i)})),[e,n]},l.prototype.reduce=function(t,e){return this.ops.reduce(t,e)},l.prototype.changeLength=function(){return this.reduce((function(t,e){return e.insert?t+a.length(e):e.delete?t-e.delete:t}),0)},l.prototype.length=function(){return this.reduce((function(t,e){return t+a.length(e)}),0)},l.prototype.slice=function(t,e){t=t||0,"number"!=typeof e&&(e=1/0);for(var n=[],i=a.iterator(this.ops),o=0;o<e&&i.hasNext();){var r;o<t?r=i.next(t-o):(r=i.next(e-o),n.push(r)),o+=a.length(r)}return new l(n)},l.prototype.compose=function(t){for(var e=a.iterator(this.ops),n=a.iterator(t.ops),i=new l;e.hasNext()||n.hasNext();)if("insert"===n.peekType())i.push(n.next());else if("delete"===e.peekType())i.push(e.next());else{var o=Math.min(e.peekLength(),n.peekLength()),r=e.next(o),s=n.next(o);if("number"==typeof s.retain){var c={};"number"==typeof r.retain?c.retain=o:c.insert=r.insert;var u=a.attributes.compose(r.attributes,s.attributes,"number"==typeof r.retain);u&&(c.attributes=u),i.push(c)}else"number"==typeof s.delete&&"number"==typeof r.retain&&i.push(s)}return i.chop()},l.prototype.concat=function(t){var e=new l(this.ops.slice());return t.ops.length>0&&(e.push(t.ops[0]),e.ops=e.ops.concat(t.ops.slice(1))),e},l.prototype.diff=function(t,e){if(this.ops===t.ops)return new l;var n=[this,t].map((function(e){return e.map((function(n){if(null!=n.insert)return"string"==typeof n.insert?n.insert:s;throw new Error("diff() called "+(e===t?"on":"with")+" non-document")})).join("")})),r=new l,c=i(n[0],n[1],e),u=a.iterator(this.ops),h=a.iterator(t.ops);return c.forEach((function(t){for(var e=t[1].length;e>0;){var n=0;switch(t[0]){case i.INSERT:n=Math.min(h.peekLength(),e),r.push(h.next(n));break;case i.DELETE:n=Math.min(e,u.peekLength()),u.next(n),r.delete(n);break;case i.EQUAL:n=Math.min(u.peekLength(),h.peekLength(),e);var s=u.next(n),l=h.next(n);o(s.insert,l.insert)?r.retain(n,a.attributes.diff(s.attributes,l.attributes)):r.push(l).delete(n)}e-=n}})),r.chop()},l.prototype.eachLine=function(t,e){e=e||"\n";for(var n=a.iterator(this.ops),i=new l,o=0;n.hasNext();){if("insert"!==n.peekType())return;var r=n.peek(),s=a.length(r)-n.peekLength(),c="string"==typeof r.insert?r.insert.indexOf(e,s)-s:-1;if(c<0)i.push(n.next());else if(c>0)i.push(n.next(c));else{if(!1===t(i,n.next(1).attributes||{},o))return;o+=1,i=new l}}i.length()>0&&t(i,{},o)},l.prototype.transform=function(t,e){if(e=!!e,"number"==typeof t)return this.transformPosition(t,e);for(var n=a.iterator(this.ops),i=a.iterator(t.ops),o=new l;n.hasNext()||i.hasNext();)if("insert"!==n.peekType()||!e&&"insert"===i.peekType())if("insert"===i.peekType())o.push(i.next());else{var r=Math.min(n.peekLength(),i.peekLength()),s=n.next(r),c=i.next(r);if(s.delete)continue;c.delete?o.push(c):o.retain(r,a.attributes.transform(s.attributes,c.attributes,e))}else o.retain(a.length(n.next()));return o.chop()},l.prototype.transformPosition=function(t,e){e=!!e;for(var n=a.iterator(this.ops),i=0;n.hasNext()&&i<=t;){var o=n.peekLength(),r=n.peekType();n.next(),"delete"!==r?("insert"===r&&(i<t||!e)&&(t+=o),i+=o):t-=Math.min(o,t-i)}return t},t.exports=l},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=_typeof2(e)&&"function"!=typeof e?t:e}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=function t(e,n,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,i)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(i):void 0},l=i(n(8)),c=i(n(0)),u=function(t){function e(){return o(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),a(e,[{key:"formatAt",value:function(t,n,i,o){if(e.compare(this.statics.blotName,i)<0&&c.default.query(i,c.default.Scope.BLOT)){var r=this.isolate(t,n);o&&r.wrap(i,o)}else s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"formatAt",this).call(this,t,n,i,o)}},{key:"optimize",value:function(t){if(s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"optimize",this).call(this,t),this.parent instanceof e&&e.compare(this.statics.blotName,this.parent.statics.blotName)>0){var n=this.parent.isolate(this.offset(),this.length());this.moveChildren(n),n.wrap(this)}}}],[{key:"compare",value:function(t,n){var i=e.order.indexOf(t),o=e.order.indexOf(n);return i>=0||o>=0?i-o:t===n?0:t<n?-1:1}}]),e}(c.default.Inline);u.allowedChildren=[u,c.default.Embed,l.default],u.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],e.default=u},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if((e=(0,_.default)(!0,{container:t,modules:{clipboard:!0,keyboard:!0,history:!0}},e)).theme&&e.theme!==O.DEFAULTS.theme){if(e.theme=O.import("themes/"+e.theme),null==e.theme)throw new Error("Invalid theme "+e.theme+". Did you register it?")}else e.theme=k.default;var n=(0,_.default)(!0,{},e.theme.DEFAULTS);[n,e].forEach((function(t){t.modules=t.modules||{},Object.keys(t.modules).forEach((function(e){!0===t.modules[e]&&(t.modules[e]={})}))}));var i=Object.keys(n.modules).concat(Object.keys(e.modules)).reduce((function(t,e){var n=O.import("modules/"+e);return null==n?x.error("Cannot load "+e+" module. Are you sure you registered it?"):t[e]=n.DEFAULTS||{},t}),{});return null!=e.modules&&e.modules.toolbar&&e.modules.toolbar.constructor!==Object&&(e.modules.toolbar={container:e.modules.toolbar}),e=(0,_.default)(!0,{},O.DEFAULTS,{modules:i},n,e),["bounds","container","scrollingContainer"].forEach((function(t){"string"==typeof e[t]&&(e[t]=document.querySelector(e[t]))})),e.modules=Object.keys(e.modules).reduce((function(t,n){return e.modules[n]&&(t[n]=e.modules[n]),t}),{}),e}function s(t,e,n,i){if(this.options.strict&&!this.isEnabled()&&e===v.default.sources.USER)return new f.default;var o=null==n?null:this.getSelection(),r=this.editor.delta,a=t();if(null!=o&&(!0===n&&(n=o.index),null==i?o=c(o,a,e):0!==i&&(o=c(o,n,i,e)),this.setSelection(o,v.default.sources.SILENT)),a.length()>0){var s,l,u=[v.default.events.TEXT_CHANGE,a,r,e];if((s=this.emitter).emit.apply(s,[v.default.events.EDITOR_CHANGE].concat(u)),e!==v.default.sources.SILENT)(l=this.emitter).emit.apply(l,u)}return a}function l(t,e,n,i,o){var r={};return"number"==typeof t.index&&"number"==typeof t.length?"number"!=typeof e?(o=i,i=n,n=e,e=t.length,t=t.index):(e=t.length,t=t.index):"number"!=typeof e&&(o=i,i=n,n=e,e=0),"object"===(void 0===n?"undefined":u(n))?(r=n,o=i):"string"==typeof n&&(null!=i?r[n]=i:o=n),[t,e,r,o=o||v.default.sources.API]}function c(t,e,n,i){if(null==t)return null;var o=void 0,r=void 0;if(e instanceof f.default){var a=[t.index,t.index+t.length].map((function(t){return e.transformPosition(t,i!==v.default.sources.USER)})),s=h(a,2);o=s[0],r=s[1]}else{var l=[t.index,t.index+t.length].map((function(t){return t<e||t===e&&i===v.default.sources.USER?t:n>=0?t+n:Math.max(e,t+n)})),c=h(l,2);o=c[0],r=c[1]}return new g.Range(o,r-o)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.overload=e.expandConfig=void 0;var u="function"==typeof Symbol&&"symbol"==_typeof2(Symbol.iterator)?function(t){return _typeof2(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":_typeof2(t)},h=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,o=!1,r=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){o=!0,r=t}finally{try{!i&&s.return&&s.return()}finally{if(o)throw r}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},d=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();n(53);var f=i(n(4)),p=i(n(57)),v=i(n(9)),m=i(n(7)),y=i(n(0)),g=n(22),b=i(g),_=i(n(2)),w=i(n(10)),k=i(n(32)),x=(0,w.default)("quill"),O=function(){function t(e){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(r(this,t),this.options=a(e,i),this.container=this.options.container,null==this.container)return x.error("Invalid Quill container",e);this.options.debug&&t.debug(this.options.debug);var o=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new v.default,this.scroll=y.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new p.default(this.scroll),this.selection=new b.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(v.default.events.EDITOR_CHANGE,(function(t){t===v.default.events.TEXT_CHANGE&&n.root.classList.toggle("ql-blank",n.editor.isBlank())})),this.emitter.on(v.default.events.SCROLL_UPDATE,(function(t,e){var i=n.selection.lastRange,o=i&&0===i.length?i.index:void 0;s.call(n,(function(){return n.editor.update(null,e,o)}),t)}));var l=this.clipboard.convert("<div class='ql-editor' style=\"white-space: normal;\">"+o+"<p><br></p></div>");this.setContents(l),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return d(t,null,[{key:"debug",value:function(t){!0===t&&(t="log"),w.default.level(t)}},{key:"find",value:function(t){return t.__quill||y.default.find(t)}},{key:"import",value:function(t){return null==this.imports[t]&&x.error("Cannot import "+t+". Are you sure it was registered?"),this.imports[t]}},{key:"register",value:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("string"!=typeof t){var o=t.attrName||t.blotName;"string"==typeof o?this.register("formats/"+o,t,e):Object.keys(t).forEach((function(i){n.register(i,t[i],e)}))}else null==this.imports[t]||i||x.warn("Overwriting "+t+" with",e),this.imports[t]=e,(t.startsWith("blots/")||t.startsWith("formats/"))&&"abstract"!==e.blotName?y.default.register(e):t.startsWith("modules")&&"function"==typeof e.register&&e.register()}}]),d(t,[{key:"addContainer",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("string"==typeof t){var n=t;(t=document.createElement("div")).classList.add(n)}return this.container.insertBefore(t,e),t}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(t,e,n){var i=this,o=l(t,e,n),r=h(o,4);return t=r[0],e=r[1],n=r[3],s.call(this,(function(){return i.editor.deleteText(t,e)}),n,t,-1*e)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.scroll.enable(t),this.container.classList.toggle("ql-disabled",!t)}},{key:"focus",value:function(){var t=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=t,this.scrollIntoView()}},{key:"format",value:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:v.default.sources.API;return s.call(this,(function(){var i=n.getSelection(!0),r=new f.default;if(null==i)return r;if(y.default.query(t,y.default.Scope.BLOCK))r=n.editor.formatLine(i.index,i.length,o({},t,e));else{if(0===i.length)return n.selection.format(t,e),r;r=n.editor.formatText(i.index,i.length,o({},t,e))}return n.setSelection(i,v.default.sources.SILENT),r}),i)}},{key:"formatLine",value:function(t,e,n,i,o){var r,a=this,c=l(t,e,n,i,o),u=h(c,4);return t=u[0],e=u[1],r=u[2],o=u[3],s.call(this,(function(){return a.editor.formatLine(t,e,r)}),o,t,0)}},{key:"formatText",value:function(t,e,n,i,o){var r,a=this,c=l(t,e,n,i,o),u=h(c,4);return t=u[0],e=u[1],r=u[2],o=u[3],s.call(this,(function(){return a.editor.formatText(t,e,r)}),o,t,0)}},{key:"getBounds",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=void 0;n="number"==typeof t?this.selection.getBounds(t,e):this.selection.getBounds(t.index,t.length);var i=this.container.getBoundingClientRect();return{bottom:n.bottom-i.top,height:n.height,left:n.left-i.left,right:n.right-i.left,top:n.top-i.top,width:n.width}}},{key:"getContents",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-t,n=l(t,e),i=h(n,2);return t=i[0],e=i[1],this.editor.getContents(t,e)}},{key:"getFormat",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getSelection(!0),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"number"==typeof t?this.editor.getFormat(t,e):this.editor.getFormat(t.index,t.length)}},{key:"getIndex",value:function(t){return t.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(t){return this.scroll.leaf(t)}},{key:"getLine",value:function(t){return this.scroll.line(t)}},{key:"getLines",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE;return"number"!=typeof t?this.scroll.lines(t.index,t.length):this.scroll.lines(t,e)}},{key:"getModule",value:function(t){return this.theme.modules[t]}},{key:"getSelection",value:function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-t,n=l(t,e),i=h(n,2);return t=i[0],e=i[1],this.editor.getText(t,e)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(e,n,i){var o=this,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.sources.API;return s.call(this,(function(){return o.editor.insertEmbed(e,n,i)}),r,e)}},{key:"insertText",value:function(t,e,n,i,o){var r,a=this,c=l(t,0,n,i,o),u=h(c,4);return t=u[0],r=u[2],o=u[3],s.call(this,(function(){return a.editor.insertText(t,e,r)}),o,t,e.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(t,e,n){this.clipboard.dangerouslyPasteHTML(t,e,n)}},{key:"removeFormat",value:function(t,e,n){var i=this,o=l(t,e,n),r=h(o,4);return t=r[0],e=r[1],n=r[3],s.call(this,(function(){return i.editor.removeFormat(t,e)}),n,t)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:v.default.sources.API;return s.call(this,(function(){t=new f.default(t);var n=e.getLength(),i=e.editor.deleteText(0,n),o=e.editor.applyDelta(t),r=o.ops[o.ops.length-1];return null!=r&&"string"==typeof r.insert&&"\n"===r.insert[r.insert.length-1]&&(e.editor.deleteText(e.getLength()-1,1),o.delete(1)),i.compose(o)}),n)}},{key:"setSelection",value:function(e,n,i){if(null==e)this.selection.setRange(null,n||t.sources.API);else{var o=l(e,n,i),r=h(o,4);e=r[0],n=r[1],i=r[3],this.selection.setRange(new g.Range(e,n),i),i!==v.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:v.default.sources.API,n=(new f.default).insert(t);return this.setContents(n,e)}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v.default.sources.USER,e=this.scroll.update(t);return this.selection.update(t),e}},{key:"updateContents",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:v.default.sources.API;return s.call(this,(function(){return t=new f.default(t),e.editor.applyDelta(t,n)}),n,!0)}}]),t}();O.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},O.events=v.default.events,O.sources=v.default.sources,O.version="1.3.6",O.imports={delta:f.default,parchment:y.default,"core/module":m.default,"core/theme":k.default},e.expandConfig=a,e.overload=l,e.default=O},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,t),this.quill=e,this.options=n};o.DEFAULTS={},e.default=o},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=_typeof2(e)&&"function"!=typeof e?t:e}Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(n(0)),a=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(r.default.Text);e.default=a},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function t(e,n,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,i)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(i):void 0},a=i(n(58)),s=(0,i(n(10)).default)("quill:events");["selectionchange","mousedown","mouseup","click"].forEach((function(t){document.addEventListener(t,(function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];[].slice.call(document.querySelectorAll(".ql-container")).forEach((function(t){var n;t.__quill&&t.__quill.emitter&&(n=t.__quill.emitter).handleDOM.apply(n,e)}))}))}));var l=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=_typeof2(e)&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.listeners={},t.on("error",s.error),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),o(e,[{key:"emit",value:function(){s.log.apply(s,arguments),r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];(this.listeners[t.type]||[]).forEach((function(e){var i=e.node,o=e.handler;(t.target===i||i.contains(t.target))&&o.apply(void 0,[t].concat(n))}))}},{key:"listenDOM",value:function(t,e,n){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push({node:e,handler:n})}}]),e}(a.default);l.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},l.sources={API:"api",SILENT:"silent",USER:"user"},e.default=l},function(t,e,n){"use strict";function i(t){if(r.indexOf(t)<=r.indexOf(a)){for(var e,n=arguments.length,i=Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];(e=console)[t].apply(e,i)}}function o(t){return r.reduce((function(e,n){return e[n]=i.bind(console,n,t),e}),{})}Object.defineProperty(e,"__esModule",{value:!0});var r=["error","warn","log","info"],a="warn";i.level=o.level=function(t){a=t},e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),o=function(){function t(t,e,n){void 0===n&&(n={}),this.attrName=t,this.keyName=e;var o=i.Scope.TYPE&i.Scope.ATTRIBUTE;null!=n.scope?this.scope=n.scope&i.Scope.LEVEL|o:this.scope=i.Scope.ATTRIBUTE,null!=n.whitelist&&(this.whitelist=n.whitelist)}return t.keys=function(t){return[].map.call(t.attributes,(function(t){return t.name}))},t.prototype.add=function(t,e){return!!this.canAdd(t,e)&&(t.setAttribute(this.keyName,e),!0)},t.prototype.canAdd=function(t,e){return null!=i.query(t,i.Scope.BLOT&(this.scope|i.Scope.TYPE))&&(null==this.whitelist||("string"==typeof e?this.whitelist.indexOf(e.replace(/["']/g,""))>-1:this.whitelist.indexOf(e)>-1))},t.prototype.remove=function(t){t.removeAttribute(this.keyName)},t.prototype.value=function(t){var e=t.getAttribute(this.keyName);return this.canAdd(t,e)&&e?e:""},t}();e.default=o},function(t,e,n){function i(t){return null==t}function o(t){return!(!t||"object"!=_typeof2(t)||"number"!=typeof t.length||"function"!=typeof t.copy||"function"!=typeof t.slice||t.length>0&&"number"!=typeof t[0])}var r=Array.prototype.slice,a=n(55),s=n(56),l=t.exports=function(t,e,n){return n||(n={}),t===e||(t instanceof Date&&e instanceof Date?t.getTime()===e.getTime():!t||!e||"object"!=_typeof2(t)&&"object"!=_typeof2(e)?n.strict?t===e:t==e:function(t,e,n){var c,u;if(i(t)||i(e))return!1;if(t.prototype!==e.prototype)return!1;if(s(t))return!!s(e)&&(t=r.call(t),e=r.call(e),l(t,e,n));if(o(t)){if(!o(e))return!1;if(t.length!==e.length)return!1;for(c=0;c<t.length;c++)if(t[c]!==e[c])return!1;return!0}try{var h=a(t),d=a(e)}catch(t){return!1}if(h.length!=d.length)return!1;for(h.sort(),d.sort(),c=h.length-1;c>=0;c--)if(h[c]!=d[c])return!1;for(c=h.length-1;c>=0;c--)if(u=h[c],!l(t[u],e[u],n))return!1;return _typeof2(t)==_typeof2(e)}(t,e,n))}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=_typeof2(e)&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.Code=void 0;var s=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,o=!1,r=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){o=!0,r=t}finally{try{!i&&s.return&&s.return()}finally{if(o)throw r}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},l=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),c=function t(e,n,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,i)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(i):void 0},u=i(n(4)),h=i(n(0)),d=i(n(3)),f=i(n(5)),p=i(n(8)),v=function(t){function e(){return o(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),e}(f.default);v.blotName="code",v.tagName="CODE";var m=function(t){function e(){return o(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),l(e,[{key:"delta",value:function(){var t=this,e=this.domNode.textContent;return e.endsWith("\n")&&(e=e.slice(0,-1)),e.split("\n").reduce((function(e,n){return e.insert(n).insert("\n",t.formats())}),new u.default)}},{key:"format",value:function(t,n){if(t!==this.statics.blotName||!n){var i=this.descendant(p.default,this.length()-1),o=s(i,1)[0];null!=o&&o.deleteAt(o.length()-1,1),c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"format",this).call(this,t,n)}}},{key:"formatAt",value:function(t,n,i,o){if(0!==n&&null!=h.default.query(i,h.default.Scope.BLOCK)&&(i!==this.statics.blotName||o!==this.statics.formats(this.domNode))){var r=this.newlineIndex(t);if(!(r<0||r>=t+n)){var a=this.newlineIndex(t,!0)+1,s=r-a+1,l=this.isolate(a,s),c=l.next;l.format(i,o),c instanceof e&&c.formatAt(0,t-a+n-s,i,o)}}}},{key:"insertAt",value:function(t,e,n){if(null==n){var i=this.descendant(p.default,t),o=s(i,2),r=o[0],a=o[1];r.insertAt(a,e)}}},{key:"length",value:function(){var t=this.domNode.textContent.length;return this.domNode.textContent.endsWith("\n")?t:t+1}},{key:"newlineIndex",value:function(t){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1])return this.domNode.textContent.slice(0,t).lastIndexOf("\n");var e=this.domNode.textContent.slice(t).indexOf("\n");return e>-1?t+e:-1}},{key:"optimize",value:function(t){this.domNode.textContent.endsWith("\n")||this.appendChild(h.default.create("text","\n")),c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"optimize",this).call(this,t);var n=this.next;null!=n&&n.prev===this&&n.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===n.statics.formats(n.domNode)&&(n.optimize(t),n.moveChildren(this),n.remove())}},{key:"replace",value:function(t){c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"replace",this).call(this,t),[].slice.call(this.domNode.querySelectorAll("*")).forEach((function(t){var e=h.default.find(t);null==e?t.parentNode.removeChild(t):e instanceof h.default.Embed?e.remove():e.unwrap()}))}}],[{key:"create",value:function(t){var n=c(e.__proto__||Object.getPrototypeOf(e),"create",this).call(this,t);return n.setAttribute("spellcheck",!1),n}},{key:"formats",value:function(){return!0}}]),e}(d.default);m.blotName="code-block",m.tagName="PRE",m.TAB="  ",e.Code=v,e.default=m},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=_typeof2(e)&&"function"!=typeof e?t:e}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function t(e,n,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,i)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(i):void 0},s=function(t){return t&&t.__esModule?t:{default:t}}(n(0)),l=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:"insertInto",value:function(t,n){0===t.children.length?a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"insertInto",this).call(this,t,n):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),e}(s.default.Embed);l.blotName="break",l.tagName="BR",e.default=l},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=_typeof2(e)&&"function"!=typeof e?t:e}function r(t,e){var n=document.createElement("a");n.href=t;var i=n.href.slice(0,n.href.indexOf(":"));return e.indexOf(i)>-1}Object.defineProperty(e,"__esModule",{value:!0}),e.sanitize=e.default=void 0;var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=function t(e,n,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,i)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(i):void 0},l=function(t){return t&&t.__esModule?t:{default:t}}(n(5)),c=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),a(e,[{key:"format",value:function(t,n){if(t!==this.statics.blotName||!n)return s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"format",this).call(this,t,n);n=this.constructor.sanitize(n),this.domNode.setAttribute("href",n)}}],[{key:"create",value:function(t){var n=s(e.__proto__||Object.getPrototypeOf(e),"create",this).call(this,t);return t=this.sanitize(t),n.setAttribute("href",t),n.setAttribute("target","_blank"),n}},{key:"formats",value:function(t){return t.getAttribute("href")}},{key:"sanitize",value:function(t){return r(t,this.PROTOCOL_WHITELIST)?t:this.SANITIZED_URL}}]),e}(l.default);c.blotName="link",c.tagName="A",c.SANITIZED_URL="about:blank",c.PROTOCOL_WHITELIST=["http","https","mailto","tel"],e.default=c,e.sanitize=r},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){t.setAttribute(e,!("true"===t.getAttribute(e)))}Object.defineProperty(e,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==_typeof2(Symbol.iterator)?function(t){return _typeof2(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":_typeof2(t)},a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=i(n(25)),l=i(n(106)),c=0,u=function(){function t(e){var n=this;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.select=e,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",(function(){n.togglePicker()})),this.label.addEventListener("keydown",(function(t){switch(t.keyCode){case s.default.keys.ENTER:n.togglePicker();break;case s.default.keys.ESCAPE:n.escape(),t.preventDefault()}})),this.select.addEventListener("change",this.update.bind(this))}return a(t,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),o(this.label,"aria-expanded"),o(this.options,"aria-hidden")}},{key:"buildItem",value:function(t){var e=this,n=document.createElement("span");return n.tabIndex="0",n.setAttribute("role","button"),n.classList.add("ql-picker-item"),t.hasAttribute("value")&&n.setAttribute("data-value",t.getAttribute("value")),t.textContent&&n.setAttribute("data-label",t.textContent),n.addEventListener("click",(function(){e.selectItem(n,!0)})),n.addEventListener("keydown",(function(t){switch(t.keyCode){case s.default.keys.ENTER:e.selectItem(n,!0),t.preventDefault();break;case s.default.keys.ESCAPE:e.escape(),t.preventDefault()}})),n}},{key:"buildLabel",value:function(){var t=document.createElement("span");return t.classList.add("ql-picker-label"),t.innerHTML=l.default,t.tabIndex="0",t.setAttribute("role","button"),t.setAttribute("aria-expanded","false"),this.container.appendChild(t),t}},{key:"buildOptions",value:function(){var t=this,e=document.createElement("span");e.classList.add("ql-picker-options"),e.setAttribute("aria-hidden","true"),e.tabIndex="-1",e.id="ql-picker-options-"+c,c+=1,this.label.setAttribute("aria-controls",e.id),this.options=e,[].slice.call(this.select.options).forEach((function(n){var i=t.buildItem(n);e.appendChild(i),!0===n.selected&&t.selectItem(i)})),this.container.appendChild(e)}},{key:"buildPicker",value:function(){var t=this;[].slice.call(this.select.attributes).forEach((function(e){t.container.setAttribute(e.name,e.value)})),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var t=this;this.close(),setTimeout((function(){return t.label.focus()}),1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.container.querySelector(".ql-selected");if(t!==n&&(null!=n&&n.classList.remove("ql-selected"),null!=t&&(t.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(t.parentNode.children,t),t.hasAttribute("data-value")?this.label.setAttribute("data-value",t.getAttribute("data-value")):this.label.removeAttribute("data-value"),t.hasAttribute("data-label")?this.label.setAttribute("data-label",t.getAttribute("data-label")):this.label.removeAttribute("data-label"),e))){if("function"==typeof Event)this.select.dispatchEvent(new Event("change"));else if("object"===("undefined"==typeof Event?"undefined":r(Event))){var i=document.createEvent("Event");i.initEvent("change",!0,!0),this.select.dispatchEvent(i)}this.close()}}},{key:"update",value:function(){var t=void 0;if(this.select.selectedIndex>-1){var e=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];t=this.select.options[this.select.selectedIndex],this.selectItem(e)}else this.selectItem(null);var n=null!=t&&t!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",n)}}]),t}();e.default=u},function(t,e,n){"use strict";function i(t){var e=s.find(t);if(null==e)try{e=s.create(t)}catch(n){e=s.create(s.Scope.INLINE),[].slice.call(t.childNodes).forEach((function(t){e.domNode.appendChild(t)})),t.parentNode&&t.parentNode.replaceChild(e.domNode,t),e.attach()}return e}var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(47),a=n(27),s=n(1),l=function(t){function e(e){var n=t.call(this,e)||this;return n.build(),n}return o(e,t),e.prototype.appendChild=function(t){this.insertBefore(t)},e.prototype.attach=function(){t.prototype.attach.call(this),this.children.forEach((function(t){t.attach()}))},e.prototype.build=function(){var t=this;this.children=new r.default,[].slice.call(this.domNode.childNodes).reverse().forEach((function(e){try{var n=i(e);t.insertBefore(n,t.children.head||void 0)}catch(t){if(t instanceof s.ParchmentError)return;throw t}}))},e.prototype.deleteAt=function(t,e){if(0===t&&e===this.length())return this.remove();this.children.forEachAt(t,e,(function(t,e,n){t.deleteAt(e,n)}))},e.prototype.descendant=function(t,n){var i=this.children.find(n),o=i[0],r=i[1];return null==t.blotName&&t(o)||null!=t.blotName&&o instanceof t?[o,r]:o instanceof e?o.descendant(t,r):[null,-1]},e.prototype.descendants=function(t,n,i){void 0===n&&(n=0),void 0===i&&(i=Number.MAX_VALUE);var o=[],r=i;return this.children.forEachAt(n,i,(function(n,i,a){(null==t.blotName&&t(n)||null!=t.blotName&&n instanceof t)&&o.push(n),n instanceof e&&(o=o.concat(n.descendants(t,i,r))),r-=a})),o},e.prototype.detach=function(){this.children.forEach((function(t){t.detach()})),t.prototype.detach.call(this)},e.prototype.formatAt=function(t,e,n,i){this.children.forEachAt(t,e,(function(t,e,o){t.formatAt(e,o,n,i)}))},e.prototype.insertAt=function(t,e,n){var i=this.children.find(t),o=i[0],r=i[1];if(o)o.insertAt(r,e,n);else{var a=null==n?s.create("text",e):s.create(e,n);this.appendChild(a)}},e.prototype.insertBefore=function(t,e){if(null!=this.statics.allowedChildren&&!this.statics.allowedChildren.some((function(e){return t instanceof e})))throw new s.ParchmentError("Cannot insert "+t.statics.blotName+" into "+this.statics.blotName);t.insertInto(this,e)},e.prototype.length=function(){return this.children.reduce((function(t,e){return t+e.length()}),0)},e.prototype.moveChildren=function(t,e){this.children.forEach((function(n){t.insertBefore(n,e)}))},e.prototype.optimize=function(e){if(t.prototype.optimize.call(this,e),0===this.children.length)if(null!=this.statics.defaultChild){var n=s.create(this.statics.defaultChild);this.appendChild(n),n.optimize(e)}else this.remove()},e.prototype.path=function(t,n){void 0===n&&(n=!1);var i=this.children.find(t,n),o=i[0],r=i[1],a=[[this,t]];return o instanceof e?a.concat(o.path(r,n)):(null!=o&&a.push([o,r]),a)},e.prototype.removeChild=function(t){this.children.remove(t)},e.prototype.replace=function(n){n instanceof e&&n.moveChildren(this),t.prototype.replace.call(this,n)},e.prototype.split=function(t,e){if(void 0===e&&(e=!1),!e){if(0===t)return this;if(t===this.length())return this.next}var n=this.clone();return this.parent.insertBefore(n,this.next),this.children.forEachAt(t,this.length(),(function(t,i,o){t=t.split(i,e),n.appendChild(t)})),n},e.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},e.prototype.update=function(t,e){var n=this,o=[],r=[];t.forEach((function(t){t.target===n.domNode&&"childList"===t.type&&(o.push.apply(o,t.addedNodes),r.push.apply(r,t.removedNodes))})),r.forEach((function(t){if(!(null!=t.parentNode&&"IFRAME"!==t.tagName&&document.body.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var e=s.find(t);null!=e&&(null!=e.domNode.parentNode&&e.domNode.parentNode!==n.domNode||e.detach())}})),o.filter((function(t){return t.parentNode==n.domNode})).sort((function(t,e){return t===e?0:t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1})).forEach((function(t){var e=null;null!=t.nextSibling&&(e=s.find(t.nextSibling));var o=i(t);o.next==e&&null!=o.next||(null!=o.parent&&o.parent.removeChild(n),n.insertBefore(o,e||void 0))}))},e}(a.default);e.default=l},function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(11),r=n(28),a=n(17),s=n(1),l=function(t){function e(e){var n=t.call(this,e)||this;return n.attributes=new r.default(n.domNode),n}return i(e,t),e.formats=function(t){return"string"==typeof this.tagName||(Array.isArray(this.tagName)?t.tagName.toLowerCase():void 0)},e.prototype.format=function(t,e){var n=s.query(t);n instanceof o.default?this.attributes.attribute(n,e):e&&(null==n||t===this.statics.blotName&&this.formats()[t]===e||this.replaceWith(t,e))},e.prototype.formats=function(){var t=this.attributes.values(),e=this.statics.formats(this.domNode);return null!=e&&(t[this.statics.blotName]=e),t},e.prototype.replaceWith=function(e,n){var i=t.prototype.replaceWith.call(this,e,n);return this.attributes.copy(i),i},e.prototype.update=function(e,n){var i=this;t.prototype.update.call(this,e,n),e.some((function(t){return t.target===i.domNode&&"attributes"===t.type}))&&this.attributes.build()},e.prototype.wrap=function(n,i){var o=t.prototype.wrap.call(this,n,i);return o instanceof e&&o.statics.scope===this.statics.scope&&this.attributes.move(o),o},e}(a.default);e.default=l},function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(27),r=n(1),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.value=function(t){return!0},e.prototype.index=function(t,e){return this.domNode===t||this.domNode.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(e,1):-1},e.prototype.position=function(t,e){var n=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return t>0&&(n+=1),[this.parent.domNode,n]},e.prototype.value=function(){return(t={})[this.statics.blotName]=this.statics.value(this.domNode)||!0,t;var t},e.scope=r.Scope.INLINE_BLOT,e}(o.default);e.default=a},function(t,e,n){function i(t){this.ops=t,this.index=0,this.offset=0}var o=n(12),r=n(2),a={attributes:{compose:function(t,e,n){"object"!=_typeof2(t)&&(t={}),"object"!=_typeof2(e)&&(e={});var i=r(!0,{},e);for(var o in n||(i=Object.keys(i).reduce((function(t,e){return null!=i[e]&&(t[e]=i[e]),t}),{})),t)void 0!==t[o]&&void 0===e[o]&&(i[o]=t[o]);return Object.keys(i).length>0?i:void 0},diff:function(t,e){"object"!=_typeof2(t)&&(t={}),"object"!=_typeof2(e)&&(e={});var n=Object.keys(t).concat(Object.keys(e)).reduce((function(n,i){return o(t[i],e[i])||(n[i]=void 0===e[i]?null:e[i]),n}),{});return Object.keys(n).length>0?n:void 0},transform:function(t,e,n){if("object"!=_typeof2(t))return e;if("object"==_typeof2(e)){if(!n)return e;var i=Object.keys(e).reduce((function(n,i){return void 0===t[i]&&(n[i]=e[i]),n}),{});return Object.keys(i).length>0?i:void 0}}},iterator:function(t){return new i(t)},length:function(t){return"number"==typeof t.delete?t.delete:"number"==typeof t.retain?t.retain:"string"==typeof t.insert?t.insert.length:1}};i.prototype.hasNext=function(){return this.peekLength()<1/0},i.prototype.next=function(t){t||(t=1/0);var e=this.ops[this.index];if(e){var n=this.offset,i=a.length(e);if(t>=i-n?(t=i-n,this.index+=1,this.offset=0):this.offset+=t,"number"==typeof e.delete)return{delete:t};var o={};return e.attributes&&(o.attributes=e.attributes),"number"==typeof e.retain?o.retain=t:"string"==typeof e.insert?o.insert=e.insert.substr(n,t):o.insert=e.insert,o}return{retain:1/0}},i.prototype.peek=function(){return this.ops[this.index]},i.prototype.peekLength=function(){return this.ops[this.index]?a.length(this.ops[this.index])-this.offset:1/0},i.prototype.peekType=function(){return this.ops[this.index]?"number"==typeof this.ops[this.index].delete?"delete":"number"==typeof this.ops[this.index].retain?"retain":"insert":"retain"},t.exports=a},function(t,e){var n=function(){"use strict";function t(t,e){return null!=e&&t instanceof e}function e(n,s,l,c,u){"object"==_typeof2(s)&&(l=s.depth,c=s.prototype,u=s.includeNonEnumerable,s=s.circular);var h=[],d=[],f="undefined"!=typeof Buffer;return void 0===s&&(s=!0),void 0===l&&(l=1/0),function n(l,p){if(null===l)return null;if(0===p)return l;var v,m;if("object"!=_typeof2(l))return l;if(t(l,o))v=new o;else if(t(l,r))v=new r;else if(t(l,a))v=new a((function(t,e){l.then((function(e){t(n(e,p-1))}),(function(t){e(n(t,p-1))}))}));else if(e.__isArray(l))v=[];else if(e.__isRegExp(l))v=new RegExp(l.source,i(l)),l.lastIndex&&(v.lastIndex=l.lastIndex);else if(e.__isDate(l))v=new Date(l.getTime());else{if(f&&Buffer.isBuffer(l))return v=new Buffer(l.length),l.copy(v),v;t(l,Error)?v=Object.create(l):void 0===c?(m=Object.getPrototypeOf(l),v=Object.create(m)):(v=Object.create(c),m=c)}if(s){var y=h.indexOf(l);if(-1!=y)return d[y];h.push(l),d.push(v)}for(var g in t(l,o)&&l.forEach((function(t,e){var i=n(e,p-1),o=n(t,p-1);v.set(i,o)})),t(l,r)&&l.forEach((function(t){var e=n(t,p-1);v.add(e)})),l){var b;m&&(b=Object.getOwnPropertyDescriptor(m,g)),b&&null==b.set||(v[g]=n(l[g],p-1))}if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(l);for(g=0;g<_.length;g++){var w=_[g];(!(x=Object.getOwnPropertyDescriptor(l,w))||x.enumerable||u)&&(v[w]=n(l[w],p-1),x.enumerable||Object.defineProperty(v,w,{enumerable:!1}))}}if(u){var k=Object.getOwnPropertyNames(l);for(g=0;g<k.length;g++){var x,O=k[g];(x=Object.getOwnPropertyDescriptor(l,O))&&x.enumerable||(v[O]=n(l[O],p-1),Object.defineProperty(v,O,{enumerable:!1}))}}return v}(n,l)}function n(t){return Object.prototype.toString.call(t)}function i(t){var e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),e}var o,r,a;try{o=Map}catch(t){o=function(){}}try{r=Set}catch(t){r=function(){}}try{a=Promise}catch(t){a=function(){}}return e.clonePrototype=function(t){if(null===t)return null;var e=function(){};return e.prototype=t,new e},e.__objToStr=n,e.__isDate=function(t){return"object"==_typeof2(t)&&"[object Date]"===n(t)},e.__isArray=function(t){return"object"==_typeof2(t)&&"[object Array]"===n(t)},e.__isRegExp=function(t){return"object"==_typeof2(t)&&"[object RegExp]"===n(t)},e.__getRegExpFlags=i,e}();"object"==_typeof2(t)&&t.exports&&(t.exports=n)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){try{e.parentNode}catch(t){return!1}return e instanceof Text&&(e=e.parentNode),t.contains(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.Range=void 0;var s=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,o=!1,r=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){o=!0,r=t}finally{try{!i&&s.return&&s.return()}finally{if(o)throw r}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},l=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),c=i(n(0)),u=i(n(21)),h=i(n(12)),d=i(n(9)),f=(0,i(n(10)).default)("quill:selection"),p=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;r(this,t),this.index=e,this.length=n},v=function(){function t(e,n){var i=this;r(this,t),this.emitter=n,this.scroll=e,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=c.default.create("cursor",this),this.lastRange=this.savedRange=new p(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,(function(){i.mouseDown||setTimeout(i.update.bind(i,d.default.sources.USER),1)})),this.emitter.on(d.default.events.EDITOR_CHANGE,(function(t,e){t===d.default.events.TEXT_CHANGE&&e.length()>0&&i.update(d.default.sources.SILENT)})),this.emitter.on(d.default.events.SCROLL_BEFORE_UPDATE,(function(){if(i.hasFocus()){var t=i.getNativeRange();null!=t&&t.start.node!==i.cursor.textNode&&i.emitter.once(d.default.events.SCROLL_UPDATE,(function(){try{i.setNativeRange(t.start.node,t.start.offset,t.end.node,t.end.offset)}catch(t){}}))}})),this.emitter.on(d.default.events.SCROLL_OPTIMIZE,(function(t,e){if(e.range){var n=e.range,o=n.startNode,r=n.startOffset,a=n.endNode,s=n.endOffset;i.setNativeRange(o,r,a,s)}})),this.update(d.default.sources.SILENT)}return l(t,[{key:"handleComposition",value:function(){var t=this;this.root.addEventListener("compositionstart",(function(){t.composing=!0})),this.root.addEventListener("compositionend",(function(){if(t.composing=!1,t.cursor.parent){var e=t.cursor.restore();if(!e)return;setTimeout((function(){t.setNativeRange(e.startNode,e.startOffset,e.endNode,e.endOffset)}),1)}}))}},{key:"handleDragging",value:function(){var t=this;this.emitter.listenDOM("mousedown",document.body,(function(){t.mouseDown=!0})),this.emitter.listenDOM("mouseup",document.body,(function(){t.mouseDown=!1,t.update(d.default.sources.USER)}))}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(t,e){if(null==this.scroll.whitelist||this.scroll.whitelist[t]){this.scroll.update();var n=this.getNativeRange();if(null!=n&&n.native.collapsed&&!c.default.query(t,c.default.Scope.BLOCK)){if(n.start.node!==this.cursor.textNode){var i=c.default.find(n.start.node,!1);if(null==i)return;if(i instanceof c.default.Leaf){var o=i.split(n.start.offset);i.parent.insertBefore(this.cursor,o)}else i.insertBefore(this.cursor,n.start.node);this.cursor.attach()}this.cursor.format(t,e),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.scroll.length();t=Math.min(t,n-1),e=Math.min(t+e,n-1)-t;var i=void 0,o=this.scroll.leaf(t),r=s(o,2),a=r[0],l=r[1];if(null==a)return null;var c=a.position(l,!0),u=s(c,2);i=u[0],l=u[1];var h=document.createRange();if(e>0){h.setStart(i,l);var d=this.scroll.leaf(t+e),f=s(d,2);if(a=f[0],l=f[1],null==a)return null;var p=a.position(l,!0),v=s(p,2);return i=v[0],l=v[1],h.setEnd(i,l),h.getBoundingClientRect()}var m="left",y=void 0;return i instanceof Text?(l<i.data.length?(h.setStart(i,l),h.setEnd(i,l+1)):(h.setStart(i,l-1),h.setEnd(i,l),m="right"),y=h.getBoundingClientRect()):(y=a.domNode.getBoundingClientRect(),l>0&&(m="right")),{bottom:y.top+y.height,height:y.height,left:y[m],right:y[m],top:y.top,width:0}}},{key:"getNativeRange",value:function(){var t=document.getSelection();if(null==t||t.rangeCount<=0)return null;var e=t.getRangeAt(0);if(null==e)return null;var n=this.normalizeNative(e);return f.info("getNativeRange",n),n}},{key:"getRange",value:function(){var t=this.getNativeRange();return null==t?[null,null]:[this.normalizedToRange(t),t]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(t){var e=this,n=[[t.start.node,t.start.offset]];t.native.collapsed||n.push([t.end.node,t.end.offset]);var i=n.map((function(t){var n=s(t,2),i=n[0],o=n[1],r=c.default.find(i,!0),a=r.offset(e.scroll);return 0===o?a:r instanceof c.default.Container?a+r.length():a+r.index(i,o)})),r=Math.min(Math.max.apply(Math,o(i)),this.scroll.length()-1),a=Math.min.apply(Math,[r].concat(o(i)));return new p(a,r-a)}},{key:"normalizeNative",value:function(t){if(!a(this.root,t.startContainer)||!t.collapsed&&!a(this.root,t.endContainer))return null;var e={start:{node:t.startContainer,offset:t.startOffset},end:{node:t.endContainer,offset:t.endOffset},native:t};return[e.start,e.end].forEach((function(t){for(var e=t.node,n=t.offset;!(e instanceof Text)&&e.childNodes.length>0;)if(e.childNodes.length>n)e=e.childNodes[n],n=0;else{if(e.childNodes.length!==n)break;n=(e=e.lastChild)instanceof Text?e.data.length:e.childNodes.length+1}t.node=e,t.offset=n})),e}},{key:"rangeToNative",value:function(t){var e=this,n=t.collapsed?[t.index]:[t.index,t.index+t.length],i=[],o=this.scroll.length();return n.forEach((function(t,n){t=Math.min(o-1,t);var r,a=e.scroll.leaf(t),l=s(a,2),c=l[0],u=l[1],h=c.position(u,0!==n),d=s(h,2);r=d[0],u=d[1],i.push(r,u)})),i.length<2&&(i=i.concat(i)),i}},{key:"scrollIntoView",value:function(t){var e=this.lastRange;if(null!=e){var n=this.getBounds(e.index,e.length);if(null!=n){var i=this.scroll.length()-1,o=this.scroll.line(Math.min(e.index,i)),r=s(o,1)[0],a=r;if(e.length>0){var l=this.scroll.line(Math.min(e.index+e.length,i));a=s(l,1)[0]}if(null!=r&&null!=a){var c=t.getBoundingClientRect();n.top<c.top?t.scrollTop-=c.top-n.top:n.bottom>c.bottom&&(t.scrollTop+=n.bottom-c.bottom)}}}}},{key:"setNativeRange",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(f.info("setNativeRange",t,e,n,i),null==t||null!=this.root.parentNode&&null!=t.parentNode&&null!=n.parentNode){var r=document.getSelection();if(null!=r)if(null!=t){this.hasFocus()||this.root.focus();var a=(this.getNativeRange()||{}).native;if(null==a||o||t!==a.startContainer||e!==a.startOffset||n!==a.endContainer||i!==a.endOffset){"BR"==t.tagName&&(e=[].indexOf.call(t.parentNode.childNodes,t),t=t.parentNode),"BR"==n.tagName&&(i=[].indexOf.call(n.parentNode.childNodes,n),n=n.parentNode);var s=document.createRange();s.setStart(t,e),s.setEnd(n,i),r.removeAllRanges(),r.addRange(s)}}else r.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d.default.sources.API;if("string"==typeof e&&(n=e,e=!1),f.info("setRange",t),null!=t){var i=this.rangeToNative(t);this.setNativeRange.apply(this,o(i).concat([e]))}else this.setNativeRange(null);this.update(n)}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d.default.sources.USER,e=this.lastRange,n=this.getRange(),i=s(n,2),o=i[0],r=i[1];if(this.lastRange=o,null!=this.lastRange&&(this.savedRange=this.lastRange),!(0,h.default)(e,this.lastRange)){var a;!this.composing&&null!=r&&r.native.collapsed&&r.start.node!==this.cursor.textNode&&this.cursor.restore();var l,c=[d.default.events.SELECTION_CHANGE,(0,u.default)(this.lastRange),(0,u.default)(e),t];if((a=this.emitter).emit.apply(a,[d.default.events.EDITOR_CHANGE].concat(c)),t!==d.default.sources.SILENT)(l=this.emitter).emit.apply(l,c)}}}]),t}();e.Range=p,e.default=v},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=_typeof2(e)&&"function"!=typeof e?t:e}Object.defineProperty(e,"__esModule",{value:!0});var a=i(n(0)),s=n(3),l=i(s),c=function(t){function e(){return o(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(a.default.Container);c.allowedChildren=[l.default,s.BlockEmbed,c],e.default=c},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=_typeof2(e)&&"function"!=typeof e?t:e}Object.defineProperty(e,"__esModule",{value:!0}),e.ColorStyle=e.ColorClass=e.ColorAttributor=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function t(e,n,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,i)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(i):void 0},s=function(t){return t&&t.__esModule?t:{default:t}}(n(0)),l=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:"value",value:function(t){var n=a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"value",this).call(this,t);return n.startsWith("rgb(")?"#"+(n=n.replace(/^[^\d]+/,"").replace(/[^\d]+$/,"")).split(",").map((function(t){return("00"+parseInt(t).toString(16)).slice(-2)})).join(""):n}}]),e}(s.default.Attributor.Style),c=new s.default.Attributor.Class("color","ql-color",{scope:s.default.Scope.INLINE}),u=new l("color","color",{scope:s.default.Scope.INLINE});e.ColorAttributor=l,e.ColorClass=c,e.ColorStyle=u},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t,e){var n,i=t===A.keys.LEFT?"prefix":"suffix";return o(n={key:t,shiftKey:e,altKey:null},i,/^$/),o(n,"handler",(function(n){var i=n.index;t===A.keys.RIGHT&&(i+=n.length+1);var o=this.quill.getLeaf(i);return!(p(o,1)[0]instanceof w.default.Embed&&(t===A.keys.LEFT?e?this.quill.setSelection(n.index-1,n.length+1,k.default.sources.USER):this.quill.setSelection(n.index-1,k.default.sources.USER):e?this.quill.setSelection(n.index,n.length+1,k.default.sources.USER):this.quill.setSelection(n.index+n.length+1,k.default.sources.USER),1))})),n}function a(t,e){if(!(0===t.index||this.quill.getLength()<=1)){var n=this.quill.getLine(t.index),i=p(n,1)[0],o={};if(0===e.offset){var r=this.quill.getLine(t.index-1),a=p(r,1)[0];if(null!=a&&a.length()>1){var s=i.formats(),l=this.quill.getFormat(t.index-1,1);o=_.default.attributes.diff(s,l)||{}}}var c=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(e.prefix)?2:1;this.quill.deleteText(t.index-c,c,k.default.sources.USER),Object.keys(o).length>0&&this.quill.formatLine(t.index-c,c,o,k.default.sources.USER),this.quill.focus()}}function s(t,e){var n=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(e.suffix)?2:1;if(!(t.index>=this.quill.getLength()-n)){var i={},o=0,r=this.quill.getLine(t.index),a=p(r,1)[0];if(e.offset>=a.length()-1){var s=this.quill.getLine(t.index+1),l=p(s,1)[0];if(l){var c=a.formats(),u=this.quill.getFormat(t.index,1);i=_.default.attributes.diff(c,u)||{},o=l.length()}}this.quill.deleteText(t.index,n,k.default.sources.USER),Object.keys(i).length>0&&this.quill.formatLine(t.index+o-1,n,i,k.default.sources.USER)}}function l(t){var e=this.quill.getLines(t),n={};if(e.length>1){var i=e[0].formats(),o=e[e.length-1].formats();n=_.default.attributes.diff(o,i)||{}}this.quill.deleteText(t,k.default.sources.USER),Object.keys(n).length>0&&this.quill.formatLine(t.index,1,n,k.default.sources.USER),this.quill.setSelection(t.index,k.default.sources.SILENT),this.quill.focus()}function c(t,e){var n=this;t.length>0&&this.quill.scroll.deleteAt(t.index,t.length);var i=Object.keys(e.format).reduce((function(t,n){return w.default.query(n,w.default.Scope.BLOCK)&&!Array.isArray(e.format[n])&&(t[n]=e.format[n]),t}),{});this.quill.insertText(t.index,"\n",i,k.default.sources.USER),this.quill.setSelection(t.index+1,k.default.sources.SILENT),this.quill.focus(),Object.keys(e.format).forEach((function(t){null==i[t]&&(Array.isArray(e.format[t])||"link"!==t&&n.quill.format(t,e.format[t],k.default.sources.USER))}))}function u(t){return{key:A.keys.TAB,shiftKey:!t,format:{"code-block":!0},handler:function(e){var n=w.default.query("code-block"),i=e.index,o=e.length,r=this.quill.scroll.descendant(n,i),a=p(r,2),s=a[0],l=a[1];if(null!=s){var c=this.quill.getIndex(s),u=s.newlineIndex(l,!0)+1,h=s.newlineIndex(c+l+o),d=s.domNode.textContent.slice(u,h).split("\n");l=0,d.forEach((function(e,r){t?(s.insertAt(u+l,n.TAB),l+=n.TAB.length,0===r?i+=n.TAB.length:o+=n.TAB.length):e.startsWith(n.TAB)&&(s.deleteAt(u+l,n.TAB.length),l-=n.TAB.length,0===r?i-=n.TAB.length:o-=n.TAB.length),l+=e.length+1})),this.quill.update(k.default.sources.USER),this.quill.setSelection(i,o,k.default.sources.SILENT)}}}}function h(t){return{key:t[0].toUpperCase(),shortKey:!0,handler:function(e,n){this.quill.format(t,!n.format[t],k.default.sources.USER)}}}function d(t){if("string"==typeof t||"number"==typeof t)return d({key:t});if("object"===(void 0===t?"undefined":f(t))&&(t=(0,m.default)(t,!1)),"string"==typeof t.key)if(null!=A.keys[t.key.toUpperCase()])t.key=A.keys[t.key.toUpperCase()];else{if(1!==t.key.length)return null;t.key=t.key.toUpperCase().charCodeAt(0)}return t.shortKey&&(t[C]=t.shortKey,delete t.shortKey),t}Object.defineProperty(e,"__esModule",{value:!0}),e.SHORTKEY=e.default=void 0;var f="function"==typeof Symbol&&"symbol"==_typeof2(Symbol.iterator)?function(t){return _typeof2(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":_typeof2(t)},p=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,o=!1,r=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){o=!0,r=t}finally{try{!i&&s.return&&s.return()}finally{if(o)throw r}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},v=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),m=i(n(21)),y=i(n(12)),g=i(n(2)),b=i(n(4)),_=i(n(20)),w=i(n(0)),k=i(n(6)),x=i(n(10)),O=i(n(7)),E=(0,x.default)("quill:keyboard"),C=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",A=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=_typeof2(e)&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return i.bindings={},Object.keys(i.options.bindings).forEach((function(e){("list autofill"!==e||null==t.scroll.whitelist||t.scroll.whitelist.list)&&i.options.bindings[e]&&i.addBinding(i.options.bindings[e])})),i.addBinding({key:e.keys.ENTER,shiftKey:null},c),i.addBinding({key:e.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},(function(){})),/Firefox/i.test(navigator.userAgent)?(i.addBinding({key:e.keys.BACKSPACE},{collapsed:!0},a),i.addBinding({key:e.keys.DELETE},{collapsed:!0},s)):(i.addBinding({key:e.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},a),i.addBinding({key:e.keys.DELETE},{collapsed:!0,suffix:/^.?$/},s)),i.addBinding({key:e.keys.BACKSPACE},{collapsed:!1},l),i.addBinding({key:e.keys.DELETE},{collapsed:!1},l),i.addBinding({key:e.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},a),i.listen(),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),v(e,null,[{key:"match",value:function(t,e){return e=d(e),!["altKey","ctrlKey","metaKey","shiftKey"].some((function(n){return!!e[n]!==t[n]&&null!==e[n]}))&&e.key===(t.which||t.keyCode)}}]),v(e,[{key:"addBinding",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=d(t);if(null==i||null==i.key)return E.warn("Attempted to add invalid keyboard binding",i);"function"==typeof e&&(e={handler:e}),"function"==typeof n&&(n={handler:n}),i=(0,g.default)(i,e,n),this.bindings[i.key]=this.bindings[i.key]||[],this.bindings[i.key].push(i)}},{key:"listen",value:function(){var t=this;this.quill.root.addEventListener("keydown",(function(n){if(!n.defaultPrevented){var i=n.which||n.keyCode,o=(t.bindings[i]||[]).filter((function(t){return e.match(n,t)}));if(0!==o.length){var r=t.quill.getSelection();if(null!=r&&t.quill.hasFocus()){var a=t.quill.getLine(r.index),s=p(a,2),l=s[0],c=s[1],u=t.quill.getLeaf(r.index),h=p(u,2),d=h[0],v=h[1],m=0===r.length?[d,v]:t.quill.getLeaf(r.index+r.length),g=p(m,2),b=g[0],_=g[1],k=d instanceof w.default.Text?d.value().slice(0,v):"",x=b instanceof w.default.Text?b.value().slice(_):"",O={collapsed:0===r.length,empty:0===r.length&&l.length()<=1,format:t.quill.getFormat(r),offset:c,prefix:k,suffix:x};o.some((function(e){if(null!=e.collapsed&&e.collapsed!==O.collapsed)return!1;if(null!=e.empty&&e.empty!==O.empty)return!1;if(null!=e.offset&&e.offset!==O.offset)return!1;if(Array.isArray(e.format)){if(e.format.every((function(t){return null==O.format[t]})))return!1}else if("object"===f(e.format)&&!Object.keys(e.format).every((function(t){return!0===e.format[t]?null!=O.format[t]:!1===e.format[t]?null==O.format[t]:(0,y.default)(e.format[t],O.format[t])})))return!1;return!(null!=e.prefix&&!e.prefix.test(O.prefix)||null!=e.suffix&&!e.suffix.test(O.suffix)||!0===e.handler.call(t,r,O))}))&&n.preventDefault()}}}}))}}]),e}(O.default);A.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},A.DEFAULTS={bindings:{bold:h("bold"),italic:h("italic"),underline:h("underline"),indent:{key:A.keys.TAB,format:["blockquote","indent","list"],handler:function(t,e){if(e.collapsed&&0!==e.offset)return!0;this.quill.format("indent","+1",k.default.sources.USER)}},outdent:{key:A.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(t,e){if(e.collapsed&&0!==e.offset)return!0;this.quill.format("indent","-1",k.default.sources.USER)}},"outdent backspace":{key:A.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(t,e){null!=e.format.indent?this.quill.format("indent","-1",k.default.sources.USER):null!=e.format.list&&this.quill.format("list",!1,k.default.sources.USER)}},"indent code-block":u(!0),"outdent code-block":u(!1),"remove tab":{key:A.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(t){this.quill.deleteText(t.index-1,1,k.default.sources.USER)}},tab:{key:A.keys.TAB,handler:function(t){this.quill.history.cutoff();var e=(new b.default).retain(t.index).delete(t.length).insert("\t");this.quill.updateContents(e,k.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(t.index+1,k.default.sources.SILENT)}},"list empty enter":{key:A.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(t,e){this.quill.format("list",!1,k.default.sources.USER),e.format.indent&&this.quill.format("indent",!1,k.default.sources.USER)}},"checklist enter":{key:A.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(t){var e=this.quill.getLine(t.index),n=p(e,2),i=n[0],o=n[1],r=(0,g.default)({},i.formats(),{list:"checked"}),a=(new b.default).retain(t.index).insert("\n",r).retain(i.length()-o-1).retain(1,{list:"unchecked"});this.quill.updateContents(a,k.default.sources.USER),this.quill.setSelection(t.index+1,k.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:A.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(t,e){var n=this.quill.getLine(t.index),i=p(n,2),o=i[0],r=i[1],a=(new b.default).retain(t.index).insert("\n",e.format).retain(o.length()-r-1).retain(1,{header:null});this.quill.updateContents(a,k.default.sources.USER),this.quill.setSelection(t.index+1,k.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(t,e){var n=e.prefix.length,i=this.quill.getLine(t.index),o=p(i,2),r=o[0],a=o[1];if(a>n)return!0;var s=void 0;switch(e.prefix.trim()){case"[]":case"[ ]":s="unchecked";break;case"[x]":s="checked";break;case"-":case"*":s="bullet";break;default:s="ordered"}this.quill.insertText(t.index," ",k.default.sources.USER),this.quill.history.cutoff();var l=(new b.default).retain(t.index-a).delete(n+1).retain(r.length()-2-a).retain(1,{list:s});this.quill.updateContents(l,k.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(t.index-n,k.default.sources.SILENT)}},"code exit":{key:A.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(t){var e=this.quill.getLine(t.index),n=p(e,2),i=n[0],o=n[1],r=(new b.default).retain(t.index+i.length()-o-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(r,k.default.sources.USER)}},"embed left":r(A.keys.LEFT,!1),"embed left shift":r(A.keys.LEFT,!0),"embed right":r(A.keys.RIGHT,!1),"embed right shift":r(A.keys.RIGHT,!0)}},e.default=A,e.SHORTKEY=C},function(t,e,n){"use strict";t.exports={align:{"":n(75),center:n(76),right:n(77),justify:n(78)},background:n(79),blockquote:n(80),bold:n(81),clean:n(82),code:n(40),"code-block":n(40),color:n(83),direction:{"":n(84),rtl:n(85)},float:{center:n(86),full:n(87),left:n(88),right:n(89)},formula:n(90),header:{1:n(91),2:n(92)},italic:n(93),image:n(94),indent:{"+1":n(95),"-1":n(96)},link:n(97),list:{ordered:n(98),bullet:n(99),check:n(100)},script:{sub:n(101),super:n(102)},strike:n(103),underline:n(104),video:n(105)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),o=function(){function t(t){this.domNode=t,this.domNode[i.DATA_KEY]={blot:this}}return Object.defineProperty(t.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),t.create=function(t){if(null==this.tagName)throw new i.ParchmentError("Blot definition missing tagName");var e;return Array.isArray(this.tagName)?("string"==typeof t&&(t=t.toUpperCase(),parseInt(t).toString()===t&&(t=parseInt(t))),e="number"==typeof t?document.createElement(this.tagName[t-1]):this.tagName.indexOf(t)>-1?document.createElement(t):document.createElement(this.tagName[0])):e=document.createElement(this.tagName),this.className&&e.classList.add(this.className),e},t.prototype.attach=function(){null!=this.parent&&(this.scroll=this.parent.scroll)},t.prototype.clone=function(){var t=this.domNode.cloneNode(!1);return i.create(t)},t.prototype.detach=function(){null!=this.parent&&this.parent.removeChild(this),delete this.domNode[i.DATA_KEY]},t.prototype.deleteAt=function(t,e){this.isolate(t,e).remove()},t.prototype.formatAt=function(t,e,n,o){var r=this.isolate(t,e);if(null!=i.query(n,i.Scope.BLOT)&&o)r.wrap(n,o);else if(null!=i.query(n,i.Scope.ATTRIBUTE)){var a=i.create(this.statics.scope);r.wrap(a),a.format(n,o)}},t.prototype.insertAt=function(t,e,n){var o=null==n?i.create("text",e):i.create(e,n),r=this.split(t);this.parent.insertBefore(o,r)},t.prototype.insertInto=function(t,e){void 0===e&&(e=null),null!=this.parent&&this.parent.children.remove(this);var n=null;t.children.insertBefore(this,e),null!=e&&(n=e.domNode),this.domNode.parentNode==t.domNode&&this.domNode.nextSibling==n||t.domNode.insertBefore(this.domNode,n),this.parent=t,this.attach()},t.prototype.isolate=function(t,e){var n=this.split(t);return n.split(e),n},t.prototype.length=function(){return 1},t.prototype.offset=function(t){return void 0===t&&(t=this.parent),null==this.parent||this==t?0:this.parent.children.offset(this)+this.parent.offset(t)},t.prototype.optimize=function(t){null!=this.domNode[i.DATA_KEY]&&delete this.domNode[i.DATA_KEY].mutations},t.prototype.remove=function(){null!=this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},t.prototype.replace=function(t){null!=t.parent&&(t.parent.insertBefore(this,t.next),t.remove())},t.prototype.replaceWith=function(t,e){var n="string"==typeof t?i.create(t,e):t;return n.replace(this),n},t.prototype.split=function(t,e){return 0===t?this:this.next},t.prototype.update=function(t,e){},t.prototype.wrap=function(t,e){var n="string"==typeof t?i.create(t,e):t;return null!=this.parent&&this.parent.insertBefore(n,this.next),n.appendChild(this),n},t.blotName="abstract",t}();e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(11),o=n(29),r=n(30),a=n(1),s=function(){function t(t){this.attributes={},this.domNode=t,this.build()}return t.prototype.attribute=function(t,e){e?t.add(this.domNode,e)&&(null!=t.value(this.domNode)?this.attributes[t.attrName]=t:delete this.attributes[t.attrName]):(t.remove(this.domNode),delete this.attributes[t.attrName])},t.prototype.build=function(){var t=this;this.attributes={};var e=i.default.keys(this.domNode),n=o.default.keys(this.domNode),s=r.default.keys(this.domNode);e.concat(n).concat(s).forEach((function(e){var n=a.query(e,a.Scope.ATTRIBUTE);n instanceof i.default&&(t.attributes[n.attrName]=n)}))},t.prototype.copy=function(t){var e=this;Object.keys(this.attributes).forEach((function(n){var i=e.attributes[n].value(e.domNode);t.format(n,i)}))},t.prototype.move=function(t){var e=this;this.copy(t),Object.keys(this.attributes).forEach((function(t){e.attributes[t].remove(e.domNode)})),this.attributes={}},t.prototype.values=function(){var t=this;return Object.keys(this.attributes).reduce((function(e,n){return e[n]=t.attributes[n].value(t.domNode),e}),{})},t}();e.default=s},function(t,e,n){"use strict";function i(t,e){return(t.getAttribute("class")||"").split(/\s+/).filter((function(t){return 0===t.indexOf(e+"-")}))}var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.keys=function(t){return(t.getAttribute("class")||"").split(/\s+/).map((function(t){return t.split("-").slice(0,-1).join("-")}))},e.prototype.add=function(t,e){return!!this.canAdd(t,e)&&(this.remove(t),t.classList.add(this.keyName+"-"+e),!0)},e.prototype.remove=function(t){i(t,this.keyName).forEach((function(e){t.classList.remove(e)})),0===t.classList.length&&t.removeAttribute("class")},e.prototype.value=function(t){var e=(i(t,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(t,e)?e:""},e}(n(11).default);e.default=r},function(t,e,n){"use strict";function i(t){var e=t.split("-"),n=e.slice(1).map((function(t){return t[0].toUpperCase()+t.slice(1)})).join("");return e[0]+n}var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.keys=function(t){return(t.getAttribute("style")||"").split(";").map((function(t){return t.split(":")[0].trim()}))},e.prototype.add=function(t,e){return!!this.canAdd(t,e)&&(t.style[i(this.keyName)]=e,!0)},e.prototype.remove=function(t){t.style[i(this.keyName)]="",t.getAttribute("style")||t.removeAttribute("style")},e.prototype.value=function(t){var e=t.style[i(this.keyName)];return this.canAdd(t,e)?e:""},e}(n(11).default);e.default=r},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,o=!1,r=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){o=!0,r=t}finally{try{!i&&s.return&&s.return()}finally{if(o)throw r}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=function t(e,n,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,i)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(i):void 0},a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=i(n(0)),l=i(n(8)),c=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=_typeof2(e)&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.selection=n,i.textNode=document.createTextNode(e.CONTENTS),i.domNode.appendChild(i.textNode),i._length=0,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),a(e,null,[{key:"value",value:function(){}}]),a(e,[{key:"detach",value:function(){null!=this.parent&&this.parent.removeChild(this)}},{key:"format",value:function(t,n){if(0!==this._length)return r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"format",this).call(this,t,n);for(var i=this,o=0;null!=i&&i.statics.scope!==s.default.Scope.BLOCK_BLOT;)o+=i.offset(i.parent),i=i.parent;null!=i&&(this._length=e.CONTENTS.length,i.optimize(),i.formatAt(o,e.CONTENTS.length,t,n),this._length=0)}},{key:"index",value:function(t,n){return t===this.textNode?0:r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"index",this).call(this,t,n)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!this.selection.composing&&null!=this.parent){var t=this.textNode,n=this.selection.getNativeRange(),i=void 0,r=void 0,a=void 0;if(null!=n&&n.start.node===t&&n.end.node===t){var c=[t,n.start.offset,n.end.offset];i=c[0],r=c[1],a=c[2]}for(;null!=this.domNode.lastChild&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==e.CONTENTS){var u=this.textNode.data.split(e.CONTENTS).join("");this.next instanceof l.default?(i=this.next.domNode,this.next.insertAt(0,u),this.textNode.data=e.CONTENTS):(this.textNode.data=u,this.parent.insertBefore(s.default.create(this.textNode),this),this.textNode=document.createTextNode(e.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),null!=r){var h=[r,a].map((function(t){return Math.max(0,Math.min(i.data.length,t-1))})),d=o(h,2);return r=d[0],a=d[1],{startNode:i,startOffset:r,endNode:i,endOffset:a}}}}},{key:"update",value:function(t,e){var n=this;if(t.some((function(t){return"characterData"===t.type&&t.target===n.textNode}))){var i=this.restore();i&&(e.range=i)}}},{key:"value",value:function(){return""}}]),e}(s.default.Embed);c.blotName="cursor",c.className="ql-cursor",c.tagName="span",c.CONTENTS="\ufeff",e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=function(){function t(e,n){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.quill=e,this.options=n,this.modules={}}return i(t,[{key:"init",value:function(){var t=this;Object.keys(this.options.modules).forEach((function(e){null==t.modules[e]&&t.addModule(e)}))}},{key:"addModule",value:function(t){var e=this.quill.constructor.import("modules/"+t);return this.modules[t]=new e(this.quill,this.options.modules[t]||{}),this.modules[t]}}]),t}();o.DEFAULTS={modules:{}},o.themes={default:o},e.default=o},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function t(e,n,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,i)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(i):void 0},a=i(n(0)),s=i(n(8)),l="\ufeff",c=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=_typeof2(e)&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.contentNode=document.createElement("span"),n.contentNode.setAttribute("contenteditable",!1),[].slice.call(n.domNode.childNodes).forEach((function(t){n.contentNode.appendChild(t)})),n.leftGuard=document.createTextNode(l),n.rightGuard=document.createTextNode(l),n.domNode.appendChild(n.leftGuard),n.domNode.appendChild(n.contentNode),n.domNode.appendChild(n.rightGuard),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),o(e,[{key:"index",value:function(t,n){return t===this.leftGuard?0:t===this.rightGuard?1:r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"index",this).call(this,t,n)}},{key:"restore",value:function(t){var e=void 0,n=void 0,i=t.data.split(l).join("");if(t===this.leftGuard)if(this.prev instanceof s.default){var o=this.prev.length();this.prev.insertAt(o,i),e={startNode:this.prev.domNode,startOffset:o+i.length}}else n=document.createTextNode(i),this.parent.insertBefore(a.default.create(n),this),e={startNode:n,startOffset:i.length};else t===this.rightGuard&&(this.next instanceof s.default?(this.next.insertAt(0,i),e={startNode:this.next.domNode,startOffset:i.length}):(n=document.createTextNode(i),this.parent.insertBefore(a.default.create(n),this.next),e={startNode:n,startOffset:i.length}));return t.data=l,e}},{key:"update",value:function(t,e){var n=this;t.forEach((function(t){if("characterData"===t.type&&(t.target===n.leftGuard||t.target===n.rightGuard)){var i=n.restore(t.target);i&&(e.range=i)}}))}}]),e}(a.default.Embed);e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AlignStyle=e.AlignClass=e.AlignAttribute=void 0;var i=function(t){return t&&t.__esModule?t:{default:t}}(n(0)),o={scope:i.default.Scope.BLOCK,whitelist:["right","center","justify"]},r=new i.default.Attributor.Attribute("align","align",o),a=new i.default.Attributor.Class("align","ql-align",o),s=new i.default.Attributor.Style("align","text-align",o);e.AlignAttribute=r,e.AlignClass=a,e.AlignStyle=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BackgroundStyle=e.BackgroundClass=void 0;var i=function(t){return t&&t.__esModule?t:{default:t}}(n(0)),o=n(24),r=new i.default.Attributor.Class("background","ql-bg",{scope:i.default.Scope.INLINE}),a=new o.ColorAttributor("background","background-color",{scope:i.default.Scope.INLINE});e.BackgroundClass=r,e.BackgroundStyle=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DirectionStyle=e.DirectionClass=e.DirectionAttribute=void 0;var i=function(t){return t&&t.__esModule?t:{default:t}}(n(0)),o={scope:i.default.Scope.BLOCK,whitelist:["rtl"]},r=new i.default.Attributor.Attribute("direction","dir",o),a=new i.default.Attributor.Class("direction","ql-direction",o),s=new i.default.Attributor.Style("direction","direction",o);e.DirectionAttribute=r,e.DirectionClass=a,e.DirectionStyle=s},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=_typeof2(e)&&"function"!=typeof e?t:e}Object.defineProperty(e,"__esModule",{value:!0}),e.FontClass=e.FontStyle=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function t(e,n,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,i)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(i):void 0},s=function(t){return t&&t.__esModule?t:{default:t}}(n(0)),l={scope:s.default.Scope.INLINE,whitelist:["serif","monospace"]},c=new s.default.Attributor.Class("font","ql-font",l),u=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:"value",value:function(t){return a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"value",this).call(this,t).replace(/["']/g,"")}}]),e}(s.default.Attributor.Style),h=new u("font","font-family",l);e.FontStyle=h,e.FontClass=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SizeStyle=e.SizeClass=void 0;var i=function(t){return t&&t.__esModule?t:{default:t}}(n(0)),o=new i.default.Attributor.Class("size","ql-size",{scope:i.default.Scope.INLINE,whitelist:["small","large","huge"]}),r=new i.default.Attributor.Style("size","font-size",{scope:i.default.Scope.INLINE,whitelist:["10px","18px","32px"]});e.SizeClass=o,e.SizeStyle=r},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=_typeof2(e)&&"function"!=typeof e?t:e}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function t(e,n,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,i)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(i):void 0},s=function(t){return t&&t.__esModule?t:{default:t}}(n(5)),l=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:"optimize",value:function(t){a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"optimize",this).call(this,t),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return a(e.__proto__||Object.getPrototypeOf(e),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),e}(s.default);l.blotName="bold",l.tagName=["STRONG","B"],e.default=l},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=function t(e,n,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,i)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(i):void 0},r=function(t){return t&&t.__esModule?t:{default:t}}(n(16)),a=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=_typeof2(e)&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.label.innerHTML=n,i.container.classList.add("ql-color-picker"),[].slice.call(i.container.querySelectorAll(".ql-picker-item"),0,7).forEach((function(t){t.classList.add("ql-primary")})),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"buildItem",value:function(t){var n=o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"buildItem",this).call(this,t);return n.style.backgroundColor=t.getAttribute("value")||"",n}},{key:"selectItem",value:function(t,n){o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"selectItem",this).call(this,t,n);var i=this.label.querySelector(".ql-color-label"),r=t&&t.getAttribute("data-value")||"";i&&("line"===i.tagName?i.style.stroke=r:i.style.fill=r)}}]),e}(r.default);e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=function t(e,n,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,i)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(i):void 0},r=function(t){return t&&t.__esModule?t:{default:t}}(n(16)),a=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=_typeof2(e)&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.container.classList.add("ql-icon-picker"),[].forEach.call(i.container.querySelectorAll(".ql-picker-item"),(function(t){t.innerHTML=n[t.getAttribute("data-value")||""]})),i.defaultItem=i.container.querySelector(".ql-selected"),i.selectItem(i.defaultItem),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"selectItem",value:function(t,n){o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"selectItem",this).call(this,t,n),t=t||this.defaultItem,this.label.innerHTML=t.innerHTML}}]),e}(r.default);e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=function(){function t(e,n){var i=this;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.quill=e,this.boundsContainer=n||document.body,this.root=e.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",(function(){i.root.style.marginTop=-1*i.quill.root.scrollTop+"px"})),this.hide()}return i(t,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(t){var e=t.left+t.width/2-this.root.offsetWidth/2,n=t.bottom+this.quill.root.scrollTop;this.root.style.left=e+"px",this.root.style.top=n+"px",this.root.classList.remove("ql-flip");var i=this.boundsContainer.getBoundingClientRect(),o=this.root.getBoundingClientRect(),r=0;if(o.right>i.right&&(r=i.right-o.right,this.root.style.left=e+r+"px"),o.left<i.left&&(r=i.left-o.left,this.root.style.left=e+r+"px"),o.bottom>i.bottom){var a=o.bottom-o.top,s=t.bottom-t.top+a;this.root.style.top=n-s+"px",this.root.classList.add("ql-flip")}return r}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),t}();e.default=o},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=_typeof2(e)&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e.forEach((function(e){var i=document.createElement("option");e===n?i.setAttribute("selected","selected"):i.setAttribute("value",e),t.appendChild(i)}))}Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.BaseTooltip=void 0;var l=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),c=function t(e,n,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,i)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(i):void 0},u=i(n(2)),h=i(n(4)),d=i(n(9)),f=i(n(25)),p=i(n(32)),v=i(n(41)),m=i(n(42)),y=i(n(16)),g=i(n(43)),b=[!1,"center","right","justify"],_=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],w=[!1,"serif","monospace"],k=["1","2","3",!1],x=["small",!1,"large","huge"],O=function(t){function e(t,n){o(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return t.emitter.listenDOM("click",document.body,(function e(n){if(!document.body.contains(t.root))return document.body.removeEventListener("click",e);null==i.tooltip||i.tooltip.root.contains(n.target)||document.activeElement===i.tooltip.textbox||i.quill.hasFocus()||i.tooltip.hide(),null!=i.pickers&&i.pickers.forEach((function(t){t.container.contains(n.target)||t.close()}))})),i}return a(e,t),l(e,[{key:"addModule",value:function(t){var n=c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"addModule",this).call(this,t);return"toolbar"===t&&this.extendToolbar(n),n}},{key:"buildButtons",value:function(t,e){t.forEach((function(t){(t.getAttribute("class")||"").split(/\s+/).forEach((function(n){if(n.startsWith("ql-")&&(n=n.slice("ql-".length),null!=e[n]))if("direction"===n)t.innerHTML=e[n][""]+e[n].rtl;else if("string"==typeof e[n])t.innerHTML=e[n];else{var i=t.value||"";null!=i&&e[n][i]&&(t.innerHTML=e[n][i])}}))}))}},{key:"buildPickers",value:function(t,e){var n=this;this.pickers=t.map((function(t){if(t.classList.contains("ql-align"))return null==t.querySelector("option")&&s(t,b),new m.default(t,e.align);if(t.classList.contains("ql-background")||t.classList.contains("ql-color")){var n=t.classList.contains("ql-background")?"background":"color";return null==t.querySelector("option")&&s(t,_,"background"===n?"#ffffff":"#000000"),new v.default(t,e[n])}return null==t.querySelector("option")&&(t.classList.contains("ql-font")?s(t,w):t.classList.contains("ql-header")?s(t,k):t.classList.contains("ql-size")&&s(t,x)),new y.default(t)}));this.quill.on(d.default.events.EDITOR_CHANGE,(function(){n.pickers.forEach((function(t){t.update()}))}))}}]),e}(p.default);O.DEFAULTS=(0,u.default)(!0,{},p.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var t=this,e=this.container.querySelector("input.ql-image[type=file]");null==e&&((e=document.createElement("input")).setAttribute("type","file"),e.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),e.classList.add("ql-image"),e.addEventListener("change",(function(){if(null!=e.files&&null!=e.files[0]){var n=new FileReader;n.onload=function(n){var i=t.quill.getSelection(!0);t.quill.updateContents((new h.default).retain(i.index).delete(i.length).insert({image:n.target.result}),d.default.sources.USER),t.quill.setSelection(i.index+1,d.default.sources.SILENT),e.value=""},n.readAsDataURL(e.files[0])}})),this.container.appendChild(e)),e.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var E=function(t){function e(t,n){o(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return i.textbox=i.root.querySelector('input[type="text"]'),i.listen(),i}return a(e,t),l(e,[{key:"listen",value:function(){var t=this;this.textbox.addEventListener("keydown",(function(e){f.default.match(e,"enter")?(t.save(),e.preventDefault()):f.default.match(e,"escape")&&(t.cancel(),e.preventDefault())}))}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"link",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),null!=e?this.textbox.value=e:t!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+t)||""),this.root.setAttribute("data-mode",t)}},{key:"restoreFocus",value:function(){var t=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=t}},{key:"save",value:function(){var t=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":var e=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",t,d.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",t,d.default.sources.USER)),this.quill.root.scrollTop=e;break;case"video":t=function(t){var e=t.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||t.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return e?(e[1]||"https")+"://www.youtube.com/embed/"+e[2]+"?showinfo=0":(e=t.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(e[1]||"https")+"://player.vimeo.com/video/"+e[2]+"/":t}(t);case"formula":if(!t)break;var n=this.quill.getSelection(!0);if(null!=n){var i=n.index+n.length;this.quill.insertEmbed(i,this.root.getAttribute("data-mode"),t,d.default.sources.USER),"formula"===this.root.getAttribute("data-mode")&&this.quill.insertText(i+1," ",d.default.sources.USER),this.quill.setSelection(i+2,d.default.sources.USER)}}this.textbox.value="",this.hide()}}]),e}(g.default);e.BaseTooltip=E,e.default=O},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(n(46)),r=n(34),a=n(36),s=n(62),l=i(n(63)),c=i(n(64)),u=n(65),h=i(u),d=n(35),f=n(24),p=n(37),v=n(38),m=i(n(39)),y=i(n(66)),g=i(n(15)),b=i(n(67)),_=i(n(68)),w=i(n(69)),k=i(n(70)),x=i(n(71)),O=n(13),E=i(O),C=i(n(72)),A=i(n(73)),N=i(n(74)),j=i(n(26)),$=i(n(16)),T=i(n(41)),S=i(n(42)),q=i(n(43)),M=i(n(107)),P=i(n(108));o.default.register({"attributors/attribute/direction":a.DirectionAttribute,"attributors/class/align":r.AlignClass,"attributors/class/background":d.BackgroundClass,"attributors/class/color":f.ColorClass,"attributors/class/direction":a.DirectionClass,"attributors/class/font":p.FontClass,"attributors/class/size":v.SizeClass,"attributors/style/align":r.AlignStyle,"attributors/style/background":d.BackgroundStyle,"attributors/style/color":f.ColorStyle,"attributors/style/direction":a.DirectionStyle,"attributors/style/font":p.FontStyle,"attributors/style/size":v.SizeStyle},!0),o.default.register({"formats/align":r.AlignClass,"formats/direction":a.DirectionClass,"formats/indent":s.IndentClass,"formats/background":d.BackgroundStyle,"formats/color":f.ColorStyle,"formats/font":p.FontClass,"formats/size":v.SizeClass,"formats/blockquote":l.default,"formats/code-block":E.default,"formats/header":c.default,"formats/list":h.default,"formats/bold":m.default,"formats/code":O.Code,"formats/italic":y.default,"formats/link":g.default,"formats/script":b.default,"formats/strike":_.default,"formats/underline":w.default,"formats/image":k.default,"formats/video":x.default,"formats/list/item":u.ListItem,"modules/formula":C.default,"modules/syntax":A.default,"modules/toolbar":N.default,"themes/bubble":M.default,"themes/snow":P.default,"ui/icons":j.default,"ui/picker":$.default,"ui/icon-picker":S.default,"ui/color-picker":T.default,"ui/tooltip":q.default},!0),e.default=o.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(n(0)),r=i(n(6)),a=n(3),s=i(a),l=i(n(14)),c=i(n(23)),u=i(n(31)),h=i(n(33)),d=i(n(5)),f=i(n(59)),p=i(n(8)),v=i(n(60)),m=i(n(61)),y=i(n(25));r.default.register({"blots/block":s.default,"blots/block/embed":a.BlockEmbed,"blots/break":l.default,"blots/container":c.default,"blots/cursor":u.default,"blots/embed":h.default,"blots/inline":d.default,"blots/scroll":f.default,"blots/text":p.default,"modules/clipboard":v.default,"modules/history":m.default,"modules/keyboard":y.default}),o.default.register(s.default,l.default,u.default,d.default,f.default,p.default),e.default=r.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){this.head=this.tail=null,this.length=0}return t.prototype.append=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.insertBefore(t[0],null),t.length>1&&this.append.apply(this,t.slice(1))},t.prototype.contains=function(t){for(var e,n=this.iterator();e=n();)if(e===t)return!0;return!1},t.prototype.insertBefore=function(t,e){t&&(t.next=e,null!=e?(t.prev=e.prev,null!=e.prev&&(e.prev.next=t),e.prev=t,e===this.head&&(this.head=t)):null!=this.tail?(this.tail.next=t,t.prev=this.tail,this.tail=t):(t.prev=null,this.head=this.tail=t),this.length+=1)},t.prototype.offset=function(t){for(var e=0,n=this.head;null!=n;){if(n===t)return e;e+=n.length(),n=n.next}return-1},t.prototype.remove=function(t){this.contains(t)&&(null!=t.prev&&(t.prev.next=t.next),null!=t.next&&(t.next.prev=t.prev),t===this.head&&(this.head=t.next),t===this.tail&&(this.tail=t.prev),this.length-=1)},t.prototype.iterator=function(t){return void 0===t&&(t=this.head),function(){var e=t;return null!=t&&(t=t.next),e}},t.prototype.find=function(t,e){void 0===e&&(e=!1);for(var n,i=this.iterator();n=i();){var o=n.length();if(t<o||e&&t===o&&(null==n.next||0!==n.next.length()))return[n,t];t-=o}return[null,0]},t.prototype.forEach=function(t){for(var e,n=this.iterator();e=n();)t(e)},t.prototype.forEachAt=function(t,e,n){if(!(e<=0))for(var i,o=this.find(t),r=o[0],a=t-o[1],s=this.iterator(r);(i=s())&&a<t+e;){var l=i.length();t>a?n(i,t-a,Math.min(e,a+l-t)):n(i,0,Math.min(l,t+e-a)),a+=l}},t.prototype.map=function(t){return this.reduce((function(e,n){return e.push(t(n)),e}),[])},t.prototype.reduce=function(t,e){for(var n,i=this.iterator();n=i();)e=t(e,n);return e},t}();e.default=i},function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(17),r=n(1),a={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},s=function(t){function e(e){var n=t.call(this,e)||this;return n.scroll=n,n.observer=new MutationObserver((function(t){n.update(t)})),n.observer.observe(n.domNode,a),n.attach(),n}return i(e,t),e.prototype.detach=function(){t.prototype.detach.call(this),this.observer.disconnect()},e.prototype.deleteAt=function(e,n){this.update(),0===e&&n===this.length()?this.children.forEach((function(t){t.remove()})):t.prototype.deleteAt.call(this,e,n)},e.prototype.formatAt=function(e,n,i,o){this.update(),t.prototype.formatAt.call(this,e,n,i,o)},e.prototype.insertAt=function(e,n,i){this.update(),t.prototype.insertAt.call(this,e,n,i)},e.prototype.optimize=function(e,n){var i=this;void 0===e&&(e=[]),void 0===n&&(n={}),t.prototype.optimize.call(this,n);for(var a=[].slice.call(this.observer.takeRecords());a.length>0;)e.push(a.pop());for(var s=function t(e,n){void 0===n&&(n=!0),null!=e&&e!==i&&null!=e.domNode.parentNode&&(null==e.domNode[r.DATA_KEY].mutations&&(e.domNode[r.DATA_KEY].mutations=[]),n&&t(e.parent))},l=function t(e){null!=e.domNode[r.DATA_KEY]&&null!=e.domNode[r.DATA_KEY].mutations&&(e instanceof o.default&&e.children.forEach(t),e.optimize(n))},c=e,u=0;c.length>0;u+=1){if(u>=100)throw new Error("[Parchment] Maximum optimize iterations reached");for(c.forEach((function(t){var e=r.find(t.target,!0);null!=e&&(e.domNode===t.target&&("childList"===t.type?(s(r.find(t.previousSibling,!1)),[].forEach.call(t.addedNodes,(function(t){var e=r.find(t,!1);s(e,!1),e instanceof o.default&&e.children.forEach((function(t){s(t,!1)}))}))):"attributes"===t.type&&s(e.prev)),s(e))})),this.children.forEach(l),a=(c=[].slice.call(this.observer.takeRecords())).slice();a.length>0;)e.push(a.pop())}},e.prototype.update=function(e,n){var i=this;void 0===n&&(n={}),(e=e||this.observer.takeRecords()).map((function(t){var e=r.find(t.target,!0);return null==e?null:null==e.domNode[r.DATA_KEY].mutations?(e.domNode[r.DATA_KEY].mutations=[t],e):(e.domNode[r.DATA_KEY].mutations.push(t),null)})).forEach((function(t){null!=t&&t!==i&&null!=t.domNode[r.DATA_KEY]&&t.update(t.domNode[r.DATA_KEY].mutations||[],n)})),null!=this.domNode[r.DATA_KEY].mutations&&t.prototype.update.call(this,this.domNode[r.DATA_KEY].mutations,n),this.optimize(e,n)},e.blotName="scroll",e.defaultChild="block",e.scope=r.Scope.BLOCK_BLOT,e.tagName="DIV",e}(o.default);e.default=s},function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(18),r=n(1),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.formats=function(n){if(n.tagName!==e.tagName)return t.formats.call(this,n)},e.prototype.format=function(n,i){var r=this;n!==this.statics.blotName||i?t.prototype.format.call(this,n,i):(this.children.forEach((function(t){t instanceof o.default||(t=t.wrap(e.blotName,!0)),r.attributes.copy(t)})),this.unwrap())},e.prototype.formatAt=function(e,n,i,o){null!=this.formats()[i]||r.query(i,r.Scope.ATTRIBUTE)?this.isolate(e,n).format(i,o):t.prototype.formatAt.call(this,e,n,i,o)},e.prototype.optimize=function(n){t.prototype.optimize.call(this,n);var i=this.formats();if(0===Object.keys(i).length)return this.unwrap();var o=this.next;o instanceof e&&o.prev===this&&function(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var n in t)if(t[n]!==e[n])return!1;return!0}(i,o.formats())&&(o.moveChildren(this),o.remove())},e.blotName="inline",e.scope=r.Scope.INLINE_BLOT,e.tagName="SPAN",e}(o.default);e.default=a},function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(18),r=n(1),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.formats=function(n){var i=r.query(e.blotName).tagName;if(n.tagName!==i)return t.formats.call(this,n)},e.prototype.format=function(n,i){null!=r.query(n,r.Scope.BLOCK)&&(n!==this.statics.blotName||i?t.prototype.format.call(this,n,i):this.replaceWith(e.blotName))},e.prototype.formatAt=function(e,n,i,o){null!=r.query(i,r.Scope.BLOCK)?this.format(i,o):t.prototype.formatAt.call(this,e,n,i,o)},e.prototype.insertAt=function(e,n,i){if(null==i||null!=r.query(n,r.Scope.INLINE))t.prototype.insertAt.call(this,e,n,i);else{var o=this.split(e),a=r.create(n,i);o.parent.insertBefore(a,o)}},e.prototype.update=function(e,n){navigator.userAgent.match(/Trident/)?this.build():t.prototype.update.call(this,e,n)},e.blotName="block",e.scope=r.Scope.BLOCK_BLOT,e.tagName="P",e}(o.default);e.default=a},function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.formats=function(t){},e.prototype.format=function(e,n){t.prototype.formatAt.call(this,0,this.length(),e,n)},e.prototype.formatAt=function(e,n,i,o){0===e&&n===this.length()?this.format(i,o):t.prototype.formatAt.call(this,e,n,i,o)},e.prototype.formats=function(){return this.statics.formats(this.domNode)},e}(n(19).default);e.default=o},function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(19),r=n(1),a=function(t){function e(e){var n=t.call(this,e)||this;return n.text=n.statics.value(n.domNode),n}return i(e,t),e.create=function(t){return document.createTextNode(t)},e.value=function(t){var e=t.data;return e.normalize&&(e=e.normalize()),e},e.prototype.deleteAt=function(t,e){this.domNode.data=this.text=this.text.slice(0,t)+this.text.slice(t+e)},e.prototype.index=function(t,e){return this.domNode===t?e:-1},e.prototype.insertAt=function(e,n,i){null==i?(this.text=this.text.slice(0,e)+n+this.text.slice(e),this.domNode.data=this.text):t.prototype.insertAt.call(this,e,n,i)},e.prototype.length=function(){return this.text.length},e.prototype.optimize=function(n){t.prototype.optimize.call(this,n),this.text=this.statics.value(this.domNode),0===this.text.length?this.remove():this.next instanceof e&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},e.prototype.position=function(t,e){return void 0===e&&(e=!1),[this.domNode,t]},e.prototype.split=function(t,e){if(void 0===e&&(e=!1),!e){if(0===t)return this;if(t===this.length())return this.next}var n=r.create(this.domNode.splitText(t));return this.parent.insertBefore(n,this.next),this.text=this.statics.value(this.domNode),n},e.prototype.update=function(t,e){var n=this;t.some((function(t){return"characterData"===t.type&&t.target===n.domNode}))&&(this.text=this.statics.value(this.domNode))},e.prototype.value=function(){return this.text},e.blotName="text",e.scope=r.Scope.INLINE_BLOT,e}(o.default);e.default=a},function(t,e,n){"use strict";var i=document.createElement("div");if(i.classList.toggle("test-class",!1),i.classList.contains("test-class")){var o=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(t,e){return arguments.length>1&&!this.contains(t)==!e?e:o.call(this,t)}}String.prototype.startsWith||(String.prototype.startsWith=function(t,e){return e=e||0,this.substr(e,t.length)===t}),String.prototype.endsWith||(String.prototype.endsWith=function(t,e){var n=this.toString();("number"!=typeof e||!isFinite(e)||Math.floor(e)!==e||e>n.length)&&(e=n.length),e-=t.length;var i=n.indexOf(t,e);return-1!==i&&i===e}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(t){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var e,n=Object(this),i=n.length>>>0,o=arguments[1],r=0;r<i;r++)if(e=n[r],t.call(o,e,r,n))return e}}),document.addEventListener("DOMContentLoaded",(function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)}))},function(t,e){function n(t,e,n){if(t==e)return t?[[p,t]]:[];(n<0||t.length<n)&&(n=null);var o=a(t,e),r=t.substring(0,o);o=s(t=t.substring(o),e=e.substring(o));var l=t.substring(t.length-o),h=i(t=t.substring(0,t.length-o),e=e.substring(0,e.length-o));return r&&h.unshift([p,r]),l&&h.push([p,l]),c(h),null!=n&&(h=u(h,n)),function(t){for(var e=!1,n=function(t){return t.charCodeAt(0)>=56320&&t.charCodeAt(0)<=57343},i=2;i<t.length;i+=1)t[i-2][0]===p&&function(t){return t.charCodeAt(t.length-1)>=55296&&t.charCodeAt(t.length-1)<=56319}(t[i-2][1])&&t[i-1][0]===d&&n(t[i-1][1])&&t[i][0]===f&&n(t[i][1])&&(e=!0,t[i-1][1]=t[i-2][1].slice(-1)+t[i-1][1],t[i][1]=t[i-2][1].slice(-1)+t[i][1],t[i-2][1]=t[i-2][1].slice(0,-1));if(!e)return t;var o=[];for(i=0;i<t.length;i+=1)t[i][1].length>0&&o.push(t[i]);return o}(h)}function i(t,e){var i;if(!t)return[[f,e]];if(!e)return[[d,t]];var r=t.length>e.length?t:e,a=t.length>e.length?e:t,s=r.indexOf(a);if(-1!=s)return i=[[f,r.substring(0,s)],[p,a],[f,r.substring(s+a.length)]],t.length>e.length&&(i[0][0]=i[2][0]=d),i;if(1==a.length)return[[d,t],[f,e]];var c=l(t,e);if(c){var u=c[0],h=c[1],v=c[2],m=c[3],y=c[4],g=n(u,v),b=n(h,m);return g.concat([[p,y]],b)}return o(t,e)}function o(t,e){for(var n=t.length,i=e.length,o=Math.ceil((n+i)/2),a=o,s=2*o,l=new Array(s),c=new Array(s),u=0;u<s;u++)l[u]=-1,c[u]=-1;l[a+1]=0,c[a+1]=0;for(var h=n-i,p=h%2!=0,v=0,m=0,y=0,g=0,b=0;b<o;b++){for(var _=-b+v;_<=b-m;_+=2){for(var w=a+_,k=(A=_==-b||_!=b&&l[w-1]<l[w+1]?l[w+1]:l[w-1]+1)-_;A<n&&k<i&&t.charAt(A)==e.charAt(k);)A++,k++;if(l[w]=A,A>n)m+=2;else if(k>i)v+=2;else if(p){if((E=a+h-_)>=0&&E<s&&-1!=c[E])if(A>=(O=n-c[E]))return r(t,e,A,k)}}for(var x=-b+y;x<=b-g;x+=2){for(var O,E=a+x,C=(O=x==-b||x!=b&&c[E-1]<c[E+1]?c[E+1]:c[E-1]+1)-x;O<n&&C<i&&t.charAt(n-O-1)==e.charAt(i-C-1);)O++,C++;if(c[E]=O,O>n)g+=2;else if(C>i)y+=2;else if(!p){if((w=a+h-x)>=0&&w<s&&-1!=l[w]){var A;k=a+(A=l[w])-w;if(A>=(O=n-O))return r(t,e,A,k)}}}}return[[d,t],[f,e]]}function r(t,e,i,o){var r=t.substring(0,i),a=e.substring(0,o),s=t.substring(i),l=e.substring(o),c=n(r,a),u=n(s,l);return c.concat(u)}function a(t,e){if(!t||!e||t.charAt(0)!=e.charAt(0))return 0;for(var n=0,i=Math.min(t.length,e.length),o=i,r=0;n<o;)t.substring(r,o)==e.substring(r,o)?r=n=o:i=o,o=Math.floor((i-n)/2+n);return o}function s(t,e){if(!t||!e||t.charAt(t.length-1)!=e.charAt(e.length-1))return 0;for(var n=0,i=Math.min(t.length,e.length),o=i,r=0;n<o;)t.substring(t.length-o,t.length-r)==e.substring(e.length-o,e.length-r)?r=n=o:i=o,o=Math.floor((i-n)/2+n);return o}function l(t,e){function n(t,e,n){for(var i,o,r,l,c=t.substring(n,n+Math.floor(t.length/4)),u=-1,h="";-1!=(u=e.indexOf(c,u+1));){var d=a(t.substring(n),e.substring(u)),f=s(t.substring(0,n),e.substring(0,u));h.length<f+d&&(h=e.substring(u-f,u)+e.substring(u,u+d),i=t.substring(0,n-f),o=t.substring(n+d),r=e.substring(0,u-f),l=e.substring(u+d))}return 2*h.length>=t.length?[i,o,r,l,h]:null}var i=t.length>e.length?t:e,o=t.length>e.length?e:t;if(i.length<4||2*o.length<i.length)return null;var r,l,c,u,h,d=n(i,o,Math.ceil(i.length/4)),f=n(i,o,Math.ceil(i.length/2));return d||f?(r=f?d&&d[4].length>f[4].length?d:f:d,t.length>e.length?(l=r[0],c=r[1],u=r[2],h=r[3]):(u=r[0],h=r[1],l=r[2],c=r[3]),[l,c,u,h,r[4]]):null}function c(t){t.push([p,""]);for(var e,n=0,i=0,o=0,r="",l="";n<t.length;)switch(t[n][0]){case f:o++,l+=t[n][1],n++;break;case d:i++,r+=t[n][1],n++;break;case p:i+o>1?(0!==i&&0!==o&&(0!==(e=a(l,r))&&(n-i-o>0&&t[n-i-o-1][0]==p?t[n-i-o-1][1]+=l.substring(0,e):(t.splice(0,0,[p,l.substring(0,e)]),n++),l=l.substring(e),r=r.substring(e)),0!==(e=s(l,r))&&(t[n][1]=l.substring(l.length-e)+t[n][1],l=l.substring(0,l.length-e),r=r.substring(0,r.length-e))),0===i?t.splice(n-o,i+o,[f,l]):0===o?t.splice(n-i,i+o,[d,r]):t.splice(n-i-o,i+o,[d,r],[f,l]),n=n-i-o+(i?1:0)+(o?1:0)+1):0!==n&&t[n-1][0]==p?(t[n-1][1]+=t[n][1],t.splice(n,1)):n++,o=0,i=0,r="",l=""}""===t[t.length-1][1]&&t.pop();var u=!1;for(n=1;n<t.length-1;)t[n-1][0]==p&&t[n+1][0]==p&&(t[n][1].substring(t[n][1].length-t[n-1][1].length)==t[n-1][1]?(t[n][1]=t[n-1][1]+t[n][1].substring(0,t[n][1].length-t[n-1][1].length),t[n+1][1]=t[n-1][1]+t[n+1][1],t.splice(n-1,1),u=!0):t[n][1].substring(0,t[n+1][1].length)==t[n+1][1]&&(t[n-1][1]+=t[n+1][1],t[n][1]=t[n][1].substring(t[n+1][1].length)+t[n+1][1],t.splice(n+1,1),u=!0)),n++;u&&c(t)}function u(t,e){var n=function(t,e){if(0===e)return[p,t];for(var n=0,i=0;i<t.length;i++){var o=t[i];if(o[0]===d||o[0]===p){var r=n+o[1].length;if(e===r)return[i+1,t];if(e<r){t=t.slice();var a=e-n,s=[o[0],o[1].slice(0,a)],l=[o[0],o[1].slice(a)];return t.splice(i,1,s,l),[i+1,t]}n=r}}throw new Error("cursor_pos is out of bounds!")}(t,e),i=n[1],o=n[0],r=i[o],a=i[o+1];if(null==r)return t;if(r[0]!==p)return t;if(null!=a&&r[1]+a[1]===a[1]+r[1])return i.splice(o,2,a,r),h(i,o,2);if(null!=a&&0===a[1].indexOf(r[1])){i.splice(o,2,[a[0],r[1]],[0,r[1]]);var s=a[1].slice(r[1].length);return s.length>0&&i.splice(o+2,0,[a[0],s]),h(i,o,3)}return t}function h(t,e,n){for(var i=e+n-1;i>=0&&i>=e-1;i--)if(i+1<t.length){var o=t[i],r=t[i+1];o[0]===r[1]&&t.splice(i,2,[o[0],o[1]+r[1]])}return t}var d=-1,f=1,p=0,v=n;v.INSERT=f,v.DELETE=d,v.EQUAL=p,t.exports=v},function(t,e){function n(t){var e=[];for(var n in t)e.push(n);return e}(t.exports="function"==typeof Object.keys?Object.keys:n).shim=n},function(t,e){function n(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function i(t){return t&&"object"==_typeof2(t)&&"number"==typeof t.length&&Object.prototype.hasOwnProperty.call(t,"callee")&&!Object.prototype.propertyIsEnumerable.call(t,"callee")||!1}var o="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();(e=t.exports=o?n:i).supported=n,e.unsupported=i},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){return Object.keys(e).reduce((function(n,i){return null==t[i]||(e[i]===t[i]?n[i]=e[i]:Array.isArray(e[i])?e[i].indexOf(t[i])<0&&(n[i]=e[i].concat([t[i]])):n[i]=[e[i],t[i]]),n}),{})}Object.defineProperty(e,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==_typeof2(Symbol.iterator)?function(t){return _typeof2(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":_typeof2(t)},a=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,o=!1,r=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){o=!0,r=t}finally{try{!i&&s.return&&s.return()}finally{if(o)throw r}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=i(n(4)),c=i(n(20)),u=i(n(0)),h=i(n(13)),d=i(n(31)),f=n(3),p=i(f),v=i(n(14)),m=i(n(21)),y=i(n(12)),g=i(n(2)),b=/^[ -~]*$/,_=function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.scroll=e,this.delta=this.getDelta()}return s(t,[{key:"applyDelta",value:function(t){var e=this,n=!1;this.scroll.update();var i=this.scroll.length();return this.scroll.batchStart(),t=function(t){return t.reduce((function(t,e){if(1===e.insert){var n=(0,m.default)(e.attributes);return delete n.image,t.insert({image:e.attributes.image},n)}if(null==e.attributes||!0!==e.attributes.list&&!0!==e.attributes.bullet||((e=(0,m.default)(e)).attributes.list?e.attributes.list="ordered":(e.attributes.list="bullet",delete e.attributes.bullet)),"string"==typeof e.insert){var i=e.insert.replace(/\r\n/g,"\n").replace(/\r/g,"\n");return t.insert(i,e.attributes)}return t.push(e)}),new l.default)}(t),t.reduce((function(t,o){var s=o.retain||o.delete||o.insert.length||1,l=o.attributes||{};if(null!=o.insert){if("string"==typeof o.insert){var h=o.insert;h.endsWith("\n")&&n&&(n=!1,h=h.slice(0,-1)),t>=i&&!h.endsWith("\n")&&(n=!0),e.scroll.insertAt(t,h);var d=e.scroll.line(t),v=a(d,2),m=v[0],y=v[1],b=(0,g.default)({},(0,f.bubbleFormats)(m));if(m instanceof p.default){var _=m.descendant(u.default.Leaf,y),w=a(_,1)[0];b=(0,g.default)(b,(0,f.bubbleFormats)(w))}l=c.default.attributes.diff(b,l)||{}}else if("object"===r(o.insert)){var k=Object.keys(o.insert)[0];if(null==k)return t;e.scroll.insertAt(t,k,o.insert[k])}i+=s}return Object.keys(l).forEach((function(n){e.scroll.formatAt(t,s,n,l[n])})),t+s}),0),t.reduce((function(t,n){return"number"==typeof n.delete?(e.scroll.deleteAt(t,n.delete),t):t+(n.retain||n.insert.length||1)}),0),this.scroll.batchEnd(),this.update(t)}},{key:"deleteText",value:function(t,e){return this.scroll.deleteAt(t,e),this.update((new l.default).retain(t).delete(e))}},{key:"formatLine",value:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.scroll.update(),Object.keys(i).forEach((function(o){if(null==n.scroll.whitelist||n.scroll.whitelist[o]){var r=n.scroll.lines(t,Math.max(e,1)),a=e;r.forEach((function(e){var r=e.length();if(e instanceof h.default){var s=t-e.offset(n.scroll),l=e.newlineIndex(s+a)-s+1;e.formatAt(s,l,o,i[o])}else e.format(o,i[o]);a-=r}))}})),this.scroll.optimize(),this.update((new l.default).retain(t).retain(e,(0,m.default)(i)))}},{key:"formatText",value:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object.keys(i).forEach((function(o){n.scroll.formatAt(t,e,o,i[o])})),this.update((new l.default).retain(t).retain(e,(0,m.default)(i)))}},{key:"getContents",value:function(t,e){return this.delta.slice(t,t+e)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce((function(t,e){return t.concat(e.delta())}),new l.default)}},{key:"getFormat",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=[],i=[];0===e?this.scroll.path(t).forEach((function(t){var e=a(t,1)[0];e instanceof p.default?n.push(e):e instanceof u.default.Leaf&&i.push(e)})):(n=this.scroll.lines(t,e),i=this.scroll.descendants(u.default.Leaf,t,e));var r=[n,i].map((function(t){if(0===t.length)return{};for(var e=(0,f.bubbleFormats)(t.shift());Object.keys(e).length>0;){var n=t.shift();if(null==n)return e;e=o((0,f.bubbleFormats)(n),e)}return e}));return g.default.apply(g.default,r)}},{key:"getText",value:function(t,e){return this.getContents(t,e).filter((function(t){return"string"==typeof t.insert})).map((function(t){return t.insert})).join("")}},{key:"insertEmbed",value:function(t,e,n){return this.scroll.insertAt(t,e,n),this.update((new l.default).retain(t).insert(function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({},e,n)))}},{key:"insertText",value:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e=e.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),this.scroll.insertAt(t,e),Object.keys(i).forEach((function(o){n.scroll.formatAt(t,e.length,o,i[o])})),this.update((new l.default).retain(t).insert(e,(0,m.default)(i)))}},{key:"isBlank",value:function(){if(0==this.scroll.children.length)return!0;if(this.scroll.children.length>1)return!1;var t=this.scroll.children.head;return t.statics.blotName===p.default.blotName&&!(t.children.length>1)&&t.children.head instanceof v.default}},{key:"removeFormat",value:function(t,e){var n=this.getText(t,e),i=this.scroll.line(t+e),o=a(i,2),r=o[0],s=o[1],c=0,u=new l.default;null!=r&&(c=r instanceof h.default?r.newlineIndex(s)-s+1:r.length()-s,u=r.delta().slice(s,s+c-1).insert("\n"));var d=this.getContents(t,e+c).diff((new l.default).insert(n).concat(u)),f=(new l.default).retain(t).concat(d);return this.applyDelta(f)}},{key:"update",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=this.delta;if(1===e.length&&"characterData"===e[0].type&&e[0].target.data.match(b)&&u.default.find(e[0].target)){var o=u.default.find(e[0].target),r=(0,f.bubbleFormats)(o),a=o.offset(this.scroll),s=e[0].oldValue.replace(d.default.CONTENTS,""),c=(new l.default).insert(s),h=(new l.default).insert(o.value());t=(new l.default).retain(a).concat(c.diff(h,n)).reduce((function(t,e){return e.insert?t.insert(e.insert,r):t.push(e)}),new l.default),this.delta=i.compose(t)}else this.delta=this.getDelta(),t&&(0,y.default)(i.compose(t),this.delta)||(t=i.diff(this.delta,n));return t}}]),t}();e.default=_},function(t,e){"use strict";function n(){}function i(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function o(){this._events=new n,this._eventsCount=0}var r=Object.prototype.hasOwnProperty,a="~";Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(a=!1)),o.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)r.call(t,e)&&n.push(a?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},o.prototype.listeners=function(t,e){var n=a?a+t:t,i=this._events[n];if(e)return!!i;if(!i)return[];if(i.fn)return[i.fn];for(var o=0,r=i.length,s=new Array(r);o<r;o++)s[o]=i[o].fn;return s},o.prototype.emit=function(t,e,n,i,o,r){var s=a?a+t:t;if(!this._events[s])return!1;var l,c,u=this._events[s],h=arguments.length;if(u.fn){switch(u.once&&this.removeListener(t,u.fn,void 0,!0),h){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,e),!0;case 3:return u.fn.call(u.context,e,n),!0;case 4:return u.fn.call(u.context,e,n,i),!0;case 5:return u.fn.call(u.context,e,n,i,o),!0;case 6:return u.fn.call(u.context,e,n,i,o,r),!0}for(c=1,l=new Array(h-1);c<h;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var d,f=u.length;for(c=0;c<f;c++)switch(u[c].once&&this.removeListener(t,u[c].fn,void 0,!0),h){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,e);break;case 3:u[c].fn.call(u[c].context,e,n);break;case 4:u[c].fn.call(u[c].context,e,n,i);break;default:if(!l)for(d=1,l=new Array(h-1);d<h;d++)l[d-1]=arguments[d];u[c].fn.apply(u[c].context,l)}}return!0},o.prototype.on=function(t,e,n){var o=new i(e,n||this),r=a?a+t:t;return this._events[r]?this._events[r].fn?this._events[r]=[this._events[r],o]:this._events[r].push(o):(this._events[r]=o,this._eventsCount++),this},o.prototype.once=function(t,e,n){var o=new i(e,n||this,!0),r=a?a+t:t;return this._events[r]?this._events[r].fn?this._events[r]=[this._events[r],o]:this._events[r].push(o):(this._events[r]=o,this._eventsCount++),this},o.prototype.removeListener=function(t,e,i,o){var r=a?a+t:t;if(!this._events[r])return this;if(!e)return 0==--this._eventsCount?this._events=new n:delete this._events[r],this;var s=this._events[r];if(s.fn)s.fn!==e||o&&!s.once||i&&s.context!==i||(0==--this._eventsCount?this._events=new n:delete this._events[r]);else{for(var l=0,c=[],u=s.length;l<u;l++)(s[l].fn!==e||o&&!s[l].once||i&&s[l].context!==i)&&c.push(s[l]);c.length?this._events[r]=1===c.length?c[0]:c:0==--this._eventsCount?this._events=new n:delete this._events[r]}return this},o.prototype.removeAllListeners=function(t){var e;return t?(e=a?a+t:t,this._events[e]&&(0==--this._eventsCount?this._events=new n:delete this._events[e])):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prototype.setMaxListeners=function(){return this},o.prefixed=a,o.EventEmitter=o,void 0!==t&&(t.exports=o)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t){return t instanceof h.default||t instanceof u.BlockEmbed}Object.defineProperty(e,"__esModule",{value:!0});var r=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,o=!1,r=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){o=!0,r=t}finally{try{!i&&s.return&&s.return()}finally{if(o)throw r}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=function t(e,n,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,i)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(i):void 0},l=i(n(0)),c=i(n(9)),u=n(3),h=i(u),d=i(n(14)),f=i(n(13)),p=i(n(23)),v=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=_typeof2(e)&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.emitter=n.emitter,Array.isArray(n.whitelist)&&(i.whitelist=n.whitelist.reduce((function(t,e){return t[e]=!0,t}),{})),i.domNode.addEventListener("DOMNodeInserted",(function(){})),i.optimize(),i.enable(),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),a(e,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(t,n){var i=this.line(t),o=r(i,2),a=o[0],l=o[1],c=this.line(t+n),h=r(c,1)[0];if(s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"deleteAt",this).call(this,t,n),null!=h&&a!==h&&l>0){if(a instanceof u.BlockEmbed||h instanceof u.BlockEmbed)return void this.optimize();if(a instanceof f.default){var p=a.newlineIndex(a.length(),!0);if(p>-1&&(a=a.split(p+1))===h)return void this.optimize()}else if(h instanceof f.default){var v=h.newlineIndex(0);v>-1&&h.split(v+1)}var m=h.children.head instanceof d.default?null:h.children.head;a.moveChildren(h,m),a.remove()}this.optimize()}},{key:"enable",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.domNode.setAttribute("contenteditable",t)}},{key:"formatAt",value:function(t,n,i,o){(null==this.whitelist||this.whitelist[i])&&(s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"formatAt",this).call(this,t,n,i,o),this.optimize())}},{key:"insertAt",value:function(t,n,i){if(null==i||null==this.whitelist||this.whitelist[n]){if(t>=this.length())if(null==i||null==l.default.query(n,l.default.Scope.BLOCK)){var o=l.default.create(this.statics.defaultChild);this.appendChild(o),null==i&&n.endsWith("\n")&&(n=n.slice(0,-1)),o.insertAt(0,n,i)}else{var r=l.default.create(n,i);this.appendChild(r)}else s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"insertAt",this).call(this,t,n,i);this.optimize()}}},{key:"insertBefore",value:function(t,n){if(t.statics.scope===l.default.Scope.INLINE_BLOT){var i=l.default.create(this.statics.defaultChild);i.appendChild(t),t=i}s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"insertBefore",this).call(this,t,n)}},{key:"leaf",value:function(t){return this.path(t).pop()||[null,-1]}},{key:"line",value:function(t){return t===this.length()?this.line(t-1):this.descendant(o,t)}},{key:"lines",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE;return function t(e,n,i){var r=[],a=i;return e.children.forEachAt(n,i,(function(e,n,i){o(e)?r.push(e):e instanceof l.default.Container&&(r=r.concat(t(e,n,a))),a-=i})),r}(this,t,e)}},{key:"optimize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!0!==this.batch&&(s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"optimize",this).call(this,t,n),t.length>0&&this.emitter.emit(c.default.events.SCROLL_OPTIMIZE,t,n))}},{key:"path",value:function(t){return s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"path",this).call(this,t).slice(1)}},{key:"update",value:function(t){if(!0!==this.batch){var n=c.default.sources.USER;"string"==typeof t&&(n=t),Array.isArray(t)||(t=this.observer.takeRecords()),t.length>0&&this.emitter.emit(c.default.events.SCROLL_BEFORE_UPDATE,n,t),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"update",this).call(this,t.concat([])),t.length>0&&this.emitter.emit(c.default.events.SCROLL_UPDATE,n,t)}}}]),e}(l.default.Scroll);v.blotName="scroll",v.className="ql-editor",v.tagName="DIV",v.defaultChild="block",v.allowedChildren=[h.default,u.BlockEmbed,p.default],e.default=v},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t,e,n){return"object"===(void 0===e?"undefined":m(e))?Object.keys(e).reduce((function(t,n){return r(t,n,e[n])}),t):t.reduce((function(t,i){return i.attributes&&i.attributes[e]?t.push(i):t.insert(i.insert,(0,b.default)({},o({},e,n),i.attributes))}),new _.default)}function a(t){return t.nodeType!==Node.ELEMENT_NODE?{}:t["__ql-computed-style"]||(t["__ql-computed-style"]=window.getComputedStyle(t))}function s(t,e){for(var n="",i=t.ops.length-1;i>=0&&n.length<e.length;--i){var o=t.ops[i];if("string"!=typeof o.insert)break;n=o.insert+n}return n.slice(-1*e.length)===e}function l(t){return 0!==t.childNodes.length&&["block","list-item"].indexOf(a(t).display)>-1}function c(t,e,n){return t.nodeType===t.TEXT_NODE?n.reduce((function(e,n){return n(t,e)}),new _.default):t.nodeType===t.ELEMENT_NODE?[].reduce.call(t.childNodes||[],(function(i,o){var r=c(o,e,n);return o.nodeType===t.ELEMENT_NODE&&(r=e.reduce((function(t,e){return e(o,t)}),r),r=(o[q]||[]).reduce((function(t,e){return e(o,t)}),r)),i.concat(r)}),new _.default):new _.default}function u(t,e,n){return r(n,t,!0)}function h(t,e){var n=w.default.Attributor.Attribute.keys(t),i=w.default.Attributor.Class.keys(t),o=w.default.Attributor.Style.keys(t),a={};return n.concat(i).concat(o).forEach((function(e){var n=w.default.query(e,w.default.Scope.ATTRIBUTE);null!=n&&(a[n.attrName]=n.value(t),a[n.attrName])||(null==(n=P[e])||n.attrName!==e&&n.keyName!==e||(a[n.attrName]=n.value(t)||void 0),null==(n=L[e])||n.attrName!==e&&n.keyName!==e||(n=L[e],a[n.attrName]=n.value(t)||void 0))})),Object.keys(a).length>0&&(e=r(e,a)),e}function d(t,e){var n=w.default.query(t);if(null==n)return e;if(n.prototype instanceof w.default.Embed){var i={},o=n.value(t);null!=o&&(i[n.blotName]=o,e=(new _.default).insert(i,n.formats(t)))}else"function"==typeof n.formats&&(e=r(e,n.blotName,n.formats(t)));return e}function f(t,e){return s(e,"\n")||(l(t)||e.length()>0&&t.nextSibling&&l(t.nextSibling))&&e.insert("\n"),e}function p(t,e){if(l(t)&&null!=t.nextElementSibling&&!s(e,"\n\n")){var n=t.offsetHeight+parseFloat(a(t).marginTop)+parseFloat(a(t).marginBottom);t.nextElementSibling.offsetTop>t.offsetTop+1.5*n&&e.insert("\n")}return e}function v(t,e){var n=t.data;if("O:P"===t.parentNode.tagName)return e.insert(n.trim());if(0===n.trim().length&&t.parentNode.classList.contains("ql-clipboard"))return e;if(!a(t.parentNode).whiteSpace.startsWith("pre")){var i=function(t,e){return(e=e.replace(/[^\u00a0]/g,"")).length<1&&t?" ":e};n=(n=n.replace(/\r\n/g," ").replace(/\n/g," ")).replace(/\s\s+/g,i.bind(i,!0)),(null==t.previousSibling&&l(t.parentNode)||null!=t.previousSibling&&l(t.previousSibling))&&(n=n.replace(/^\s+/,i.bind(i,!1))),(null==t.nextSibling&&l(t.parentNode)||null!=t.nextSibling&&l(t.nextSibling))&&(n=n.replace(/\s+$/,i.bind(i,!1)))}return e.insert(n)}Object.defineProperty(e,"__esModule",{value:!0}),e.matchText=e.matchSpacing=e.matchNewline=e.matchBlot=e.matchAttributor=e.default=void 0;var m="function"==typeof Symbol&&"symbol"==_typeof2(Symbol.iterator)?function(t){return _typeof2(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":_typeof2(t)},y=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,o=!1,r=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){o=!0,r=t}finally{try{!i&&s.return&&s.return()}finally{if(o)throw r}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},g=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),b=i(n(2)),_=i(n(4)),w=i(n(0)),k=i(n(6)),x=i(n(10)),O=i(n(7)),E=n(34),C=n(35),A=i(n(13)),N=n(24),j=n(36),$=n(37),T=n(38),S=(0,x.default)("quill:clipboard"),q="__ql-matcher",M=[[Node.TEXT_NODE,v],[Node.TEXT_NODE,f],["br",function(t,e){return s(e,"\n")||e.insert("\n"),e}],[Node.ELEMENT_NODE,f],[Node.ELEMENT_NODE,d],[Node.ELEMENT_NODE,p],[Node.ELEMENT_NODE,h],[Node.ELEMENT_NODE,function(t,e){var n={},i=t.style||{};return i.fontStyle&&"italic"===a(t).fontStyle&&(n.italic=!0),i.fontWeight&&(a(t).fontWeight.startsWith("bold")||parseInt(a(t).fontWeight)>=700)&&(n.bold=!0),Object.keys(n).length>0&&(e=r(e,n)),parseFloat(i.textIndent||0)>0&&(e=(new _.default).insert("\t").concat(e)),e}],["li",function(t,e){var n=w.default.query(t);if(null==n||"list-item"!==n.blotName||!s(e,"\n"))return e;for(var i=-1,o=t.parentNode;!o.classList.contains("ql-clipboard");)"list"===(w.default.query(o)||{}).blotName&&(i+=1),o=o.parentNode;return i<=0?e:e.compose((new _.default).retain(e.length()-1).retain(1,{indent:i}))}],["b",u.bind(u,"bold")],["i",u.bind(u,"italic")],["style",function(){return new _.default}]],P=[E.AlignAttribute,j.DirectionAttribute].reduce((function(t,e){return t[e.keyName]=e,t}),{}),L=[E.AlignStyle,C.BackgroundStyle,N.ColorStyle,j.DirectionStyle,$.FontStyle,T.SizeStyle].reduce((function(t,e){return t[e.keyName]=e,t}),{}),D=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=_typeof2(e)&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return i.quill.root.addEventListener("paste",i.onPaste.bind(i)),i.container=i.quill.addContainer("ql-clipboard"),i.container.setAttribute("contenteditable",!0),i.container.setAttribute("tabindex",-1),i.matchers=[],M.concat(i.options.matchers).forEach((function(t){var e=y(t,2),o=e[0],r=e[1];(n.matchVisual||r!==p)&&i.addMatcher(o,r)})),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),g(e,[{key:"addMatcher",value:function(t,e){this.matchers.push([t,e])}},{key:"convert",value:function(t){if("string"==typeof t)return this.container.innerHTML=t.replace(/\>\r?\n +\</g,"><"),this.convert();var e=this.quill.getFormat(this.quill.selection.savedRange.index);if(e[A.default.blotName]){var n=this.container.innerText;return this.container.innerHTML="",(new _.default).insert(n,o({},A.default.blotName,e[A.default.blotName]))}var i=this.prepareMatching(),r=y(i,2),a=r[0],l=r[1],u=c(this.container,a,l);return s(u,"\n")&&null==u.ops[u.ops.length-1].attributes&&(u=u.compose((new _.default).retain(u.length()-1).delete(1))),S.log("convert",this.container.innerHTML,u),this.container.innerHTML="",u}},{key:"dangerouslyPasteHTML",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:k.default.sources.API;if("string"==typeof t)this.quill.setContents(this.convert(t),e),this.quill.setSelection(0,k.default.sources.SILENT);else{var i=this.convert(e);this.quill.updateContents((new _.default).retain(t).concat(i),n),this.quill.setSelection(t+i.length(),k.default.sources.SILENT)}}},{key:"onPaste",value:function(t){var e=this;if(!t.defaultPrevented&&this.quill.isEnabled()){var n=this.quill.getSelection(),i=(new _.default).retain(n.index),o=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(k.default.sources.SILENT),setTimeout((function(){i=i.concat(e.convert()).delete(n.length),e.quill.updateContents(i,k.default.sources.USER),e.quill.setSelection(i.length()-n.length,k.default.sources.SILENT),e.quill.scrollingContainer.scrollTop=o,e.quill.focus()}),1)}}},{key:"prepareMatching",value:function(){var t=this,e=[],n=[];return this.matchers.forEach((function(i){var o=y(i,2),r=o[0],a=o[1];switch(r){case Node.TEXT_NODE:n.push(a);break;case Node.ELEMENT_NODE:e.push(a);break;default:[].forEach.call(t.container.querySelectorAll(r),(function(t){t[q]=t[q]||[],t[q].push(a)}))}})),[e,n]}}]),e}(O.default);D.DEFAULTS={matchers:[],matchVisual:!0},e.default=D,e.matchAttributor=h,e.matchBlot=d,e.matchNewline=f,e.matchSpacing=p,e.matchText=v},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t){var e=t.reduce((function(t,e){return t+(e.delete||0)}),0),n=t.length()-e;return function(t){var e=t.ops[t.ops.length-1];return null!=e&&(null!=e.insert?"string"==typeof e.insert&&e.insert.endsWith("\n"):null!=e.attributes&&Object.keys(e.attributes).some((function(t){return null!=a.default.query(t,a.default.Scope.BLOCK)})))}(t)&&(n-=1),n}Object.defineProperty(e,"__esModule",{value:!0}),e.getLastChangeIndex=e.default=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=i(n(0)),s=i(n(6)),l=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=_typeof2(e)&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return i.lastRecorded=0,i.ignoreChange=!1,i.clear(),i.quill.on(s.default.events.EDITOR_CHANGE,(function(t,e,n,o){t!==s.default.events.TEXT_CHANGE||i.ignoreChange||(i.options.userOnly&&o!==s.default.sources.USER?i.transform(e):i.record(e,n))})),i.quill.keyboard.addBinding({key:"Z",shortKey:!0},i.undo.bind(i)),i.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},i.redo.bind(i)),/Win/i.test(navigator.platform)&&i.quill.keyboard.addBinding({key:"Y",shortKey:!0},i.redo.bind(i)),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:"change",value:function(t,e){if(0!==this.stack[t].length){var n=this.stack[t].pop();this.stack[e].push(n),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(n[t],s.default.sources.USER),this.ignoreChange=!1;var i=o(n[t]);this.quill.setSelection(i)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(t,e){if(0!==t.ops.length){this.stack.redo=[];var n=this.quill.getContents().diff(e),i=Date.now();if(this.lastRecorded+this.options.delay>i&&this.stack.undo.length>0){var o=this.stack.undo.pop();n=n.compose(o.undo),t=o.redo.compose(t)}else this.lastRecorded=i;this.stack.undo.push({redo:t,undo:n}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(t){this.stack.undo.forEach((function(e){e.undo=t.transform(e.undo,!0),e.redo=t.transform(e.redo,!0)})),this.stack.redo.forEach((function(e){e.undo=t.transform(e.undo,!0),e.redo=t.transform(e.redo,!0)}))}},{key:"undo",value:function(){this.change("undo","redo")}}]),e}(i(n(7)).default);l.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1},e.default=l,e.getLastChangeIndex=o},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=_typeof2(e)&&"function"!=typeof e?t:e}Object.defineProperty(e,"__esModule",{value:!0}),e.IndentClass=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function t(e,n,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,i)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(i):void 0},s=function(t){return t&&t.__esModule?t:{default:t}}(n(0)),l=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:"add",value:function(t,n){if("+1"===n||"-1"===n){var i=this.value(t)||0;n="+1"===n?i+1:i-1}return 0===n?(this.remove(t),!0):a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"add",this).call(this,t,n)}},{key:"canAdd",value:function(t,n){return a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"canAdd",this).call(this,t,n)||a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"canAdd",this).call(this,t,parseInt(n))}},{key:"value",value:function(t){return parseInt(a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"value",this).call(this,t))||void 0}}]),e}(s.default.Attributor.Class),c=new l("indent","ql-indent",{scope:s.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});e.IndentClass=c},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=_typeof2(e)&&"function"!=typeof e?t:e}Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(n(3)),a=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(r.default);a.blotName="blockquote",a.tagName="blockquote",e.default=a},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=_typeof2(e)&&"function"!=typeof e?t:e}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(n(3)),s=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,null,[{key:"formats",value:function(t){return this.tagName.indexOf(t.tagName)+1}}]),e}(a.default);s.blotName="header",s.tagName=["H1","H2","H3","H4","H5","H6"],e.default=s},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=_typeof2(e)&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.ListItem=void 0;var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=function t(e,n,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,i)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(i):void 0},c=i(n(0)),u=i(n(3)),h=i(n(23)),d=function(t){function e(){return o(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),s(e,[{key:"format",value:function(t,n){t!==f.blotName||n?l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"format",this).call(this,t,n):this.replaceWith(c.default.create(this.statics.scope))}},{key:"remove",value:function(){null==this.prev&&null==this.next?this.parent.remove():l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(t,n){return this.parent.isolate(this.offset(this.parent),this.length()),t===this.parent.statics.blotName?(this.parent.replaceWith(t,n),this):(this.parent.unwrap(),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"replaceWith",this).call(this,t,n))}}],[{key:"formats",value:function(t){return t.tagName===this.tagName?void 0:l(e.__proto__||Object.getPrototypeOf(e),"formats",this).call(this,t)}}]),e}(u.default);d.blotName="list-item",d.tagName="LI";var f=function(t){function e(t){o(this,e);var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),i=function(e){if(e.target.parentNode===t){var i=n.statics.formats(t),o=c.default.find(e.target);"checked"===i?o.format("list","unchecked"):"unchecked"===i&&o.format("list","checked")}};return t.addEventListener("touchstart",i),t.addEventListener("mousedown",i),n}return a(e,t),s(e,null,[{key:"create",value:function(t){var n="ordered"===t?"OL":"UL",i=l(e.__proto__||Object.getPrototypeOf(e),"create",this).call(this,n);return"checked"!==t&&"unchecked"!==t||i.setAttribute("data-checked","checked"===t),i}},{key:"formats",value:function(t){return"OL"===t.tagName?"ordered":"UL"===t.tagName?t.hasAttribute("data-checked")?"true"===t.getAttribute("data-checked")?"checked":"unchecked":"bullet":void 0}}]),s(e,[{key:"format",value:function(t,e){this.children.length>0&&this.children.tail.format(t,e)}},{key:"formats",value:function(){return function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(t,n){if(t instanceof d)l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"insertBefore",this).call(this,t,n);else{var i=null==n?this.length():n.offset(this),o=this.split(i);o.parent.insertBefore(t,o)}}},{key:"optimize",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"optimize",this).call(this,t);var n=this.next;null!=n&&n.prev===this&&n.statics.blotName===this.statics.blotName&&n.domNode.tagName===this.domNode.tagName&&n.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(n.moveChildren(this),n.remove())}},{key:"replace",value:function(t){if(t.statics.blotName!==this.statics.blotName){var n=c.default.create(this.statics.defaultChild);t.moveChildren(n),this.appendChild(n)}l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"replace",this).call(this,t)}}]),e}(h.default);f.blotName="list",f.scope=c.default.Scope.BLOCK_BLOT,f.tagName=["OL","UL"],f.defaultChild="list-item",f.allowedChildren=[d],e.ListItem=d,e.default=f},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=_typeof2(e)&&"function"!=typeof e?t:e}Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(n(39)),a=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(r.default);a.blotName="italic",a.tagName=["EM","I"],e.default=a},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=_typeof2(e)&&"function"!=typeof e?t:e}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function t(e,n,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,i)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(i):void 0},s=function(t){return t&&t.__esModule?t:{default:t}}(n(5)),l=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,null,[{key:"create",value:function(t){return"super"===t?document.createElement("sup"):"sub"===t?document.createElement("sub"):a(e.__proto__||Object.getPrototypeOf(e),"create",this).call(this,t)}},{key:"formats",value:function(t){return"SUB"===t.tagName?"sub":"SUP"===t.tagName?"super":void 0}}]),e}(s.default);l.blotName="script",l.tagName=["SUB","SUP"],e.default=l},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=_typeof2(e)&&"function"!=typeof e?t:e}Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(n(5)),a=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(r.default);a.blotName="strike",a.tagName="S",e.default=a},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=_typeof2(e)&&"function"!=typeof e?t:e}Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(n(5)),a=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(r.default);a.blotName="underline",a.tagName="U",e.default=a},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=_typeof2(e)&&"function"!=typeof e?t:e}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function t(e,n,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,i)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(i):void 0},s=function(t){return t&&t.__esModule?t:{default:t}}(n(0)),l=n(15),c=["alt","height","width"],u=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:"format",value:function(t,n){c.indexOf(t)>-1?n?this.domNode.setAttribute(t,n):this.domNode.removeAttribute(t):a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"format",this).call(this,t,n)}}],[{key:"create",value:function(t){var n=a(e.__proto__||Object.getPrototypeOf(e),"create",this).call(this,t);return"string"==typeof t&&n.setAttribute("src",this.sanitize(t)),n}},{key:"formats",value:function(t){return c.reduce((function(e,n){return t.hasAttribute(n)&&(e[n]=t.getAttribute(n)),e}),{})}},{key:"match",value:function(t){return/\.(jpe?g|gif|png)$/.test(t)||/^data:image\/.+;base64/.test(t)}},{key:"sanitize",value:function(t){return(0,l.sanitize)(t,["http","https","data"])?t:"//:0"}},{key:"value",value:function(t){return t.getAttribute("src")}}]),e}(s.default.Embed);u.blotName="image",u.tagName="IMG",e.default=u},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=_typeof2(e)&&"function"!=typeof e?t:e}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function t(e,n,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,i)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(i):void 0},s=n(3),l=function(t){return t&&t.__esModule?t:{default:t}}(n(15)),c=["height","width"],u=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:"format",value:function(t,n){c.indexOf(t)>-1?n?this.domNode.setAttribute(t,n):this.domNode.removeAttribute(t):a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"format",this).call(this,t,n)}}],[{key:"create",value:function(t){var n=a(e.__proto__||Object.getPrototypeOf(e),"create",this).call(this,t);return n.setAttribute("frameborder","0"),n.setAttribute("allowfullscreen",!0),n.setAttribute("src",this.sanitize(t)),n}},{key:"formats",value:function(t){return c.reduce((function(e,n){return t.hasAttribute(n)&&(e[n]=t.getAttribute(n)),e}),{})}},{key:"sanitize",value:function(t){return l.default.sanitize(t)}},{key:"value",value:function(t){return t.getAttribute("src")}}]),e}(s.BlockEmbed);u.blotName="video",u.className="ql-video",u.tagName="IFRAME",e.default=u},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=_typeof2(e)&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.FormulaBlot=void 0;var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=function t(e,n,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,i)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(i):void 0},c=i(n(33)),u=i(n(6)),h=i(n(7)),d=function(t){function e(){return o(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),s(e,null,[{key:"create",value:function(t){var n=l(e.__proto__||Object.getPrototypeOf(e),"create",this).call(this,t);return"string"==typeof t&&(window.katex.render(t,n,{throwOnError:!1,errorColor:"#f00"}),n.setAttribute("data-value",t)),n}},{key:"value",value:function(t){return t.getAttribute("data-value")}}]),e}(c.default);d.blotName="formula",d.className="ql-formula",d.tagName="SPAN";var f=function(t){function e(){o(this,e);var t=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));if(null==window.katex)throw new Error("Formula module requires KaTeX.");return t}return a(e,t),s(e,null,[{key:"register",value:function(){u.default.register(d,!0)}}]),e}(h.default);e.FormulaBlot=d,e.default=f},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=_typeof2(e)&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.CodeToken=e.CodeBlock=void 0;var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=function t(e,n,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,i)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(i):void 0},c=i(n(0)),u=i(n(6)),h=i(n(7)),d=function(t){function e(){return o(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),s(e,[{key:"replaceWith",value:function(t){this.domNode.textContent=this.domNode.textContent,this.attach(),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"replaceWith",this).call(this,t)}},{key:"highlight",value:function(t){var e=this.domNode.textContent;this.cachedText!==e&&((e.trim().length>0||null==this.cachedText)&&(this.domNode.innerHTML=t(e),this.domNode.normalize(),this.attach()),this.cachedText=e)}}]),e}(i(n(13)).default);d.className="ql-syntax";var f=new c.default.Attributor.Class("token","hljs",{scope:c.default.Scope.INLINE}),p=function(t){function e(t,n){o(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));if("function"!=typeof i.options.highlight)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var a=null;return i.quill.on(u.default.events.SCROLL_OPTIMIZE,(function(){clearTimeout(a),a=setTimeout((function(){i.highlight(),a=null}),i.options.interval)})),i.highlight(),i}return a(e,t),s(e,null,[{key:"register",value:function(){u.default.register(f,!0),u.default.register(d,!0)}}]),s(e,[{key:"highlight",value:function(){var t=this;if(!this.quill.selection.composing){this.quill.update(u.default.sources.USER);var e=this.quill.getSelection();this.quill.scroll.descendants(d).forEach((function(e){e.highlight(t.options.highlight)})),this.quill.update(u.default.sources.SILENT),null!=e&&this.quill.setSelection(e,u.default.sources.SILENT)}}}]),e}(h.default);p.DEFAULTS={highlight:null==window.hljs?null:function(t){return window.hljs.highlightAuto(t).value},interval:1e3},e.CodeBlock=d,e.CodeToken=f,e.default=p},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=_typeof2(e)&&"function"!=typeof e?t:e}function r(t,e,n){var i=document.createElement("button");i.setAttribute("type","button"),i.classList.add("ql-"+e),null!=n&&(i.value=n),t.appendChild(i)}function a(t,e){Array.isArray(e[0])||(e=[e]),e.forEach((function(e){var n=document.createElement("span");n.classList.add("ql-formats"),e.forEach((function(t){if("string"==typeof t)r(n,t);else{var e=Object.keys(t)[0],i=t[e];Array.isArray(i)?function(t,e,n){var i=document.createElement("select");i.classList.add("ql-"+e),n.forEach((function(t){var e=document.createElement("option");!1!==t?e.setAttribute("value",t):e.setAttribute("selected","selected"),i.appendChild(e)})),t.appendChild(i)}(n,e,i):r(n,e,i)}})),t.appendChild(n)}))}Object.defineProperty(e,"__esModule",{value:!0}),e.addControls=e.default=void 0;var s=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,o=!1,r=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){o=!0,r=t}finally{try{!i&&s.return&&s.return()}finally{if(o)throw r}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},l=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),c=i(n(4)),u=i(n(0)),h=i(n(6)),d=i(n(10)),f=i(n(7)),p=(0,d.default)("quill:toolbar"),v=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i,r=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));if(Array.isArray(r.options.container)){var l=document.createElement("div");a(l,r.options.container),t.container.parentNode.insertBefore(l,t.container),r.container=l}else"string"==typeof r.options.container?r.container=document.querySelector(r.options.container):r.container=r.options.container;return r.container instanceof HTMLElement?(r.container.classList.add("ql-toolbar"),r.controls=[],r.handlers={},Object.keys(r.options.handlers).forEach((function(t){r.addHandler(t,r.options.handlers[t])})),[].forEach.call(r.container.querySelectorAll("button, select"),(function(t){r.attach(t)})),r.quill.on(h.default.events.EDITOR_CHANGE,(function(t,e){t===h.default.events.SELECTION_CHANGE&&r.update(e)})),r.quill.on(h.default.events.SCROLL_OPTIMIZE,(function(){var t=r.quill.selection.getRange(),e=s(t,1)[0];r.update(e)})),r):(i=p.error("Container required for toolbar",r.options),o(r,i))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),l(e,[{key:"addHandler",value:function(t,e){this.handlers[t]=e}},{key:"attach",value:function(t){var e=this,n=[].find.call(t.classList,(function(t){return 0===t.indexOf("ql-")}));if(n){if(n=n.slice("ql-".length),"BUTTON"===t.tagName&&t.setAttribute("type","button"),null==this.handlers[n]){if(null!=this.quill.scroll.whitelist&&null==this.quill.scroll.whitelist[n])return void p.warn("ignoring attaching to disabled format",n,t);if(null==u.default.query(n))return void p.warn("ignoring attaching to nonexistent format",n,t)}var i="SELECT"===t.tagName?"change":"click";t.addEventListener(i,(function(i){var o=void 0;if("SELECT"===t.tagName){if(t.selectedIndex<0)return;var r=t.options[t.selectedIndex];o=!r.hasAttribute("selected")&&(r.value||!1)}else o=!t.classList.contains("ql-active")&&(t.value||!t.hasAttribute("value")),i.preventDefault();e.quill.focus();var a=e.quill.selection.getRange(),l=s(a,1)[0];if(null!=e.handlers[n])e.handlers[n].call(e,o);else if(u.default.query(n).prototype instanceof u.default.Embed){if(!(o=prompt("Enter "+n)))return;e.quill.updateContents((new c.default).retain(l.index).delete(l.length).insert(function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({},n,o)),h.default.sources.USER)}else e.quill.format(n,o,h.default.sources.USER);e.update(l)})),this.controls.push([n,t])}}},{key:"update",value:function(t){var e=null==t?{}:this.quill.getFormat(t);this.controls.forEach((function(n){var i=s(n,2),o=i[0],r=i[1];if("SELECT"===r.tagName){var a=void 0;if(null==t)a=null;else if(null==e[o])a=r.querySelector("option[selected]");else if(!Array.isArray(e[o])){var l=e[o];"string"==typeof l&&(l=l.replace(/\"/g,'\\"')),a=r.querySelector('option[value="'+l+'"]')}null==a?(r.value="",r.selectedIndex=-1):a.selected=!0}else if(null==t)r.classList.remove("ql-active");else if(r.hasAttribute("value")){var c=e[o]===r.getAttribute("value")||null!=e[o]&&e[o].toString()===r.getAttribute("value")||null==e[o]&&!r.getAttribute("value");r.classList.toggle("ql-active",c)}else r.classList.toggle("ql-active",null!=e[o])}))}}]),e}(f.default);v.DEFAULTS={},v.DEFAULTS={container:null,handlers:{clean:function(){var t=this,e=this.quill.getSelection();if(null!=e)if(0==e.length){var n=this.quill.getFormat();Object.keys(n).forEach((function(e){null!=u.default.query(e,u.default.Scope.INLINE)&&t.quill.format(e,!1)}))}else this.quill.removeFormat(e,h.default.sources.USER)},direction:function(t){var e=this.quill.getFormat().align;"rtl"===t&&null==e?this.quill.format("align","right",h.default.sources.USER):t||"right"!==e||this.quill.format("align",!1,h.default.sources.USER),this.quill.format("direction",t,h.default.sources.USER)},indent:function(t){var e=this.quill.getSelection(),n=this.quill.getFormat(e),i=parseInt(n.indent||0);if("+1"===t||"-1"===t){var o="+1"===t?1:-1;"rtl"===n.direction&&(o*=-1),this.quill.format("indent",i+o,h.default.sources.USER)}},link:function(t){!0===t&&(t=prompt("Enter link URL:")),this.quill.format("link",t,h.default.sources.USER)},list:function(t){var e=this.quill.getSelection(),n=this.quill.getFormat(e);"check"===t?"checked"===n.list||"unchecked"===n.list?this.quill.format("list",!1,h.default.sources.USER):this.quill.format("list","unchecked",h.default.sources.USER):this.quill.format("list",t,h.default.sources.USER)}}},e.default=v,e.addControls=a},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(t,e){t.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(t,e){t.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(t,e){t.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(t,e){t.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=_typeof2(e)&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.BubbleTooltip=void 0;var s=function t(e,n,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,i)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(i):void 0},l=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),c=i(n(2)),u=i(n(9)),h=n(44),d=i(h),f=n(22),p=i(n(26)),v=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],m=function(t){function e(t,n){o(this,e),null!=n.modules.toolbar&&null==n.modules.toolbar.container&&(n.modules.toolbar.container=v);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return i.quill.container.classList.add("ql-bubble"),i}return a(e,t),l(e,[{key:"extendToolbar",value:function(t){this.tooltip=new y(this.quill,this.options.bounds),this.tooltip.root.appendChild(t.container),this.buildButtons([].slice.call(t.container.querySelectorAll("button")),p.default),this.buildPickers([].slice.call(t.container.querySelectorAll("select")),p.default)}}]),e}(d.default);m.DEFAULTS=(0,c.default)(!0,{},d.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(t){t?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var y=function(t){function e(t,n){o(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return i.quill.on(u.default.events.EDITOR_CHANGE,(function(t,e,n,o){if(t===u.default.events.SELECTION_CHANGE)if(null!=e&&e.length>0&&o===u.default.sources.USER){i.show(),i.root.style.left="0px",i.root.style.width="",i.root.style.width=i.root.offsetWidth+"px";var r=i.quill.getLines(e.index,e.length);if(1===r.length)i.position(i.quill.getBounds(e));else{var a=r[r.length-1],s=i.quill.getIndex(a),l=Math.min(a.length()-1,e.index+e.length-s),c=i.quill.getBounds(new f.Range(s,l));i.position(c)}}else document.activeElement!==i.textbox&&i.quill.hasFocus()&&i.hide()})),i}return a(e,t),l(e,[{key:"listen",value:function(){var t=this;s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",(function(){t.root.classList.remove("ql-editing")})),this.quill.on(u.default.events.SCROLL_OPTIMIZE,(function(){setTimeout((function(){if(!t.root.classList.contains("ql-hidden")){var e=t.quill.getSelection();null!=e&&t.position(t.quill.getBounds(e))}}),1)}))}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(t){var n=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"position",this).call(this,t),i=this.root.querySelector(".ql-tooltip-arrow");if(i.style.marginLeft="",0===n)return n;i.style.marginLeft=-1*n-i.offsetWidth/2+"px"}}]),e}(h.BaseTooltip);y.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),e.BubbleTooltip=y,e.default=m},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=_typeof2(e)&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+_typeof2(e));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,o=!1,r=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){o=!0,r=t}finally{try{!i&&s.return&&s.return()}finally{if(o)throw r}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},l=function t(e,n,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,i)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(i):void 0},c=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=i(n(2)),h=i(n(9)),d=n(44),f=i(d),p=i(n(15)),v=n(22),m=i(n(26)),y=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],g=function(t){function e(t,n){o(this,e),null!=n.modules.toolbar&&null==n.modules.toolbar.container&&(n.modules.toolbar.container=y);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return i.quill.container.classList.add("ql-snow"),i}return a(e,t),c(e,[{key:"extendToolbar",value:function(t){t.container.classList.add("ql-snow"),this.buildButtons([].slice.call(t.container.querySelectorAll("button")),m.default),this.buildPickers([].slice.call(t.container.querySelectorAll("select")),m.default),this.tooltip=new b(this.quill,this.options.bounds),t.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},(function(e,n){t.handlers.link.call(t,!n.format.link)}))}}]),e}(f.default);g.DEFAULTS=(0,u.default)(!0,{},f.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(t){if(t){var e=this.quill.getSelection();if(null==e||0==e.length)return;var n=this.quill.getText(e);/^\S+@\S+\.\S+$/.test(n)&&0!==n.indexOf("mailto:")&&(n="mailto:"+n),this.quill.theme.tooltip.edit("link",n)}else this.quill.format("link",!1)}}}}});var b=function(t){function e(t,n){o(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return i.preview=i.root.querySelector("a.ql-preview"),i}return a(e,t),c(e,[{key:"listen",value:function(){var t=this;l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",(function(e){t.root.classList.contains("ql-editing")?t.save():t.edit("link",t.preview.textContent),e.preventDefault()})),this.root.querySelector("a.ql-remove").addEventListener("click",(function(e){if(null!=t.linkRange){var n=t.linkRange;t.restoreFocus(),t.quill.formatText(n,"link",!1,h.default.sources.USER),delete t.linkRange}e.preventDefault(),t.hide()})),this.quill.on(h.default.events.SELECTION_CHANGE,(function(e,n,i){if(null!=e){if(0===e.length&&i===h.default.sources.USER){var o=t.quill.scroll.descendant(p.default,e.index),r=s(o,2),a=r[0],l=r[1];if(null!=a){t.linkRange=new v.Range(e.index-l,a.length());var c=p.default.formats(a.domNode);return t.preview.textContent=c,t.preview.setAttribute("href",c),t.show(),void t.position(t.quill.getBounds(t.linkRange))}}else delete t.linkRange;t.hide()}}))}},{key:"show",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),e}(d.BaseTooltip);b.TEMPLATE=['<a class="ql-preview" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),e.default=g}]).default})),function(t,e){"object"==("undefined"==typeof exports?"undefined":_typeof2(exports))&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).Cropper=e()}(this,(function(){"use strict";function t(t,e){var n,i=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)),i}function e(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?t(Object(i),!0).forEach((function(t){var n,o;n=e,t=i[o=t],o in n?Object.defineProperty(n,o,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[o]=t})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):t(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function n(t){return(n="function"==typeof Symbol&&"symbol"==_typeof2(Symbol.iterator)?function(t){return _typeof2(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":_typeof2(t)})(t)}function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(n="Object"===n&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var a=(Dt="undefined"!=typeof window&&void 0!==window.document)?window:{},s=!(!Dt||!a.document.documentElement)&&"ontouchstart"in a.document.documentElement,l=Dt&&"PointerEvent"in a,c="cropper",u="all",h="crop",d="move",f="zoom",p="e",v="w",m="s",y="n",g="ne",b="nw",_="se",w="sw",k="".concat(c,"-crop"),x="".concat(c,"-disabled"),O="".concat(c,"-hidden"),E="".concat(c,"-hide"),C="".concat(c,"-invisible"),A="".concat(c,"-modal"),N="".concat(c,"-move"),j="".concat(c,"Action"),$="".concat(c,"Preview"),T="crop",S="move",q="none",M="crop",P="cropend",L="cropmove",D="cropstart",R="dblclick",B=l?"pointerdown":s?"touchstart":"mousedown",I=l?"pointermove":s?"touchmove":"mousemove",H=l?"pointerup pointercancel":s?"touchend touchcancel":"mouseup",z="zoom",U="image/jpeg",F=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,W=/^data:/,Y=/^data:image\/jpeg;base64,/,X=/^img|canvas$/i,K={viewMode:0,dragMode:T,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},Z=Number.isNaN||a.isNaN;function V(t){return"number"==typeof t&&!Z(t)}var G=function(t){return 0<t&&t<1/0};function Q(t){return void 0===t}function J(t){return"object"===n(t)&&null!==t}var tt=Object.prototype.hasOwnProperty;function et(t){if(!J(t))return!1;try{var e=t.constructor,n=e.prototype;return e&&n&&tt.call(n,"isPrototypeOf")}catch(t){return!1}}function nt(t){return"function"==typeof t}var it=Array.prototype.slice;function ot(t){return Array.from?Array.from(t):it.call(t)}function rt(t,e){return t&&nt(e)&&(Array.isArray(t)||V(t.length)?ot(t).forEach((function(n,i){e.call(t,n,i,t)})):J(t)&&Object.keys(t).forEach((function(n){e.call(t,t[n],n,t)}))),t}var at=Object.assign||function(t){for(var e=arguments.length,n=new Array(1<e?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return J(t)&&0<n.length&&n.forEach((function(e){J(e)&&Object.keys(e).forEach((function(n){t[n]=e[n]}))})),t},st=/\.\d*(?:0|9){12}\d*$/;function lt(t,e){return e=1<arguments.length&&void 0!==e?e:1e11,st.test(t)?Math.round(t*e)/e:t}var ct=/^width|height|left|top|marginLeft|marginTop$/;function ut(t,e){var n=t.style;rt(e,(function(t,e){ct.test(e)&&V(t)&&(t="".concat(t,"px")),n[e]=t}))}function ht(t,e){var n;e&&(V(t.length)?rt(t,(function(t){ht(t,e)})):t.classList?t.classList.add(e):(n=t.className.trim())?n.indexOf(e)<0&&(t.className="".concat(n," ").concat(e)):t.className=e)}function dt(t,e){e&&(V(t.length)?rt(t,(function(t){dt(t,e)})):t.classList?t.classList.remove(e):0<=t.className.indexOf(e)&&(t.className=t.className.replace(e,"")))}function ft(t,e,n){e&&(V(t.length)?rt(t,(function(t){ft(t,e,n)})):(n?ht:dt)(t,e))}var pt=/([a-z\d])([A-Z])/g;function vt(t){return t.replace(pt,"$1-$2").toLowerCase()}function mt(t,e){return J(t[e])?t[e]:t.dataset?t.dataset[e]:t.getAttribute("data-".concat(vt(e)))}function yt(t,e,n){J(n)?t[e]=n:t.dataset?t.dataset[e]=n:t.setAttribute("data-".concat(vt(e)),n)}var gt,bt,_t=/\s\s*/,wt=(bt=!1,Dt&&(gt=!1,Rt=function(){},It=Object.defineProperty({},"once",{get:function(){return bt=!0,gt},set:function(t){gt=t}}),a.addEventListener("test",Rt,It),a.removeEventListener("test",Rt,It)),bt);function kt(t,e,n,i){var o=3<arguments.length&&void 0!==i?i:{},r=n;e.trim().split(_t).forEach((function(e){var i;wt||(i=t.listeners)&&i[e]&&i[e][n]&&(r=i[e][n],delete i[e][n],0===Object.keys(i[e]).length&&delete i[e],0===Object.keys(i).length&&delete t.listeners),t.removeEventListener(e,r,o)}))}function xt(t,e,n,i){var o=3<arguments.length&&void 0!==i?i:{},r=n;e.trim().split(_t).forEach((function(e){var i,a;o.once&&!wt&&(i=t.listeners,r=function(){delete a[e][n],t.removeEventListener(e,r,o);for(var i=arguments.length,s=new Array(i),l=0;l<i;l++)s[l]=arguments[l];n.apply(t,s)},(a=void 0===i?{}:i)[e]||(a[e]={}),a[e][n]&&t.removeEventListener(e,a[e][n],o),a[e][n]=r,t.listeners=a),t.addEventListener(e,r,o)}))}function Ot(t,e,n){var i;return nt(Event)&&nt(CustomEvent)?i=new CustomEvent(e,{detail:n,bubbles:!0,cancelable:!0}):(i=document.createEvent("CustomEvent")).initCustomEvent(e,!0,!0,n),t.dispatchEvent(i)}function Et(t){return{left:(t=t.getBoundingClientRect()).left+(window.pageXOffset-document.documentElement.clientLeft),top:t.top+(window.pageYOffset-document.documentElement.clientTop)}}var Ct=a.location,At=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function Nt(t){return null!==(t=t.match(At))&&(t[1]!==Ct.protocol||t[2]!==Ct.hostname||t[3]!==Ct.port)}function jt(t){var e="timestamp=".concat((new Date).getTime());return t+(-1===t.indexOf("?")?"?":"&")+e}function $t(t){var e=t.rotate,n=t.scaleX,i=t.scaleY,o=t.translateX,r=t.translateY;t=[];return V(o)&&0!==o&&t.push("translateX(".concat(o,"px)")),V(r)&&0!==r&&t.push("translateY(".concat(r,"px)")),V(e)&&0!==e&&t.push("rotate(".concat(e,"deg)")),V(n)&&1!==n&&t.push("scaleX(".concat(n,")")),V(i)&&1!==i&&t.push("scaleY(".concat(i,")")),{WebkitTransform:t=t.length?t.join(" "):"none",msTransform:t,transform:t}}function Tt(t,n){var i=t.pageX,o=t.pageY;t={endX:i,endY:o};return n?t:e({startX:i,startY:o},t)}function St(t,e){var n=t.aspectRatio,i=t.height,o=t.width,r=1<arguments.length&&void 0!==e?e:"contain",a=G(o);t=G(i);return a&&t?(e=i*n,"contain"===r&&o<e||"cover"===r&&e<o?i=o/n:o=i*n):a?i=o/n:t&&(o=i*n),{width:o,height:i}}var qt=String.fromCharCode,Mt=/^data:.*,/;var Pt={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var t=this.element,e=this.options,n=this.container,i=this.cropper,o=Number(e.minContainerWidth);e=Number(e.minContainerHeight);ht(i,O),dt(t,O),e={width:Math.max(n.offsetWidth,0<=o?o:200),height:Math.max(n.offsetHeight,0<=e?e:100)},ut(i,{width:(this.containerData=e).width,height:e.height}),ht(t,O),dt(i,O)},initCanvas:function(){var t=this.containerData,e=this.imageData,n=this.options.viewMode,i=(a=Math.abs(e.rotate)%180==90)?e.naturalHeight:e.naturalWidth,o=a?e.naturalWidth:e.naturalHeight,r=i/o,a=t.width;e=t.height;t.height*r>t.width?3===n?a=t.height*r:e=t.width/r:3===n?e=t.width/r:a=t.height*r,e={aspectRatio:r,naturalWidth:i,naturalHeight:o,width:a,height:e},this.canvasData=e,this.limited=1===n||2===n,this.limitCanvas(!0,!0),e.width=Math.min(Math.max(e.width,e.minWidth),e.maxWidth),e.height=Math.min(Math.max(e.height,e.minHeight),e.maxHeight),e.left=(t.width-e.width)/2,e.top=(t.height-e.height)/2,e.oldLeft=e.left,e.oldTop=e.top,this.initialCanvasData=at({},e)},limitCanvas:function(t,e){var n,i=this.options,o=this.containerData,r=this.canvasData,a=this.cropBoxData,s=i.viewMode,l=r.aspectRatio,c=this.cropped&&a;t&&(t=Number(i.minCanvasWidth)||0,n=Number(i.minCanvasHeight)||0,1<s?(t=Math.max(t,o.width),n=Math.max(n,o.height),3===s&&(t<n*l?t=n*l:n=t/l)):0<s&&(t?t=Math.max(t,c?a.width:0):n?n=Math.max(n,c?a.height:0):c&&((t=a.width)<(n=a.height)*l?t=n*l:n=t/l)),t=(l=St({aspectRatio:l,width:t,height:n})).width,n=l.height,r.minWidth=t,r.minHeight=n,r.maxWidth=1/0,r.maxHeight=1/0),e&&((c?0:1)<s?(n=o.width-r.width,e=o.height-r.height,r.minLeft=Math.min(0,n),r.minTop=Math.min(0,e),r.maxLeft=Math.max(0,n),r.maxTop=Math.max(0,e),c&&this.limited&&(r.minLeft=Math.min(a.left,a.left+(a.width-r.width)),r.minTop=Math.min(a.top,a.top+(a.height-r.height)),r.maxLeft=a.left,r.maxTop=a.top,2===s&&(r.width>=o.width&&(r.minLeft=Math.min(0,n),r.maxLeft=Math.max(0,n)),r.height>=o.height&&(r.minTop=Math.min(0,e),r.maxTop=Math.max(0,e))))):(r.minLeft=-r.width,r.minTop=-r.height,r.maxLeft=o.width,r.maxTop=o.height))},renderCanvas:function(t,e){var n,i,o=this.canvasData,r=this.imageData;e&&(n=(i=function(t){var e=t.width,n=t.height,i=t.degree;if(90==(i=Math.abs(i)%180))return{width:n,height:e};var o=i%90*Math.PI/180,r=Math.sin(o);o=e*(t=Math.cos(o))+n*r,t=e*r+n*t;return 90<i?{width:t,height:o}:{width:o,height:t}}({width:r.naturalWidth*Math.abs(r.scaleX||1),height:r.naturalHeight*Math.abs(r.scaleY||1),degree:r.rotate||0})).width,e=i.height,r=o.width*(n/o.naturalWidth),i=o.height*(e/o.naturalHeight),o.left-=(r-o.width)/2,o.top-=(i-o.height)/2,o.width=r,o.height=i,o.aspectRatio=n/e,o.naturalWidth=n,o.naturalHeight=e,this.limitCanvas(!0,!1)),(o.width>o.maxWidth||o.width<o.minWidth)&&(o.left=o.oldLeft),(o.height>o.maxHeight||o.height<o.minHeight)&&(o.top=o.oldTop),o.width=Math.min(Math.max(o.width,o.minWidth),o.maxWidth),o.height=Math.min(Math.max(o.height,o.minHeight),o.maxHeight),this.limitCanvas(!1,!0),o.left=Math.min(Math.max(o.left,o.minLeft),o.maxLeft),o.top=Math.min(Math.max(o.top,o.minTop),o.maxTop),o.oldLeft=o.left,o.oldTop=o.top,ut(this.canvas,at({width:o.width,height:o.height},$t({translateX:o.left,translateY:o.top}))),this.renderImage(t),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(t){var e=this.canvasData,n=this.imageData,i=n.naturalWidth*(e.width/e.naturalWidth),o=n.naturalHeight*(e.height/e.naturalHeight);at(n,{width:i,height:o,left:(e.width-i)/2,top:(e.height-o)/2}),ut(this.image,at({width:n.width,height:n.height},$t(at({translateX:n.left,translateY:n.top},n)))),t&&this.output()},initCropBox:function(){var t=this.options,e=this.canvasData,n=t.aspectRatio||t.initialAspectRatio,i=Number(t.autoCropArea)||.8;t={width:e.width,height:e.height};n&&(e.height*n>e.width?t.height=t.width/n:t.width=t.height*n),this.cropBoxData=t,this.limitCropBox(!0,!0),t.width=Math.min(Math.max(t.width,t.minWidth),t.maxWidth),t.height=Math.min(Math.max(t.height,t.minHeight),t.maxHeight),t.width=Math.max(t.minWidth,t.width*i),t.height=Math.max(t.minHeight,t.height*i),t.left=e.left+(e.width-t.width)/2,t.top=e.top+(e.height-t.height)/2,t.oldLeft=t.left,t.oldTop=t.top,this.initialCropBoxData=at({},t)},limitCropBox:function(t,e){var n,i,o=this.options,r=this.containerData,a=this.canvasData,s=this.cropBoxData,l=this.limited,c=o.aspectRatio;t&&(n=Number(o.minCropBoxWidth)||0,i=Number(o.minCropBoxHeight)||0,t=l?Math.min(r.width,a.width,a.width+a.left,r.width-a.left):r.width,o=l?Math.min(r.height,a.height,a.height+a.top,r.height-a.top):r.height,n=Math.min(n,r.width),i=Math.min(i,r.height),c&&(n&&i?n<i*c?i=n/c:n=i*c:n?i=n/c:i&&(n=i*c),t<o*c?o=t/c:t=o*c),s.minWidth=Math.min(n,t),s.minHeight=Math.min(i,o),s.maxWidth=t,s.maxHeight=o),e&&(l?(s.minLeft=Math.max(0,a.left),s.minTop=Math.max(0,a.top),s.maxLeft=Math.min(r.width,a.left+a.width)-s.width,s.maxTop=Math.min(r.height,a.top+a.height)-s.height):(s.minLeft=0,s.minTop=0,s.maxLeft=r.width-s.width,s.maxTop=r.height-s.height))},renderCropBox:function(){var t=this.options,e=this.containerData,n=this.cropBoxData;(n.width>n.maxWidth||n.width<n.minWidth)&&(n.left=n.oldLeft),(n.height>n.maxHeight||n.height<n.minHeight)&&(n.top=n.oldTop),n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth),n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight),this.limitCropBox(!1,!0),n.left=Math.min(Math.max(n.left,n.minLeft),n.maxLeft),n.top=Math.min(Math.max(n.top,n.minTop),n.maxTop),n.oldLeft=n.left,n.oldTop=n.top,t.movable&&t.cropBoxMovable&&yt(this.face,j,n.width>=e.width&&n.height>=e.height?d:u),ut(this.cropBox,at({width:n.width,height:n.height},$t({translateX:n.left,translateY:n.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),Ot(this.element,M,this.getData())}},Lt={initPreview:function(){var t=this.element,e=this.crossOrigin,n=this.options.preview,i=e?this.crossOriginUrl:this.url,o=t.alt||"The image to preview",r=document.createElement("img");e&&(r.crossOrigin=e),r.src=i,r.alt=o,this.viewBox.appendChild(r),this.viewBoxImage=r,n&&("string"==typeof(r=n)?r=t.ownerDocument.querySelectorAll(n):n.querySelector&&(r=[n]),rt(this.previews=r,(function(t){var n=document.createElement("img");yt(t,$,{width:t.offsetWidth,height:t.offsetHeight,html:t.innerHTML}),e&&(n.crossOrigin=e),n.src=i,n.alt=o,n.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',t.innerHTML="",t.appendChild(n)})))},resetPreview:function(){rt(this.previews,(function(t){var e=mt(t,$);ut(t,{width:e.width,height:e.height}),t.innerHTML=e.html,function(t,e){if(J(t[e]))try{delete t[e]}catch(n){t[e]=void 0}else if(t.dataset)try{delete t.dataset[e]}catch(n){t.dataset[e]=void 0}else t.removeAttribute("data-".concat(vt(e)))}(t,$)}))},preview:function(){var t=this.imageData,e=this.canvasData,n=this.cropBoxData,i=n.width,o=n.height,r=t.width,a=t.height,s=n.left-e.left-t.left,l=n.top-e.top-t.top;this.cropped&&!this.disabled&&(ut(this.viewBoxImage,at({width:r,height:a},$t(at({translateX:-s,translateY:-l},t)))),rt(this.previews,(function(e){var n=(d=mt(e,$)).width,c=d.height,u=n,h=c,d=1;i&&(h=o*(d=n/i)),o&&c<h&&(u=i*(d=c/o),h=c),ut(e,{width:u,height:h}),ut(e.getElementsByTagName("img")[0],at({width:r*d,height:a*d},$t(at({translateX:-s*d,translateY:-l*d},t))))})))}},Dt=(l={bind:function(){var t=this.element,e=this.options,n=this.cropper;nt(e.cropstart)&&xt(t,D,e.cropstart),nt(e.cropmove)&&xt(t,L,e.cropmove),nt(e.cropend)&&xt(t,P,e.cropend),nt(e.crop)&&xt(t,M,e.crop),nt(e.zoom)&&xt(t,z,e.zoom),xt(n,B,this.onCropStart=this.cropStart.bind(this)),e.zoomable&&e.zoomOnWheel&&xt(n,"wheel",this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),e.toggleDragModeOnDblclick&&xt(n,R,this.onDblclick=this.dblclick.bind(this)),xt(t.ownerDocument,I,this.onCropMove=this.cropMove.bind(this)),xt(t.ownerDocument,H,this.onCropEnd=this.cropEnd.bind(this)),e.responsive&&xt(window,"resize",this.onResize=this.resize.bind(this))},unbind:function(){var t=this.element,e=this.options,n=this.cropper;nt(e.cropstart)&&kt(t,D,e.cropstart),nt(e.cropmove)&&kt(t,L,e.cropmove),nt(e.cropend)&&kt(t,P,e.cropend),nt(e.crop)&&kt(t,M,e.crop),nt(e.zoom)&&kt(t,z,e.zoom),kt(n,B,this.onCropStart),e.zoomable&&e.zoomOnWheel&&kt(n,"wheel",this.onWheel,{passive:!1,capture:!0}),e.toggleDragModeOnDblclick&&kt(n,R,this.onDblclick),kt(t.ownerDocument,I,this.onCropMove),kt(t.ownerDocument,H,this.onCropEnd),e.responsive&&kt(window,"resize",this.onResize)}},s={resize:function(){var t,e,n,i,o,r,a;this.disabled||(t=this.options,e=this.container,i=this.containerData,n=e.offsetWidth/i.width,i=e.offsetHeight/i.height,1!=(o=Math.abs(n-1)>Math.abs(i-1)?n:i)&&(t.restore&&(r=this.getCanvasData(),a=this.getCropBoxData()),this.render(),t.restore&&(this.setCanvasData(rt(r,(function(t,e){r[e]=t*o}))),this.setCropBoxData(rt(a,(function(t,e){a[e]=t*o}))))))},dblclick:function(){var t,e;this.disabled||this.options.dragMode===q||this.setDragMode((t=this.dragBox,e=k,(t.classList?t.classList.contains(e):-1<t.className.indexOf(e))?S:T))},wheel:function(t){var e=this,n=Number(this.options.wheelZoomRatio)||.1,i=1;this.disabled||(t.preventDefault(),this.wheeling||(this.wheeling=!0,setTimeout((function(){e.wheeling=!1}),50),t.deltaY?i=0<t.deltaY?1:-1:t.wheelDelta?i=-t.wheelDelta/120:t.detail&&(i=0<t.detail?1:-1),this.zoom(-i*n,t)))},cropStart:function(t){var e,n=t.buttons,i=t.button;this.disabled||("mousedown"===t.type||"pointerdown"===t.type&&"mouse"===t.pointerType)&&(V(n)&&1!==n||V(i)&&0!==i||t.ctrlKey)||(i=this.options,e=this.pointers,t.changedTouches?rt(t.changedTouches,(function(t){e[t.identifier]=Tt(t)})):e[t.pointerId||0]=Tt(t),i=1<Object.keys(e).length&&i.zoomable&&i.zoomOnTouch?f:mt(t.target,j),F.test(i)&&!1!==Ot(this.element,D,{originalEvent:t,action:i})&&(t.preventDefault(),this.action=i,this.cropping=!1,i===h&&(this.cropping=!0,ht(this.dragBox,A))))},cropMove:function(t){var e,n=this.action;!this.disabled&&n&&(e=this.pointers,t.preventDefault(),!1!==Ot(this.element,L,{originalEvent:t,action:n})&&(t.changedTouches?rt(t.changedTouches,(function(t){at(e[t.identifier]||{},Tt(t,!0))})):at(e[t.pointerId||0]||{},Tt(t,!0)),this.change(t)))},cropEnd:function(t){var e,n;this.disabled||(e=this.action,n=this.pointers,t.changedTouches?rt(t.changedTouches,(function(t){delete n[t.identifier]})):delete n[t.pointerId||0],e&&(t.preventDefault(),Object.keys(n).length||(this.action=""),this.cropping&&(this.cropping=!1,ft(this.dragBox,A,this.cropped&&this.options.modal)),Ot(this.element,P,{originalEvent:t,action:e})))}},{change:function(t){var n=this.options,i=this.canvasData,o=this.containerData,r=this.cropBoxData,a=this.pointers,s=this.action,l=n.aspectRatio,c=r.left,k=r.top,x=r.width,E=r.height,C=c+x,A=k+E,N=0,j=0,$=o.width,T=o.height,S=!0;function q(t){switch(t){case p:C+R.x>$&&(R.x=$-C);break;case v:c+R.x<N&&(R.x=N-c);break;case y:k+R.y<j&&(R.y=j-k);break;case m:A+R.y>T&&(R.y=T-A)}}!l&&t.shiftKey&&(l=x&&E?x/E:1),this.limited&&(N=r.minLeft,j=r.minTop,$=N+Math.min(o.width,i.width,i.left+i.width),T=j+Math.min(o.height,i.height,i.top+i.height));var M,P,L,D=a[Object.keys(a)[0]],R={x:D.endX-D.startX,y:D.endY-D.startY};switch(s){case u:c+=R.x,k+=R.y;break;case p:if(0<=R.x&&($<=C||l&&(k<=j||T<=A))){S=!1;break}q(p),(x+=R.x)<0&&(s=v,c-=x=-x),l&&(k+=(r.height-(E=x/l))/2);break;case y:if(R.y<=0&&(k<=j||l&&(c<=N||$<=C))){S=!1;break}q(y),E-=R.y,k+=R.y,E<0&&(s=m,k-=E=-E),l&&(c+=(r.width-(x=E*l))/2);break;case v:if(R.x<=0&&(c<=N||l&&(k<=j||T<=A))){S=!1;break}q(v),x-=R.x,c+=R.x,x<0&&(s=p,c-=x=-x),l&&(k+=(r.height-(E=x/l))/2);break;case m:if(0<=R.y&&(T<=A||l&&(c<=N||$<=C))){S=!1;break}q(m),(E+=R.y)<0&&(s=y,k-=E=-E),l&&(c+=(r.width-(x=E*l))/2);break;case g:if(l){if(R.y<=0&&(k<=j||$<=C)){S=!1;break}q(y),E-=R.y,k+=R.y,x=E*l}else q(y),q(p),!(0<=R.x)||C<$?x+=R.x:R.y<=0&&k<=j&&(S=!1),R.y<=0&&!(j<k)||(E-=R.y,k+=R.y);x<0&&E<0?(s=w,k-=E=-E,c-=x=-x):x<0?(s=b,c-=x=-x):E<0&&(s=_,k-=E=-E);break;case b:if(l){if(R.y<=0&&(k<=j||c<=N)){S=!1;break}q(y),E-=R.y,k+=R.y,c+=r.width-(x=E*l)}else q(y),q(v),!(R.x<=0)||N<c?(x-=R.x,c+=R.x):R.y<=0&&k<=j&&(S=!1),R.y<=0&&!(j<k)||(E-=R.y,k+=R.y);x<0&&E<0?(s=_,k-=E=-E,c-=x=-x):x<0?(s=g,c-=x=-x):E<0&&(s=w,k-=E=-E);break;case w:if(l){if(R.x<=0&&(c<=N||T<=A)){S=!1;break}q(v),x-=R.x,c+=R.x,E=x/l}else q(m),q(v),!(R.x<=0)||N<c?(x-=R.x,c+=R.x):0<=R.y&&T<=A&&(S=!1),0<=R.y&&!(A<T)||(E+=R.y);x<0&&E<0?(s=g,k-=E=-E,c-=x=-x):x<0?(s=_,c-=x=-x):E<0&&(s=b,k-=E=-E);break;case _:if(l){if(0<=R.x&&($<=C||T<=A)){S=!1;break}q(p),E=(x+=R.x)/l}else q(m),q(p),!(0<=R.x)||C<$?x+=R.x:0<=R.y&&T<=A&&(S=!1),0<=R.y&&!(A<T)||(E+=R.y);x<0&&E<0?(s=b,k-=E=-E,c-=x=-x):x<0?(s=w,c-=x=-x):E<0&&(s=g,k-=E=-E);break;case d:this.move(R.x,R.y),S=!1;break;case f:this.zoom((P=e({},M=a),L=0,rt(M,(function(t,e){delete P[e],rt(P,(function(e){var n=Math.abs(t.startX-e.startX),i=Math.abs(t.startY-e.startY),o=Math.abs(t.endX-e.endX);e=Math.abs(t.endY-e.endY),i=Math.sqrt(n*n+i*i),i=(Math.sqrt(o*o+e*e)-i)/i;Math.abs(i)>Math.abs(L)&&(L=i)}))})),L),t),S=!1;break;case h:if(!R.x||!R.y){S=!1;break}M=Et(this.cropper),c=D.startX-M.left,k=D.startY-M.top,x=r.minWidth,E=r.minHeight,0<R.x?s=0<R.y?_:g:R.x<0&&(c-=x,s=0<R.y?w:b),R.y<0&&(k-=E),this.cropped||(dt(this.cropBox,O),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0))}S&&(r.width=x,r.height=E,r.left=c,r.top=k,this.action=s,this.renderCropBox()),rt(a,(function(t){t.startX=t.endX,t.startY=t.endY}))}}),Rt={crop:function(){return!this.ready||this.cropped||this.disabled||(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&ht(this.dragBox,A),dt(this.cropBox,O),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=at({},this.initialImageData),this.canvasData=at({},this.initialCanvasData),this.cropBoxData=at({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(at(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),dt(this.dragBox,A),ht(this.cropBox,O)),this},replace:function(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return!this.disabled&&t&&(this.isImg&&(this.element.src=t),e?(this.url=t,this.image.src=t,this.ready&&(this.viewBoxImage.src=t,rt(this.previews,(function(e){e.getElementsByTagName("img")[0].src=t})))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(t))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,dt(this.cropper,x)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,ht(this.cropper,x)),this},destroy:function(){var t=this.element;return t[c]&&(t[c]=void 0,this.isImg&&this.replaced&&(t.src=this.originalUrl),this.uncreate()),this},move:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:t,n=(i=this.canvasData).left,i=i.top;return this.moveTo(Q(t)?t:n+Number(t),Q(e)?e:i+Number(e))},moveTo:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:t,n=this.canvasData,i=!1;return t=Number(t),e=Number(e),this.ready&&!this.disabled&&this.options.movable&&(V(t)&&(n.left=t,i=!0),V(e)&&(n.top=e,i=!0),i&&this.renderCanvas(!0)),this},zoom:function(t,e){var n=this.canvasData;return t=Number(t),this.zoomTo(n.width*(t=t<0?1/(1-t):1+t)/n.naturalWidth,null,e)},zoomTo:function(t,e,n){var i,o,r,a=this.options,s=this.canvasData,l=s.width,c=s.height,u=s.naturalWidth,h=s.naturalHeight;if(0<=(t=Number(t))&&this.ready&&!this.disabled&&a.zoomable){if(a=u*t,h*=t,!1===Ot(this.element,z,{ratio:t,oldRatio:l/u,originalEvent:n}))return this;n?(t=this.pointers,u=Et(this.cropper),n=t&&Object.keys(t).length?(r=o=i=0,rt(t,(function(t){var e=t.startX;t=t.startY;i+=e,o+=t,r+=1})),{pageX:i/=r,pageY:o/=r}):{pageX:n.pageX,pageY:n.pageY},s.left-=(a-l)*((n.pageX-u.left-s.left)/l),s.top-=(h-c)*((n.pageY-u.top-s.top)/c)):et(e)&&V(e.x)&&V(e.y)?(s.left-=(a-l)*((e.x-s.left)/l),s.top-=(h-c)*((e.y-s.top)/c)):(s.left-=(a-l)/2,s.top-=(h-c)/2),s.width=a,s.height=h,this.renderCanvas(!0)}return this},rotate:function(t){return this.rotateTo((this.imageData.rotate||0)+Number(t))},rotateTo:function(t){return V(t=Number(t))&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=t%360,this.renderCanvas(!0,!0)),this},scaleX:function(t){var e=this.imageData.scaleY;return this.scale(t,V(e)?e:1)},scaleY:function(t){var e=this.imageData.scaleX;return this.scale(V(e)?e:1,t)},scale:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:t,n=this.imageData,i=!1;return t=Number(t),e=Number(e),this.ready&&!this.disabled&&this.options.scalable&&(V(t)&&(n.scaleX=t,i=!0),V(e)&&(n.scaleY=e,i=!0),i&&this.renderCanvas(!0,!0)),this},getData:function(){var t,e,n=0<arguments.length&&void 0!==arguments[0]&&arguments[0],i=this.options,o=this.imageData,r=this.canvasData,a=this.cropBoxData;return this.ready&&this.cropped?(t={x:a.left-r.left,y:a.top-r.top,width:a.width,height:a.height},e=o.width/o.naturalWidth,rt(t,(function(n,i){t[i]=n/e})),n&&(a=Math.round(t.y+t.height),n=Math.round(t.x+t.width),t.x=Math.round(t.x),t.y=Math.round(t.y),t.width=n-t.x,t.height=a-t.y)):t={x:0,y:0,width:0,height:0},i.rotatable&&(t.rotate=o.rotate||0),i.scalable&&(t.scaleX=o.scaleX||1,t.scaleY=o.scaleY||1),t},setData:function(t){var e,n=this.options,i=this.imageData,o=this.canvasData,r={};return this.ready&&!this.disabled&&et(t)&&(e=!1,n.rotatable&&V(t.rotate)&&t.rotate!==i.rotate&&(i.rotate=t.rotate,e=!0),n.scalable&&(V(t.scaleX)&&t.scaleX!==i.scaleX&&(i.scaleX=t.scaleX,e=!0),V(t.scaleY)&&t.scaleY!==i.scaleY&&(i.scaleY=t.scaleY,e=!0)),e&&this.renderCanvas(!0,!0),i=i.width/i.naturalWidth,V(t.x)&&(r.left=t.x*i+o.left),V(t.y)&&(r.top=t.y*i+o.top),V(t.width)&&(r.width=t.width*i),V(t.height)&&(r.height=t.height*i),this.setCropBoxData(r)),this},getContainerData:function(){return this.ready?at({},this.containerData):{}},getImageData:function(){return this.sized?at({},this.imageData):{}},getCanvasData:function(){var t=this.canvasData,e={};return this.ready&&rt(["left","top","width","height","naturalWidth","naturalHeight"],(function(n){e[n]=t[n]})),e},setCanvasData:function(t){var e=this.canvasData,n=e.aspectRatio;return this.ready&&!this.disabled&&et(t)&&(V(t.left)&&(e.left=t.left),V(t.top)&&(e.top=t.top),V(t.width)?(e.width=t.width,e.height=t.width/n):V(t.height)&&(e.height=t.height,e.width=t.height*n),this.renderCanvas(!0)),this},getCropBoxData:function(){var t,e=this.cropBoxData;return(t=this.ready&&this.cropped?{left:e.left,top:e.top,width:e.width,height:e.height}:t)||{}},setCropBoxData:function(t){var e,n,i=this.cropBoxData,o=this.options.aspectRatio;return this.ready&&this.cropped&&!this.disabled&&et(t)&&(V(t.left)&&(i.left=t.left),V(t.top)&&(i.top=t.top),V(t.width)&&t.width!==i.width&&(e=!0,i.width=t.width),V(t.height)&&t.height!==i.height&&(n=!0,i.height=t.height),o&&(e?i.height=i.width/o:n&&(i.width=i.height*o)),this.renderCropBox()),this},getCroppedCanvas:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var e,n,i,r,a,s,l,c,u,h,d,f,p=this.canvasData,v=(g=this.image,n=p,w=t,i=(e=this.imageData).aspectRatio,r=e.naturalWidth,b=e.naturalHeight,a=void 0===(f=e.rotate)?0:f,v=void 0===(y=e.scaleX)?1:y,_=void 0===(h=e.scaleY)?1:h,s=n.aspectRatio,l=n.naturalWidth,c=n.naturalHeight,u=void 0===(d=w.fillColor)?"transparent":d,m=void 0===(k=w.imageSmoothingEnabled)||k,y=void 0===(f=w.imageSmoothingQuality)?"low":f,h=void 0===(e=w.maxWidth)?1/0:e,d=void 0===(n=w.maxHeight)?1/0:n,f=void 0===(k=w.minWidth)?0:k,n=void 0===(e=w.minHeight)?0:e,w=(k=document.createElement("canvas")).getContext("2d"),e=St({aspectRatio:s,width:h,height:d}),s=St({aspectRatio:s,width:f,height:n},"cover"),l=Math.min(e.width,Math.max(s.width,l)),c=Math.min(e.height,Math.max(s.height,c)),d=St({aspectRatio:i,width:h,height:d}),n=St({aspectRatio:i,width:f,height:n},"cover"),b=[-(r=Math.min(d.width,Math.max(n.width,r)))/2,-(b=Math.min(d.height,Math.max(n.height,b)))/2,r,b],k.width=lt(l),k.height=lt(c),w.fillStyle=u,w.fillRect(0,0,l,c),w.save(),w.translate(l/2,c/2),w.rotate(a*Math.PI/180),w.scale(v,_),w.imageSmoothingEnabled=m,w.imageSmoothingQuality=y,w.drawImage.apply(w,[g].concat(o(b.map((function(t){return Math.floor(lt(t))}))))),w.restore(),k);if(!this.cropped)return v;var m=(_=this.getData()).x,y=_.y,g=_.width,b=_.height;1!=(w=v.width/Math.floor(p.naturalWidth))&&(m*=w,y*=w,g*=w,b*=w);var _=St({aspectRatio:k=g/b,width:t.maxWidth||1/0,height:t.maxHeight||1/0}),w=(p=St({aspectRatio:k,width:t.minWidth||0,height:t.minHeight||0},"cover"),(k=St({aspectRatio:k,width:t.width||(1!=w?v.width:g),height:t.height||(1!=w?v.height:b)})).width),k=k.height;w=Math.min(_.width,Math.max(p.width,w)),k=Math.min(_.height,Math.max(p.height,k)),p=(_=document.createElement("canvas")).getContext("2d");_.width=lt(w),_.height=lt(k),p.fillStyle=t.fillColor||"transparent",p.fillRect(0,0,w,k),k=t.imageSmoothingEnabled,t=t.imageSmoothingQuality,p.imageSmoothingEnabled=void 0===k||k,t&&(p.imageSmoothingQuality=t);var x,O,E,C,A;k=v.width,t=v.height,y=y;(m=m)<=-g||k<m?C=O=x=m=0:m<=0?(O=-m,m=0,C=x=Math.min(k,g+m)):m<=k&&(O=0,C=x=Math.min(g,k-m)),x<=0||y<=-b||t<y?A=E=N=y=0:y<=0?(E=-y,y=0,A=N=Math.min(t,b+y)):y<=t&&(E=0,A=N=Math.min(b,t-y));var N=[m,y,x,N];return 0<C&&0<A&&N.push(O*(g=w/g),E*g,C*g,A*g),p.drawImage.apply(p,[v].concat(o(N.map((function(t){return Math.floor(lt(t))}))))),_},setAspectRatio:function(t){var e=this.options;return this.disabled||Q(t)||(e.aspectRatio=Math.max(0,t)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(t){var e,n,i=this.options,o=this.dragBox,r=this.face;return this.ready&&!this.disabled&&(n=i.movable&&t===S,i.dragMode=t=(e=t===T)||n?t:q,yt(o,j,t),ft(o,k,e),ft(o,N,n),i.cropBoxMovable||(yt(r,j,t),ft(r,k,e),ft(r,N,n))),this}},Bt=a.Cropper,It=function(){function t(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!e||!X.test(e.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=e,this.options=at({},K,et(n)&&n),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}var e,n,o;return e=t,o=[{key:"noConflict",value:function(){return window.Cropper=Bt,t}},{key:"setDefaults",value:function(t){at(K,et(t)&&t)}}],(n=[{key:"init",value:function(){var t,e=this.element,n=e.tagName.toLowerCase();if(!e[c]){if(e[c]=this,"img"===n){if(this.isImg=!0,t=e.getAttribute("src")||"",!(this.originalUrl=t))return;t=e.src}else"canvas"===n&&window.HTMLCanvasElement&&(t=e.toDataURL());this.load(t)}}},{key:"load",value:function(t){var e,n,i,o,r,a,s=this;t&&(this.url=t,this.imageData={},e=this.element,(n=this.options).rotatable||n.scalable||(n.checkOrientation=!1),n.checkOrientation&&window.ArrayBuffer?W.test(t)?Y.test(t)?this.read((a=(a=t).replace(Mt,""),i=atob(a),a=new ArrayBuffer(i.length),rt(o=new Uint8Array(a),(function(t,e){o[e]=i.charCodeAt(e)})),a)):this.clone():(r=new XMLHttpRequest,a=this.clone.bind(this),this.reloading=!0,(this.xhr=r).onabort=a,r.onerror=a,r.ontimeout=a,r.onprogress=function(){r.getResponseHeader("content-type")!==U&&r.abort()},r.onload=function(){s.read(r.response)},r.onloadend=function(){s.reloading=!1,s.xhr=null},n.checkCrossOrigin&&Nt(t)&&e.crossOrigin&&(t=jt(t)),r.open("GET",t,!0),r.responseType="arraybuffer",r.withCredentials="use-credentials"===e.crossOrigin,r.send()):this.clone())}},{key:"read",value:function(t){var e=this.options,n=this.imageData,i=function(t){var e,n,i,o,r,a,s,l=new DataView(t);try{if(255===l.getUint8(0)&&216===l.getUint8(1))for(var c=l.byteLength,u=2;u+1<c;){if(255===l.getUint8(u)&&225===l.getUint8(u+1)){n=u;break}u+=1}if(n&&(o=n+10,"Exif"===function(t,e,n){var i="";n+=e;for(var o=e;o<n;o+=1)i+=qt(t.getUint8(o));return i}(l,n+4,4)&&(!(s=18761===(r=l.getUint16(o)))&&19789!==r||42!==l.getUint16(o+2,s)||8<=(a=l.getUint32(o+4,s))&&(i=o+a))),i)for(var h,d=l.getUint16(i,s),f=0;f<d;f+=1)if(h=i+12*f+2,274===l.getUint16(h,s)){h+=8,e=l.getUint16(h,s),l.setUint16(h,1,s);break}}catch(t){e=1}return e}(t),o=0,r=1,a=1;1<i&&(this.url=function(t,e){for(var n=[],i=new Uint8Array(t);0<i.length;)n.push(qt.apply(null,ot(i.subarray(0,8192)))),i=i.subarray(8192);return"data:".concat("image/jpeg",";base64,").concat(btoa(n.join("")))}(t),o=(i=function(t){var e=0,n=1,i=1;switch(t){case 2:n=-1;break;case 3:e=-180;break;case 4:i=-1;break;case 5:e=90,i=-1;break;case 6:e=90;break;case 7:e=90,n=-1;break;case 8:e=-90}return{rotate:e,scaleX:n,scaleY:i}}(i)).rotate,r=i.scaleX,a=i.scaleY),e.rotatable&&(n.rotate=o),e.scalable&&(n.scaleX=r,n.scaleY=a),this.clone()}},{key:"clone",value:function(){var t=this.element,e=this.url,n=t.crossOrigin,i=e;this.options.checkCrossOrigin&&Nt(e)&&(n=n||"anonymous",i=jt(e)),this.crossOrigin=n,this.crossOriginUrl=i;var o=document.createElement("img");n&&(o.crossOrigin=n),o.src=i||e,o.alt=t.alt||"The image to crop",(this.image=o).onload=this.start.bind(this),o.onerror=this.stop.bind(this),ht(o,E),t.parentNode.insertBefore(o,t.nextSibling)}},{key:"start",value:function(){var t=this,e=this.image;function n(e,n){at(t.imageData,{naturalWidth:e,naturalHeight:n,aspectRatio:e/n}),t.initialImageData=at({},t.imageData),t.sizing=!1,t.sized=!0,t.build()}e.onload=null,e.onerror=null,this.sizing=!0;var i,o,r=a.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(a.navigator.userAgent);!e.naturalWidth||r?(i=document.createElement("img"),o=document.body||document.documentElement,(this.sizingImage=i).onload=function(){n(i.width,i.height),r||o.removeChild(i)},i.src=e.src,r||(i.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",o.appendChild(i))):n(e.naturalWidth,e.naturalHeight)}},{key:"stop",value:function(){var t=this.image;t.onload=null,t.onerror=null,t.parentNode.removeChild(t),this.image=null}},{key:"build",value:function(){var t,e,n,i,o,r,a,s,l;this.sized&&!this.ready&&(t=this.element,e=this.options,n=this.image,i=t.parentNode,(l=document.createElement("div")).innerHTML='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',r=(o=l.querySelector(".".concat(c,"-container"))).querySelector(".".concat(c,"-canvas")),a=o.querySelector(".".concat(c,"-drag-box")),l=(s=o.querySelector(".".concat(c,"-crop-box"))).querySelector(".".concat(c,"-face")),this.container=i,this.cropper=o,this.canvas=r,this.dragBox=a,this.cropBox=s,this.viewBox=o.querySelector(".".concat(c,"-view-box")),this.face=l,r.appendChild(n),ht(t,O),i.insertBefore(o,t.nextSibling),this.isImg||dt(n,E),this.initPreview(),this.bind(),e.initialAspectRatio=Math.max(0,e.initialAspectRatio)||NaN,e.aspectRatio=Math.max(0,e.aspectRatio)||NaN,e.viewMode=Math.max(0,Math.min(3,Math.round(e.viewMode)))||0,ht(s,O),e.guides||ht(s.getElementsByClassName("".concat(c,"-dashed")),O),e.center||ht(s.getElementsByClassName("".concat(c,"-center")),O),e.background&&ht(o,"".concat(c,"-bg")),e.highlight||ht(l,C),e.cropBoxMovable&&(ht(l,N),yt(l,j,u)),e.cropBoxResizable||(ht(s.getElementsByClassName("".concat(c,"-line")),O),ht(s.getElementsByClassName("".concat(c,"-point")),O)),this.render(),this.ready=!0,this.setDragMode(e.dragMode),e.autoCrop&&this.crop(),this.setData(e.data),nt(e.ready)&&xt(t,"ready",e.ready,{once:!0}),Ot(t,"ready"))}},{key:"unbuild",value:function(){this.ready&&(this.ready=!1,this.unbind(),this.resetPreview(),this.cropper.parentNode.removeChild(this.cropper),dt(this.element,O))}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}])&&i(e.prototype,n),o&&i(e,o),t}();return at(It.prototype,Pt,Lt,l,s,Dt,Rt),It})),$((function(){$(window.location.pathname.split("/")).get(-1);function t(){e();var t=$("#checkout_editor #checkout_editor_id").val(),n=$("#checkout_editor #support_phone").masked();$.ajax({method:"POST",url:"/api/checkouteditor/sendsupportphoneverification",dataType:"json",headers:{Authorization:$('meta[name="access-token"]').attr("content"),Accept:"application/json"},data:{id:t,support_phone:n},success:function(t){alertCustom("success",t.message)},error:function(t){errorAjaxResponse(t)}})}function e(){$("#resend_code").addClass("disabled"),$("#timer").show("fast","linear"),display=document.querySelector("#timer");var t,e=59,n=setInterval((function(){t=e<10?"0"+e:e,display.textContent="Aguarde (".concat(t,")"),--e<0&&(clearInterval(n),$("#resend_code").removeClass("disabled"),$("#timer").hide("fast","linear"))}),1e3)}$("#verify_phone_open, #verified_phone_open").on("click",(function(){var t,e;$("#support_phone").val()&&(t=/^\([1-9]{2}\)\s(?:[2-8]|9[1-9])[0-9]{3}\-[0-9]{4}$/,e=$("#support_phone").val(),t.test(e))?($("#support_phone").removeClass("warning-input"),$("#modal_verify_phone").modal("show")):$("#support_phone").addClass("warning-input")})),$("#remove_phone").on("click",(function(){$("#support_phone").val(""),$("#remove_phone").hide("slow"),$("#verified_phone_open").hide("slow"),$("#verify_phone_open").show("slow"),$("#checkout_editor").submit()})),$("#modal_verify_phone").on("hidden.bs.modal",(function(){$(".code-input").val(""),$("#modal_verify_content").hide(),$("#modal_verified_content").hide()})),$("#modal_verify_phone").on("shown.bs.modal",(function(){$("#modal_verify_content").show("slow"),$("#phone_modal").empty(),$("#phone_modal").append($("#support_phone").val()),t()})),$("#verify_phone").on("click",(function(t){t.preventDefault(),function(){loadOnAny("#modal_verify_content",!1,{styles:{container:{minHeight:"350px",minWidth:"600px"}}});var t=$("#checkout_editor #checkout_editor_id").val(),n=_toConsumableArray2(document.getElementsByName("verify-phone-code")).filter((function(t){return t.name})).map((function(t){return t.value})).join("");$.ajax({method:"POST",url:"/api/checkouteditor/verifysupportphone",dataType:"json",headers:{Authorization:$('meta[name="access-token"]').attr("content"),Accept:"application/json"},data:{id:t,verification_code:n},success:function(t){alertCustom("success",t.message),$("#verify_phone_open").hide(),$("#verified_phone_open").show(),$("#remove_phone").show(),$("#modal_verify_content").hide(),loadOnAny("#modal_verified_content",!0)},error:function(t){e(),$(".code-input").addClass("warning-input"),$(".verify-error").show("fast","linear"),loadOnAny("#modal_verify_content",!0)}})}()})),$("#resend_code").on("click",(function(){$(this).hasClass("disabled")||t()}))})),$(document).ready((function(){var t=this;$("#default_finish_color").on("change",(function(){$(this).is(":checked")?($(":root").css("--finish-button-color","#23D07D"),$("#color_buy_button").prop("disabled",!0),$("#color_buy_button").css("opacity","0.3")):($(":root").css("--finish-button-color",$("#color_buy_button").val()),$("#color_buy_button").prop("disabled",!1),$("#color_buy_button").css("opacity","1"))})),$("#checkout-type").on("click",".btn",(function(){$(this).addClass("btn-active").siblings().removeClass("btn-active")})),$("#color_primary").on("input",(function(){$(":root").css("--primary-color",$(this).val()),$(".accepted-payment-card-creditcard svg path").fill=$(this).val()})),$("#color_secondary").on("input",(function(){$(":root").css("--secondary-color",$(this).val())})),$("#color_buy_button").on("input",(function(){$(":root").css("--finish-button-color",$(this).val())})),$("#download_template_banner").on("click",(function(t){t.preventDefault(),window.location.href=$(this).attr("data-href")})),$(".accept-payment-type").on("change",(function(){for(var t=document.querySelector("#checkout_editor").querySelectorAll(".accept-payment-type"),e=t.length,n=!1,i=0;i<e;i++)t[i].checked&&(n=!0);n||$(this).prop("checked",!0)})),$(".accept-payment-method").on("change",(function(){for(var t=document.querySelector("#checkout_editor").querySelectorAll(".accept-payment-method"),e=t.length,n=!1,i=0;i<e;i++)t[i].checked&&(n=!0);n?$(this).is(":checked")?($($(this).attr("data-preview")).show("slow","swing"),$("."+$(this).attr("data-target")).slideDown("slow","swing")):($($(this).attr("data-preview")).hide("slow","swing"),$("."+$(this).attr("data-target")).slideUp("slow","swing")):$(this).prop("checked",!0)})),$("input[name=checkout_banner_type]").on("click",(function(){"0"===$(this).val()?($(".preview-banner").addClass("retangle-banner"),$(".logo-div").addClass("has-retangle-banner"),$(".preview-banner").removeClass("wide-banner")):($(".preview-banner").removeClass("retangle-banner"),$(".logo-div").removeClass("has-retangle-banner"),$(".preview-banner").addClass("wide-banner"))})),$("input[name=checkout_type_enum]").on("click",(function(){"1"===$(this).val()?($(".visual-content-left").addClass("three-steps"),$(".visual-content-left").removeClass("unique"),$(".visual-content-mobile").addClass("three-steps"),$(".visual-content-mobile").removeClass("unique"),$(".steps-lines").slideDown("slow","swing"),$("#finish_button_preview_desktop_visual").slideDown("slow","swing"),$("#finish_button_preview_mobile_visual").slideDown("slow","swing")):($(".visual-content-left").removeClass("three-steps"),$(".visual-content-left").addClass("unique"),$(".visual-content-mobile").removeClass("three-steps"),$(".visual-content-mobile").addClass("unique"),$(".steps-lines").slideUp("slow","swing"),$("#finish_button_preview_desktop_visual").slideUp("slow","swing"),$("#finish_button_preview_mobile_visual").slideUp("slow","swing"))})),$(".add-tag").on("click",(function(t){t.preventDefault();var e=$(this).attr("data-input");$(e).val($(e).val()+" "+$(this).attr("data-tag")+" "),$(e).focus()})),$(".switch-checkout").off().on("click",(function(){$(this).prop("checked")?($("."+$(this).attr("data-target")).slideDown("slow","swing"),$($(this).attr("data-preview")).slideDown("slow","swing"),$($(this).attr("data-enable")).removeClass("low-opacity")):($("."+$(this).attr("data-target")).slideUp("slow","swing"),$($(this).attr("data-preview")).slideUp("slow","swing"),$($(this).attr("data-enable")).addClass("low-opacity"))})),$(".switch-checkout-accordion").off().on("click",(function(){if($(this).prop("checked")){$("."+$(this).attr("data-target")).slideDown("slow","swing"),$("."+$(this).attr("data-toggle")).slideUp("slow","swing");var t=$("#color_primary").val(),e=$("#color_secondary").val(),n="#23D07D";if(!$("#default_finish_color").is(":checked"))n=$("#color_buy_button").val();$(":root").css("--primary-color",t),$(":root").css("--secondary-color",e),$(":root").css("--finish-button-color",n),$(".theme-ready-first-line").addClass("low-opacity")}else{$("."+$(this).attr("data-target")).slideUp("slow","swing"),$("."+$(this).attr("data-toggle")).slideDown("slow","swing");t=$('label[for="'+$("input[name=theme_enum]:checked").attr("id")+'"]').children(".theme-primary-color").css("background-color"),e=$('label[for="'+$("input[name=theme_enum]:checked").attr("id")+'"]').children(".theme-secondary-color").css("background-color");$(":root").css("--primary-color",t),$(":root").css("--secondary-color",e),$(":root").css("--finish-button-color",t),$(".theme-ready-first-line").removeClass("low-opacity")}})),$(".theme-radio").on("click",(function(){var t=$('label[for="'+$(this).attr("id")+'"]').children(".theme-primary-color").css("background-color"),e=$('label[for="'+$(this).attr("id")+'"]').children(".theme-secondary-color").css("background-color");$(":root").css("--primary-color",t),$(":root").css("--secondary-color",e),$(":root").css("--finish-button-color",t)})),$(".switch-checkout-accordion").is("checked")?$("."+$(".switch-checkout-accordion").attr("data-toggle")).slideUp("slow","swing"):$("."+$(".switch-checkout-accordion").attr("data-target")).slideUp("slow","swing"),$("#whatsapp_phone").mask("(00) 00000-0000"),$("#download_template_banner").on("click",(function(e){e.preventDefault(),window.open($(t).attr("data-href"),"_blank")})),$("#post_purchase_message_title").on("input",(function(){$(".shop-message-preview-title").empty(),$(".shop-message-preview-title").append($(this).val())})),$('[data-toggle="tooltip"]').tooltip(),$("input[name=number]").on("input",(function(){$(t).attr("value",$(t).val().replace(/[^0-9.]/g,"").replace(/(\..*)\./g,"$1"))})),$(".code-input").on("input",(function(){$(t).attr("value",$(t).val().replace(/[^0-9.]/g,"").replace(/(\..*)\./g,"$1"))})),$(".preview-type").on("change",(function(){$(this).add(":checked")&&($("#"+$(this).attr("data-toggle")).fadeOut("slow","swing"),$("#"+$(this).attr("data-target")).fadeIn("slow","swing"))})),$(".switch-labeled").on("input",(function(){$(this).is(":checked")?$("#"+$(this).attr("data-label")).addClass("active"):$("#"+$(this).attr("data-label")).removeClass("active")})),$("#checkout_editor input[type=checkbox]").on("change",(function(){$(this).is(":checked")?$(this).val(1):$(this).val(0)})),$("input[name='checkout_favicon_type'").on("change",(function(){"1"==$(this).val()?$("#upload_favicon").addClass("low-opacity"):$("#upload_favicon").removeClass("low-opacity")})),$("#checkout_banner_enabled").on("change",(function(){$(this).is(":checked")?($("#banner_type").fadeIn("slow","swing"),$(".logo-div").addClass("has-banner"),$(".logo-preview-container").addClass("has-banner"),$(".menu-bar-mobile").hide("slow"),$(".purchase-menu-mobile").fadeIn("slow")):($("#banner_type").fadeOut("slow","swing"),$(".logo-div").removeClass("has-banner"),$(".logo-preview-container").removeClass("has-banner"),$(".menu-bar-mobile").show("slow"),$(".purchase-menu-mobile").fadeOut("slow"))})),$("#installments_limit").on("change",(function(){var t=parseInt($("#installments_limit option:selected").val()),e=parseInt($("#interest_free_installments option:selected").val()),n=parseInt($("#preselected_installment option:selected").val());$("#interest_free_installments option").remove(),$("#preselected_installment option").remove(),t<e&&(e=t);for(var i=1;i<t+1;i++)$("#interest_free_installments").append('<option \n                    value="'.concat(i,'" ').concat(i==e?"selected":"",">\n                    ").concat(i,"x \n                </option>"));t<n&&(n=t);for(i=1;i<t+1;i++)$("#preselected_installment").append('<option \n                    value="'.concat(i,'" ').concat(i==n?"selected":"",">\n                    ").concat(i,"x \n                </option>"))})),$("#selector-tooltip").on({mouseenter:function(){$("#selector-tooltip-container").fadeIn()},mouseleave:function(){$("#selector-tooltip-container").fadeOut()}}),$("#favicon-tooltip").on({mouseenter:function(){$("#favicon-tooltip-container").fadeIn()},mouseleave:function(){$("#favicon-tooltip-container").fadeOut()}}),$(".selectable-notification").on("change",(function(){var t=document.querySelector("#checkout_editor").querySelectorAll(".selectable-notification:checked");t.length>0&&t.length<4&&($("#selectable-all-notification").addClass("dash-check"),$("#selectable-all-notification").prop("checked",!0)),0==t.length&&($("#selectable-all-notification").prop("checked",!1),$("#selectable-all-notification").removeClass("dash-check")),4==t.length&&$("#selectable-all-notification").removeClass("dash-check")})),$("#selectable-all-notification").on("click",(function(){$(this).is(":checked")?$(".selectable-notification").prop("checked",!0):($(".selectable-notification").prop("checked",!1),$("#selectable-all-notification").removeClass("dash-check"))}))}));var inputElements=_toConsumableArray2(document.querySelectorAll("input.code-input"));inputElements.forEach((function(t,e){t.addEventListener("keydown",(function(t){8===t.keyCode&&""===t.target.value&&inputElements[Math.max(0,e-1)].focus()})),t.addEventListener("input",(function(t){var n=_toArray(t.target.value),i=n[0],o=n.slice(1);t.target.value=null!=i?i:"",e!==inputElements.length-1&&void 0!==i&&(inputElements[e+1].focus(),inputElements[e+1].value=o.join(""),inputElements[e+1].dispatchEvent(new Event("input")))}))})),$((function(){var t=$(window.location.pathname.split("/")).get(-1);$("#tab-checkout").on("click",(function(){!function(){loadOnAny(".checkout-container",!1,{styles:{container:{minHeight:"500px"}}});var i=["bold","italic","underline"],o=new Quill("#topbar_content",{modules:{toolbar:"#topbar_content_toolbar_container"},placeholder:"",theme:"snow",formats:i}),r=250;o.on("text-change",(function(){o.getLength()>r&&o.deleteText(r,o.getLength())})),o.on("selection-change",(function(t,e,n){null===t&&null!==e?$("#topbar_content").removeClass("focus-in"):null!==t&&null===e&&$("#topbar_content").addClass("focus-in")}));var a=new Quill("#post_purchase_message_content",{modules:{toolbar:"#post_purchase_message_content_toolbar_container"},theme:"snow",formats:i});function s(t){1==t.checkout_type_enum?($("#checkout_editor #checkout_type_steps").prop("checked",!0),$("#checkout_editor .visual-content-left").addClass("three-steps"),$("#checkout_editor .visual-content-left").removeClass("unique"),$("#checkout_editor .visual-content-mobile").addClass("three-steps"),$("#checkout_editor .visual-content-mobile").removeClass("unique"),$("#checkout_editor .steps-lines").slideDown("slow","swing"),$("#checkout_editor #finish_button_preview_desktop_visual").slideDown("slow","swing"),$("#checkout_editor #finish_button_preview_mobile_visual").slideDown("slow","swing")):($("#checkout_editor #checkout_type_unique").prop("checked",!0),$("#checkout_editor .visual-content-left").removeClass("three-steps"),$("#checkout_editor .visual-content-left").addClass("unique"),$("#checkout_editor .visual-content-mobile").removeClass("three-steps"),$("#checkout_editor .visual-content-mobile").addClass("unique"),$("#checkout_editor .steps-lines").slideUp("slow","swing"),$("#checkout_editor #finish_button_preview_desktop_visual").slideUp("slow","swing"),$("#checkout_editor #finish_button_preview_mobile_visual").slideUp("slow","swing")),1==t.checkout_logo_enabled?($("#checkout_editor #checkout_logo_enabled").prop("checked",!0),$("#checkout_editor #checkout_logo_enabled").prop("value",1),$(".logo-content").removeClass("low-opacity"),$("#checkout_editor .logo-preview-container").show()):($("#checkout_editor #checkout_logo_enabled").prop("checked",!1),$("#checkout_editor #checkout_logo_enabled").prop("value",0),$(".logo-content").addClass("low-opacity"),$("#checkout_editor .logo-preview-container").hide()),t.checkout_logo?($("#logo_preview_mobile").attr("src",t.checkout_logo),$("#logo_preview_desktop").attr("src",t.checkout_logo),$("#has_checkout_logo").val("true"),$("#logo_preview_mobile").fadeIn("slow"),$("#logo_preview_desktop").fadeIn("slow")):($("#logo_preview_mobile").fadeOut("slow"),$("#logo_preview_desktop").fadeOut("slow"));var e=$("#checkout_logo").dropify({messages:{default:"",replace:"",error:""},error:{fileSize:"O tamanho máximo do arquivo deve ser {{ value }}.",fileExtension:"A imagem deve ser algum dos formatos permitidos. ({{ value }}).",minWidth:"Sua imagem deve ter um largura minima de {{ value }}}px.",minHeight:"Sua imagem deve ter um altura minima de {{ value }}}px."},tpl:{message:'<div class="dropify-message"><span class="file-icon" /> <p>{{ default }}<span style="color: #2E85EC;">Clique ou arraste e solte aqui</span></p></div>',clearButton:'<button type="button" class="dropify-clear o-bin-1"></button>'},imgFileExtensions:["png","jpg","jpeg"],defaultFile:t.checkout_logo?t.checkout_logo:""});e.on("dropify.fileReady",(function(t,e){var n=t.target.files,i=function(t){$("#logo_preview_mobile").attr("src",t),$("#logo_preview_desktop").attr("src",t),$("#has_checkout_logo").val("true"),$("#logo_preview_mobile").fadeIn("slow"),$("#logo_preview_desktop").fadeIn("slow")};n&&n.length>0&&(s=n[0],URL?i(URL.createObjectURL(s)):FileReader&&((r=new FileReader).onload=function(t){i(r.result)},r.readAsDataURL(s)))})),e.on("dropify.errors",(function(t,e){$("#logo_preview_mobile").attr("src",""),$("#logo_preview_desktop").attr("src",""),$("#logo_preview_mobile").fadeOut("slow"),$("#logo_preview_desktop").fadeOut("slow"),$("#has_checkout_logo").val("false")})),e.on("dropify.afterClear",(function(t,e){$("#has_checkout_logo").val("false")})),1==t.checkout_favicon_enabled?($("#checkout_editor #checkout_favicon_enabled").prop("checked",!0),$("#checkout_editor #checkout_favicon_enabled").prop("value",1),$(".favicon-content").removeClass("low-opacity")):($("#checkout_editor #checkout_favicon_enabled").prop("checked",!1),$("#checkout_editor #checkout_favicon_enabled").prop("value",0),$(".favicon-content").addClass("low-opacity")),"1"==t.checkout_favicon_type?$("#favicon_logo").attr("checked",!0):($("#favicon_uploaded").attr("checked",!0),$("#upload_favicon").removeClass("low-opacity")),t.checkout_favicon?$("#has_checkout_favicon").val("true"):$("#has_checkout_favicon").val("false");var n=$("#checkout_favicon").dropify({messages:{default:"",replace:""},error:{fileSize:"",fileExtension:""},tpl:{message:'<div class="dropify-message"><span class="file-icon" /></div>'},imgFileExtensions:["png","jpg","jpeg","ico"],defaultFile:t.checkout_favicon?t.checkout_favicon:""});n.on("dropify.errors",(function(t,e){$("#checkout_favicon_error").fadeIn("slow","linear"),$("#has_checkout_favicon").val("false")})),n.on("dropify.fileReady",(function(t,e){$("#checkout_favicon_error").hide(),$("#has_checkout_favicon").val("true")})),t.checkout_banner&&($("#preview_banner_img_desktop").attr("src",t.checkout_banner),$("#preview_banner_img_mobile").attr("src",t.checkout_banner),$("#has_checkout_banner").val("true"));var i,r,s,l=$("#checkout_banner").dropify({messages:{default:"",replace:"",remove:"Remover",error:""},error:{fileSize:"O tamanho máximo do arquivo deve ser {{ value }}.",fileExtension:"A imagem deve ser algum dos formatos permitidos. ({{ value }})."},tpl:{message:'<div class="dropify-message"><span class="file-icon" /> <p>{{ default }}<span style="color: #2E85EC;">Faça upload do seu banner</span></p></div>',clearButton:'<button type="button" class="dropify-clear o-bin-1"></button>'},imgFileExtensions:["png","jpg","jpeg"],defaultFile:t.checkout_banner?t.checkout_banner:""}),c=$("#modal_banner"),u=document.getElementById("cropped_image");l.on("dropify.fileReady",(function(t,e){var n=t.target.files,i=function(t){u.src=t,c.modal("show")};n&&n.length>0&&(s=n[0],URL?i(URL.createObjectURL(s)):FileReader&&((r=new FileReader).onload=function(t){i(r.result)},r.readAsDataURL(s)))})),l.on("dropify.errors",(function(t,e){$("#preview_banner_img_mobile").attr("src",""),$("#preview_banner_img_desktop").attr("src",""),$("#has_checkout_banner").val("false"),$("#preview_banner_img_mobile").fadeOut("slow"),$("#preview_banner_img_desktop").fadeOut("slow")})),l.on("dropify.afterClear",(function(t,e){$("#has_checkout_banner").val("false")})),$(".dropify-clear").hide();var h,d=$("#dataZoom");switch(c.on("shown.bs.modal",(function(){i=new Cropper(u,{highlight:!1,movable:!1,viewMode:3,aspectRatio:1280/198,zoom:function(t){var e=Math.round(1e3*t.ratio)/10;d.text(e)}})})).on("hidden.bs.modal",(function(){i.destroy(),i=null})),$("#zoom-in").on("click",(function(){i.zoom(.1)})),$("#zoom-out").on("click",(function(){i.zoom(-.1)})),$("#zoom-slide").on("input change",(function(){h<$("#zoom-slide").val()?i.zoom(.1):i.zoom(-.1),h=$("#zoom-slide").val()})),$("#crop-reset").on("click",(function(){i.reset(),$("#zoom-slide").val(0)})),$(".img-profile input").on("click",(function(t){t.stopPropagation()})).on("change",(function(){var t=this.files[0],e=new FileReader;e.onload=function(t){var e=$(".img-profile").addClass("cropping").find("img").attr("src",t.target.result);i=new Cropper(e[0],{aspectRatio:1,minContainerWidth:150,minContainerHeight:150}),$("#btn-crop-cancel, #btn-crop").show()},e.readAsDataURL(t)})),$("#button-crop").on("click",(function(){if(i){var t=i.getCroppedCanvas().toDataURL("image/png",.7);$("#preview_banner_img_mobile").attr("src",t),$("#preview_banner_img_desktop").attr("src",t),$("#has_checkout_banner").val("true"),$("#preview_banner_img_mobile").fadeIn("slow"),$("#preview_banner_img_desktop").fadeIn("slow"),replacePreview("checkout_banner",t,"checkout_banner.jpg"),i.getCroppedCanvas().toBlob((function(t){var e=new DataTransfer,n=new File([t],"banner."+t.type.split("/")[1]);e.items.add(n),document.querySelector("#checkout_banner").files=e.files}),"image/jpeg",.8)}c.modal("hide")})),$("#button-cancel-crop").on("click",(function(){$("#checkout_banner").parent().find(".dropify-clear").trigger("click")})),t.checkout_banner_enabled?($("#checkout_editor #checkout_banner_enabled").prop("checked",!0),$("#checkout_editor #checkout_banner_enabled").prop("value",1),$("#checkout_editor .banner-top-content").show(),$("#checkout_editor .preview-banner").show(),$("#checkout_editor #banner_type").show(),$(".logo-div").addClass("has-banner"),$(".logo-preview-container").addClass("has-banner"),$(".menu-bar-mobile").hide("slow"),$(".purchase-menu-mobile").fadeIn("slow")):($("#checkout_editor #checkout_banner_enabled").prop("checked",!1),$("#checkout_editor #checkout_banner_enabled").prop("value",0),$("#checkout_editor .banner-top-content").hide(),$("#checkout_editor .preview-banner").hide(),$("#checkout_editor #banner_type").hide(),$(".logo-div").removeClass("has-banner"),$(".logo-preview-container").removeClass("has-banner"),$(".menu-bar-mobile").show("slow"),$(".purchase-menu-mobile").fadeOut("slow")),1===t.checkout_banner_type?($("#checkout_editor #banner_type_wide").prop("checked",!0),$(".preview-banner").removeClass("retangle-banner"),$(".logo-div.logo-menu-bar").removeClass("retangle-banner"),$(".preview-banner").addClass("wide-banner")):($("#checkout_editor #banner_type_square").prop("checked",!0),$(".preview-banner").addClass("retangle-banner"),$(".logo-div.logo-menu-bar").addClass("retangle-banner"),$(".preview-banner").removeClass("wide-banner")),t.countdown_enabled?($("#checkout_editor #countdown_enabled").prop("checked",!0),$("#checkout_editor #countdown_enabled").prop("value",1),$("#checkout_editor .countdown-content").show(),$("#checkout_editor .countdown-preview").show()):($("#checkout_editor #countdown_enabled").prop("checked",!1),$("#checkout_editor #countdown_enabled").prop("value",0),$("#checkout_editor .countdown-content").hide(),$("#checkout_editor .countdown-preview").hide()),$("#checkout_editor #countdown_time").val(t.countdown_time||15),$("#checkout_editor #countdown_finish_message").val(t.countdown_finish_message||"Seu tempo acabou! Você precisa finalizar sua compra agora para ganhar o desconto extra."),t.topbar_enabled?($("#checkout_editor #topbar_enabled").prop("checked",!0),$("#checkout_editor #topbar_enabled").prop("value",1),$("#checkout_editor .textbar-content").show(),$("#checkout_editor .textbar-preview").show()):($("#checkout_editor #topbar_enabled").prop("checked",!1),$("#checkout_editor #topbar_enabled").prop("value",0),$("#checkout_editor .textbar-content").hide(),$("#checkout_editor .textbar-preview").hide()),o.root.innerHTML=t.topbar_content||"<p>Aproveite o <b>desconto extra</b> ao comprar no <u>Cartão ou pelo PIX!</u> É por <b>tempo limitado</b>.</p>",t.notifications_enabled?($("#checkout_editor #notifications_enabled").prop("checked",!0),$("#checkout_editor #notifications_enabled").prop("value",1),$("#checkout_editor .sales-notifications-content").show()):($("#checkout_editor #notifications_enabled").prop("checked",!1),$("#checkout_editor #notifications_enabled").prop("value",0),$("#checkout_editor .sales-notifications-content").hide()),t.notifications_interval){case 15:default:$("#checkout_editor #notifications_interval_15").prop("checked",!0);break;case 30:$("#checkout_editor #notifications_interval_30").prop("checked",!0);break;case 45:$("#checkout_editor #notifications_interval_45").prop("checked",!0);break;case 60:$("#checkout_editor #notifications_interval_60").prop("checked",!0)}t.notification_buying_enabled?($("#checkout_editor #notification_buying_enabled").prop("checked",!0),$("#checkout_editor #notification_buying_enabled").prop("value",1)):($("#checkout_editor #notification_buying_enabled").prop("checked",!1),$("#checkout_editor #notification_buying_enabled").prop("value",0)),t.notification_bought_30_minutes_enabled?($("#checkout_editor #notification_bought_30_minutes_enabled").prop("checked",!0),$("#checkout_editor #notification_bought_30_minutes_enabled").prop("value",1)):($("#checkout_editor #notification_bought_30_minutes_enabled").prop("checked",!1),$("#checkout_editor #notification_bought_30_minutes_enabled").prop("value",0)),t.notification_bought_last_hour_enabled?($("#checkout_editor #notification_bought_last_hour_enabled").prop("checked",!0),$("#checkout_editor #notification_bought_last_hour_enabled").prop("value",1)):($("#checkout_editor #notification_bought_last_hour_enabled").prop("checked",!1),$("#checkout_editor #notification_bought_last_hour_enabled").prop("value",0)),t.notification_just_bought_enabled?($("#checkout_editor #notification_just_bought_enabled").prop("checked",!0),$("#checkout_editor #notification_just_bought_enabled").prop("value",1)):($("#checkout_editor #notification_just_bought_enabled").prop("checked",!1),$("#checkout_editor #notification_just_bought_enabled").prop("value",0)),t.notification_buying_enabled&&t.notification_bought_30_minutes_enabled&&t.notification_bought_last_hour_enabled&&t.notification_just_bought_enabled&&$("#checkout_editor #notification-table .selectable-all").prop("checked",!0),$("#checkout_editor #notification_buying_minimum").val(t.notification_buying_minimum||0),$("#checkout_editor #notification_bought_30_minutes_minimum").val(t.notification_bought_30_minutes_minimum||0),$("#checkout_editor #notification_bought_last_hour_minimum").val(t.notification_bought_last_hour_minimum||0),$("#checkout_editor #notification_just_bought_minimum").val(t.notification_just_bought_minimum||0);var f=document.querySelector("#checkout_editor").querySelectorAll(".selectable-notification:checked");f.length>0&&f.length<4&&($("#selectable-all-notification").addClass("dash-check"),$("#selectable-all-notification").prop("checked",!0)),0==f.length&&($("#selectable-all-notification").prop("checked",!1),$("#selectable-all-notification").removeClass("dash-check")),4==f.length&&($("#selectable-all-notification").removeClass("dash-check"),$("#selectable-all-notification").prop("checked",!0)),t.social_proof_enabled?($("#checkout_editor #social_proof_enabled").prop("checked",!0),$("#checkout_editor #social_proof_enabled").prop("value",1),$("#checkout_editor .social-proof-content").show()):($("#checkout_editor #social_proof_enabled").prop("checked",!1),$("#checkout_editor #social_proof_enabled").prop("value",0),$("#checkout_editor .social-proof-content").hide()),$("#checkout_editor #social_proof_message").val(t.social_proof_message||"Outras { num-visitantes } pessoas estão finalizando a compra neste momento."),$("#checkout_editor #social_proof_minimum").val(t.social_proof_minimum||0),$("#checkout_editor #invoice_description").val(t.invoice_description||"");var p,v=_createForOfIteratorHelper(t.companies);try{for(v.s();!(p=v.n()).done;){var m=p.value,y=(m.document.replace(/\D/g,"").length>11?"CNPJ: ":"CPF: ")+m.document;"pending"!=m.status&&$("#checkout_editor #companies").append('<option value="'.concat(m.id,'" ').concat(m.id===t.company_id?"selected":"",' data-toggle="tooltip" title="').concat(y,'" >\n                                                                ').concat(m.name,"\n                                                             </option>"))}}catch(t){v.e(t)}finally{v.f()}t.cpf_enabled?($("#checkout_editor #cpf_enabled").prop("checked",!0),$("#checkout_editor #cpf_enabled").prop("value",1)):($("#checkout_editor #cpf_enabled").prop("checked",!1),$("#checkout_editor #cpf_enabled").prop("value",0)),t.cnpj_enabled?($("#checkout_editor #cnpj_enabled").prop("checked",!0),$("#checkout_editor #cnpj_enabled").prop("value",1)):($("#checkout_editor #cnpj_enabled").prop("checked",!1),$("#checkout_editor #cnpj_enabled").prop("value",0)),t.bank_slip_enabled?($("#checkout_editor #bank_slip_enabled").prop("checked",!0),$("#checkout_editor #bank_slip_enabled").prop("value",1)):($("#checkout_editor #bank_slip_enabled").prop("checked",!1),$("#checkout_editor #bank_slip_enabled").prop("value",0)),t.pix_enabled&&($("#checkout_editor #pix_enabled").prop("checked",!0),$("#checkout_editor #pix_enabled").prop("value",1)),$("#checkout_editor #pix_enabled").prop("checked",!1),$("#checkout_editor #pix_enabled").prop("value",0),t.credit_card_enabled?($("#checkout_editor #credit_card_enabled").prop("checked",!0),$("#checkout_editor #credit_card_enabled").prop("value",1),$(".credit-card-container").show("slow","swing"),$(".accepted-payment-card-creditcard").slideDown("slow","swing")):($("#checkout_editor #credit_card_enabled").prop("checked",!1),$("#checkout_editor #credit_card_enabled").prop("value",0),$(".credit-card-container").hide("slow","swing"),$(".accepted-payment-card-creditcard").slideUp("slow","swing")),t.bank_slip_enabled?($("#checkout_editor #bank_slip_enabled").prop("checked",!0),$("#checkout_editor #bank_slip_enabled").prop("value",1),$(".bank-billet-container").show("slow","swing"),$(".accepted-payment-bank-billet").slideDown("slow","swing")):($("#checkout_editor #bank_slip_enabled").prop("checked",!1),$(".bank-billet-container").hide("slow","swing"),$(".accepted-payment-bank-billet").slideUp("slow","swing")),t.pix_enabled?($("#checkout_editor #pix_enabled").prop("checked",!0),$("#checkout_editor #pix_enabled").prop("value",1),$(".pix-container").show("slow","swing"),$(".accepted-payment-pix").slideDown("slow","swing")):($("#checkout_editor #pix_enabled").prop("checked",!1),$(".pix-container").hide("slow","swing"),$(".accepted-payment-pix").slideUp("slow","swing")),t.quantity_selector_enabled?($("#checkout_editor #count-selector-label").addClass("active"),$("#checkout_editor #quantity_selector_enabled").prop("checked",!0),$("#checkout_editor #quantity_selector_enabled").prop("value",1)):($("#checkout_editor #count-selector-label").removeClass("active"),$("#checkout_editor #quantity_selector_enabled").prop("checked",!1),$("#checkout_editor #quantity_selector_enabled").prop("value",0)),t.email_required?($("#checkout_editor #checkout-email-label").addClass("active"),$("#checkout_editor #email_required").prop("checked",!0),$("#checkout_editor #email_required").prop("value",1)):($("#checkout_editor #checkout-email-label").removeClass("active"),$("#checkout_editor #email_required").prop("checked",!1),$("#checkout_editor #email_required").prop("value",0)),$("#checkout_editor #bank_slip_due_days").val(t.bank_slip_due_days||1),$("#checkout_editor #installments_limit").val(t.installments_limit||1).change(),$("#checkout_editor #interest_free_installments").val(t.interest_free_installments||1).change(),$("#checkout_editor #preselected_installment").val(t.preselected_installment||1).change(),$("#checkout_editor #automatic_discount_credit_card").val(t.automatic_discount_credit_card||0),$("#checkout_editor #automatic_discount_bank_slip").val(t.automatic_discount_bank_slip||0),$("#checkout_editor #automatic_discount_pix").val(t.automatic_discount_pix||0),t.post_purchase_message_enabled?($("#checkout_editor #post_purchase_message_enabled").prop("checked",!0),$("#checkout_editor #post_purchase_message_enabled").prop("value",1),$(".thanks-page-content").show("slow","swing"),$(".shop-message-preview").slideDown("slow","swing")):($("#checkout_editor #post_purchase_message_enabled").prop("checked",!1),$("#checkout_editor #post_purchase_message_enabled").prop("value",0),$(".thanks-page-content").hide("slow","swing"),$(".shop-message-preview").slideUp("slow","swing")),$("#checkout_editor #post_purchase_message_title").val(t.post_purchase_message_title||"Obrigado por comprar conosco!"),$(".shop-message-preview-title").empty(),$(".shop-message-preview-title").append(t.post_purchase_message_title||"Obrigado por comprar conosco!"),a.root.innerHTML=t.post_purchase_message_content||"<p>Aproveite o <b>desconto extra</b> ao comprar no <u>Cartão ou pelo PIX!</u> É por <b>tempo limitado</b>.</p>",$(".shop-message-preview-content").empty(),$(".shop-message-preview-content").append(t.post_purchase_message_content),1==t.whatsapp_enabled?($("#checkout_editor #whatsapp_enabled").prop("checked",!0),$("#checkout_editor #whatsapp_enabled").prop("value",1),$(".whatsapp-content").show("slow","swing"),$(".whatsapp-preview").slideDown("slow","swing")):($("#checkout_editor #whatsapp_enabled").prop("checked",!1),$("#checkout_editor #whatsapp_enabled").prop("value",0),$(".whatsapp-content").hide("slow","swing"),$(".whatsapp-preview").slideUp("slow","swing")),$("#checkout_editor #support_phone").val(t.support_phone||""),1==t.support_phone_verified?($("#verify_phone_open").hide(),$("#verified_phone_open").show(),$("#remove_phone").show()):($("#verify_phone_open").show(),$("#verified_phone_open").hide(),$("#remove_phone").hide()),0!=t.theme_enum&&t.theme_enum?($("#checkout_editor #theme_ready_enabled").prop("checked",!1),$("#checkout_editor #theme_ready_enabled").prop("value",0),$("input[name=theme_enum][value="+t.theme_enum+"]").attr("checked",!0),$(":root").css("--primary-color",t.color_primary),$(":root").css("--secondary-color",t.color_secondary),$(":root").css("--finish-button-color",t.color_buy_button),$(".custom-theme-content").hide("slow","swing"),$(".theme-ready-first-line").removeClass("low-opacity"),$(".theme-ready-second-line").show("slow","swing")):($(":root").css("--primary-color",t.color_primary),$(":root").css("--secondary-color",t.color_secondary),$(":root").css("--finish-button-color",t.color_buy_button),$("#color_primary").val(t.color_primary),$("#color_secondary").val(t.color_secondary),$("#color_buy_button").val(t.color_buy_button),$("#checkout_editor #theme_ready_enabled").prop("checked",!0),$("#checkout_editor #theme_ready_enabled").prop("value",1),$(".custom-theme-content").show("slow","swing"),$(".theme-ready-first-line").addClass("low-opacity"),$(".theme-ready-second-line").hide("slow","swing")),$("#checkout_editor_id").val(t.id),$("#upload_favicon .dropify-error").css("display","none"),$(".dropify-clear").hide()}function l(t){var e,i,r=!1;if("1"==t.get("countdown_enabled")){if(""==t.get("countdown_time")||null==t.get("countdown_time"))return $("#countdown_time").addClass("error-input"),$("#countdown_time_error").show("slow","linear"),n("countdown_time"),!1;if(r=!0,""==t.get("countdown_finish_message")||null==t.get("countdown_finish_message"))return $("#countdown_finish_message").addClass("error-input"),$("#countdown_finish_message_error").show("slow","linear"),n("countdown_finish_message"),!1;r=!0}if("1"==t.get("topbar_enabled")){if(!(o.getText().trim().length>0))return $("#topbar_content").addClass("error-input"),n("topbar_content"),$("#topbar_content_error").show("slow","linear"),!1;r=!0}if("1"==t.get("notifications_enabled")){if(""==t.get("notification_buying_minimum"))return $("#notification_buying_minimum").addClass("error-input"),$("#notification_buying_minimum_error").show("slow","linear"),n("notification_buying_minimum"),$("#notification_error").show("slow","linear"),!1;if(r=!0,""==t.get("notification_bought_30_minutes_minimum"))return $("#notification_bought_30_minutes_minimum").addClass("error-input"),$("#notification_error").show("slow","linear"),n("notification_bought_30_minutes_minimum"),!1;if(r=!0,""==t.get("notification_bought_last_hour_minimum"))return $("#notification_bought_last_hour_minimum").addClass("error-input"),$("#notification_error").show("slow","linear"),n("notification_bought_last_hour_minimum"),!1;if(r=!0,""==t.get("notification_just_bought_minimum"))return $("#notification_just_bought_minimum").addClass("error-input"),$("#notification_error").show("slow","linear"),n("notification_just_bought_minimum"),!1;r=!0}if("1"==t.get("social_proof_enabled")){if(""==t.get("social_proof_message")||null==t.get("social_proof_message"))return $("#social_proof_message").addClass("error-input"),$("#social_proof_message_error").show("slow","linear"),n("social_proof_message"),!1;if(r=!0,""==t.get("social_proof_minimum")||null==t.get("social_proof_minimum"))return $("#social_proof_minimum").addClass("error-input"),$("#social_proof_minimum_error").show("slow","linear"),n("social_proof_minimum"),!1;r=!0}if(""==t.get("company_id")||null==t.get("company_id"))return $("#company_billing_error").show("slow","linear"),n("companies"),!1;if(r=!0,""==t.get("bank_slip_due_days")||null==t.get("bank_slip_due_days"))return $("#bank_slip_due_days").addClass("error-input"),$("#bank_slip_due_days_error").show("slow","linear"),n("bank_slip_due_days"),!1;if(r=!0,"1"==t.get("post_purchase_message_enabled")){if(""==t.get("post_purchase_message_title")||null==t.get("post_purchase_message_title"))return $("#post_purchase_message_title").addClass("error-input"),$("#post_purchase_message_title_error").show("slow","linear"),n("post_purchase_message_title"),!1;if(r=!0,!(a.getText().trim().length>0))return $("#post_purchase_message_content").addClass("error-input"),$("#post_purchase_message_content_error").show("slow","linear"),n("post_purchase_message_content"),!1;r=!0}if("1"==t.get("checkout_logo_enabled")){if("true"!=$("#has_checkout_logo").val())return n("upload_logo"),$("#checkout_logo_error").show("slow","linear"),!1;r=!0}if("1"==t.get("checkout_favicon_enabled"))if("1"==t.get("checkout_favicon_type"))r=!0;else{if("true"!=$("#has_checkout_favicon").val())return n("upload_logo"),$("#checkout_favicon_error").fadeIn("slow","linear"),!1;r=!0}if("1"==t.get("checkout_banner_enabled")){if("true"!=$("#has_checkout_banner").val())return n("banner_type"),$("#checkout_banner_error").show("slow","linear"),!1;r=!0}if("1"==t.get("whatsapp_enabled"))if(""==$("#support_phone").val())r=!0;else{if(e=/^\([1-9]{2}\)\s(?:[2-8]|9[1-9])[0-9]{3}\-[0-9]{4}$/,i=$("#support_phone").val(),!e.test(i))return $("#support_phone").addClass("error-input"),$("#support_phone_error").show("slow","linear"),n("support_phone"),!1;r=!0}return r}a.on("text-change",(function(){a.getLength()<r?($(".shop-message-preview-content").empty(),$(".shop-message-preview-content").append($(a.root.innerHTML)),$("#save_changes").fadeIn("slow","swing")):a.deleteText(r,a.getLength())})),a.on("selection-change",(function(t,e,n){null===t&&null!==e?$("#post_purchase_message_content").removeClass("focus-in"):null!==t&&null===e&&$("#post_purchase_message_content").addClass("focus-in")})),$.ajax({method:"GET",url:"/api/checkouteditor/"+t,dataType:"json",headers:{Authorization:$('meta[name="access-token"]').attr("content"),Accept:"application/json"},success:function(t){(e=t.data)&&(s(e),$("#checkout_editor").on("input",(function(){$("#save_changes").fadeIn("slow","swing")})),$(".sirius-select").on("change",(function(){$("#save_changes").fadeIn("slow","swing")}))),$(document).on("submit","#checkout_editor",(function(t){t.preventDefault(),$(".error-input").removeClass("error-input"),$(".checkout-error").hide(),$("#save_load").fadeIn("slow","linear"),$("#save_changes").fadeOut("slow","linear"),$(".select-type").addClass("low-opacity"),$(".visual").addClass("low-opacity"),$(".payment").addClass("low-opacity"),$(".post-purchase-pages").addClass("low-opacity"),$(".preview").addClass("low-opacity");var n=document.getElementById("checkout_editor"),i=new FormData(n);if(0===o.getText().trim().length?i.append("topbar_content",""):i.append("topbar_content",$("#topbar_content").children().html()),0===a.getText().trim().length?i.append("post_purchase_message_content",""):i.append("post_purchase_message_content",$("#post_purchase_message_content").children().html()),i.get("automatic_discount_credit_card")||($("#automatic_discount_credit_card").val(0),i.append("automatic_discount_credit_card",0)),i.get("automatic_discount_bank_slip")||($("#automatic_discount_bank_slip").val(0),i.append("automatic_discount_bank_slip",0)),i.get("automatic_discount_pix")||($("#automatic_discount_pix").val(0),i.append("automatic_discount_pix",0)),$("#theme_ready_enabled").is(":checked"))i.set("theme_enum",0);else{var r=$('label[for="'+$("input[name=theme_enum]:checked").attr("id")+'"]').children(".theme-primary-color").attr("data-color"),s=$('label[for="'+$("input[name=theme_enum]:checked").attr("id")+'"]').children(".theme-secondary-color").attr("data-color");i.append("color_primary",r),i.append("color_secondary",s),i.append("color_buy_button",r)}$("#default_finish_color").is(":checked")&&i.append("color_buy_button","#23d07d"),$("#checkout_editor input[type=checkbox]:not(:checked)").map((function(){i.append($(this).attr("name"),$(this).is(":checked")?1:0)})),l(i)?$.ajax({method:"POST",url:"/api/checkouteditor/"+e.id,processData:!1,cache:!1,contentType:!1,dataType:"json",headers:{Authorization:$('meta[name="access-token"]').attr("content"),Accept:"application/json"},data:i,success:function(){$(".select-type").removeClass("low-opacity"),$(".visual").removeClass("low-opacity"),$(".payment").removeClass("low-opacity"),$(".post-purchase-pages").removeClass("low-opacity"),$(".preview").removeClass("low-opacity"),$("#save_load").fadeOut("slow","linear"),$("#save_success").fadeIn("slow","linear"),setTimeout((function(){$("#save_success").fadeOut("slow","linear")}),4e3)},error:function(t){console.log(t.responseText),$(".select-type").removeClass("low-opacity"),$(".visual").removeClass("low-opacity"),$(".payment").removeClass("low-opacity"),$(".post-purchase-pages").removeClass("low-opacity"),$(".preview").removeClass("low-opacity"),$("#save_load").fadeOut("slow","linear"),$("#save_error").fadeIn("slow","linear"),setTimeout((function(){$("#save_error").fadeOut("slow","linear")}),4e3)}}):($(".select-type").removeClass("low-opacity"),$(".visual").removeClass("low-opacity"),$(".payment").removeClass("low-opacity"),$(".post-purchase-pages").removeClass("low-opacity"),$(".preview").removeClass("low-opacity"),$("#save_load").fadeOut("slow","linear"),$("#save_empty_fields").fadeIn("slow","linear"),setTimeout((function(){$("#save_empty_fields").fadeOut("slow","linear")}),4e3))})),setTimeout((function(){$("#save_changes").hide()}),0),loadOnAny(".checkout-container",!0)},error:function(t){errorAjaxResponse(t),$("#checkout_editor").addClass("low-opacity"),$("#checkout_logo").dropify({messages:{default:"",replace:"",error:""},error:{fileSize:"O tamanho máximo do arquivo deve ser {{ value }}.",fileExtension:"A imagem deve ser algum dos formatos permitidos. ({{ value }}).",minWidth:"Imagem muito pequena. Sua imagem deve ter um largura minima de {{ value }}}px.",minHeight:"Imagem muito pequena. Sua imagem deve ter um altura minima de {{ value }}}px."},tpl:{message:'<div class="dropify-message"><span class="file-icon" /> <p>{{ default }}<span style="color: #2E85EC;">Clique ou arraste e solte aqui</span></p></div>',clearButton:'<button type="button" class="dropify-clear o-bin-1"></button>'},imgFileExtensions:["png","jpg","jpeg"]}),$("#checkout_favicon").dropify({messages:{default:"",replace:""},error:{fileSize:"",fileExtension:""},tpl:{message:'<div class="dropify-message"><span class="file-icon" /></div>'},imgFileExtensions:["png","jpg","jpeg","ico"]}),$("#checkout_banner").dropify({messages:{default:"",replace:"",remove:"Remover",error:""},error:{fileSize:"O tamanho máximo do arquivo deve ser {{ value }}.",fileExtension:"A imagem deve ser algum dos formatos permitidos. ({{ value }})."},tpl:{message:'<div class="dropify-message"><span class="file-icon" /> <p>{{ default }}<span style="color: #2E85EC;">Faça upload do seu banner</span></p></div>',clearButton:'<button type="button" class="dropify-clear o-bin-1"></button>'},imgFileExtensions:["png","jpg","jpeg"]}),loadOnAny(".checkout-container",!0)}}),$("#cancel_button").on("click",(function(){s(e),$("#save_changes").fadeOut("slow","swing")}))}()}));var e=null;function n(t){$([document.documentElement,document.body]).animate({scrollTop:$("#".concat(t)).position().top-200},2e3)}})),$((function(){$("body,html").scroll((function(){if($("#tab-checkout").hasClass("active")){var t=$(this).scrollTop(),e=$("#checkout_type").position().top,n=$("#payment_container").position().top-200,i=$("#post_purchase").position().top-350;if(t>e){var o=t-e;$("#preview_div").css("margin-top",o+10)}else $("#preview_div").css("margin-top",0);t<n?($("#preview_payment").fadeOut("slow","swing"),$("#preview_post_purchase").fadeOut("slow","swing"),$("#preview_visual").fadeIn("slow","swing")):t>n&&t<i?($("#preview_visual").fadeOut("slow","swing"),$("#preview_post_purchase").fadeOut("slow","swing"),$("#preview_payment").fadeIn("slow","swing")):t>i&&($("#preview_visual").fadeOut("slow","swing"),$("#preview_payment").fadeOut("slow","swing"),$("#preview_post_purchase").fadeIn("slow","swing"))}}))}));
>>>>>>> f9230cf0d04dc02493690c56f31fb0b34e1091a4
